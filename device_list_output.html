<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">





<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="refresh" content="60" />
<title>PUSH WEB DEMO</title>
<link href="css/css.css" rel="stylesheet" type="text/css" />
<link href="css/menu.css" rel="stylesheet" media="screen" type="text/css" />
<script type="text/javascript" src="js/jquery-1.7.2.js"></script>
<script src="js/zkadmin.js" type="text/javascript"></script>
<script src="js/jquery.min.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="css/fbmodal.css" />
<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="js/jquery.fbmodel.js"></script>
<script type="text/javascript">
var pushDialog = {
    okaybutton: true,
  cancelbutton: true,
  		 okay: 'OK',
  	   cancel: 'Cancel',
       buttons: true,
       opacity: 0.35,
    fadeout: true,
  overlayclose: true,
      modaltop: "25%",
    modalwidth: "400",
};
</script>

<script type="text/javascript">

var queryAttLogDialogHtml='<div class="win_box">'
	+'<h2>Query Attlogs (DATA QUERY ATTLOG CMD)</h2><hr />'
	+'Start Time：<br/> Time Fmt (yyyy-MM-dd HH:mm:ss), e.g.: 2015-08-19 12:12:12' +
	'<input id="queryStart" type="text"/>'
	+'<br/><br/>'
	+'End Time：<br/> Time Fmt (yyyy-MM-dd HH:mm:ss), e.g.: 2015-08-19 12:12:12' +
	'<input id="queryEnd" type="text">'
	+'<br /><br/></div>';
	
var querySyncTimeZoneDialogHtml='<div class="win_box">'
	+'<h2>Sync TimeZone to device</h2><hr />'
	+'Time Zone' +
	'<select class="Ent" name="timeZone" id="timeZone" style="width:100%;">' +
	 '<option value ="0" selected="selected">--</option>' +
	' '+
		 '<option value ="-1200">(UTC-12)International Date Change Line West/-1200</option>' +
	 ''+
		 '<option value ="-1100">(UTC-11)Coordinated Universal Time-11/-1100</option>' +
	 ''+
		 '<option value ="-1000">(UTC-10)Hawaii/-1000</option>' +
	 ''+
		 '<option value ="-0900">(UTC-9)Alaska/-0900</option>' +
	 ''+
		 '<option value ="-0800">(UTC-8)Pacific time (American and Canada)  Baja California/-0800</option>' +
	 ''+
		 '<option value ="-0700">(UTC-7)La Paz, Massa Rand, The mountain time (American and Canada), Arizona/-0700</option>' +
	 ''+
		 '<option value ="-0600">(UTC-6)Saskatchewan, Central time, Central America/-0600</option>' +
	 ''+
		 '<option value ="-0500">(UTC-5)Bogota, Lima, Quito, Leo Branco, Eastern time, Indiana(East)/-0500</option>' +
	 ''+
		 '<option value ="-0400">(UTC-4)Atlantic time, Cuiaba, Georgetown, La Paz, Santiago/-0400</option>' +
	 ''+
		 '<option value ="-0300">(UTC-3)Brasilia, Buenos Aires, Greenland, Cayenne/-0300</option>' +
	 ''+
		 '<option value ="-0200">(UTC-2)The International Date Line West-02/-0200</option>' +
	 ''+
		 '<option value ="-0100">(UTC-1)Cape Verde Islands, Azores/-0100</option>' +
	 ''+
		 '<option value ="-0000">(UTC)Dublin, Edinburgh, Lisbon, London, The International Date Line West/+0000</option>' +
	 ''+
		 '<option value ="+0100">(UTC+1)Amsterdam, Brussels, Sarajevo/+0100</option>' +
	 ''+
		 '<option value ="+0200">(UTC+2)Beirut, Damascus, Eastern Europe, Cairo,Athens, Jerusalem/+0200</option>' +
	 ''+
		 '<option value ="+0300">(UTC+3)Baghdad, Kuwait, Moscow, St Petersburg,Nairobi/+0300</option>' +
	 ''+
		 '<option value ="+0330">(UTC+3:30)Teheran or Tehran/+0330</option>' +
	 ''+
		 '<option value ="+0400">(UTC+4)Abu Zabi, Yerevan, Baku, Port Louis, Samarra/+0400</option>' +
	 ''+
		 '<option value ="+0430">(UTC+4:30)Kabul/+0400</option>' +
	 ''+
		 '<option value ="+0500">(UTC+5)Ashkhabad, Islamabad, Karachi/+0500</option>' +
	 ''+
		 '<option value ="+0530">(UTC+5:30)Chennai, Calcutta Mumbai, New Delhi/+0530</option>' +
	 ''+
		 '<option value ="+0545">(UTC+5:45)Katmandu/+0545</option>' +
	 ''+
		 '<option value ="+0600">(UTC+6)Astana, Dhaka, Novosibirsk/+0600</option>' +
	 ''+
		 '<option value ="+0630">(UTC+6:30)Yangon/+0630</option>' +
	 ''+
		 '<option value ="+0700">(UTC+7)Bangkok, Hanoi, Jakarta/+0700</option>' +
	 ''+
		 '<option value ="+0800">(UTC+8)Beijing, Chinese Taipei, Irkutsk, Ulan Bator/+0800</option>' +
	 ''+
		 '<option value ="+0900">(UTC+9)Osaka, Tokyo, Seoul, Yakutsk/+0900</option>' +
	 ''+
		 '<option value ="+0930">(UTC+9:30)Adelaide, Darwin/+0930</option>' +
	 ''+
		 '<option value ="+1000">(UTC+10)Brisbane, Vladivostok, Guam, Canberra/+1000</option>' +
	 ''+
		 '<option value ="+1100">(UTC+11)Jo Kul Dah, Solomon Islands, New Caledonia/+1100</option>' +
	 ''+
		 '<option value ="+1200">(UTC+12)Anadyr, Oakland, Wellington, Fiji/+1200</option>' +
	 ''+
		 '<option value ="+1300">(UTC+13)Nukualofa, The Samoa Islands/+1300</option>' +
	 ''+
		 '<option value ="+1400">(UTC+14)Christmas Island/+1400</option>' +
	 '' +
	'</select>' +

	'<br/><br/>'+
	'<br/><br/></div>';
	
function procQueryAttLog(v)
{
	if (1 == v) {
		var temp = "";
		var url= "";
		$("input:checkbox[name=sn]:checked").each(function(i){
		
			temp += ($(this).val()+",");
		});
		temp=temp.substring(0,temp.length-1);
		
		var startTime = $(".content>.win_box>#queryStart").val();
		var endTime = $(".content>.win_box>#queryEnd").val();
		if (null == startTime || "" == startTime) {
			alert('Pls enter start time');
			window.location.reload();
			return;
		}
		if (null == endTime || "" == endTime) {
			alert('Pls enter end time');
			window.location.reload();
			return;
		}
		url = "deviceAction!queryAttLog.action?sn="+temp + "&startTime=" + startTime + "&endTime=" + endTime;
		dealData(url);
	} 
	window.location.reload();
}

function procSyncingTimeZone(v)
{
	if (1 == v) {
		var timeZone = $('.Ent option:selected').text();
		 //= $('#timeZone').val();
		
		var temp = "";
		var url= "";
		$("input:checkbox[name=sn]:checked").each(function(i){
		
			temp += ($(this).val()+",");
		});
		temp=temp.substring(0,temp.length-1);

		url1 = "deviceAction!updateTimeZone.action?sn="+temp+"&timeZone="+timeZone;
		dealData(url1);
	} 
	window.location.reload();
}

var queryAttPhotoDialogHtml='<div class="win_box">'
	+'<h2>Query Att Pic (DATA QUERY ATTPHOTO CMD)</h2><hr />'
	+'Start Time：<br/> Time Fmt (yyyy-MM-dd HH:mm:ss), e.g.: 2015-08-19 12:12:12' +
	'<input id="queryStart" type="text"/>'
	+'<br/><br/>'
	+'End Time：<br/> Time Fmt (yyyy-MM-dd HH:mm:ss), e.g.: 2015-08-19 12:12:12' +
	'<input id="queryEnd" type="text">'
	+'<br /><br/></div>';


function procQueryAttPhoto(v)
{
	if (1 == v) {
		var temp = "";
		var url= "";
		$("input:checkbox[name=sn]:checked").each(function(i){
		
			temp += ($(this).val()+",");
		});
		temp=temp.substring(0,temp.length-1);
		
		var startTime = $(".content>.win_box>#queryStart").val();
		var endTime = $(".content>.win_box>#queryEnd").val();
		if (null == startTime || "" == startTime) {
			alert('Pls enter start time');
			window.location.reload();
			return;
		}
		if (null == endTime || "" == endTime) {
			alert('Pls enter end time');
			window.location.reload();
			return;
		}
		url = "deviceAction!queryAttPhoto.action?sn="+temp + "&startTime=" + startTime + "&endTime=" + endTime;
		dealData(url);
	} 
	window.location.reload();
}
	
var toNewDeviceDialogHtml='<div class="win_box">'
	+'<h2>Backup data to other Devs (DATA UPDATE CMD,including User/FP/Face/Palm/User Pic)</h2><hr />'
	+'<table border="0" cellpadding="0" cellspacing="0" class="push_tab1">'
	+'<th align="center">SN</th>'
	+''
	+'<tr><td>'
	+'<input name="devSn" type="checkbox" value="TDBD254600293">TDBD254600293</input>'
	+'</td></tr>'
	+'</table></div>';	

function procToNewDevice(v) {
	if (1 == v) {
		var temp = "";
		var url= "";
		$("input:checkbox[name=sn]:checked").each(function(i){
			temp += ($(this).val()+",");
		});
		temp=temp.substring(0,temp.length-1);
		
		var obj=document.getElementsByName("devSn");
		//alert(obj.length);
		var destSn='';  
		for(var i=0; i<obj.length; i++){  
		  if(obj[i].checked) destSn+=obj[i].value+',';
		}  
		if (destSn.length > 0) {
			destSn = destSn.substring(0, destSn.length - 1);
			url = "deviceAction!toNewDevice.action?sn="+temp + "&destSn=" + destSn;
			//alert(url);
			dealData(url);
		}
		else {
			alert('Pls select dev');
		}
		
	} 
	window.location.reload();	
}

var queryUserDialogHtml='<div class="win_box">'
	+'<h2>Query User Info (DATA QUERY USERINFO CMD)</h2><hr />'
	+'Pls enter Admission/Staff No.<br/><br/>' 
	+'<input id="userPin" type="text"/>'
	+'<br/><br/>'
	+'</div>';


function procQueryUserInfo(v) {
	if (1 == v) {
		var temp = "";
		var url= "";
		$("input:checkbox[name=sn]:checked").each(function(i){
		
			temp += ($(this).val()+",");
		});
		temp=temp.substring(0,temp.length-1);
		
		var userPin = $(".content>.win_box>#userPin").val();
		if ("" == userPin) {
	    	alert('Pls enter Admission/Staff No.');
	    } else {
	    	url = "deviceAction!queryUserInfo.action?sn="+temp + "&userPin=" + userPin;
			dealData(url);
	    }
	}
	window.location.reload();
}


	
var queryFingerTmpDialogHtml='<div class="win_box">'
	+'<h2>Query FP Tmp (DATA QUERY FINGERTMP CMD)</h2><hr />'
	+'Admission/Staff No.：<br/>' +
	'<input id="userPin" type="text"/>'
	+'<br/><br/>'
	+'FP ID (0-9)：<br/> ' +
	'<input id="fingerId" type="text">'
	+'<br /><br/></div>';

function procQueryFingerTmp(v) {
	if (1 == v) {
		var temp = "";
		var url= "";
		$("input:checkbox[name=sn]:checked").each(function(i){
		
			temp += ($(this).val()+",");
		});
		temp=temp.substring(0,temp.length-1);
		
		var userPin = $(".content>.win_box>#userPin").val();
		var fingerId = $(".content>.win_box>#fingerId").val();
		if ("" == userPin) {
	    	alert('Pls enter Admission/Staff No.');
	    } else {
	    	url = "deviceAction!queryFingerTmp.action?sn="+temp + "&userPin=" + userPin + "&fingerId=" + fingerId;
			dealData(url);
	    }
	}
	window.location.reload();
}

var verifyLogDialogHtml='<div class="win_box">'
	+'<h2>Auto Attlogs Verification (VERIFY SUM ATTLOG CMD)</h2><hr />'
	+'Start Time：<br/> Time Fmt (yyyy-MM-dd HH:mm:ss), e.g.: 2015-08-19 12:12:12' +
	'<input id="queryStart" type="text"/>'
	+'<br/><br/>'
	+'End Time：<br/> Time Fmt (yyyy-MM-dd HH:mm:ss), e.g.: 2015-08-19 12:12:12' +
	'<input id="queryEnd" type="text">'
	+'<br /><br/></div>';

	
function procVerifyLog(v)
{
	if (1 == v) {
		var temp = "";
		var url= "";
		$("input:checkbox[name=sn]:checked").each(function(i){
		
			temp += ($(this).val()+",");
		});
		temp=temp.substring(0,temp.length-1);
		
		var startTime = $(".content>.win_box>#queryStart").val();
		var endTime = $(".content>.win_box>#queryEnd").val();
		if (null == startTime || "" == startTime) {
			alert('Pls enter start time');
			window.location.reload();
			return;
		}
		if (null == endTime || "" == endTime) {
			alert('Pls enter end time');
			window.location.reload();
			return;
		}
		url = "deviceAction!verifyLog.action?sn="+temp + "&startTime=" + startTime + "&endTime=" + endTime;
		dealData(url);
	} 
	window.location.reload();
}


var getFileDialogHtml='<div class="win_box">'
	+'<h2>Get the file inside the client side (GetFile CMD)</h2><hr />'
	+'Pls enter the name of file you need to obtain<br/><br/>' 
	+'<input id="fileName" type="text"/>'
	+'<br/><br/>'
	+'</div>';


function procGetFile(v) {
	if (1 == v) {
		var temp = "";
		var url= "";
		$("input:checkbox[name=sn]:checked").each(function(i){
		
			temp += ($(this).val()+",");
		});
		temp=temp.substring(0,temp.length-1);
		
		var fileName = $(".content>.win_box>#fileName").val();
		if ("" == fileName) {
	    	alert('Pls enter the name of file you need to obtain');
	    } else {
	    	url = "deviceAction!getFile.action?sn="+temp + "&file=" + fileName;
			dealData(url);
	    }
	}
	window.location.reload();
}


function procQueryFingerTmp(v) {
	if (1 == v) {
		var temp = "";
		var url= "";
		$("input:checkbox[name=sn]:checked").each(function(i){
		
			temp += ($(this).val()+",");
		});
		temp=temp.substring(0,temp.length-1);
		
		var userPin = $(".content>.win_box>#userPin").val();
		var fingerId = $(".content>.win_box>#fingerId").val();
		if ("" == userPin) {
	    	alert('Pls enter Admission/Staff No.');
	    } else {
	    	url = "deviceAction!queryFingerTmp.action?sn="+temp + "&userPin=" + userPin + "&fingerId=" + fingerId;
			dealData(url);
	    }
	}
	window.location.reload();
}

var putFileDialogHtml='<div class="win_box">'
	+'<h2>Send file to the client side (PutFile CMD)</h2><hr />'
	+'Src File Path：<br/> Relative Path: file/fw/X938/ssruser.datsrc;\nAbsolute Path: http://server/temp/ssruser.dat<br/>' +
	'<input id="srcFile" type="text"/>'
	+'<br/><br/>'
	+'Object File Path：<br/> ' +
	'<input id="destFile" type="text">'
	+'<br /><br/></div>';

	
function procPutFile(v)
{
	if (1 == v) {
		var temp = "";
		var url= "";
		$("input:checkbox[name=sn]:checked").each(function(i){
		
			temp += ($(this).val()+",");
		});
		temp=temp.substring(0,temp.length-1);
		
		var srcFile = $(".content>.win_box>#srcFile").val();
		var destFile = $(".content>.win_box>#destFile").val();
		if (null == srcFile || "" == srcFile) {
			alert('Pls enter src file info');
			window.location.reload();
			return;
		}
		if (null == destFile || "" == destFile) {
			alert('Pls enter object file info');
			window.location.reload();
			return;
		}
		url = "deviceAction!putFile.action?sn="+temp + "&srcFile=" + srcFile + "&destFile=" + destFile;
		dealData(url);
	} 
	window.location.reload();
}


var setOptionDialogHtml='<div class="win_box">'
	+'<h2>Set Client Side Opt (SET OPTION CMD)</h2><hr />'
	+'Pls Enter Opt. Fmt: key=value, e.g.IP Address=192.168.18.212<br/><br/>' 
	+'<input id="option" type="text"/>'
	+'<br/><br/>'
	+'</div>';


function procSetOption(v) {
	if (1 == v) {
		var temp = "";
		var url= "";
		$("input:checkbox[name=sn]:checked").each(function(i){
		
			temp += ($(this).val()+",");
		});
		temp=temp.substring(0,temp.length-1);
		
		var option = $(".content>.win_box>#option").val();
		if ("" == option) {
	    	alert('Pls Enter Opt. Fmt: key=value, e.g.IP Address=192.168.18.212');
	    } else {
	    	url = "deviceAction!setOption.action?sn="+temp + "&option=" + option;
			dealData(url);
	    }
	}
	window.location.reload();
}

var enrollFPDialogHtml='<div class="win_box">'
	+'<h2>Enroll User FP (ENROLL_FP CMD)</h2><hr />'
	+'Admission/Staff No.<br/>' 
	+'<input id="userPin" type="text"/> <br/><br/>'
	+'FP ID (0-9)<br/>'
	+'<input id="fingerId" type="text"/> <br/><br/>'
	+'Retry Times<br/>'
	+'<input id="retryTimes" type="text"/> <br/><br/>'
	+'<input id="isCover" type="checkbox">Cover?</input>'
	+'<br/><br/>'
	+'</div>';


function procEnrollFPc(v) {
	if (1 == v) {
		var temp = "";
		var url= "";
		$("input:checkbox[name=sn]:checked").each(function(i){
		
			temp += ($(this).val()+",");
		});
		temp=temp.substring(0,temp.length-1);
		
		var userPin = $(".content>.win_box>#userPin").val();
		var fingerId = $(".content>.win_box>#fingerId").val();
		var retryTimes = $(".content>.win_box>#retryTimes").val();
		var isCover = 0;
		if ($(".content>.win_box>#isCover").attr("checked") != undefined) {
			isCover = 1;
		}
		
		if ("" == userPin) {
	    	alert('Pls enter Admission/Staff No.');
	    } else if ("" == fingerId) {
	    	alert('Pls enter FP ID');
	    } else if ("" == retryTimes) {
	    	alert('Pls enter retry times');
	    } else {
	    	url = "deviceAction!enrollFp.action?sn="+temp + "&userPin=" + userPin 
	    	+ "&fingerId=" + fingerId + "&retryTimes=" + retryTimes + "&isCover=" +isCover;
			dealData(url);
	    }
	}
	window.location.reload();
}


var shellDialogHtml='<div class="win_box">'
	+'<h2>Execute Syst CMD (SHELL CMD)</h2><hr />'
	+'Pls enter syst CMD<br/><br/>' 
	+'<input id="shellCmd" type="text"/>'
	+'<br/><br/>'
	+'</div>';


function procShell(v) {
	if (1 == v) {
		var temp = "";
		var url= "";
		$("input:checkbox[name=sn]:checked").each(function(i){
		
			temp += ($(this).val()+",");
		});
		temp=temp.substring(0,temp.length-1);
		
		var shellCmd = $(".content>.win_box>#shellCmd").val();
		if ("" == shellCmd) {
	    	alert('Pls enter syst CMD');
	    } else {
	    	//alert(shellCmd);
	    	shellCmd = shellCmd.replace(/&/g,':');
	    	//alert(shellCmd);
	    	url = "deviceAction!shell.action?sn="+temp + "&cmd=" + shellCmd;
			dealData(url);
	    }
	}
	window.location.reload();
}

</script>
<script type="text/javascript">
var actionName="deviceAction!deviceList.action";
function dealData(url)
{
	$.ajax({
       type: "POST",
       url: url,
       dataType:"json",
       async: false,
      /**
       success: function(data)
       {
   		alert("operations are successfully");
   		window.location.reload(); 
       },
       error:function (XMLHttpRequest, textStatus, errorThrown)
		{
		    alert("The operation failed, please try again...");
		    window.location.reload(); 
		}
       **/
	});
	 window.location.reload(); 
}


function checkSelectItem() {
	var temp = "";
	$("input:checkbox[name=sn]:checked").each(function(i){
	
		temp += ($(this).val()+",");
	});
	if (temp.length <= 0) {
		alert("Pls select opt");
		return -1;
	}
	return 0;
}

function checkOnlyOneSelectItem() {
	var temp = "";
	$("input:checkbox[name=sn]:checked").each(function(i){
	
		temp += ($(this).val()+",");
	});
	if (temp.length <= 0) {
		alert("Pls select opt");
		return -1;
	}
	temp=temp.substring(0,temp.length-1);
	if (temp.indexOf(",") > 0) {
   		alert('Only one device can be selected!');
   		return -2;
   	}
	return 0;
}

$(function(){

/*Using an id to close the Modal*/
    $("#close").click( function(){
        $(".test1").fbmodal({close:true});
    });	
 
    $("#syncTimeZoneOpen").bind("click",function(){
    	if (0 != checkSelectItem()) {
    		return;
    	}
    	    	
	   	$('.test1').append(querySyncTimeZoneDialogHtml)
	   				.fbmodal(pushDialog,procSyncingTimeZone);
    });
    
    $("#queryAttLogOpen").bind("click",function(){
    	if (0 != checkSelectItem()) {
    		return;
    	}
    	    	
	   	$('.test1').append(queryAttLogDialogHtml)
	   				.fbmodal(pushDialog,procQueryAttLog);
    });
    
    $("#toNewDeviceOpen").bind("click",function(){
    	if (0 != checkOnlyOneSelectItem()) {
    		return;
    	}
	   	$('.test1').append(toNewDeviceDialogHtml)
	   				.fbmodal(pushDialog,procToNewDevice);
    });
    
    $("#queryAttPhotoOpen").bind("click",function(){
    	if (0 != checkSelectItem()) {
    		return;
    	}
    	    	
	   	$('.test1').append(queryAttPhotoDialogHtml)
	   				.fbmodal(pushDialog,procQueryAttPhoto);
    });
    
      $("#queryUserInfoOpen").bind("click",function(){
    	if (0 != checkSelectItem()) {
    		return;
    	}
    	    	
	   	$('.test1').append(queryUserDialogHtml)
	   				.fbmodal(pushDialog,procQueryUserInfo);
    });
      
      $("#queryFingerTmpOpen").bind("click",function(){
    	if (0 != checkSelectItem()) {
    		return;
    	}
    	    	
	   	$('.test1').append(queryFingerTmpDialogHtml)
	   				.fbmodal(pushDialog,procQueryFingerTmp);
    });

      $("#verifyLogOpen").bind("click",function(){
    	if (0 != checkSelectItem()) {
    		return;
    	}
    	    	
	   	$('.test1').append(verifyLogDialogHtml)
	   				.fbmodal(pushDialog,procVerifyLog);
    });
      
    $("#getFileOpen").bind("click",function(){
    	if (0 != checkSelectItem()) {
    		return;
    	}
    	    	
	   	$('.test1').append(getFileDialogHtml)
	   				.fbmodal(pushDialog,procGetFile);
    });
    
    $("#putFileOpen").bind("click",function(){
    	if (0 != checkSelectItem()) {
    		return;
    	}
    	    	
	   	$('.test1').append(putFileDialogHtml)
	   				.fbmodal(pushDialog,procPutFile);
    });
     $("#setOptionOpen").bind("click",function(){
    	if (0 != checkSelectItem()) {
    		return;
    	}
    	    	
	   	$('.test1').append(setOptionDialogHtml)
	   				.fbmodal(pushDialog,procSetOption);
    });
    $("#enrollFpOpen").bind("click",function(){
    	if (0 != checkSelectItem()) {
    		return;
    	}
    	    	
	   	$('.test1').append(enrollFPDialogHtml)
	   				.fbmodal(pushDialog,procEnrollFPc);
    });
     $("#shellOpen").bind("click",function(){
    	if (0 != checkSelectItem()) {
    		return;
    	}
    	    	
	   	$('.test1').append(shellDialogHtml)
	   				.fbmodal(pushDialog,procShell);
    });
});

	
function operateDevice(operate)
{
	var temp = "";
	$("input:checkbox[name=sn]:checked").each(function(i){
		
			temp += ($(this).val()+",");
	});
	if (temp.length > 0) {
		temp=temp.substring(0,temp.length-1);
	    var url= "";
	    if ("clearAllData" == operate) {
	    	url = "deviceAction!clearAllData.action?sn="+temp;
	    } else if ("check" == operate) {
	    	url = "deviceAction!checkDeviceData.action?sn="+temp;
	    } else if ("restore" == operate) {
	    	url = "deviceAction!restoreUserInfo.action?sn="+temp;
	    } else if ("checkNew" == operate) {
	 		url = "deviceAction!checkDeviceData.action?checkNew=yes&sn="+temp;
	    } else if ("info" == operate) {
	 		url = "deviceAction!checkDeviceInfo.action?sn="+temp;
	    } else if ("deleteServer" == operate) {
	    	if (confirm("Are you sure you want to execute this opt?")) {
	    		url = "deviceAction!deleteServer.action?sn="+temp;
	    	} else {
	    		return;
	    	}
	    } else if ("deleteDevice" == operate) {
	    	url = "deviceAction!deleteDevice.action?sn="+temp;
	    } else if ("clearAttLog" == operate) {
	    	url = "deviceAction!clearAttLog.action?sn="+temp;
	    } else if ("clearPhoto" == operate) {
	    	url = "deviceAction!clearPhoto.action?sn="+temp;
	    } else if ("rebootDevice" == operate) {
	    	url = "deviceAction!rebootDevice.action?sn="+temp;
	    } else if ("reloadOption" == operate) {
	    	url = "deviceAction!reloadOption.action?sn=" + temp;
	    } else if ("logData" == operate) {
	    	url = "deviceAction!logData.action?sn=" + temp;
	    } else if ("unlock" == operate) {
	    	url = "deviceAction!unlock.action?sn=" + temp;
	    } else if ("unalarm" == operate) {
	    	url = "deviceAction!unalarm.action?sn=" + temp;
	    } else if ("syncDevice" == operate) {
	    	url = "deviceAction!syncDevice.action?sn=" + temp;
	    } else if ("getAllUsers" == operate) {
	    	if (confirm("This will retrieve all users from the selected device(s) and sync them to the webapp. Continue?")) {
	    		url = "deviceAction!getAllUsersFromDevice.action?sn=" + temp;
	    	} else {
	    		return;
	    	}
	    }
	    dealData(url);
	} else {
		alert("Pls select opt");
	}	
}

function editDevice(sn) {
	if (null == sn || "" == sn) {
		return;
	}
	var url = "deviceAction!editDevice.action?sn=" + sn;
	location.href = url;
}

function getCond()
{
	return "";
}

function selAll()
{
	var devSelAllChk = document.getElementsByName("devSelAll");
	var snChk = document.getElementsByName("sn");
	if (devSelAllChk[0].checked == false) {
		for (var i = 0; i < snChk.length; i ++) {
			snChk[i].checked = false;
		}
	} else {
		for (var i = 0; i < snChk.length; i ++) {
			snChk[i].checked = true;
		}
	}
}
</script>
</head>
<body>
<!--------------------------page top start------------------------------------------>
<style>
	.btn-logout {
		color: #fff !important;
		text-decoration: none !important;
		font-weight: bold;
		background: rgba(0, 0, 0, 0.2);
		padding: 5px 15px;
		border-radius: 20px;
		border: 1px solid rgba(255, 255, 255, 0.3);
		transition: all 0.3s ease;
		display: inline-block;
	}

	.btn-logout:hover {
		background: rgba(255, 255, 255, 0.2);
		border-color: #fff;
		transform: translateY(-1px);
		box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
	}
</style>
<script type="text/javascript">


	function dealData1(url) {
		$.ajax({
			type: "POST",
			url: url,
			dataType: "json",
			async: false,
			/**
			 success: function(data)
			 {
					  alert("operations are successfully");
					  window.location.reload(); 
			 },
			 error:function (XMLHttpRequest, textStatus, errorThrown)
			  {
				  alert("The operation failed, please try again...");
				  window.location.reload(); 
			  }
			 **/
		});
		window.location.reload();
	}

	function operation1(operate) {
		if (confirm("Are you sure you want to execute this opt?")) {
			var url = "";
			if ("initDemo" == operate) {
				url = "deviceAction!initDemo.action"
			} else if ("deleteAllUserData" == operate) {
				url = "deviceAction!deleteAllUserData.action"
			}
			dealData1(url);
		}
		window.location.reload();
		return;
	}


</script>

<div class="push_top_Line"></div>
<div class="push_top_box">
	<div class="top_logo"><a href="#"><img src="images/crawford-logo.jpg" border="0" style="max-height: 50px;" /></a>
	</div>
	<div class="top_menu l">

		<ul id="jsddm">
			<li><a href="http://localhost:8080/pushdemo/deviceAction!deviceList.action" ><div class="menu_ico_Device"></div>
					Device
				</a>
				<ul class="li_link">
					<li><a href="http://localhost:8080/pushdemo/deviceAction!deviceList.action">
							Dev Manage
						</a></li>
					<li><a href="http://localhost:8080/pushdemo/monitorAction!monitorList.action">
							Real-time Monitoring
						</a></li>
				</ul>
			</li>
			<li><a href="http://localhost:8080/pushdemo/userAction!userList.action"><div class="menu_ico_Data"></div>
					Data
				</a>
				<ul class="li_link">
					<li><a href="http://localhost:8080/pushdemo/userAction!userList.action">
							User Manage
						</a></li>
					<li><a href="http://localhost:8080/pushdemo/attAction!verificationList.action">Verification Responses</a></li>
					<li><a href="http://localhost:8080/pushdemo/attAction!attLogList.action">
							Attlogs
						</a></li>
					<li><a href="http://localhost:8080/pushdemo/smsAction!smsList.action">
							SMS
						</a></li>
					<li><a href="http://localhost:8080/pushdemo/meetAction!meetinfoList.action">
							Meet Manage
						</a></li>
					<li><a href="http://localhost:8080/pushdemo/advAction!advList.action">
							Adv manage
						</a></li>
				</ul>
			</li>
			<li><a href="http://localhost:8080/pushdemo/cmdAction!devCmdList.action"><div class="menu_ico_Log"></div>
					Log
				</a>
				<ul class="li_link">
					<li><a href="http://localhost:8080/pushdemo/devLogAction!deviceLogList.action">
							Dev Opt Logs
						</a></li>
					<!--<li><a href="devDataLog.jsp">Upload Logs</a></li>
			-->
					<li><a href="http://localhost:8080/pushdemo/cmdAction!devCmdList.action">
							Dev CMD
						</a></li>
				</ul>
			</li>
			<li><a href="#">
					<div class="menu_ico_System"></div>
					System
				</a>
				<ul class="li_link">
					<li><a onclick="operation1('initDemo')" href="#">
							Initial DEMO
						</a></li>
					<li><a onclick="operation1('deleteAllUserData')" href="#">
							Delet All User Data
						</a></li>
				</ul>
			</li>
			<li><a href="http://localhost:8080/pushdemo/commandAction!command.action" ><div class="menu_ico_commands"></div>
					Device Commands
				</a>
			</li>
		</ul>

	</div>


	<div class="top_r_box r">
		<div class="zkadmin_nav" id="zkadmin_nav" style="float:left; margin-right:20px; color:white; line-height:58px;">
			<span>Welcome,
				
			</span>
			<span style="margin: 0 10px;">|</span>
			<a href="http://localhost:8080/pushdemo/logout.action" class="btn-logout">LOGOUT</a>
		</div>
		<li><a>
				Ver:  2.0.2   2022-03-20
			</a></li>
	</div>

</div>
<!--------------------------page top end------------------------------------------>

<!--------------------------header operate start------------------------------------------>
<div class="push_Search_box"> 
<div class="l zkoperation_box">
	<div class="zk_nav">
	<ul>
		<li id="zkoperation_navMenu1"><a href="#">Options</a>
			<ul>
				<li>
					<a href="#">Server Data Operation</a>
					<ul>
						<li><a href="#" onclick="operateDevice('deleteDevice')" >Delete Dev</a></li>
						<li><a href="#" onclick="operateDevice('deleteServer')">Delete Server Data (User/FP/Face/Attlog)</a></li>	
						<li><a href="#" onclick="operateDevice('syncDevice')" >Synchronize server data to the device</a></li>
							
						<li><a href="#" id="syncTimeZoneOpen" onclick="location.href='javascript:void()'">Synchronize TimeZone to the device</a></li>		
					</ul>
				</li>
				<li>
					<a href="#">DATA CMD</a>
					<ul>
						<li><a href="#" id="toNewDeviceOpen" onclick="location.href='javascript:void()'">Backup data to other Devs (DATA UPDATE CMD,including User/FP/Face/Palm/User Pic)</a></li>
						<li><a href="#" onclick="operateDevice('restore')">Restore User Data (DATA UPDATE CMD, including User/FP/Face/Palm/User Pic)</a></li>
						<li><a href="#" onclick="operateDevice('getAllUsers')">Get All Users from Device</a></li>
						<li><a href="#" id="queryAttLogOpen" onclick="location.href='javascript:void()'">Query Attlogs (DATA QUERY ATTLOG CMD)</a></li>
						<li><a href="#" id="queryAttPhotoOpen" onclick="location.href='javascript:void()'">Query Att Pic (DATA QUERY ATTPHOTO CMD)</a></li>
						<li><a href="#" id="queryUserInfoOpen" onclick="location.href='javascript:void()'">Query User Info (DATA QUERY USERINFO CMD)</a></li>
						<li><a href="#" id="queryFingerTmpOpen" onclick="location.href='javascript:void()'">Query FP Tmp (DATA QUERY FINGERTMP CMD)</a></li>		
					</ul>
				</li>
				<li>
					<a href="#">CLEAR CMD</a>
					<ul>
						<li><a href="#" onclick="operateDevice('clearAllData')">Clear All Data (CLEAR DATA CMD)</a></li>
						<li><a href="#" onclick="operateDevice('clearAttLog')">Clear Attlogs (CLEAR LOG CMD)</a></li>
						<li><a href="#" onclick="operateDevice('clearPhoto')">Clear Att Pic (CLEAR PHOTO CMD)</a></li>
					</ul>
				</li>
				<li>
					<a href="#">Data Check CMD</a>
					<ul>
						<li><a href="#" onclick="operateDevice('check')">Reupload Dev Data (CHECK CMD,Set Stamp to 0)</a></li>
						
						<li><a href="#" onclick="operateDevice('logData')">Check and Send New Data (LOGCMD)</a></li>
						<li><a href="#" id="verifyLogOpen" onclick="location.href='javascript:void()'">Auto Attlogs Verification (VERIFY SUM ATTLOG CMD)</a></li>						
					</ul>
				</li>
				<li>
					<a href="#">File CMD</a>
					<ul>
						<li><a href="#" id="getFileOpen" onclick="location.href='javascript:void()'">Get the file inside the client side (GetFile CMD)</a></li>
						<li><a href="#" id="putFileOpen" onclick="location.href='javascript:void()'">Send file to the client side (PutFile CMD)</a></li>						
					</ul>
				</li>
				<li>
					<a href="#">Config option CMD</a>
					<ul>
						<li><a href="#" onclick="operateDevice('info')">Refresh Dev Info (INFO CMD)</a></li>
						<li><a href="#" id="setOptionOpen" onclick="location.href='javascript:void()'">Set Client Side Opt (SET OPTION CMD)</a></li>
						<li><a href="#" onclick="operateDevice('reloadOption')">Client Side Refresh Opt(RELOAD OPTIONS CMD)</a></li>
					</ul>
				</li>
				<li>
					<a>Control CMD</a>
					<ul>
						<li><a href="#" onclick="operateDevice('rebootDevice')">Reboot (REBOOT CMD)</a></li>
						<li><a href="#" onclick="operateDevice('unlock')">Output Unlock signal (AC_UNLOCK CMD)</a></li>
						<li><a href="#" onclick="operateDevice('unalarm')">Cancel Alarm Signal Output (AC_UNALARM CMD)</a></li>
					</ul>
				</li>
				<li>
					<a href="#">Remote Enrollment CMD</a>
					<ul>
						<li><a href="#" id="enrollFpOpen" onclick="location.href='javascript:void()'">Enroll User FP (ENROLL_FP CMD)</a></li>
					</ul>
				</li>
				<li>
					<a href="#">Other CMD</a>
					<ul>
						<li><a href="#" id="shellOpen" onclick="location.href='javascript:void()'">Execute Syst CMD (SHELL CMD)</a></li>						
					</ul>
				</li>
			</ul>
		</li>
	</ul>
	</div>
	
	</div>
</div>

<!--------------------------header operate end------------------------------------------>

<!--------------------------list start------------------------------------------->
<table border="0" cellpadding="0" cellspacing="0" class="push_tab1">
  <tr>
  
    <th><input type="checkbox" name="devSelAll" value="checkbox" onclick="selAll()"/></th>
 
    <th>SN</th>
    <th>IP Addr</th>
    <th>Dev Name</th>
    <th>Status</th><th>Last Online Time</th>
    <th>User Count</th>
    <th>User Count on the Server</th>
    <th>FP Count</th>
    <th>FP Count on the Server</th>
    <th>Face Count</th>
    <th>Face Count on the Server</th>
 
    <th>Palm</th>
    <th>Mask</th>
    <th>Temperature</th>
    <th>Record Count</th>
    <th>Record Count on the Server</th>
    <th>Dev Function</th>
    
  
    
    </tr>
  
  <tr>
  <td><input type="checkbox" name="sn" value="TDBD254600293" /></td>
  <td><a href="#" onclick="editDevice('TDBD254600293')">TDBD254600293</a></td>
  <td>192.168.1.100</td>
  <td>TestDevice(TDBD254600293)</td>
  <td>Offline</td>
    <td>2026-01-29 17:49:41</td>
    <td>0</td>
    <td>0</td>
    <td>0</td>
    <td>0</td>
    <td>0</td>
    <td>0</td>
    <td>0</td>
    <td>1</td>
    <td></td>
    <td>0</td>
    <td>0</td>
    <td></td>
    </tr>
  
</table>

<script type="text/javascript">
<!--
function pageAct(act) {
	var url="";
	if ("next" == act) {
		url = "?act="+act;
		
	} else if ("previous" == act) {
		url = "?act="+act;
	} else if ("jump" == act) {
		url = "?jump="+$("#jumpPage").val();
	}
	var cond = "";
	if ("" != getCond()) {
		cond = "&" + getCond();
	}
	location.href = actionName + url + cond;
}
//-->
</script>
<div class="pagination">
<ul>
<li>Total</li>
<li>1/1</li>
<li><a href="#" onclick="pageAct('previous')" >Previous</a></li>
<li><a href="#" onclick="pageAct('next')">Next</a></li>
<li>Jump to</li>
<li><input type="text" id="jumpPage"  class="content_input" size="3"/>
Page 
<input type="button" onclick="pageAct('jump')" value='Jump' /></li>

</ul>
</div>
<!--------------------------list end------------------------------------------->

<div class="push_bottom">CopyRight: ZKTeco Inc©. 2021-2022</div>

<div class="test1">

</div>
</body>
</html>