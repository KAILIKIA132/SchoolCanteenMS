38809 ERROR 2025-11-17 10:48:04511 ExternalApiUtil:304 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
38851 ERROR 2025-11-17 10:48:04553 ExternalApiUtil:305 - âŒ EXTERNAL API CALL FAILED
38852 ERROR 2025-11-17 10:48:04554 ExternalApiUtil:306 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
38850 ERROR 2025-11-17 10:48:04552 ExternalApiUtil:307 - EXTERNAL API: Student ID: 1002
38857 ERROR 2025-11-17 10:48:04559 ExternalApiUtil:308 - EXTERNAL API: URL: http://192.168.8.105:8001/api/meal-cards/generate-with-check
38859 ERROR 2025-11-17 10:48:04561 ExternalApiUtil:309 - EXTERNAL API: Error: connect timed out
38843 ERROR 2025-11-17 10:48:04545 ExternalApiUtil:304 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
38861 ERROR 2025-11-17 10:48:04563 ExternalApiUtil:305 - âŒ EXTERNAL API CALL FAILED
38864 ERROR 2025-11-17 10:48:04566 ExternalApiUtil:306 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
38868 ERROR 2025-11-17 10:48:04570 ExternalApiUtil:307 - EXTERNAL API: Student ID: 1002
38872 ERROR 2025-11-17 10:48:04574 ExternalApiUtil:308 - EXTERNAL API: URL: http://192.168.8.105:8001/api/meal-cards/generate-with-check
38873 ERROR 2025-11-17 10:48:04575 ExternalApiUtil:309 - EXTERNAL API: Error: connect timed out
38873 ERROR 2025-11-17 10:48:04575 ExternalApiUtil:310 - EXTERNAL API: Exception: java.net.SocketTimeoutException
38874 ERROR 2025-11-17 10:48:04576 ExternalApiUtil:311 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
38875 ERROR 2025-11-17 10:48:04577 ExternalApiUtil:312 - Full stack trace:
java.net.SocketTimeoutException: connect timed out
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:204)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:133)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
38860 ERROR 2025-11-17 10:48:04562 ExternalApiUtil:310 - EXTERNAL API: Exception: java.net.SocketTimeoutException
39377 ERROR 2025-11-17 10:48:0579 ExternalApiUtil:311 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
39380 ERROR 2025-11-17 10:48:0582 ExternalApiUtil:312 - Full stack trace:
java.net.SocketTimeoutException: connect timed out
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:204)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:133)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
38857 ERROR 2025-11-17 10:48:04559 ExternalApiUtil:307 - EXTERNAL API: Student ID: 1002
39389 ERROR 2025-11-17 10:48:0591 ExternalApiUtil:308 - EXTERNAL API: URL: http://192.168.8.105:8001/api/meal-cards/generate-with-check
39389 ERROR 2025-11-17 10:48:0591 ExternalApiUtil:309 - EXTERNAL API: Error: connect timed out
39390 ERROR 2025-11-17 10:48:0592 ExternalApiUtil:310 - EXTERNAL API: Exception: java.net.SocketTimeoutException
39390 ERROR 2025-11-17 10:48:0592 ExternalApiUtil:311 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
39372 ERROR 2025-11-17 10:48:0574 ExternalApiUtil:304 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
39397 ERROR 2025-11-17 10:48:0599 ExternalApiUtil:305 - âŒ EXTERNAL API CALL FAILED
39400 ERROR 2025-11-17 10:48:05102 ExternalApiUtil:306 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
39403 ERROR 2025-11-17 10:48:05105 ExternalApiUtil:307 - EXTERNAL API: Student ID: 1002
39410 ERROR 2025-11-17 10:48:05112 ExternalApiUtil:308 - EXTERNAL API: URL: http://192.168.8.105:8001/api/meal-cards/generate-with-check
39410 ERROR 2025-11-17 10:48:05112 ExternalApiUtil:309 - EXTERNAL API: Error: connect timed out
39414 ERROR 2025-11-17 10:48:05116 ExternalApiUtil:310 - EXTERNAL API: Exception: java.net.SocketTimeoutException
39415 ERROR 2025-11-17 10:48:05117 ExternalApiUtil:311 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
39416 ERROR 2025-11-17 10:48:05118 ExternalApiUtil:312 - Full stack trace:
java.net.SocketTimeoutException: connect timed out
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:204)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:133)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
39329 INFO  2025-11-17 10:48:0531 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
39391 ERROR 2025-11-17 10:48:0593 ExternalApiUtil:312 - Full stack trace:
java.net.SocketTimeoutException: connect timed out
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:204)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:133)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
39737 INFO  2025-11-17 10:48:05439 ExternalApiUtil:369 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
39973 INFO  2025-11-17 10:48:05675 UploadProcess:266 - update device stamp end and get stream.
40422 INFO  2025-11-17 10:48:06124 UploadProcess:323 - data:1002	2025-11-18 06:48:05	0	15	0	0	0	0	0	0	

40423 INFO  2025-11-17 10:48:06125 UploadProcess:324 - end get stream and process data
40425 INFO  2025-11-17 10:48:06127 UploadProcess:523 - begin parse op attlog
40445 INFO  2025-11-17 10:48:06147 ExternalApiUtil:369 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
40450 INFO  2025-11-17 10:48:06152 ExternalApiUtil:369 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
40613 INFO  2025-11-17 10:48:06315 ExternalApiUtil:369 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
40747 INFO  2025-11-17 10:48:06449 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
40748 INFO  2025-11-17 10:48:06450 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
40750 INFO  2025-11-17 10:48:06452 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 06:48:05
40752 INFO  2025-11-17 10:48:06454 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
40753 INFO  2025-11-17 10:48:06455 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
40754 INFO  2025-11-17 10:48:06456 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
40756 INFO  2025-11-17 10:48:06458 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
40759 INFO  2025-11-17 10:48:06461 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 06:48:05
40770 INFO  2025-11-17 10:48:06472 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
40771 INFO  2025-11-17 10:48:06473 UploadProcess:412 - attlog size:1
40782 INFO  2025-11-17 10:48:06484 UploadProcess:525 - end parse op attlog
40756 INFO  2025-11-17 10:48:06458 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
40797 INFO  2025-11-17 10:48:06499 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
40798 INFO  2025-11-17 10:48:06500 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
40802 INFO  2025-11-17 10:48:06504 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
40804 INFO  2025-11-17 10:48:06506 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
40807 INFO  2025-11-17 10:48:06509 ExternalApiUtil:169 - EXTERNAL API: URL: http://192.168.8.105:8001/api/meal-cards/generate-with-check
40812 INFO  2025-11-17 10:48:06514 ExternalApiUtil:170 - EXTERNAL API: Method: POST
40814 INFO  2025-11-17 10:48:06516 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 13:48:06 EAT 2025
40817 INFO  2025-11-17 10:48:06519 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://192.168.8.105:8001/api/meal-cards/generate-with-check
40821 INFO  2025-11-17 10:48:06523 ExternalApiUtil:185 - EXTERNAL API: Connection configured, formatting student ID...
40825 INFO  2025-11-17 10:48:06527 ExternalApiUtil:189 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
40787 INFO  2025-11-17 10:48:06489 UploadProcess:327 - end process data and return msg to device
40828 INFO  2025-11-17 10:48:06530 ExternalApiUtil:196 - EXTERNAL API: Current time (Nairobi/EAT): 13:48 - Meal type determined: lunch
40831 INFO  2025-11-17 10:48:06533 UploadProcess:331 - return msg to device and request over OK
40862 INFO  2025-11-17 10:48:06564 ExternalApiUtil:200 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
40864 INFO  2025-11-17 10:48:06566 ExternalApiUtil:203 - EXTERNAL API: Writing request body to connection...
46875 INFO  2025-11-17 10:48:12577 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,181,192.168.8.106,10,35,12,5,11110,2,0,0
46896 INFO  2025-11-17 10:48:12598 DownloadProcess:59 - get cmd list over and begin contact:0
46899 INFO  2025-11-17 10:48:12601 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,181,192.168.8.106,10,35,12,5,11110,2,0,0
58638 INFO  2025-11-17 10:48:24340 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
58643 INFO  2025-11-17 10:48:24345 DownloadProcess:59 - get cmd list over and begin contact:0
70899 ERROR 2025-11-17 10:48:36601 ExternalApiUtil:304 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
70903 ERROR 2025-11-17 10:48:36605 ExternalApiUtil:305 - âŒ EXTERNAL API CALL FAILED
70904 ERROR 2025-11-17 10:48:36606 ExternalApiUtil:306 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
70904 ERROR 2025-11-17 10:48:36606 ExternalApiUtil:307 - EXTERNAL API: Student ID: 1002
70905 ERROR 2025-11-17 10:48:36607 ExternalApiUtil:308 - EXTERNAL API: URL: http://192.168.8.105:8001/api/meal-cards/generate-with-check
70905 ERROR 2025-11-17 10:48:36607 ExternalApiUtil:309 - EXTERNAL API: Error: connect timed out
70906 ERROR 2025-11-17 10:48:36608 ExternalApiUtil:310 - EXTERNAL API: Exception: java.net.SocketTimeoutException
70907 ERROR 2025-11-17 10:48:36609 ExternalApiUtil:311 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
70908 ERROR 2025-11-17 10:48:36610 ExternalApiUtil:312 - Full stack trace:
java.net.SocketTimeoutException: connect timed out
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:204)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:133)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
71015 INFO  2025-11-17 10:48:36717 ExternalApiUtil:369 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
73687 INFO  2025-11-17 10:48:39389 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
73695 INFO  2025-11-17 10:48:39397 DownloadProcess:59 - get cmd list over and begin contact:0
88652 INFO  2025-11-17 10:48:54354 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
88657 INFO  2025-11-17 10:48:54359 DownloadProcess:59 - get cmd list over and begin contact:0
105561 INFO  2025-11-17 10:49:11263 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
105565 INFO  2025-11-17 10:49:11267 DownloadProcess:59 - get cmd list over and begin contact:0
123561 INFO  2025-11-17 10:49:29263 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
123566 INFO  2025-11-17 10:49:29268 DownloadProcess:59 - get cmd list over and begin contact:0
144562 INFO  2025-11-17 10:49:50264 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
144573 INFO  2025-11-17 10:49:50275 DownloadProcess:59 - get cmd list over and begin contact:0
165526 INFO  2025-11-17 10:50:11228 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
165529 INFO  2025-11-17 10:50:11231 DownloadProcess:59 - get cmd list over and begin contact:0
189842 INFO  2025-11-17 10:50:35544 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
189845 INFO  2025-11-17 10:50:35547 DownloadProcess:59 - get cmd list over and begin contact:0
198840 INFO  2025-11-17 10:50:44542 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
198850 INFO  2025-11-17 10:50:44552 UploadProcess:266 - update device stamp end and get stream.
198852 INFO  2025-11-17 10:50:44554 UploadProcess:323 - data:1002	2025-11-18 06:50:44	0	15	0	0	0	0	0	0	

198853 INFO  2025-11-17 10:50:44555 UploadProcess:324 - end get stream and process data
198853 INFO  2025-11-17 10:50:44555 UploadProcess:523 - begin parse op attlog
198878 INFO  2025-11-17 10:50:44580 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
198878 INFO  2025-11-17 10:50:44580 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
198879 INFO  2025-11-17 10:50:44581 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 06:50:44
198880 INFO  2025-11-17 10:50:44582 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
198880 INFO  2025-11-17 10:50:44582 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
198881 INFO  2025-11-17 10:50:44583 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
198882 INFO  2025-11-17 10:50:44584 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
198883 INFO  2025-11-17 10:50:44585 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
198883 INFO  2025-11-17 10:50:44585 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
198884 INFO  2025-11-17 10:50:44586 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
198885 INFO  2025-11-17 10:50:44587 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
198886 INFO  2025-11-17 10:50:44588 ExternalApiUtil:169 - EXTERNAL API: URL: http://192.168.8.105:8001/api/meal-cards/generate-with-check
198887 INFO  2025-11-17 10:50:44589 ExternalApiUtil:170 - EXTERNAL API: Method: POST
198888 INFO  2025-11-17 10:50:44590 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 13:50:44 EAT 2025
198889 INFO  2025-11-17 10:50:44591 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://192.168.8.105:8001/api/meal-cards/generate-with-check
198882 INFO  2025-11-17 10:50:44584 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
198891 INFO  2025-11-17 10:50:44593 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 06:50:44
198891 INFO  2025-11-17 10:50:44593 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
198892 INFO  2025-11-17 10:50:44594 UploadProcess:412 - attlog size:1
198892 INFO  2025-11-17 10:50:44594 UploadProcess:525 - end parse op attlog
198892 INFO  2025-11-17 10:50:44594 UploadProcess:327 - end process data and return msg to device
198893 INFO  2025-11-17 10:50:44595 UploadProcess:331 - return msg to device and request over OK
198891 INFO  2025-11-17 10:50:44593 ExternalApiUtil:185 - EXTERNAL API: Connection configured, formatting student ID...
198895 INFO  2025-11-17 10:50:44597 ExternalApiUtil:189 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
198896 INFO  2025-11-17 10:50:44598 ExternalApiUtil:196 - EXTERNAL API: Current time (Nairobi/EAT): 13:50 - Meal type determined: lunch
198896 INFO  2025-11-17 10:50:44598 ExternalApiUtil:200 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
198897 INFO  2025-11-17 10:50:44599 ExternalApiUtil:203 - EXTERNAL API: Writing request body to connection...
213722 INFO  2025-11-17 10:50:59424 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,182,192.168.8.106,10,35,12,5,11110,2,0,0
213756 INFO  2025-11-17 10:50:59458 DownloadProcess:59 - get cmd list over and begin contact:0
213758 INFO  2025-11-17 10:50:59460 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,182,192.168.8.106,10,35,12,5,11110,2,0,0
228920 ERROR 2025-11-17 10:51:14622 ExternalApiUtil:304 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
228953 ERROR 2025-11-17 10:51:14655 ExternalApiUtil:305 - âŒ EXTERNAL API CALL FAILED
228954 ERROR 2025-11-17 10:51:14656 ExternalApiUtil:306 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
228954 ERROR 2025-11-17 10:51:14656 ExternalApiUtil:307 - EXTERNAL API: Student ID: 1002
228955 ERROR 2025-11-17 10:51:14657 ExternalApiUtil:308 - EXTERNAL API: URL: http://192.168.8.105:8001/api/meal-cards/generate-with-check
228955 ERROR 2025-11-17 10:51:14657 ExternalApiUtil:309 - EXTERNAL API: Error: connect timed out
228956 ERROR 2025-11-17 10:51:14658 ExternalApiUtil:310 - EXTERNAL API: Exception: java.net.SocketTimeoutException
228956 ERROR 2025-11-17 10:51:14658 ExternalApiUtil:311 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
228956 ERROR 2025-11-17 10:51:14658 ExternalApiUtil:312 - Full stack trace:
java.net.SocketTimeoutException: connect timed out
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:204)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:133)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
228964 INFO  2025-11-17 10:51:14666 ExternalApiUtil:369 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
239603 INFO  2025-11-17 10:51:25305 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
239608 INFO  2025-11-17 10:51:25310 DownloadProcess:59 - get cmd list over and begin contact:0
267561 INFO  2025-11-17 10:51:53263 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
267564 INFO  2025-11-17 10:51:53266 DownloadProcess:59 - get cmd list over and begin contact:0
285002 ERROR 2025-11-17 10:52:10704 DeviceInfoDao:406 - java.sql.SQLSyntaxErrorException: PROCEDURE pushdemo.get_device_for_page does not exist
296620 INFO  2025-11-17 10:52:22322 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
296624 INFO  2025-11-17 10:52:22326 DownloadProcess:59 - get cmd list over and begin contact:0
327582 INFO  2025-11-17 10:52:53284 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
327589 INFO  2025-11-17 10:52:53291 DownloadProcess:59 - get cmd list over and begin contact:0
6727 INFO  2025-11-17 10:53:56736 ConfigUtil:20 - Loading config from: /usr/local/tomcat/webapps/ROOT/WEB-INF/classes/config.xml
6734 INFO  2025-11-17 10:53:56743 ConfigUtil:25 - Config.xml loaded successfully
6761 INFO  2025-11-17 10:53:56770 BaseDao:101 - jdbc:mysql://mysql:3306/pushdemo?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true user:root pass:root
7799 INFO  2025-11-17 10:53:57808 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
7808 INFO  2025-11-17 10:53:57817 DownloadProcess:59 - get cmd list over and begin contact:0
17798 ERROR 2025-11-17 10:54:07807 DeviceInfoDao:406 - java.sql.SQLSyntaxErrorException: PROCEDURE pushdemo.get_device_for_page does not exist
36302 INFO  2025-11-17 10:54:26311 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
36308 INFO  2025-11-17 10:54:26317 DownloadProcess:59 - get cmd list over and begin contact:0
46974 INFO  2025-11-17 10:54:36983 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
46996 INFO  2025-11-17 10:54:375 UploadProcess:266 - update device stamp end and get stream.
47009 INFO  2025-11-17 10:54:3718 UploadProcess:323 - data:1002	2025-11-18 06:54:36	0	15	0	0	0	0	0	0	

47010 INFO  2025-11-17 10:54:3719 UploadProcess:324 - end get stream and process data
47011 INFO  2025-11-17 10:54:3720 UploadProcess:523 - begin parse op attlog
47132 INFO  2025-11-17 10:54:37141 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
47134 INFO  2025-11-17 10:54:37143 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
47139 INFO  2025-11-17 10:54:37148 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 06:54:36
47143 INFO  2025-11-17 10:54:37152 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
47151 INFO  2025-11-17 10:54:37160 ExternalApiUtil:125 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
47151 INFO  2025-11-17 10:54:37160 ExternalApiUtil:132 - EXTERNAL API: Submitting async task for userId: 1002
47154 INFO  2025-11-17 10:54:37163 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
47155 INFO  2025-11-17 10:54:37164 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 06:54:36
47155 INFO  2025-11-17 10:54:37164 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
47156 INFO  2025-11-17 10:54:37165 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
47158 INFO  2025-11-17 10:54:37167 UploadProcess:412 - attlog size:1
47159 INFO  2025-11-17 10:54:37168 UploadProcess:525 - end parse op attlog
47159 INFO  2025-11-17 10:54:37168 UploadProcess:327 - end process data and return msg to device
47160 INFO  2025-11-17 10:54:37169 UploadProcess:331 - return msg to device and request over OK
47157 INFO  2025-11-17 10:54:37166 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
47163 INFO  2025-11-17 10:54:37172 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
47164 INFO  2025-11-17 10:54:37173 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
47164 INFO  2025-11-17 10:54:37173 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
47166 INFO  2025-11-17 10:54:37175 ExternalApiUtil:175 - EXTERNAL API: URL: http://192.168.8.105:8001/api/meal-cards/generate-with-check
47167 INFO  2025-11-17 10:54:37176 ExternalApiUtil:176 - EXTERNAL API: Method: POST
47168 INFO  2025-11-17 10:54:37177 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 13:54:37 EAT 2025
47170 INFO  2025-11-17 10:54:37179 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://192.168.8.105:8001/api/meal-cards/generate-with-check
47194 INFO  2025-11-17 10:54:37203 ExternalApiUtil:192 - EXTERNAL API: Connection configured, formatting student ID...
47200 INFO  2025-11-17 10:54:37209 ExternalApiUtil:196 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
47203 INFO  2025-11-17 10:54:37212 ExternalApiUtil:203 - EXTERNAL API: Current time (Nairobi/EAT): 13:54 - Meal type determined: lunch
47204 INFO  2025-11-17 10:54:37213 ExternalApiUtil:207 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
47205 INFO  2025-11-17 10:54:37214 ExternalApiUtil:210 - EXTERNAL API: Writing request body to connection...
67737 INFO  2025-11-17 10:54:57746 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,183,192.168.8.106,10,35,12,5,11110,2,0,0
67744 INFO  2025-11-17 10:54:57753 DownloadProcess:59 - get cmd list over and begin contact:0
67745 INFO  2025-11-17 10:54:57754 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,183,192.168.8.106,10,35,12,5,11110,2,0,0
77216 ERROR 2025-11-17 10:55:07225 ExternalApiUtil:311 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
77222 ERROR 2025-11-17 10:55:07231 ExternalApiUtil:312 - âŒ EXTERNAL API CALL FAILED
77225 ERROR 2025-11-17 10:55:07234 ExternalApiUtil:313 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
77226 ERROR 2025-11-17 10:55:07235 ExternalApiUtil:314 - EXTERNAL API: Student ID: 1002
77231 ERROR 2025-11-17 10:55:07240 ExternalApiUtil:315 - EXTERNAL API: URL: http://192.168.8.105:8001/api/meal-cards/generate-with-check
77232 ERROR 2025-11-17 10:55:07241 ExternalApiUtil:316 - EXTERNAL API: Error: connect timed out
77234 ERROR 2025-11-17 10:55:07243 ExternalApiUtil:317 - EXTERNAL API: Exception: java.net.SocketTimeoutException
77239 ERROR 2025-11-17 10:55:07248 ExternalApiUtil:318 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
77321 ERROR 2025-11-17 10:55:07330 ExternalApiUtil:319 - Full stack trace:
java.net.SocketTimeoutException: connect timed out
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:211)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
77378 INFO  2025-11-17 10:55:07387 ExternalApiUtil:376 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
97262 INFO  2025-11-17 10:55:27271 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
97269 INFO  2025-11-17 10:55:27278 DownloadProcess:59 - get cmd list over and begin contact:0
123674 INFO  2025-11-17 10:55:53683 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
123700 INFO  2025-11-17 10:55:53709 UploadProcess:266 - update device stamp end and get stream.
123703 INFO  2025-11-17 10:55:53712 UploadProcess:323 - data:1002	2025-11-18 06:55:53	0	15	0	0	0	0	0	0	

123705 INFO  2025-11-17 10:55:53714 UploadProcess:324 - end get stream and process data
123708 INFO  2025-11-17 10:55:53717 UploadProcess:523 - begin parse op attlog
123743 INFO  2025-11-17 10:55:53752 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
123744 INFO  2025-11-17 10:55:53753 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
123747 INFO  2025-11-17 10:55:53756 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 06:55:53
123747 INFO  2025-11-17 10:55:53756 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
123748 INFO  2025-11-17 10:55:53757 ExternalApiUtil:125 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
123749 INFO  2025-11-17 10:55:53758 ExternalApiUtil:132 - EXTERNAL API: Submitting async task for userId: 1002
123750 INFO  2025-11-17 10:55:53759 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
123751 INFO  2025-11-17 10:55:53760 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 06:55:53
123752 INFO  2025-11-17 10:55:53761 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
123753 INFO  2025-11-17 10:55:53762 UploadProcess:412 - attlog size:1
123755 INFO  2025-11-17 10:55:53764 UploadProcess:525 - end parse op attlog
123756 INFO  2025-11-17 10:55:53765 UploadProcess:327 - end process data and return msg to device
123757 INFO  2025-11-17 10:55:53766 UploadProcess:331 - return msg to device and request over OK
123750 INFO  2025-11-17 10:55:53759 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
123758 INFO  2025-11-17 10:55:53767 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
123759 INFO  2025-11-17 10:55:53768 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
123760 INFO  2025-11-17 10:55:53769 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
123760 INFO  2025-11-17 10:55:53769 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
123761 INFO  2025-11-17 10:55:53770 ExternalApiUtil:175 - EXTERNAL API: URL: http://192.168.8.105:8001/api/meal-cards/generate-with-check
123762 INFO  2025-11-17 10:55:53771 ExternalApiUtil:176 - EXTERNAL API: Method: POST
123763 INFO  2025-11-17 10:55:53772 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 13:55:53 EAT 2025
123764 INFO  2025-11-17 10:55:53773 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://192.168.8.105:8001/api/meal-cards/generate-with-check
123767 INFO  2025-11-17 10:55:53776 ExternalApiUtil:192 - EXTERNAL API: Connection configured, formatting student ID...
123768 INFO  2025-11-17 10:55:53777 ExternalApiUtil:196 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
123771 INFO  2025-11-17 10:55:53780 ExternalApiUtil:203 - EXTERNAL API: Current time (Nairobi/EAT): 13:55 - Meal type determined: lunch
123772 INFO  2025-11-17 10:55:53781 ExternalApiUtil:207 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
123774 INFO  2025-11-17 10:55:53783 ExternalApiUtil:210 - EXTERNAL API: Writing request body to connection...
128466 INFO  2025-11-17 10:55:58475 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,184,192.168.8.106,10,35,12,5,11110,2,0,0
128472 INFO  2025-11-17 10:55:58481 DownloadProcess:59 - get cmd list over and begin contact:0
128473 INFO  2025-11-17 10:55:58482 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,184,192.168.8.106,10,35,12,5,11110,2,0,0
153803 ERROR 2025-11-17 10:56:23812 ExternalApiUtil:311 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
154028 ERROR 2025-11-17 10:56:2437 ExternalApiUtil:312 - âŒ EXTERNAL API CALL FAILED
154029 ERROR 2025-11-17 10:56:2438 ExternalApiUtil:313 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
154031 ERROR 2025-11-17 10:56:2440 ExternalApiUtil:314 - EXTERNAL API: Student ID: 1002
154031 ERROR 2025-11-17 10:56:2440 ExternalApiUtil:315 - EXTERNAL API: URL: http://192.168.8.105:8001/api/meal-cards/generate-with-check
154032 ERROR 2025-11-17 10:56:2441 ExternalApiUtil:316 - EXTERNAL API: Error: connect timed out
154032 ERROR 2025-11-17 10:56:2441 ExternalApiUtil:317 - EXTERNAL API: Exception: java.net.SocketTimeoutException
154033 ERROR 2025-11-17 10:56:2442 ExternalApiUtil:318 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
154034 ERROR 2025-11-17 10:56:2443 ExternalApiUtil:319 - Full stack trace:
java.net.SocketTimeoutException: connect timed out
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:211)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
155922 INFO  2025-11-17 10:56:25931 ExternalApiUtil:376 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
158199 INFO  2025-11-17 10:56:28208 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
158246 INFO  2025-11-17 10:56:28255 DownloadProcess:59 - get cmd list over and begin contact:0
189270 INFO  2025-11-17 10:56:59279 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
189281 INFO  2025-11-17 10:56:59290 DownloadProcess:59 - get cmd list over and begin contact:0
219275 INFO  2025-11-17 10:57:29284 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
219294 INFO  2025-11-17 10:57:29303 DownloadProcess:59 - get cmd list over and begin contact:0
3653 INFO  2025-11-17 10:58:1688 ConfigUtil:20 - Loading config from: /usr/local/tomcat/webapps/ROOT/WEB-INF/classes/config.xml
3673 INFO  2025-11-17 10:58:16108 ConfigUtil:25 - Config.xml loaded successfully
3724 INFO  2025-11-17 10:58:16159 BaseDao:101 - jdbc:mysql://mysql:3306/pushdemo?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true user:root pass:root
4613 INFO  2025-11-17 10:58:1748 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
4657 INFO  2025-11-17 10:58:1792 UploadProcess:266 - update device stamp end and get stream.
4670 INFO  2025-11-17 10:58:17105 UploadProcess:323 - data:1002	2025-11-18 06:58:05	0	15	0	0	0	0	0	0	

4671 INFO  2025-11-17 10:58:17106 UploadProcess:324 - end get stream and process data
4682 INFO  2025-11-17 10:58:17117 UploadProcess:523 - begin parse op attlog
4762 INFO  2025-11-17 10:58:17197 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
4763 INFO  2025-11-17 10:58:17198 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
4765 INFO  2025-11-17 10:58:17200 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 06:58:05
4766 INFO  2025-11-17 10:58:17201 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
4770 INFO  2025-11-17 10:58:17205 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
4771 INFO  2025-11-17 10:58:17206 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
4774 INFO  2025-11-17 10:58:17209 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
4774 INFO  2025-11-17 10:58:17209 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
4780 INFO  2025-11-17 10:58:17215 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4776 INFO  2025-11-17 10:58:17211 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 06:58:05
4781 INFO  2025-11-17 10:58:17216 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
4782 INFO  2025-11-17 10:58:17217 UploadProcess:412 - attlog size:1
4783 INFO  2025-11-17 10:58:17218 UploadProcess:525 - end parse op attlog
4784 INFO  2025-11-17 10:58:17219 UploadProcess:327 - end process data and return msg to device
4781 INFO  2025-11-17 10:58:17216 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
4787 INFO  2025-11-17 10:58:17222 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4788 INFO  2025-11-17 10:58:17223 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
4790 INFO  2025-11-17 10:58:17225 ExternalApiUtil:169 - EXTERNAL API: URL: http://192.168.8.105:8001/api/meal-cards/generate-with-check
4792 INFO  2025-11-17 10:58:17227 ExternalApiUtil:170 - EXTERNAL API: Method: POST
4793 INFO  2025-11-17 10:58:17228 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 13:58:17 EAT 2025
4795 INFO  2025-11-17 10:58:17230 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://192.168.8.105:8001/api/meal-cards/generate-with-check
4786 INFO  2025-11-17 10:58:17221 UploadProcess:331 - return msg to device and request over OK
4810 INFO  2025-11-17 10:58:17245 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
4813 INFO  2025-11-17 10:58:17248 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
4815 INFO  2025-11-17 10:58:17250 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 13:58 - Meal type determined: lunch
4815 INFO  2025-11-17 10:58:17250 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
4816 INFO  2025-11-17 10:58:17251 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
20064 INFO  2025-11-17 10:58:32499 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,185,192.168.8.106,10,35,12,5,11110,2,0,0
20076 INFO  2025-11-17 10:58:32511 DownloadProcess:59 - get cmd list over and begin contact:0
20077 INFO  2025-11-17 10:58:32512 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,185,192.168.8.106,10,35,12,5,11110,2,0,0
34854 ERROR 2025-11-17 10:58:47289 ExternalApiUtil:303 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
34859 ERROR 2025-11-17 10:58:47294 ExternalApiUtil:304 - âŒ EXTERNAL API CALL FAILED
34860 ERROR 2025-11-17 10:58:47295 ExternalApiUtil:305 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
34861 ERROR 2025-11-17 10:58:47296 ExternalApiUtil:306 - EXTERNAL API: Student ID: 1002
34861 ERROR 2025-11-17 10:58:47296 ExternalApiUtil:307 - EXTERNAL API: URL: http://192.168.8.105:8001/api/meal-cards/generate-with-check
34862 ERROR 2025-11-17 10:58:47297 ExternalApiUtil:308 - EXTERNAL API: Error: connect timed out
34863 ERROR 2025-11-17 10:58:47298 ExternalApiUtil:309 - EXTERNAL API: Exception: java.net.SocketTimeoutException
34864 ERROR 2025-11-17 10:58:47299 ExternalApiUtil:310 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
34884 ERROR 2025-11-17 10:58:47319 ExternalApiUtil:311 - Full stack trace:
java.net.SocketTimeoutException: connect timed out
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:203)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:133)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
34907 INFO  2025-11-17 10:58:47342 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
50894 INFO  2025-11-17 10:59:03329 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
50900 INFO  2025-11-17 10:59:03335 DownloadProcess:59 - get cmd list over and begin contact:0
80909 INFO  2025-11-17 10:59:33344 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
80915 INFO  2025-11-17 10:59:33350 DownloadProcess:59 - get cmd list over and begin contact:0
111831 INFO  2025-11-17 11:00:04266 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
111835 INFO  2025-11-17 11:00:04270 DownloadProcess:59 - get cmd list over and begin contact:0
143466 INFO  2025-11-17 11:00:35901 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
143470 INFO  2025-11-17 11:00:35905 DownloadProcess:59 - get cmd list over and begin contact:0
173105 INFO  2025-11-17 11:01:05540 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
173120 INFO  2025-11-17 11:01:05555 DownloadProcess:59 - get cmd list over and begin contact:0
204069 INFO  2025-11-17 11:01:36504 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
204179 INFO  2025-11-17 11:01:36614 DownloadProcess:59 - get cmd list over and begin contact:0
210592 INFO  2025-11-17 11:01:4327 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
210659 INFO  2025-11-17 11:01:4394 UploadProcess:266 - update device stamp end and get stream.
210661 INFO  2025-11-17 11:01:4396 UploadProcess:323 - data:1002	2025-11-18 07:01:42	0	15	0	0	0	0	0	0	

210669 INFO  2025-11-17 11:01:43104 UploadProcess:324 - end get stream and process data
210674 INFO  2025-11-17 11:01:43109 UploadProcess:523 - begin parse op attlog
210723 INFO  2025-11-17 11:01:43158 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
210734 INFO  2025-11-17 11:01:43169 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
210737 INFO  2025-11-17 11:01:43172 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 07:01:42
210741 INFO  2025-11-17 11:01:43176 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
210747 INFO  2025-11-17 11:01:43182 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
210761 INFO  2025-11-17 11:01:43196 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
210769 INFO  2025-11-17 11:01:43204 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
210779 INFO  2025-11-17 11:01:43214 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 07:01:42
210789 INFO  2025-11-17 11:01:43224 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
210776 INFO  2025-11-17 11:01:43211 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
210794 INFO  2025-11-17 11:01:43229 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
210799 INFO  2025-11-17 11:01:43234 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
210806 INFO  2025-11-17 11:01:43241 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
210795 INFO  2025-11-17 11:01:43230 UploadProcess:412 - attlog size:1
210812 INFO  2025-11-17 11:01:43247 UploadProcess:525 - end parse op attlog
210811 INFO  2025-11-17 11:01:43246 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
210834 INFO  2025-11-17 11:01:43269 UploadProcess:327 - end process data and return msg to device
210850 INFO  2025-11-17 11:01:43285 ExternalApiUtil:169 - EXTERNAL API: URL: http://192.168.8.105:8001/api/meal-cards/generate-with-check
210863 INFO  2025-11-17 11:01:43298 ExternalApiUtil:170 - EXTERNAL API: Method: POST
210867 INFO  2025-11-17 11:01:43302 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 14:01:43 EAT 2025
210860 INFO  2025-11-17 11:01:43295 UploadProcess:331 - return msg to device and request over OK
210875 INFO  2025-11-17 11:01:43310 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://192.168.8.105:8001/api/meal-cards/generate-with-check
210893 INFO  2025-11-17 11:01:43328 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
210898 INFO  2025-11-17 11:01:43333 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
210907 INFO  2025-11-17 11:01:43342 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 14:01 - Meal type determined: lunch
210909 INFO  2025-11-17 11:01:43344 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
210916 INFO  2025-11-17 11:01:43351 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
4092 INFO  2025-11-17 11:02:09490 ConfigUtil:20 - Loading config from: /usr/local/tomcat/webapps/ROOT/WEB-INF/classes/config.xml
4100 INFO  2025-11-17 11:02:09498 ConfigUtil:25 - Config.xml loaded successfully
4330 INFO  2025-11-17 11:02:09728 BaseDao:101 - jdbc:mysql://mysql:3306/pushdemo?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true user:root pass:root
5562 INFO  2025-11-17 11:02:10960 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,186,192.168.8.106,10,35,12,5,11110,2,0,0
5574 INFO  2025-11-17 11:02:10972 DownloadProcess:59 - get cmd list over and begin contact:0
5577 INFO  2025-11-17 11:02:10975 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,186,192.168.8.106,10,35,12,5,11110,2,0,0
35101 INFO  2025-11-17 11:02:40499 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
35326 INFO  2025-11-17 11:02:40724 DownloadProcess:59 - get cmd list over and begin contact:0
37474 INFO  2025-11-17 11:02:42872 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
37488 INFO  2025-11-17 11:02:42886 UploadProcess:266 - update device stamp end and get stream.
37497 INFO  2025-11-17 11:02:42895 UploadProcess:323 - data:1002	2025-11-18 07:02:42	0	15	0	0	0	0	0	0	

37498 INFO  2025-11-17 11:02:42896 UploadProcess:324 - end get stream and process data
37498 INFO  2025-11-17 11:02:42896 UploadProcess:523 - begin parse op attlog
37517 INFO  2025-11-17 11:02:42915 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
37518 INFO  2025-11-17 11:02:42916 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
37518 INFO  2025-11-17 11:02:42916 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 07:02:42
37519 INFO  2025-11-17 11:02:42917 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
37523 INFO  2025-11-17 11:02:42921 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
37524 INFO  2025-11-17 11:02:42922 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
37527 INFO  2025-11-17 11:02:42925 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
37528 INFO  2025-11-17 11:02:42926 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 07:02:42
37529 INFO  2025-11-17 11:02:42927 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
37527 INFO  2025-11-17 11:02:42925 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
37530 INFO  2025-11-17 11:02:42928 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
37531 INFO  2025-11-17 11:02:42929 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
37532 INFO  2025-11-17 11:02:42930 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
37532 INFO  2025-11-17 11:02:42930 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
37533 INFO  2025-11-17 11:02:42931 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
37533 INFO  2025-11-17 11:02:42931 ExternalApiUtil:170 - EXTERNAL API: Method: POST
37530 INFO  2025-11-17 11:02:42928 UploadProcess:412 - attlog size:1
37535 INFO  2025-11-17 11:02:42933 UploadProcess:525 - end parse op attlog
37536 INFO  2025-11-17 11:02:42934 UploadProcess:327 - end process data and return msg to device
37534 INFO  2025-11-17 11:02:42932 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 14:02:42 EAT 2025
37538 INFO  2025-11-17 11:02:42936 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
37537 INFO  2025-11-17 11:02:42935 UploadProcess:331 - return msg to device and request over OK
37544 INFO  2025-11-17 11:02:42942 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
37548 INFO  2025-11-17 11:02:42946 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
37548 INFO  2025-11-17 11:02:42946 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 14:02 - Meal type determined: lunch
37549 INFO  2025-11-17 11:02:42947 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
37549 INFO  2025-11-17 11:02:42947 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
37555 INFO  2025-11-17 11:02:42953 ExternalApiUtil:207 - EXTERNAL API: Request body written, getting response...
37973 INFO  2025-11-17 11:02:43371 ExternalApiUtil:210 - EXTERNAL API: Response code received: 201
37977 INFO  2025-11-17 11:02:43375 ExternalApiUtil:267 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
37977 INFO  2025-11-17 11:02:43375 ExternalApiUtil:268 - âœ… EXTERNAL API CALL SUCCESSFUL
37978 INFO  2025-11-17 11:02:43376 ExternalApiUtil:269 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
37979 INFO  2025-11-17 11:02:43377 ExternalApiUtil:270 - EXTERNAL API: Student ID: 1002 (original: 1002)
37980 INFO  2025-11-17 11:02:43378 ExternalApiUtil:271 - EXTERNAL API: HTTP Status Code: 201
37981 INFO  2025-11-17 11:02:43379 ExternalApiUtil:272 - EXTERNAL API: API Response Success: true
37982 INFO  2025-11-17 11:02:43380 ExternalApiUtil:273 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"9c7ab34d-cd58-459f-9dca-6b942d023381","student_id":"1002","student_name":"Boaz","admission_no":"1002","meal_type":"lunch","amount":0.0,"date":"2025-11-17T14:02:43.450563+03:00","status":"authorized","qr_code":"1002-lunch-2025-11-17-1763377363451","student_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T14:02:43.450079+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1002","name":"Boaz","class_name":"1","fee_balance":0.0,"payment_status":"paid","id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":null,"created_at":"2025-11-17T10:37:59.437204+03:00"}}
37983 INFO  2025-11-17 11:02:43381 ExternalApiUtil:274 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
38006 INFO  2025-11-17 11:02:43404 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1002
65229 INFO  2025-11-17 11:03:10627 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,187,192.168.8.106,10,35,12,5,11110,2,0,0
65407 INFO  2025-11-17 11:03:10805 DownloadProcess:59 - get cmd list over and begin contact:0
65694 INFO  2025-11-17 11:03:1192 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,187,192.168.8.106,10,35,12,5,11110,2,0,0
96169 INFO  2025-11-17 11:03:41567 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
96173 INFO  2025-11-17 11:03:41571 DownloadProcess:59 - get cmd list over and begin contact:0
96872 INFO  2025-11-17 11:03:42270 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
96886 INFO  2025-11-17 11:03:42284 UploadProcess:266 - update device stamp end and get stream.
96888 INFO  2025-11-17 11:03:42286 UploadProcess:323 - data:1001	2025-11-18 07:03:42	0	15	0	0	0	0	0	0	

96889 INFO  2025-11-17 11:03:42287 UploadProcess:324 - end get stream and process data
96889 INFO  2025-11-17 11:03:42287 UploadProcess:523 - begin parse op attlog
96897 INFO  2025-11-17 11:03:42295 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
96898 INFO  2025-11-17 11:03:42296 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
96899 INFO  2025-11-17 11:03:42297 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1001, User Name: boaz, Timestamp: 2025-11-18 07:03:42
96900 INFO  2025-11-17 11:03:42298 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1001
96900 INFO  2025-11-17 11:03:42298 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1001 ===
96901 INFO  2025-11-17 11:03:42299 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1001
96902 INFO  2025-11-17 11:03:42300 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1001
96902 INFO  2025-11-17 11:03:42300 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1001, Timestamp: 2025-11-18 07:03:42
96903 INFO  2025-11-17 11:03:42301 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
96903 INFO  2025-11-17 11:03:42301 UploadProcess:412 - attlog size:1
96904 INFO  2025-11-17 11:03:42302 UploadProcess:525 - end parse op attlog
96904 INFO  2025-11-17 11:03:42302 UploadProcess:327 - end process data and return msg to device
96905 INFO  2025-11-17 11:03:42303 UploadProcess:331 - return msg to device and request over OK
96902 INFO  2025-11-17 11:03:42300 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1001
96906 INFO  2025-11-17 11:03:42304 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
96907 INFO  2025-11-17 11:03:42305 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
96908 INFO  2025-11-17 11:03:42306 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
96908 INFO  2025-11-17 11:03:42306 ExternalApiUtil:168 - EXTERNAL API: User ID: 1001
96908 INFO  2025-11-17 11:03:42306 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
96909 INFO  2025-11-17 11:03:42307 ExternalApiUtil:170 - EXTERNAL API: Method: POST
96909 INFO  2025-11-17 11:03:42307 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 14:03:42 EAT 2025
96910 INFO  2025-11-17 11:03:42308 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
96912 INFO  2025-11-17 11:03:42310 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
96913 INFO  2025-11-17 11:03:42311 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1001, Formatted: 1001
96914 INFO  2025-11-17 11:03:42312 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 14:03 - Meal type determined: lunch
96914 INFO  2025-11-17 11:03:42312 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1001", "meal_type": "lunch"}
96915 INFO  2025-11-17 11:03:42313 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
96918 INFO  2025-11-17 11:03:42316 ExternalApiUtil:207 - EXTERNAL API: Request body written, getting response...
97167 INFO  2025-11-17 11:03:42565 ExternalApiUtil:210 - EXTERNAL API: Response code received: 201
97168 INFO  2025-11-17 11:03:42566 ExternalApiUtil:267 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
97169 INFO  2025-11-17 11:03:42567 ExternalApiUtil:268 - âœ… EXTERNAL API CALL SUCCESSFUL
97170 INFO  2025-11-17 11:03:42568 ExternalApiUtil:269 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
97171 INFO  2025-11-17 11:03:42569 ExternalApiUtil:270 - EXTERNAL API: Student ID: 1001 (original: 1001)
97171 INFO  2025-11-17 11:03:42569 ExternalApiUtil:271 - EXTERNAL API: HTTP Status Code: 201
97172 INFO  2025-11-17 11:03:42570 ExternalApiUtil:272 - EXTERNAL API: API Response Success: true
97172 INFO  2025-11-17 11:03:42570 ExternalApiUtil:273 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"1218fc13-8f03-45a6-b02c-ad174ac36682","student_id":"1001","student_name":"Peter","admission_no":"1001","meal_type":"lunch","amount":0.0,"date":"2025-11-17T14:03:42.760748+03:00","status":"authorized","qr_code":"1001-lunch-2025-11-17-1763377422761","student_image":"/api/uploads/students/1001.png","created_at":"2025-11-17T14:03:42.760174+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1001","name":"Peter","class_name":"12","fee_balance":0.0,"payment_status":"paid","id":"4a5093ca-992c-4c25-8994-d0109681be50","face_registered":false,"face_image":null,"created_at":"2025-11-17T10:32:08.395587+03:00"}}
97173 INFO  2025-11-17 11:03:42571 ExternalApiUtil:274 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
97179 INFO  2025-11-17 11:03:42577 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1001
126229 INFO  2025-11-17 11:04:11627 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,188,192.168.8.106,10,35,12,5,11110,2,0,0
126235 INFO  2025-11-17 11:04:11633 DownloadProcess:59 - get cmd list over and begin contact:0
126235 INFO  2025-11-17 11:04:11633 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,188,192.168.8.106,10,35,12,5,11110,2,0,0
157078 INFO  2025-11-17 11:04:42476 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
157081 INFO  2025-11-17 11:04:42479 DownloadProcess:59 - get cmd list over and begin contact:0
187027 INFO  2025-11-17 11:05:12425 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
187034 INFO  2025-11-17 11:05:12432 DownloadProcess:59 - get cmd list over and begin contact:0
218199 INFO  2025-11-17 11:05:43597 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
218202 INFO  2025-11-17 11:05:43600 DownloadProcess:59 - get cmd list over and begin contact:0
248130 INFO  2025-11-17 11:06:13528 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
248132 INFO  2025-11-17 11:06:13530 DownloadProcess:59 - get cmd list over and begin contact:0
279132 INFO  2025-11-17 11:06:44530 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
279231 INFO  2025-11-17 11:06:44629 DownloadProcess:59 - get cmd list over and begin contact:0
281810 INFO  2025-11-17 11:06:47208 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
282168 INFO  2025-11-17 11:06:47566 UploadProcess:266 - update device stamp end and get stream.
282171 INFO  2025-11-17 11:06:47569 UploadProcess:323 - data:1002	2025-11-18 07:06:46	0	15	0	0	0	0	0	0	

282203 INFO  2025-11-17 11:06:47601 UploadProcess:324 - end get stream and process data
282205 INFO  2025-11-17 11:06:47603 UploadProcess:523 - begin parse op attlog
282214 INFO  2025-11-17 11:06:47612 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
282214 INFO  2025-11-17 11:06:47612 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
282215 INFO  2025-11-17 11:06:47613 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 07:06:46
282216 INFO  2025-11-17 11:06:47614 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
282216 INFO  2025-11-17 11:06:47614 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
282219 INFO  2025-11-17 11:06:47617 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
282221 INFO  2025-11-17 11:06:47619 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
282222 INFO  2025-11-17 11:06:47620 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 07:06:46
282225 INFO  2025-11-17 11:06:47623 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
282226 INFO  2025-11-17 11:06:47624 UploadProcess:412 - attlog size:1
282226 INFO  2025-11-17 11:06:47624 UploadProcess:525 - end parse op attlog
282227 INFO  2025-11-17 11:06:47625 UploadProcess:327 - end process data and return msg to device
282228 INFO  2025-11-17 11:06:47626 UploadProcess:331 - return msg to device and request over OK
282221 INFO  2025-11-17 11:06:47619 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
282230 INFO  2025-11-17 11:06:47628 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
282230 INFO  2025-11-17 11:06:47628 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
282231 INFO  2025-11-17 11:06:47629 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
282231 INFO  2025-11-17 11:06:47629 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
282232 INFO  2025-11-17 11:06:47630 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
282232 INFO  2025-11-17 11:06:47630 ExternalApiUtil:170 - EXTERNAL API: Method: POST
282233 INFO  2025-11-17 11:06:47631 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 14:06:47 EAT 2025
282233 INFO  2025-11-17 11:06:47631 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
282234 INFO  2025-11-17 11:06:47632 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
282235 INFO  2025-11-17 11:06:47633 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
282236 INFO  2025-11-17 11:06:47634 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 14:06 - Meal type determined: lunch
282236 INFO  2025-11-17 11:06:47634 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
282237 INFO  2025-11-17 11:06:47635 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
282240 INFO  2025-11-17 11:06:47638 ExternalApiUtil:207 - EXTERNAL API: Request body written, getting response...
282584 INFO  2025-11-17 11:06:47982 ExternalApiUtil:210 - EXTERNAL API: Response code received: 201
282586 INFO  2025-11-17 11:06:47984 ExternalApiUtil:267 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
282589 INFO  2025-11-17 11:06:47987 ExternalApiUtil:268 - âœ… EXTERNAL API CALL SUCCESSFUL
282590 INFO  2025-11-17 11:06:47988 ExternalApiUtil:269 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
282591 INFO  2025-11-17 11:06:47989 ExternalApiUtil:270 - EXTERNAL API: Student ID: 1002 (original: 1002)
282592 INFO  2025-11-17 11:06:47990 ExternalApiUtil:271 - EXTERNAL API: HTTP Status Code: 201
282592 INFO  2025-11-17 11:06:47990 ExternalApiUtil:272 - EXTERNAL API: API Response Success: true
282593 INFO  2025-11-17 11:06:47991 ExternalApiUtil:273 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"3429f892-510a-44e3-93b5-e7b7e36049c4","student_id":"1002","student_name":"Boaz","admission_no":"1002","meal_type":"lunch","amount":0.0,"date":"2025-11-17T14:06:47.976135+03:00","status":"authorized","qr_code":"1002-lunch-2025-11-17-1763377607977","student_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T14:06:47.975570+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1002","name":"Boaz","class_name":"1","fee_balance":0.0,"payment_status":"paid","id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":null,"created_at":"2025-11-17T10:37:59.437204+03:00"}}
282594 INFO  2025-11-17 11:06:47992 ExternalApiUtil:274 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
282823 INFO  2025-11-17 11:06:48221 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1002
309360 INFO  2025-11-17 11:07:14758 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,189,192.168.8.106,10,35,12,5,11110,2,0,0
309365 INFO  2025-11-17 11:07:14763 DownloadProcess:59 - get cmd list over and begin contact:0
309366 INFO  2025-11-17 11:07:14764 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,189,192.168.8.106,10,35,12,5,11110,2,0,0
312411 INFO  2025-11-17 11:07:17809 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=OPERLOG&Stamp=9999
312424 INFO  2025-11-17 11:07:17822 UploadProcess:266 - update device stamp end and get stream.
312426 INFO  2025-11-17 11:07:17824 UploadProcess:323 - data:OPLOG 4	1002	2025-11-18 07:07:17	1002	0	0	0

312427 INFO  2025-11-17 11:07:17825 UploadProcess:324 - end get stream and process data
312428 INFO  2025-11-17 11:07:17826 UploadProcess:474 - begin parse op log
312488 INFO  2025-11-17 11:07:17886 UploadProcess:235 - oplog size:1
312489 INFO  2025-11-17 11:07:17887 UploadProcess:476 - end parse op log
312490 INFO  2025-11-17 11:07:17888 UploadProcess:327 - end process data and return msg to device
312491 INFO  2025-11-17 11:07:17889 UploadProcess:331 - return msg to device and request over OK
340158 INFO  2025-11-17 11:07:45556 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
340160 INFO  2025-11-17 11:07:45558 DownloadProcess:59 - get cmd list over and begin contact:0
369650 INFO  2025-11-17 11:08:1548 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=OPERLOG&Stamp=9999
369661 INFO  2025-11-17 11:08:1559 UploadProcess:266 - update device stamp end and get stream.
369663 INFO  2025-11-17 11:08:1561 UploadProcess:323 - data:OPLOG 70	0	2025-11-18 07:08:14	1003	0	0	0

369664 INFO  2025-11-17 11:08:1562 UploadProcess:324 - end get stream and process data
369664 INFO  2025-11-17 11:08:1562 UploadProcess:474 - begin parse op log
369672 INFO  2025-11-17 11:08:1570 UploadProcess:235 - oplog size:1
369673 INFO  2025-11-17 11:08:1571 UploadProcess:476 - end parse op log
369673 INFO  2025-11-17 11:08:1571 UploadProcess:327 - end process data and return msg to device
369674 INFO  2025-11-17 11:08:1572 UploadProcess:331 - return msg to device and request over OK
370271 INFO  2025-11-17 11:08:15669 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
370273 INFO  2025-11-17 11:08:15671 DownloadProcess:59 - get cmd list over and begin contact:0
384811 INFO  2025-11-17 11:08:30209 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=OPERLOG&Stamp=9999
384822 INFO  2025-11-17 11:08:30220 UploadProcess:266 - update device stamp end and get stream.
384823 INFO  2025-11-17 11:08:30221 UploadProcess:323 - data:USER PIN=1003	Name=WINSTONE	Pri=0	Passwd=9012	Card=1122334455	Grp=1	TZ=0000000100000000	Verify=-1	ViceCard=	StartDatetime=0	EndDatetime=0

384824 INFO  2025-11-17 11:08:30222 UploadProcess:324 - end get stream and process data
384825 INFO  2025-11-17 11:08:30223 UploadProcess:482 - begin parse op user
384825 INFO  2025-11-17 11:08:30223 UploadProcess:275 - user data:
USER PIN=1003	Name=WINSTONE	Pri=0	Passwd=9012	Card=1122334455	Grp=1	TZ=0000000100000000	Verify=-1	ViceCard=	StartDatetime=0	EndDatetime=0
384836 INFO  2025-11-17 11:08:30234 UploadProcess:289 - user size:USER PIN=1003	Name=WINSTONE	Pri=0	Passwd=9012	Card=1122334455	Grp=1	TZ=0000000100000000	Verify=-1	ViceCard=	StartDatetime=0	EndDatetime=0
384836 INFO  2025-11-17 11:08:30234 UploadProcess:484 - end parse op user
384837 INFO  2025-11-17 11:08:30235 UploadProcess:327 - end process data and return msg to device
384838 INFO  2025-11-17 11:08:30236 UploadProcess:331 - return msg to device and request over OK
385940 INFO  2025-11-17 11:08:31338 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=OPERLOG&Stamp=9999
385950 INFO  2025-11-17 11:08:31348 UploadProcess:266 - update device stamp end and get stream.
385952 INFO  2025-11-17 11:08:31350 UploadProcess:323 - data:OPLOG 114	0	2025-11-18 07:08:30	1003	0	0	0

385952 INFO  2025-11-17 11:08:31350 UploadProcess:324 - end get stream and process data
385953 INFO  2025-11-17 11:08:31351 UploadProcess:474 - begin parse op log
385960 INFO  2025-11-17 11:08:31358 UploadProcess:235 - oplog size:1
385960 INFO  2025-11-17 11:08:31358 UploadProcess:476 - end parse op log
385961 INFO  2025-11-17 11:08:31359 UploadProcess:327 - end process data and return msg to device
385964 INFO  2025-11-17 11:08:31362 UploadProcess:331 - return msg to device and request over OK
386985 INFO  2025-11-17 11:08:32383 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=OPERLOG&Stamp=9999
386994 INFO  2025-11-17 11:08:32392 UploadProcess:266 - update device stamp end and get stream.
386996 INFO  2025-11-17 11:08:32394 UploadProcess:323 - data:BIOPHOTO PIN=1003	FileName=1003.jpg	Type=9	Size=12776	Content=/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAEsASwDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwDf2jOaULg4HSn7QaApArrsY3GoMDpT1GTTgPl6ZNOUewpMpCrViOQqfWoAMHnkVLjJGOBU2Hc0IpwOmRntWja3LYwOcVjRqeCe1XYTj7vGaQzprO6G35uK00YOoIrl4ZGwBkcd627OUsB82QKzkikX6KQHIyKWoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAPJAykAggg+lPAyK4G01a6tiuyTIz0Nbdp4mHSaPB9RXUpGTi0dKACKUKAR1qpb6nbXC/JIpJ7VcUgjIORQA4AbgKmBXb0qJTj8akHT3oBFlMc4Pap0b1xkDiqanHFSxyEHHUVJSZqwsGx1zWlayMrE5/+tWJFKARk4FadvKuBtapaKRvwybkGetTVRtn5A4xV4c1kxhRRRSAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA+WlUDGDkU9c9e3tVYTKCM8VajcHPpWpViVJGU5QmtK01a6h6SEj0NZgIJ7VIqjHUn1oTDkudVa+IUKr5y4PciteG+guBlHGa4MLjpzUsTvG25WOaakS6Z6ErDbwRipF68fjXH2mq3EWAWyPetu21mJsB+CafMS4tG5Gfl61Zgcr3qhDcRyY2uOauw8gZOT7UCNe0umBUtyK3YJ1detczCc49a0oZCCMHr1qGhpm3RVKGfDYOTVtWDDioasUOooopAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQB8hLL0y1WEuMKAKqMhAwBUaswXHOP1ra2g1I14rtlGSeKtw3at14B4xWGkvy4I71OkwHRqktM6JJUbPzVOmG6Vz0c7K2RV2G+MfUDrSLNoDAq1EM4rLhvEkAGcH3rQhm4xkGpuOxp27umGViMVu2N/ICA/INYFu4z9a17XsafNYORM6m2kEyDZ1rQSKaPBIP1rM0sbTn07V18KjyV46ijnMZwSMuJiGOc1O99FbxF5HCgdcmjVZrfT7N7mUAIOOOua8u1PXJL64f5iqZ4Ge1DdybHb3njGJDttx07nvVFvFt1KflO36VwpnyQCaljuDx8xFIZ3Ca9M8odnJb0rUtNcZ2AbnNcBHcEMMGtO3vCpyDSEeixX8Um3nBNWQ6kZDAiuATUirLhjWimrkIRv6Clcdjr800yIvVgK5dNXLL9/GaqXGrEHhifpRcLHXtdQr1cVIkiSDKMGHtXASaqxyN2BUA1eSI/u5GBHoaYHpFFc1pXiqCYLDdsFfoH9frXSAhgCDkHoaBC0UUUAFFFFABRRRQAUUUUAFFFFABRRRQB8n3Gn3NqcSwMMe1VTH0+X869kktIphh0BHuKx7vwpY3GSsexvVa6WjG55k8AxuHT2pvkleV712V34PuI1JgYOvp3rDudLu7ZsSQOAO+KlrUtSMpCyHkY96nEpB/Gnsh7jv0NIYxwBxipaKUieGXJUngmrsNw6H5W5zWakbAevFSoWUgg4IqbGimb9vqTpjdzW9YarESFLYriUmIb5uKuRTgEAn8aiSNVM9e0adZyqqwP0rrp72HS9ONzdPtjQdf6V4TZatdWUgeCZlx+Naer+Kr7VrSO3nm/dpyQOMmhIio7l/wAQ+J7nW5yM7LdT8kYP6n1Nc8H5/rVcOWb2xUyIeKZkTK2SDUobAzUIHTHbrUjDd0pAizFJ054HrVuKcY61nKAO/WpgQBx07UDL63JzjP41aW5IHJrID7cc1MZPlHNIDUF0evaoJLs5+9VRZDjqTUMshzSAstcknGahe4wcg81WLkmon3DPNMCwbnBJBNdj4X8WOrraXcgMWMIx7V567MKQXDLjacYoEe/pOjLnPBoMwBxXC+EvEBvLQ200n75Ome4rpftG05qrBc1BMtOEqEcNWQ1wzcUsdwfWnYVzZorNS8IXk5qVL4cAqfrSsFy7RUK3KMQM9akV1boc0hjqKAQelGaACiiigDzCnCjr2pw6e1dbMRNoqOS2jkGGQEe4qcdBSgUmhGFeeG7G6B/d7D6rWDd+D5o8m2YMvoa7sLgn3p3lqetTYdzyi40i7tWO+JgKqMhHVcHvXr8lvHICGAI9CKzLrw7Y3GSYwrHuKlopSPNAuCD1qTZj5u1dVdeFQj/ujnPArEutJvLViGiOwd6lotMgRzGMk9RgZoEjMe5PeonYfdAJ/pUtlGWlyegpDNC2QBeatj5RwahTaD8oqbnvUgOB96Nx6Z/OkpGPP1qWBMrbTmnZGeahzz1p+emOlAEpOMYNOD8AVASfWnrgA880hlgSY4BprtwM1HuOaRmzQMN4Bzjin5BXNQk5z3FKGwCKQhjQbyeapzxMjHHSrysOgOaVkWRMHr3qkDRBpOoPp9/HMjcA/N9K9Str1bqBJFOQwBrx2UNFNXdeEtUE1p9mkI3x/d9xVxM2deZAx9KAxyT2qDJIx+tGfkPOasm5OZBt60qysAOaq+YBzSF+dxbNFguXhcsMjNTRXbIuc9ay95bvQsxAK9PrSsO5vi/AUc1Ol2rLXNrKR0P4VYW4YAc4PtSsHMdGsqle1P3D1rnor0oeSeauLfDHJANKxSkcQKetNFOrqMhw6U8UgpwqQFxk08L0pAfSngUgAx/LTDEe4q0g6VMqg9RSAymiLTpx0zWB4pu47ayMOP3knT6V3jWqfYhLjkuRn2ryXxXc/aNXkVGyifKCKh6lIwkUyOcDmtBFEaDaKrQJtGT3q3kEACpNCSJjnmplc4zjmoE9qm6jIFQ9xoerAsSfypu7LHngVEG6kYNN3FTnNFgLYYE57U7cMVWV9wHHHenluM8YxSESlvxp4yO1Vgx4qVZPxwKQybJ7dKazcjmmB8Dk0FgO340gHZxzQSce1Mzn3pQMYzQMF68VMPrzUQ71Ip46U7gVbyPcOME0mkXzWF+knYMAwzjirEw+Xdxj0rLuBtYMB3ppkNHrsFylxErIQQRkYp7DqK8103VrmGMFJD8vQZrdtfFRXidSc960U0S4s6sjP0pp+7Wbb65a3AGJMH0NXBKsgG1gRVXI2JN3PFIT3pvPbkU7qooFcdnj3pN5zjJ4pAPlwaNo4NNhclDngACnedj0qEnHPenK6kcjmkVcyBmnL+lNxT1rcQ8c08UwVItJiHKpFTKKjFTKKQEiDFTKp9aYgqdBxipY0S6lJ9m0NGBx8jtXhl5I0l3IepLZr2nxdMbXRtufuwgfjXi6JvuWP1OaiJfUljTAUjr3qXByDikHAxjmn47fzqSh6YGB3pzfLx0FNXaGpHYetICN3yTim7sjFI2c9RzSA4PI5NJjJVJHTin7uM55qMHjA6U0knA4NJ7ATZON3b0p2eckflUOcYHBFPDACkMl3DGDTicAc/jUKt8wz1H5U4jJFSwJM89akGGOark9cD8amTO3BoYyVR71Kqj1qNDuPHapwoIzSBEFwuFwOaz5VyKv3BAOPaqhBz2p7CZRtpDHOF7E4rRYcZFZkxaOcH0qX7Zjg0ykWC5B4JFWLfVbu2OUmYj0Jqgs6sOcUFhk4Ip3E4nVWniwqQk6Z9xW7Z67ZXGMTKCexrzYnkEHNAdl5yR75q1Jmbgj1xJFkTKsCPY1II9y9a8rttavbQjZMdvoTW/ZeMyFAuV/EVXMjNxZ2u3b2FRbGPIFULXXrO6XCyqCexNXRMrDIII9apEmaKkFM6U8Cthj17VKBUa81Iv60gJF6VKtMUZqVRxSAkWrtqoeRVx944qogrU01FaZcnGDke9Q9io7mB8QJcadOvGPlFeS2+TMcjBr1Hx++6wm68SAV5jZpuum56DJoghSZI42uaUEbhtqSZCTwMGowgHWpZcXoPznqaYzdaceuMjpxUEkmW68VDKEblRzk0Ac8fSo2bY2Cfxppl2tx24FSMtDaRzwKQgAE1CJcYUkU7eCe4oEPBPII+lO46HpSb16Dr60m7nPYc0hjxkNzUpOMc81ADhv8KlJB/xqWCJBg/jTwWHFQgkZAqRCxINS2UWYTg5z9asAjHFVIyCeuKsh8DGetNAVrjmQcGgR/LnFOcBn71YwPLzijoI5/UBiYZ61nPIVY+laupITMnHHpWfKh3kFcfhWiV0JysRGX5eppyz4xz2pvlbjw2PrULRt7fhStYfMXFue1TCdTkZ4rK3kdeaVJSOSaB3NUMGHvR27cVnm4HBDVKtzkDn64oEy4GZSGVip9RVpNYvo1CrM+Pc1niYHBB60u9O9BPKkepAc+1SDGcio1PFPXsMV2MxJUxUgHGcVGtSrSESqMCp16VEo55qZRQBIgOa19MQeYG7qM1looArT0/5UlcfwpWcti47nM+KYDeadcgDOct+XNea2CfNIT9DXpfiaRotEnkVscgHHoa8/soh5bN/ePWqiRLYbJHuGP1qhO4iyBjNbaxZHTmsm+s2Ri3WnKAQmY8k7kklsCozdkIMmlnQAnPAqqxAU/wBKwaNkTG8G/k0/zyzZ9Kz3BJyRgdMmgTEHvn2qCkafmAjJ79OackoOSTx/Os0XB4wfXPFSRTsSeBn9KOgGmso4xn/GniXByx496zRP0U9M/lT1dsZByD0NTcGaO8biMnHWnGUDANUPO59OOaRrk5AAHtTewzR+1AZJpyXYxweayJZ8jDEA460RyMRnP41LQXNr7WccVNFegnk8msdM5J9fSp42yeetGwXN2M7sOB1qbII4rOs5yMA9DV8NlvahiKU0Bn1OCLJ5xwK7aTwzZXNsu6MBtvUCsLSLLz9cjfsgzXfqoAAxWsdjKT1OAu/BBALRNkehrnr3w7eWx5jNewlc1DJbJICGUGqsLmZ4XLZvGcOmKrvFjI6CvaLvw9Z3Od0IBPcCuc1DwQjgmFiD2FKw1I81aNlHHNMy4xntXU3nhK+thkIWGeo5rGn0+eHh42A9xRYpTKiTkOKk+1H1FMa3x2wajMAzyufxpNBzHsimpUb1qBTg5BqQNmukgsA96mBquD2qVTjmlcRaU55qZTxVVGqwhFK4iyp4FalqSmn3Dnvx/n86yEOTWr9zR+f43/z/ACqZFROa8U/N4dvB/sg/+PCuGs1xaR/nXoGswfatHu4h1MRI/Dn+lcKi+XaIB2FXAzmRvcCNwpOKjvJ4PJyzjdWfdMzPySD/ADqjLbyS8FuapyViVB3KF9OvmHaMmqMlwUKsRirdxZyW0gdZMt6HpVG6YyLgJyD+FYS7nShr3BPRTj6VEZH2kk/nTUD5UlST0JNWLhw6gKmNox9ahjuQq5XATkmpkkLFuMEcHFRqo8olR8xPSp7eP5ehGfQVIyZOeDk5PYVKEYDgEj9asRQo2M9cdqtNDhBtyD7VMhmSzbX4PXn6U13AIB4AqeaLdI3r9OKpup8wcgEdaFsFxzug5zz61ag2YJ3dfWqNxGI1VuzHH40kILNtGc56etMXU2oiCevBq9FEGGRg1kyRPDGrq2Wz0FWLe6mU/MjYzSsUaifK4Gec1owtvHtWWp8xdwFaVoPkFKwjpfDaBbl5COwANdYK5/QID9n3471vgcVqjCW48UnGKVcYpKsQ2mlKdRQIhaJW4wKpXGjWtwCJIlOR6VpdaMD1osFzkrzwXaSqTFlT9KwpvA0wkO05Feld+vFN289BRYOZnLR3ELYw4zU6sMZBrm1J65qxHNIvRyPxrflF7RHRj1PJqVGFYUd9KvDEGrseojgMtS00VzJmoD3qwjccVnx3kT4+bn3q2jhuhFSBcjbPWugkh83ToEX+6H5+n/165yInIra1VjElvGrEMqc4/D/Cpe5a2M9sLkYB7YNcFcwmPfH/AHWIrt3ck5JrldSAe4lZehOa0h1MpM5SdTvJz0qjI5U4XOccVqXSgEj9KzJgN3Q1m3Y1WxmXRd8ktz2FUHGGw3ODzWqUUv68dM1C1sNxxxn2qXsUZgfGcDHv6Gnjv7jqO9WmslLYx79etOEHUZ6HrUXGU2Riw4zgcHNXIIHccDIx+VTw2Qd1BPXoK2EiSOJQvHapbsikilb2xDDPFXXtyfuj8aEAMozkHtWnEo6HFRYtLQ5ueM7yrZGR2qi8AD/MPxrsb2wjcblHT0rHntFAIx9KrmRDRhSxKylf4e+aI4FRgUHNXZ7RuSBkdwKRbZl4247UbiRPbICw3DJ65Nahjjdfu8/Ss+OEoMgc/Wr0WcAUr2GPSEbgBWlDHtHSoIYzkce+auIOQBQtWJna6PHs06LjqM1oY5zVa0Qx2kS/7IFWAecZrZGDF49aQc0fWiqEIevtRmkOKMUCF6igCl7UoWmIbinDApVGDzSMvPGaAZ5qoP4U9aApxjFSIARg9a6jG45BnGamAwKiwR9KmRelJoaY9AQR6VbjJGOTVZR3qwjZxU2GmaenSyPqEEechnUfrW34huxDqKpj/lmP5msjQE83WYPYk/kM1N4hlMusS4/gAX9KzteRte0BhvUKHsawblgzvirtZ8gIkYHvzxVwVmZyldGHeLucnHWs2eMYP0xWxdqVJIFY10457HvWVRam0HoVGjBbBxnHX0qMqNpOD+NDz4YgD8qie4+Uc4I7Vn0NgKjAyee9KcbwM8+lU5LsMOwJqASyXE4SLoD8xqGgR0duija23kDrUxJyDg5xiobUsqAN1x2q7tXacMOKRRHHz1HTvVyNvmyeP61BHEeBkfjVpIt2OOlSy0SgtIGBqncp19farw/dqTg9O9Yms3jwFGUcNUpXFIa4+RgR0pBGSgGcH2qBLveuRVpHUkY6VXwsgEj4HHParUMWcZH41FH8xOD1q3EmWGM0nuMsIoAGM4q1Am+VAOpIqLaVQVbsEaW7jVepNVFdSJ7HZQuCoAPSpRjNV4I/LXk8mpRya2RgSZGKOopoPbFBpiHCjoT2oHFKM44pgKBx7U5RQvIpwPOKBChfyp2B604D8qCOeKAPNNvFKg5966h9Ktnb7u3HpUL6GvWOTn3rqMbGFg8EVIo5rTk0S4RcqA30NQNp9zEOYm/KgViuFJ78VMoPFJ5Lr95T9KcowaQHQ+FYt2ps/wDcQn+lZ96/mXsznnLk/rWt4ZBSK8m/uJ/if6VhMSWJ71mlqzWT91IQ1QlwbgZPar/Xisy7UpdqQcA9quO5myjfghDxz7VzF+5DNjGK6i9f5enNchqjZlIGAamaNaTM9p8NycGqs1wSxOfpTJXO8n37VDkFsDn61zHRuI8m9gc/TFdLo0EEdm00u0Fu2a5oRlQ+Mcc/Snm4kjiChzg9akqLsdWLiJeh49qcl8rfLxgdc1yEd46DLEtkcVZW9fbnd6cUrF3OuivUIGOQOpzV2C+Vmx0rj1vfLGePzqcX5UZV8Aj8qiWxSZ24mjkBUY5FZWr6d5lg7ckryMVzq6xOjHYDn17VoDVppbNkc4LDGKUQbuYSSNFIOTgdPar8FyXX7+CKz7nKZ2qB70kbgL8uSPWraM7nQwXQXAzknrWpby4OSa5e3nG7j61rWs7YPP1FSwTOhMwYDFXtOkKTh1BJAzWFDKGx/Kt/SJhHLhlzu4FVHYiTOqhcvErMMEjmpQeKgVuAKfvwK0RiSBsU7ORUQbNKCAeOtO4EgOalUce1Qgg9ualVye1MB4PA/Wng8+lMU7gABUixE0gHr03UoRiM/wBKlSLpnpUwUgYANAWMEKc09RjtUgXPanKgxXYZB2FSZHHHHegIMVFczpbIWKsRjsM1LGkPligfh0X8qrnT7GXphT7GvPdb8T3NxeyGJmSJThV6VhPr10ePNdT6qxFRcuy6nudppi2um3cUb5Eq4BP0/wDr1zsukXUWTs3D1BrH8K+P4xaLpuoljK7/ACTk8Y9DXVT67aIpxIHI7L3qYu17jnG+xgvbTRt8yMPwrJvoXFwsu7AHQVp6p4plgjMwjXyc4J6kVxWu+KROFZJFGGycU/aK5DpMm1GYq59PWuV1A5dmBye1WtQ1PzFBUklhkCst5xKFz1pzdxwVilKfnJIBPcYpBheWH4VJKVUnccEdTVWSVgpwfxxXMzpQ4sPMBAyGHbvRKo6dRjmobY5fleK02iiYYZgOO1AIziflBzTIyxBYDGe1XBDErBSwx2IqVbFHXMb5/wAKRSKSkllyST7dqsxncwAyMDOKVrNjhSpz61dgtdpUfxdvepa0GS28e5MqxH1FSsD95jx0qytu68hTx1qKQMnAGQTzxSQFK5TI2+tV1Qx5C9KmnnEcnBwPcVIF3p7nt7U79CSOEDO7qetaUT8g4I9aqwwhGL7fyqxHw2McfypgbNkQxX68102nXAjXO3oetc9p6A7RwFx1roEQKoA6Y61cI3OerPlNIaq3ZakXVAeqmsjBx1xUmK15EYqozbj1GFh97H1qwlwjDgiucKFiMVaiil45IFS42NIyubolXdjPFWIstnGMVz6xysSQxq5bvPAMkk/Ws7m/Ib8UYq2iYArNhvFZBuOM1eivIjgBgSKZFi4E460/Z70xJFK5Jp3mRno4oGZAT0qTZx0qcR56U9INzCulyMLFfYeKgv2FvYzyn+FCf0rZ+zjbwK5rxdObTSimceacH6VPNctRszyG+yzsT3OT9ax5Dk1q37fPjGBWRMcZI4oB7DDc/KACQy9K0DrFwYUkFwwKjoDWJKx6nrUPmMpx+NZyZaOxtNdOo6dPaXJDOEJD+tcZKTlvmJAbv3q/Zq0dnNcDuNoIFSWOmm4xLKMJngepqHJLc0tzFQMzwKeePWocsHB7Hk1u3toiQAKuAKxJF2nJ7ccd6XNcHGw2RtxyMkHsapvkkgjknjFWmxg9R6mol6HIGevNSmUVlWQEbMkZ5q4I7kKZCh2ikiAyWxx6VtrLGItuQVPXiqBGCJ95+7yM5qxBdOsnHQdatyaWs5Iifac01tJuIl+YZIPUUwRI93uVW6eoponKkMTyBSf2dcgKAuc1ai0SW5IMjFQP4fWpa0KFTVGDff8A/r1JLq21f3kZIbpx1rVsdAtowC67jjmk1C0gVQUjBxwBUX2GcjczGa4zwAT0rRtNxjUcn0qte2wilLYI7AetT2pKYwcfSmZo1I1HlZOOaIhhz7mo2c7B61PbY8zLDGPyosNmlJOtnag/xHFbWlX8d5bhFPzrXI3Vwk12kTsu1OvNaVmFjdWgYow7561rB2OepHmOs2biPWrKW7NyRim2bCWJJMDnqK0FxitrnNykUcCgdKtwxAsKYtXbSMu4Axj3qWzWO5oaZpAmUu2AvrWq+i2rJjBz61JZyQwWyRlxmpJr6CJCxcHHpWB3dDlNQAjJjUYA4rGeRo2yrEGtLULlZZCwrIlfNbJHHJ6lmDV7h/3O88d6vJdTFc72/OueEhh3Mi/N2rOfVL8OQH7+lRYq56yoBPXrViHAbnpUKRnjFSHI4q3qSnbUu8Yrz/4hzKTbxqwJAJx6V2TSsBivL/HV0W1YjPRQKUY2NXPmOJvssx9qxZ2wSefoK0LqU7jk1mSnHQjJ71oyOpVcqRwKjz26e1Pc+1EIy4yPzrKWxpFHVeHtDn1mC3sohgySbmbHRe5rtPEfhKPSLCJ7diyr8rVqfDLTol0kXIQ+YwwPYV1esWP23TZ4D95lI/GuOc3zHZGCSseGXgXy8HkgVz1yoD5GCMcd63ddjezmlicYKkg5rnIm81CWPNaQ0RjJ9CEk7yuMehqJgV3KT1H5Uru0b54B/nSs6N83IJPP1p7ECxnCgEfKPen73V+GwmOagHfb070jbgvQ59BVDWxfW4ZHB545wK1V1TCAEE4A4rmkY7MqTkD8adHcSKpPp1zTY0dUdT+QY2gjnp0ppvZTKCCMY4ArnvtjgKQvB4/+vTvOl3cnHoQaQ0dXHqPlxnJ+YiqUlyZmBdiRWYkxyQCSMfnUjSfKoGB2qRkd5hpFIG70NSQ7FBYEj60zr2AFNLbQQpDDpRuQWY5N5J3Z56dqsy3It7ZnB5xwPWqBmWNcNgECs+a5e5Zs8YPANUlcUmXNO2XVzi4Y7j39TXSR6bJCA0Ux46A1yVsWRl2nBPQ45rooLi8WNWkBaPviqRmdhoV8zsbaXiTr9a6Vcha4nQp4zqNvIDwrjP0r1RLCCVR8v5VtFnPJWZirjODVhbny1wvFap0NGHyuQaqzeH7nH7tlP40aBr0IUu2XuabJdF1IJyKa2lX0fWFj7iq7Qzxkh42B9xT5UyudohnGaqshzitBoiVGRzUZhJ7U7GVzMkjOfrUYiUf8s/0rtNM0O3uYN8wJJFWz4Ws+xcfjUcyW5qqcmro0lIpjDJ60A0hbvQDIpATmvKfHrFNZOQB8or1OSZUBLMK81+IcAlEV2oGSNp5qiop7nnV4xDg9eeaz5WLjAxVqc/KTkk+naqLkjkfypsdiNmOOMfhTrcbmUEc5pjDI6cDsT1pqu8ZDKSM9qwk3c1ie1eCvEkOn6AFIUsmVC+tdtpGtW+swtIuBIvDpmvnWxu5DpciRudwOSAe1bnhTxBcWF18kpDdCCetcTT3OuM0zY+LNgtnfxTqMeeM47ZFeZI5D546V6R8Rdaj1nQbKQ4WaKUq49iP/AK1eXq4RgSRg962hrExl8RYuAGPB/wD11W34B3HA7etPlJ35XlagYjnAy1WiSTz/AJwAQOM1Kc4J6g9DWdu+YAAVZWXGMNkrzg9qYrlwHaNuB6GkCAghSCe4qASFwrAH5vTtzU6PgcAnPHFO9gWpNHGSFw3vU+wEgj9ahExwoCjA689an84BePbj1qehY8jGGweR1psjkKoKjdnk0ye7C5ztAA4rPnuyMEEHjp71DTvoS9C9LOVGASAeuO1RLcIiEk5NZ7TszZzuHXpT0jLx9R9CeaqPYELPM87ZOQo9KdEpZ+nbrQsb7SNvy9aliURrnocA+xrVIhksZYMCPpW/pl8UQxsd2exFYKOrsCcYJzmrqZQq6nOO9D8hHRKwt5A8fAJ5x2r0HS9bnhSNjKXQgfKRXmFpc+ZEFY5JrsbIhbJHaTtwM9KL6iSueq6VfR6hb+YnUcEelaqrxXmXhvU3S5k8piFB5967621eCUBXO1v0obKhGxo4FIY0PVQaUEEZByDS1JrYryWNrJ96FD+FVzo1oTwhH41oUU+ZkunF7ojhhSCMIgwoqSiikUlY5b+2GLHgYPSq0mqysSobFYkLsF4PenMSznNbEKEdya41Ng5AYnA5NYniBDfaU5HzMnzAVak+VmI70xVDRvGeVKng0noNrQ8qulKyHH3T6VSmyuBjI7mtq+gSO/njXO0E4BNY2SSVzwBVGViOJDLOqDoxq7q0MUFlFsUrIDgkiqcEht7iF0xksOvPU4pdbmka6CsxIHTPas5IpbFWyvmtLgH70ZOHA9DWpLL9jvI7mI5jzz71z79Rz3rStR5mnzK5LBQCue1YNamkWdPqMCanphaFg38XB6GuKk+RwDySc9Kv6VqFzaXqxRyfu2wCp5FWNbtYo7osoxvAJprsOS6mOxcNx+lIwO3OPxxT3GJR7cU1uQfzqkSV5cjkcZ44FRlmVTk81M3IHuKZKoDd/WkxAk20DvVhbjCZB4x0NVFG5CT2JApCSEAB4yKrcaL5udn8XfPTg0171jIDzjFUs5k29sZpQMrg9BQFySadnfknmoC2GBJpP+WnIzSFRux6ikIlLKCSDx61LF85IDZx15qBhj8qch44457UdQNWCbbxIcKOBzVhoQ/K8jGevFUH4tlcdWODVqzkYymMn5SMfSq6kMkSM5AxjBzz3q7asEDKRggdOuagJ+QcDjH9KN7CbZnjGaTEXYn8ubdxz3FdVYytJYqAMgHGc1xuTgfWuh024k+ySLkYGDVMFudn4cB8lmAA+Y810QlAXcMg1zuhMRYrjjvWurHaTml1NuhtWWqzwEfOSvoelasfiGPOJY8e6muUVyyAnrioy7eWWzzTsHQ76HUrSYDbMoJ7NxVsEEZBrzqKRiCc1r2N1MhyshBo5Q5jrqKqWly83D447gVbqSj/2Q==

386998 INFO  2025-11-17 11:08:32396 UploadProcess:324 - end get stream and process data
386998 INFO  2025-11-17 11:08:32396 UploadProcess:511 - begin parse biophoto
387024 INFO  2025-11-17 11:08:32422 UploadProcess:159 - userpic size:1
387024 INFO  2025-11-17 11:08:32422 UploadProcess:513 - end parse biophoto
387025 INFO  2025-11-17 11:08:32423 UploadProcess:327 - end process data and return msg to device
387026 INFO  2025-11-17 11:08:32424 UploadProcess:331 - return msg to device and request over OK
388050 INFO  2025-11-17 11:08:33448 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=OPERLOG&Stamp=9999
388132 INFO  2025-11-17 11:08:33530 UploadProcess:266 - update device stamp end and get stream.
388136 INFO  2025-11-17 11:08:33534 UploadProcess:323 - data:OPLOG 101	0	2025-11-18 07:08:30	1003	0	0	0

388139 INFO  2025-11-17 11:08:33537 UploadProcess:324 - end get stream and process data
388139 INFO  2025-11-17 11:08:33537 UploadProcess:474 - begin parse op log
388158 INFO  2025-11-17 11:08:33556 UploadProcess:235 - oplog size:1
388158 INFO  2025-11-17 11:08:33556 UploadProcess:476 - end parse op log
388159 INFO  2025-11-17 11:08:33557 UploadProcess:327 - end process data and return msg to device
388160 INFO  2025-11-17 11:08:33558 UploadProcess:331 - return msg to device and request over OK
389212 INFO  2025-11-17 11:08:34610 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=BIODATA&Stamp=9999
389226 INFO  2025-11-17 11:08:34624 UploadProcess:266 - update device stamp end and get stream.
389230 INFO  2025-11-17 11:08:34628 UploadProcess:323 - data:BIODATA Pin=1003	No=0	Index=0	Valid=1	Duress=0	Type=9	MajorVer=35	MinorVer=4	Format=0	Tmp=apUBEDACjS8JACMEAeZ2AHpqbmUXCx4nKCkqKywvLi8wMTIzNDU2Nzg5Ojs8PT2FwhaW1jTGPUv9EconjfLMfScWET4jlsUjJXHHn9zHzG44YRTmwhmm9zh0zvz+6AdS4B4QMT4BAjbhoNLsgCDHEk7i5x8NBhzrALYTyRkYoDTadOuNil28F6g7DRobAe88ASGVP9IqKUHD3yE08/U21T0m2uSCzRgR7oR5LjE77T2Lvledh0NburVeW8X8gV5tU53BdYGINbKyqk2aVlKrULubKo5iyZGCQdhEsqphOn2jiYvIQH6edoJ3eaHGlYZvo0s9g0sFlsaZY3GMdKF9n9T/LCWrqGhdhpxqfYWaCs2zSnCleFudV6FxuI+hvqe9vkx7ApB5jLbkolF0t6pMqRrv7uPqNDTyyj3wgDDem/MDCcjPHMjf1A+UU/452dDrDMwd3gcEoBwHMTMEFgvh/yPzAC71DaDa0gJRv00TCyLxF9oPNBAZEfgaF7RSHylK/fzr77ISnBw9QTsbxCgQHcnWzzX82sWV1SzVwCQpLsPz7sL6bF7UzDcdLgJUeuAtiFx7W6VDlOAYVolPTm63qr+8ULR0cKGnvoIfQzWFrEO2aGh5erd+sXeyZbizp25IuEF3amlmWZW3MJJtgoqgcX5IhZmbWnJ7enCUQjtkUZO7aF+Ee25vwau+qEKIIoSOWueWe2cScwZAULFatVZHitJsoHzekJmEXbFxol0ekIk=

389231 INFO  2025-11-17 11:08:34629 UploadProcess:324 - end get stream and process data
389231 INFO  2025-11-17 11:08:34629 UploadProcess:517 - begin parse op fp
389232 INFO  2025-11-17 11:08:34630 UploadProcess:423 - finger data:
BIODATA Pin=1003	No=0	Index=0	Valid=1	Duress=0	Type=9	MajorVer=35	MinorVer=4	Format=0	Tmp=apUBEDACjS8JACMEAeZ2AHpqbmUXCx4nKCkqKywvLi8wMTIzNDU2Nzg5Ojs8PT2FwhaW1jTGPUv9EconjfLMfScWET4jlsUjJXHHn9zHzG44YRTmwhmm9zh0zvz+6AdS4B4QMT4BAjbhoNLsgCDHEk7i5x8NBhzrALYTyRkYoDTadOuNil28F6g7DRobAe88ASGVP9IqKUHD3yE08/U21T0m2uSCzRgR7oR5LjE77T2Lvledh0NburVeW8X8gV5tU53BdYGINbKyqk2aVlKrULubKo5iyZGCQdhEsqphOn2jiYvIQH6edoJ3eaHGlYZvo0s9g0sFlsaZY3GMdKF9n9T/LCWrqGhdhpxqfYWaCs2zSnCleFudV6FxuI+hvqe9vkx7ApB5jLbkolF0t6pMqRrv7uPqNDTyyj3wgDDem/MDCcjPHMjf1A+UU/452dDrDMwd3gcEoBwHMTMEFgvh/yPzAC71DaDa0gJRv00TCyLxF9oPNBAZEfgaF7RSHylK/fzr77ISnBw9QTsbxCgQHcnWzzX82sWV1SzVwCQpLsPz7sL6bF7UzDcdLgJUeuAtiFx7W6VDlOAYVolPTm63qr+8ULR0cKGnvoIfQzWFrEO2aGh5erd+sXeyZbizp25IuEF3amlmWZW3MJJtgoqgcX5IhZmbWnJ7enCUQjtkUZO7aF+Ee25vwau+qEKIIoSOWueWe2cScwZAULFatVZHitJsoHzekJmEXbFxol0ekIk=
389249 INFO  2025-11-17 11:08:34647 UploadProcess:444 - fp size:1
389250 INFO  2025-11-17 11:08:34648 UploadProcess:519 - end parse op fp
389250 INFO  2025-11-17 11:08:34648 UploadProcess:327 - end process data and return msg to device
389251 INFO  2025-11-17 11:08:34649 UploadProcess:331 - return msg to device and request over OK
392281 INFO  2025-11-17 11:08:37679 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
392301 INFO  2025-11-17 11:08:37699 UploadProcess:266 - update device stamp end and get stream.
392302 INFO  2025-11-17 11:08:37700 UploadProcess:323 - data:1003	2025-11-18 07:08:36	0	15	0	0	0	0	0	0	

392303 INFO  2025-11-17 11:08:37701 UploadProcess:324 - end get stream and process data
392304 INFO  2025-11-17 11:08:37702 UploadProcess:523 - begin parse op attlog
392325 INFO  2025-11-17 11:08:37723 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
392326 INFO  2025-11-17 11:08:37724 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
392326 INFO  2025-11-17 11:08:37724 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1003, User Name: WINSTONE, Timestamp: 2025-11-18 07:08:36
392327 INFO  2025-11-17 11:08:37725 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1003
392327 INFO  2025-11-17 11:08:37725 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1003 ===
392328 INFO  2025-11-17 11:08:37726 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1003
392329 INFO  2025-11-17 11:08:37727 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1003
392330 INFO  2025-11-17 11:08:37728 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1003, Timestamp: 2025-11-18 07:08:36
392331 INFO  2025-11-17 11:08:37729 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
392332 INFO  2025-11-17 11:08:37730 UploadProcess:412 - attlog size:1
392333 INFO  2025-11-17 11:08:37731 UploadProcess:525 - end parse op attlog
392333 INFO  2025-11-17 11:08:37731 UploadProcess:327 - end process data and return msg to device
392330 INFO  2025-11-17 11:08:37728 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1003
392334 INFO  2025-11-17 11:08:37732 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
392334 INFO  2025-11-17 11:08:37732 UploadProcess:331 - return msg to device and request over OK
392335 INFO  2025-11-17 11:08:37733 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
392336 INFO  2025-11-17 11:08:37734 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
392337 INFO  2025-11-17 11:08:37735 ExternalApiUtil:168 - EXTERNAL API: User ID: 1003
392337 INFO  2025-11-17 11:08:37735 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
392337 INFO  2025-11-17 11:08:37735 ExternalApiUtil:170 - EXTERNAL API: Method: POST
392338 INFO  2025-11-17 11:08:37736 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 14:08:37 EAT 2025
392338 INFO  2025-11-17 11:08:37736 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
392339 INFO  2025-11-17 11:08:37737 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
392340 INFO  2025-11-17 11:08:37738 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1003, Formatted: 1003
392340 INFO  2025-11-17 11:08:37738 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 14:08 - Meal type determined: lunch
392341 INFO  2025-11-17 11:08:37739 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1003", "meal_type": "lunch"}
392342 INFO  2025-11-17 11:08:37740 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
392345 INFO  2025-11-17 11:08:37743 ExternalApiUtil:207 - EXTERNAL API: Request body written, getting response...
392452 INFO  2025-11-17 11:08:37850 ExternalApiUtil:210 - EXTERNAL API: Response code received: 201
392453 WARN  2025-11-17 11:08:37851 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
392455 WARN  2025-11-17 11:08:37853 ExternalApiUtil:281 - âš ï¸  EXTERNAL API CALL FAILED OR RETURNED ERROR
392455 WARN  2025-11-17 11:08:37853 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
392456 WARN  2025-11-17 11:08:37854 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1003 (original: 1003)
392456 WARN  2025-11-17 11:08:37854 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 201 (OK)
392457 WARN  2025-11-17 11:08:37855 ExternalApiUtil:285 - EXTERNAL API: API Response Success: false
392457 WARN  2025-11-17 11:08:37855 ExternalApiUtil:287 - EXTERNAL API: Error Reason: Student has unpaid fees. Please update payment status before generating meal card.
392458 WARN  2025-11-17 11:08:37856 ExternalApiUtil:289 - EXTERNAL API: Response Body: {"success":false,"meal_card":null,"eligible":false,"reason":"Student has unpaid fees. Please update payment status before generating meal card.","student":{"student_id":"1003","name":"Aaron","class_name":"5","fee_balance":12355.0,"payment_status":"unpaid","id":"a58c53dc-38b2-4b6f-b307-3b33623a1597","face_registered":false,"face_image":null,"created_at":"2025-11-17T10:38:21.990355+03:00"}}
392458 WARN  2025-11-17 11:08:37856 ExternalApiUtil:290 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
392475 INFO  2025-11-17 11:08:37873 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1003
401400 INFO  2025-11-17 11:08:46798 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,190,192.168.8.106,10,35,12,5,11110,2,0,0
401402 INFO  2025-11-17 11:08:46800 DownloadProcess:59 - get cmd list over and begin contact:0
401403 INFO  2025-11-17 11:08:46801 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,190,192.168.8.106,10,35,12,5,11110,2,0,0
417691 INFO  2025-11-17 11:09:0389 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
417701 INFO  2025-11-17 11:09:0399 UploadProcess:266 - update device stamp end and get stream.
417704 INFO  2025-11-17 11:09:03102 UploadProcess:323 - data:1002	2025-11-18 07:09:02	0	15	0	0	0	0	0	0	

417704 INFO  2025-11-17 11:09:03102 UploadProcess:324 - end get stream and process data
417705 INFO  2025-11-17 11:09:03103 UploadProcess:523 - begin parse op attlog
417711 INFO  2025-11-17 11:09:03109 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
417711 INFO  2025-11-17 11:09:03109 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
417712 INFO  2025-11-17 11:09:03110 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 07:09:02
417712 INFO  2025-11-17 11:09:03110 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
417713 INFO  2025-11-17 11:09:03111 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
417713 INFO  2025-11-17 11:09:03111 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
417714 INFO  2025-11-17 11:09:03112 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
417715 INFO  2025-11-17 11:09:03113 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 07:09:02
417715 INFO  2025-11-17 11:09:03113 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
417716 INFO  2025-11-17 11:09:03114 UploadProcess:412 - attlog size:1
417716 INFO  2025-11-17 11:09:03114 UploadProcess:525 - end parse op attlog
417717 INFO  2025-11-17 11:09:03115 UploadProcess:327 - end process data and return msg to device
417714 INFO  2025-11-17 11:09:03112 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
417718 INFO  2025-11-17 11:09:03116 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
417718 INFO  2025-11-17 11:09:03116 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
417718 INFO  2025-11-17 11:09:03116 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
417719 INFO  2025-11-17 11:09:03117 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
417719 INFO  2025-11-17 11:09:03117 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
417720 INFO  2025-11-17 11:09:03118 ExternalApiUtil:170 - EXTERNAL API: Method: POST
417717 INFO  2025-11-17 11:09:03115 UploadProcess:331 - return msg to device and request over OK
417720 INFO  2025-11-17 11:09:03118 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 14:09:03 EAT 2025
417721 INFO  2025-11-17 11:09:03119 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
417722 INFO  2025-11-17 11:09:03120 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
417722 INFO  2025-11-17 11:09:03120 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
417723 INFO  2025-11-17 11:09:03121 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 14:09 - Meal type determined: lunch
417723 INFO  2025-11-17 11:09:03121 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
417724 INFO  2025-11-17 11:09:03122 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
417726 INFO  2025-11-17 11:09:03124 ExternalApiUtil:207 - EXTERNAL API: Request body written, getting response...
418051 INFO  2025-11-17 11:09:03449 ExternalApiUtil:210 - EXTERNAL API: Response code received: 201
418052 INFO  2025-11-17 11:09:03450 ExternalApiUtil:267 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
418053 INFO  2025-11-17 11:09:03451 ExternalApiUtil:268 - âœ… EXTERNAL API CALL SUCCESSFUL
418053 INFO  2025-11-17 11:09:03451 ExternalApiUtil:269 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
418054 INFO  2025-11-17 11:09:03452 ExternalApiUtil:270 - EXTERNAL API: Student ID: 1002 (original: 1002)
418054 INFO  2025-11-17 11:09:03452 ExternalApiUtil:271 - EXTERNAL API: HTTP Status Code: 201
418055 INFO  2025-11-17 11:09:03453 ExternalApiUtil:272 - EXTERNAL API: API Response Success: true
418055 INFO  2025-11-17 11:09:03453 ExternalApiUtil:273 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"8a5a600f-2b7f-4cca-b0a8-ebd373d0908d","student_id":"1002","student_name":"Boaz","admission_no":"1002","meal_type":"lunch","amount":0.0,"date":"2025-11-17T14:09:03.441397+03:00","status":"authorized","qr_code":"1002-lunch-2025-11-17-1763377743442","student_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T14:09:03.440892+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1002","name":"Boaz","class_name":"1","fee_balance":0.0,"payment_status":"paid","id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":null,"created_at":"2025-11-17T10:37:59.437204+03:00"}}
418056 INFO  2025-11-17 11:09:03454 ExternalApiUtil:274 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
418073 INFO  2025-11-17 11:09:03471 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1002
431441 INFO  2025-11-17 11:09:16839 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,191,192.168.8.106,10,35,12,5,11110,2,0,0
431458 INFO  2025-11-17 11:09:16856 DownloadProcess:59 - get cmd list over and begin contact:0
431461 INFO  2025-11-17 11:09:16859 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,191,192.168.8.106,10,35,12,5,11110,2,0,0
580434 INFO  2025-11-17 11:11:45832 UploadProcess:63 - get request and make the device options :192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&options=all&language=69&pushver=2.4.1&DeviceType=att&PushOptionsFlag=1
581985 INFO  2025-11-17 11:11:47383 UploadProcess:90 - GET OPTION FROM: TDBD250100333
ATTLOGStamp=9999
OPERLOGStamp=0
ATTPHOTOStamp=0
BIODATAStamp=0
IDCARDStamp=0
ERRORLOGStamp=0
TransFlag=TransData AttLog	OpLog	AttPhoto	EnrollUser	ChgUser	EnrollFP	ChgFP	FPImag	FACE	UserPic	BioPhoto
ErrorDelay=60
Delay=30
transTimes=00:00;14:05
TransInterval=1
Realtime=1
Encrypt=0
ServerVer=2.2.14
TimeZone=1200

583109 INFO  2025-11-17 11:11:48507 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
583388 INFO  2025-11-17 11:11:48786 UploadProcess:266 - update device stamp end and get stream.
583460 INFO  2025-11-17 11:11:48858 UploadProcess:323 - data:1003	2025-11-18 07:09:39	0	15	0	0	0	0	0	0	

583463 INFO  2025-11-17 11:11:48861 UploadProcess:324 - end get stream and process data
583464 INFO  2025-11-17 11:11:48862 UploadProcess:523 - begin parse op attlog
584354 INFO  2025-11-17 11:11:49752 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,194,192.168.8.106,10,35,12,5,11110,2,0,0
584530 INFO  2025-11-17 11:11:49928 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
584533 INFO  2025-11-17 11:11:49931 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
584534 INFO  2025-11-17 11:11:49932 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1003, User Name: WINSTONE, Timestamp: 2025-11-18 07:09:39
584535 INFO  2025-11-17 11:11:49933 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1003
584537 INFO  2025-11-17 11:11:49935 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1003 ===
584647 INFO  2025-11-17 11:11:5045 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1003
584658 INFO  2025-11-17 11:11:5056 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1003
584539 INFO  2025-11-17 11:11:49937 DownloadProcess:59 - get cmd list over and begin contact:0
584659 INFO  2025-11-17 11:11:5057 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1003, Timestamp: 2025-11-18 07:09:39
584663 INFO  2025-11-17 11:11:5061 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1003
584691 INFO  2025-11-17 11:11:5089 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
584696 INFO  2025-11-17 11:11:5094 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
584697 INFO  2025-11-17 11:11:5095 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
584670 INFO  2025-11-17 11:11:5068 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
584698 INFO  2025-11-17 11:11:5096 UploadProcess:412 - attlog size:1
584699 INFO  2025-11-17 11:11:5097 UploadProcess:525 - end parse op attlog
584701 INFO  2025-11-17 11:11:5099 UploadProcess:327 - end process data and return msg to device
584666 INFO  2025-11-17 11:11:5064 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,194,192.168.8.106,10,35,12,5,11110,2,0,0
584726 INFO  2025-11-17 11:11:50124 UploadProcess:331 - return msg to device and request over OK
584698 INFO  2025-11-17 11:11:5096 ExternalApiUtil:168 - EXTERNAL API: User ID: 1003
584763 INFO  2025-11-17 11:11:50161 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
584764 INFO  2025-11-17 11:11:50162 ExternalApiUtil:170 - EXTERNAL API: Method: POST
584765 INFO  2025-11-17 11:11:50163 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 14:11:50 EAT 2025
584766 INFO  2025-11-17 11:11:50164 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
584771 INFO  2025-11-17 11:11:50169 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
584820 INFO  2025-11-17 11:11:50218 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1003, Formatted: 1003
584824 INFO  2025-11-17 11:11:50222 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 14:11 - Meal type determined: lunch
584825 INFO  2025-11-17 11:11:50223 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1003", "meal_type": "lunch"}
584825 INFO  2025-11-17 11:11:50223 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
584832 INFO  2025-11-17 11:11:50230 ExternalApiUtil:207 - EXTERNAL API: Request body written, getting response...
585309 INFO  2025-11-17 11:11:50707 ExternalApiUtil:210 - EXTERNAL API: Response code received: 201
585311 INFO  2025-11-17 11:11:50709 ExternalApiUtil:267 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
585313 INFO  2025-11-17 11:11:50711 ExternalApiUtil:268 - âœ… EXTERNAL API CALL SUCCESSFUL
585325 INFO  2025-11-17 11:11:50723 ExternalApiUtil:269 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
585334 INFO  2025-11-17 11:11:50732 ExternalApiUtil:270 - EXTERNAL API: Student ID: 1003 (original: 1003)
585335 INFO  2025-11-17 11:11:50733 ExternalApiUtil:271 - EXTERNAL API: HTTP Status Code: 201
585336 INFO  2025-11-17 11:11:50734 ExternalApiUtil:272 - EXTERNAL API: API Response Success: true
585336 INFO  2025-11-17 11:11:50734 ExternalApiUtil:273 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"dd81a5b2-04d2-40bc-beee-433bc36defcf","student_id":"1003","student_name":"Aaron","admission_no":"1003","meal_type":"lunch","amount":0.0,"date":"2025-11-17T14:11:51.097943+03:00","status":"authorized","qr_code":"1003-lunch-2025-11-17-1763377911098","student_image":null,"created_at":"2025-11-17T14:11:51.097269+03:00","used_at":null},"eligible":true,"reason":"Student has partially paid fees. Meal card generated successfully.","student":{"student_id":"1003","name":"Aaron","class_name":"5","fee_balance":12355.0,"payment_status":"partial","id":"a58c53dc-38b2-4b6f-b307-3b33623a1597","face_registered":false,"face_image":null,"created_at":"2025-11-17T10:38:21.990355+03:00"}}
585337 INFO  2025-11-17 11:11:50735 ExternalApiUtil:274 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
585383 INFO  2025-11-17 11:11:50781 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1003
586113 INFO  2025-11-17 11:11:51511 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
586247 INFO  2025-11-17 11:11:51645 UploadProcess:266 - update device stamp end and get stream.
586256 INFO  2025-11-17 11:11:51654 UploadProcess:323 - data:1001	2025-11-18 07:11:06	0	15	0	0	0	0	0	0	
1003	2025-11-18 07:11:11	0	15	0	0	0	0	0	0	

586262 INFO  2025-11-17 11:11:51660 UploadProcess:324 - end get stream and process data
586277 INFO  2025-11-17 11:11:51675 UploadProcess:523 - begin parse op attlog
586307 INFO  2025-11-17 11:11:51705 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
586308 INFO  2025-11-17 11:11:51706 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
586310 INFO  2025-11-17 11:11:51708 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1001, User Name: boaz, Timestamp: 2025-11-18 07:11:06
586312 INFO  2025-11-17 11:11:51710 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1001
586314 INFO  2025-11-17 11:11:51712 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1001 ===
586443 INFO  2025-11-17 11:11:51841 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1001
586446 INFO  2025-11-17 11:11:51844 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1001
586449 INFO  2025-11-17 11:11:51847 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1001, Timestamp: 2025-11-18 07:11:06
586454 INFO  2025-11-17 11:11:51852 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
586455 INFO  2025-11-17 11:11:51853 UploadProcess:412 - attlog size:1
586458 INFO  2025-11-17 11:11:51856 UploadProcess:525 - end parse op attlog
586460 INFO  2025-11-17 11:11:51858 UploadProcess:523 - begin parse op attlog
586447 INFO  2025-11-17 11:11:51845 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1001
586469 INFO  2025-11-17 11:11:51867 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
586470 INFO  2025-11-17 11:11:51868 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
586470 INFO  2025-11-17 11:11:51868 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
586471 INFO  2025-11-17 11:11:51869 ExternalApiUtil:168 - EXTERNAL API: User ID: 1001
586478 INFO  2025-11-17 11:11:51876 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
586478 INFO  2025-11-17 11:11:51876 ExternalApiUtil:170 - EXTERNAL API: Method: POST
586479 INFO  2025-11-17 11:11:51877 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 14:11:51 EAT 2025
586479 INFO  2025-11-17 11:11:51877 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
586485 INFO  2025-11-17 11:11:51883 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
586486 INFO  2025-11-17 11:11:51884 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1001, Formatted: 1001
586490 INFO  2025-11-17 11:11:51888 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 14:11 - Meal type determined: lunch
586491 INFO  2025-11-17 11:11:51889 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1001", "meal_type": "lunch"}
586492 INFO  2025-11-17 11:11:51890 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
586487 INFO  2025-11-17 11:11:51885 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
586494 INFO  2025-11-17 11:11:51892 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
586495 INFO  2025-11-17 11:11:51893 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1003, User Name: WINSTONE, Timestamp: 2025-11-18 07:11:11
586496 INFO  2025-11-17 11:11:51894 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1003
586497 INFO  2025-11-17 11:11:51895 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1003 ===
586495 INFO  2025-11-17 11:11:51893 ExternalApiUtil:207 - EXTERNAL API: Request body written, getting response...
586500 INFO  2025-11-17 11:11:51898 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1003
586506 INFO  2025-11-17 11:11:51904 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1003
586511 INFO  2025-11-17 11:11:51909 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1003, Timestamp: 2025-11-18 07:11:11
586542 INFO  2025-11-17 11:11:51940 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
586508 INFO  2025-11-17 11:11:51906 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1003
586557 INFO  2025-11-17 11:11:51955 UploadProcess:412 - attlog size:1
586564 INFO  2025-11-17 11:11:51962 UploadProcess:525 - end parse op attlog
586562 INFO  2025-11-17 11:11:51960 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
586576 INFO  2025-11-17 11:11:51974 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
586577 INFO  2025-11-17 11:11:51975 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
586581 INFO  2025-11-17 11:11:51979 ExternalApiUtil:168 - EXTERNAL API: User ID: 1003
586565 INFO  2025-11-17 11:11:51963 UploadProcess:327 - end process data and return msg to device
586589 INFO  2025-11-17 11:11:51987 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
586694 INFO  2025-11-17 11:11:5292 ExternalApiUtil:170 - EXTERNAL API: Method: POST
586696 INFO  2025-11-17 11:11:5294 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 14:11:52 EAT 2025
586697 INFO  2025-11-17 11:11:5295 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
586590 INFO  2025-11-17 11:11:51988 UploadProcess:331 - return msg to device and request over OK
586699 INFO  2025-11-17 11:11:5297 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
586707 INFO  2025-11-17 11:11:52105 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1003, Formatted: 1003
586711 INFO  2025-11-17 11:11:52109 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 14:11 - Meal type determined: lunch
586714 INFO  2025-11-17 11:11:52112 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1003", "meal_type": "lunch"}
586717 INFO  2025-11-17 11:11:52115 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
586721 INFO  2025-11-17 11:11:52119 ExternalApiUtil:207 - EXTERNAL API: Request body written, getting response...
586877 INFO  2025-11-17 11:11:52275 ExternalApiUtil:210 - EXTERNAL API: Response code received: 201
586880 INFO  2025-11-17 11:11:52278 ExternalApiUtil:267 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
586882 INFO  2025-11-17 11:11:52280 ExternalApiUtil:268 - âœ… EXTERNAL API CALL SUCCESSFUL
586884 INFO  2025-11-17 11:11:52282 ExternalApiUtil:269 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
586887 INFO  2025-11-17 11:11:52285 ExternalApiUtil:270 - EXTERNAL API: Student ID: 1001 (original: 1001)
586889 INFO  2025-11-17 11:11:52287 ExternalApiUtil:271 - EXTERNAL API: HTTP Status Code: 201
586890 INFO  2025-11-17 11:11:52288 ExternalApiUtil:272 - EXTERNAL API: API Response Success: true
586891 INFO  2025-11-17 11:11:52289 ExternalApiUtil:273 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"e8d0086d-9389-4adf-b8ac-4edb52759213","student_id":"1001","student_name":"Peter","admission_no":"1001","meal_type":"lunch","amount":0.0,"date":"2025-11-17T14:11:52.559373+03:00","status":"authorized","qr_code":"1001-lunch-2025-11-17-1763377912560","student_image":"/api/uploads/students/1001.png","created_at":"2025-11-17T14:11:52.558567+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1001","name":"Peter","class_name":"12","fee_balance":0.0,"payment_status":"paid","id":"4a5093ca-992c-4c25-8994-d0109681be50","face_registered":false,"face_image":null,"created_at":"2025-11-17T10:32:08.395587+03:00"}}
586892 INFO  2025-11-17 11:11:52290 ExternalApiUtil:274 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
586924 INFO  2025-11-17 11:11:52322 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1001
587128 INFO  2025-11-17 11:11:52526 ExternalApiUtil:210 - EXTERNAL API: Response code received: 201
587145 INFO  2025-11-17 11:11:52543 ExternalApiUtil:267 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
587146 INFO  2025-11-17 11:11:52544 ExternalApiUtil:268 - âœ… EXTERNAL API CALL SUCCESSFUL
587146 INFO  2025-11-17 11:11:52544 ExternalApiUtil:269 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
587147 INFO  2025-11-17 11:11:52545 ExternalApiUtil:270 - EXTERNAL API: Student ID: 1003 (original: 1003)
587148 INFO  2025-11-17 11:11:52546 ExternalApiUtil:271 - EXTERNAL API: HTTP Status Code: 201
587148 INFO  2025-11-17 11:11:52546 ExternalApiUtil:272 - EXTERNAL API: API Response Success: true
587153 INFO  2025-11-17 11:11:52551 ExternalApiUtil:273 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"d615ee08-8508-496b-b306-875e2eb6187b","student_id":"1003","student_name":"Aaron","admission_no":"1003","meal_type":"lunch","amount":0.0,"date":"2025-11-17T14:11:52.926740+03:00","status":"authorized","qr_code":"1003-lunch-2025-11-17-1763377912927","student_image":null,"created_at":"2025-11-17T14:11:52.926267+03:00","used_at":null},"eligible":true,"reason":"Student has partially paid fees. Meal card generated successfully.","student":{"student_id":"1003","name":"Aaron","class_name":"5","fee_balance":12355.0,"payment_status":"partial","id":"a58c53dc-38b2-4b6f-b307-3b33623a1597","face_registered":false,"face_image":null,"created_at":"2025-11-17T10:38:21.990355+03:00"}}
587153 INFO  2025-11-17 11:11:52551 ExternalApiUtil:274 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
587178 INFO  2025-11-17 11:11:52576 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1003
589801 INFO  2025-11-17 11:11:55199 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
589808 INFO  2025-11-17 11:11:55206 DownloadProcess:59 - get cmd list over and begin contact:0
595801 INFO  2025-11-17 11:12:01199 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
595804 INFO  2025-11-17 11:12:01202 DownloadProcess:59 - get cmd list over and begin contact:0
603815 INFO  2025-11-17 11:12:09213 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
603820 INFO  2025-11-17 11:12:09218 DownloadProcess:59 - get cmd list over and begin contact:0
613433 INFO  2025-11-17 11:12:18831 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
613439 INFO  2025-11-17 11:12:18837 DownloadProcess:59 - get cmd list over and begin contact:0
624504 INFO  2025-11-17 11:12:29902 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
624508 INFO  2025-11-17 11:12:29906 DownloadProcess:59 - get cmd list over and begin contact:0
630622 INFO  2025-11-17 11:12:3620 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
630656 INFO  2025-11-17 11:12:3654 UploadProcess:266 - update device stamp end and get stream.
630658 INFO  2025-11-17 11:12:3656 UploadProcess:323 - data:1003	2025-11-18 07:12:35	0	15	0	0	0	0	0	0	

630658 INFO  2025-11-17 11:12:3656 UploadProcess:324 - end get stream and process data
630659 INFO  2025-11-17 11:12:3657 UploadProcess:523 - begin parse op attlog
630666 INFO  2025-11-17 11:12:3664 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
630667 INFO  2025-11-17 11:12:3665 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
630667 INFO  2025-11-17 11:12:3665 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1003, User Name: WINSTONE, Timestamp: 2025-11-18 07:12:35
630668 INFO  2025-11-17 11:12:3666 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1003
630668 INFO  2025-11-17 11:12:3666 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1003 ===
630669 INFO  2025-11-17 11:12:3667 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1003
630669 INFO  2025-11-17 11:12:3667 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1003
630670 INFO  2025-11-17 11:12:3668 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1003, Timestamp: 2025-11-18 07:12:35
630670 INFO  2025-11-17 11:12:3668 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
630670 INFO  2025-11-17 11:12:3668 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1003
630671 INFO  2025-11-17 11:12:3669 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
630672 INFO  2025-11-17 11:12:3670 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
630672 INFO  2025-11-17 11:12:3670 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
630672 INFO  2025-11-17 11:12:3670 ExternalApiUtil:168 - EXTERNAL API: User ID: 1003
630673 INFO  2025-11-17 11:12:3671 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
630673 INFO  2025-11-17 11:12:3671 ExternalApiUtil:170 - EXTERNAL API: Method: POST
630674 INFO  2025-11-17 11:12:3672 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 14:12:36 EAT 2025
630674 INFO  2025-11-17 11:12:3672 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
630675 INFO  2025-11-17 11:12:3673 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
630675 INFO  2025-11-17 11:12:3673 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1003, Formatted: 1003
630676 INFO  2025-11-17 11:12:3674 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 14:12 - Meal type determined: lunch
630676 INFO  2025-11-17 11:12:3674 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1003", "meal_type": "lunch"}
630677 INFO  2025-11-17 11:12:3675 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
630671 INFO  2025-11-17 11:12:3669 UploadProcess:412 - attlog size:1
630678 INFO  2025-11-17 11:12:3676 UploadProcess:525 - end parse op attlog
630679 INFO  2025-11-17 11:12:3677 UploadProcess:327 - end process data and return msg to device
630680 INFO  2025-11-17 11:12:3678 ExternalApiUtil:207 - EXTERNAL API: Request body written, getting response...
630680 INFO  2025-11-17 11:12:3678 UploadProcess:331 - return msg to device and request over OK
631042 INFO  2025-11-17 11:12:36440 ExternalApiUtil:210 - EXTERNAL API: Response code received: 201
631044 INFO  2025-11-17 11:12:36442 ExternalApiUtil:267 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
631045 INFO  2025-11-17 11:12:36443 ExternalApiUtil:268 - âœ… EXTERNAL API CALL SUCCESSFUL
631045 INFO  2025-11-17 11:12:36443 ExternalApiUtil:269 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
631046 INFO  2025-11-17 11:12:36444 ExternalApiUtil:270 - EXTERNAL API: Student ID: 1003 (original: 1003)
631047 INFO  2025-11-17 11:12:36445 ExternalApiUtil:271 - EXTERNAL API: HTTP Status Code: 201
631047 INFO  2025-11-17 11:12:36445 ExternalApiUtil:272 - EXTERNAL API: API Response Success: true
631047 INFO  2025-11-17 11:12:36445 ExternalApiUtil:273 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"c9db13c6-159c-409a-b287-f79a670f2eef","student_id":"1003","student_name":"Aaron","admission_no":"1003","meal_type":"lunch","amount":0.0,"date":"2025-11-17T14:12:36.155421+03:00","status":"authorized","qr_code":"1003-lunch-2025-11-17-1763377956156","student_image":null,"created_at":"2025-11-17T14:12:36.154851+03:00","used_at":null},"eligible":true,"reason":"Student has partially paid fees. Meal card generated successfully.","student":{"student_id":"1003","name":"Aaron","class_name":"5","fee_balance":12355.0,"payment_status":"partial","id":"a58c53dc-38b2-4b6f-b307-3b33623a1597","face_registered":false,"face_image":null,"created_at":"2025-11-17T10:38:21.990355+03:00"}}
631048 INFO  2025-11-17 11:12:36446 ExternalApiUtil:274 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
631054 INFO  2025-11-17 11:12:36452 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1003
636702 INFO  2025-11-17 11:12:42100 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,195,192.168.8.106,10,35,12,5,11110,2,0,0
636705 INFO  2025-11-17 11:12:42103 DownloadProcess:59 - get cmd list over and begin contact:0
636707 INFO  2025-11-17 11:12:42105 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,195,192.168.8.106,10,35,12,5,11110,2,0,0
651435 INFO  2025-11-17 11:12:56833 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
651439 INFO  2025-11-17 11:12:56837 DownloadProcess:59 - get cmd list over and begin contact:0
666435 INFO  2025-11-17 11:13:11833 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
666437 INFO  2025-11-17 11:13:11835 DownloadProcess:59 - get cmd list over and begin contact:0
683485 INFO  2025-11-17 11:13:28883 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
683635 INFO  2025-11-17 11:13:2933 DownloadProcess:59 - get cmd list over and begin contact:0
701506 INFO  2025-11-17 11:13:46904 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
701508 INFO  2025-11-17 11:13:46906 DownloadProcess:59 - get cmd list over and begin contact:0
722447 INFO  2025-11-17 11:14:07845 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
722452 INFO  2025-11-17 11:14:07850 DownloadProcess:59 - get cmd list over and begin contact:0
743446 INFO  2025-11-17 11:14:28844 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
743535 INFO  2025-11-17 11:14:28933 DownloadProcess:59 - get cmd list over and begin contact:0
3194389 INFO  2025-11-17 11:55:19787 UploadProcess:63 - get request and make the device options :192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&options=all&language=69&pushver=2.4.1&DeviceType=att&PushOptionsFlag=1
3194506 INFO  2025-11-17 11:55:19904 UploadProcess:90 - GET OPTION FROM: TDBD250100333
ATTLOGStamp=9999
OPERLOGStamp=0
ATTPHOTOStamp=0
BIODATAStamp=0
IDCARDStamp=0
ERRORLOGStamp=0
TransFlag=TransData AttLog	OpLog	AttPhoto	EnrollUser	ChgUser	EnrollFP	ChgFP	FPImag	FACE	UserPic	BioPhoto
ErrorDelay=60
Delay=30
transTimes=00:00;14:05
TransInterval=1
Realtime=1
Encrypt=0
ServerVer=2.2.14
TimeZone=1200

3196681 INFO  2025-11-17 11:55:2279 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,196,192.168.8.106,10,35,12,5,11110,2,0,0
3196744 INFO  2025-11-17 11:55:22142 DownloadProcess:59 - get cmd list over and begin contact:0
3196748 INFO  2025-11-17 11:55:22146 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,196,192.168.8.106,10,35,12,5,11110,2,0,0
3198159 INFO  2025-11-17 11:55:23557 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
3198199 INFO  2025-11-17 11:55:23597 UploadProcess:266 - update device stamp end and get stream.
3198209 INFO  2025-11-17 11:55:23607 UploadProcess:323 - data:1002	2025-11-18 07:53:39	0	15	0	0	0	0	0	0	

3198214 INFO  2025-11-17 11:55:23612 UploadProcess:324 - end get stream and process data
3198216 INFO  2025-11-17 11:55:23614 UploadProcess:523 - begin parse op attlog
3198245 INFO  2025-11-17 11:55:23643 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
3198246 INFO  2025-11-17 11:55:23644 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
3198250 INFO  2025-11-17 11:55:23648 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 07:53:39
3198254 INFO  2025-11-17 11:55:23652 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
3198257 INFO  2025-11-17 11:55:23655 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
3198291 INFO  2025-11-17 11:55:23689 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
3198299 INFO  2025-11-17 11:55:23697 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
3198300 INFO  2025-11-17 11:55:23698 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 07:53:39
3198303 INFO  2025-11-17 11:55:23701 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
3198304 INFO  2025-11-17 11:55:23702 UploadProcess:412 - attlog size:1
3198305 INFO  2025-11-17 11:55:23703 UploadProcess:525 - end parse op attlog
3198307 INFO  2025-11-17 11:55:23705 UploadProcess:327 - end process data and return msg to device
3198311 INFO  2025-11-17 11:55:23709 UploadProcess:331 - return msg to device and request over OK
3198312 INFO  2025-11-17 11:55:23710 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
3198319 INFO  2025-11-17 11:55:23717 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3198320 INFO  2025-11-17 11:55:23718 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
3198320 INFO  2025-11-17 11:55:23718 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3198321 INFO  2025-11-17 11:55:23719 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
3198321 INFO  2025-11-17 11:55:23719 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
3198323 INFO  2025-11-17 11:55:23721 ExternalApiUtil:170 - EXTERNAL API: Method: POST
3198326 INFO  2025-11-17 11:55:23724 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 14:55:23 EAT 2025
3198326 INFO  2025-11-17 11:55:23724 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
3198329 INFO  2025-11-17 11:55:23727 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
3198330 INFO  2025-11-17 11:55:23728 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
3198332 INFO  2025-11-17 11:55:23730 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 14:55 - Meal type determined: lunch
3198333 INFO  2025-11-17 11:55:23731 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
3198333 INFO  2025-11-17 11:55:23731 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
3198356 INFO  2025-11-17 11:55:23754 ExternalApiUtil:207 - EXTERNAL API: Request body written, getting response...
3198480 INFO  2025-11-17 11:55:23878 ExternalApiUtil:210 - EXTERNAL API: Response code received: 500
3198584 WARN  2025-11-17 11:55:23982 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3198592 WARN  2025-11-17 11:55:23990 ExternalApiUtil:281 - âš ï¸  EXTERNAL API CALL FAILED OR RETURNED ERROR
3198612 WARN  2025-11-17 11:55:2410 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3198612 WARN  2025-11-17 11:55:2410 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1002 (original: 1002)
3198613 WARN  2025-11-17 11:55:2411 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 500 (ERROR)
3198614 WARN  2025-11-17 11:55:2412 ExternalApiUtil:285 - EXTERNAL API: API Response Success: false
3198614 WARN  2025-11-17 11:55:2412 ExternalApiUtil:289 - EXTERNAL API: Response Body: <!DOCTYPE HTML><html lang="en">    <head>        <meta charset="utf-8">        <title>Error response</title>    </head>    <body>        <h1>Error response</h1>        <p>Error code: 500</p>        <p>Message: Proxy error: &lt;urlopen error [Errno 64] Host is down&gt;.</p>        <p>Error code explanation: 500 - Server got itself in trouble.</p>    </body></html>
3198615 WARN  2025-11-17 11:55:2413 ExternalApiUtil:290 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3198625 INFO  2025-11-17 11:55:2423 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
3198849 INFO  2025-11-17 11:55:24247 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=OPERLOG&Stamp=9999
3198860 INFO  2025-11-17 11:55:24258 UploadProcess:266 - update device stamp end and get stream.
3198861 INFO  2025-11-17 11:55:24259 UploadProcess:323 - data:OPLOG 4	1002	2025-11-18 07:55:23	1002	0	0	0

3198862 INFO  2025-11-17 11:55:24260 UploadProcess:324 - end get stream and process data
3198862 INFO  2025-11-17 11:55:24260 UploadProcess:474 - begin parse op log
3198874 INFO  2025-11-17 11:55:24272 UploadProcess:235 - oplog size:1
3198875 INFO  2025-11-17 11:55:24273 UploadProcess:476 - end parse op log
3198877 INFO  2025-11-17 11:55:24275 UploadProcess:327 - end process data and return msg to device
3198878 INFO  2025-11-17 11:55:24276 UploadProcess:331 - return msg to device and request over OK
3201352 INFO  2025-11-17 11:55:26750 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3201360 INFO  2025-11-17 11:55:26758 DownloadProcess:59 - get cmd list over and begin contact:0
3207335 INFO  2025-11-17 11:55:32733 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3207337 INFO  2025-11-17 11:55:32735 DownloadProcess:59 - get cmd list over and begin contact:0
3215417 INFO  2025-11-17 11:55:40815 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3215420 INFO  2025-11-17 11:55:40818 DownloadProcess:59 - get cmd list over and begin contact:0
3224363 INFO  2025-11-17 11:55:49761 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3224372 INFO  2025-11-17 11:55:49770 DownloadProcess:59 - get cmd list over and begin contact:0
3235422 INFO  2025-11-17 11:56:00820 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3235427 INFO  2025-11-17 11:56:00825 DownloadProcess:59 - get cmd list over and begin contact:0
3247605 INFO  2025-11-17 11:56:133 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3247615 INFO  2025-11-17 11:56:1313 DownloadProcess:59 - get cmd list over and begin contact:0
3262432 INFO  2025-11-17 11:56:27830 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3262436 INFO  2025-11-17 11:56:27834 DownloadProcess:59 - get cmd list over and begin contact:0
3277401 INFO  2025-11-17 11:56:42799 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3277409 INFO  2025-11-17 11:56:42807 DownloadProcess:59 - get cmd list over and begin contact:0
3295657 INFO  2025-11-17 11:57:0155 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3295665 INFO  2025-11-17 11:57:0163 DownloadProcess:59 - get cmd list over and begin contact:0
3312432 INFO  2025-11-17 11:57:17830 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3312438 INFO  2025-11-17 11:57:17836 DownloadProcess:59 - get cmd list over and begin contact:0
3329121 INFO  2025-11-17 11:57:34519 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
3329139 INFO  2025-11-17 11:57:34537 UploadProcess:266 - update device stamp end and get stream.
3329141 INFO  2025-11-17 11:57:34539 UploadProcess:323 - data:1002	2025-11-18 07:57:34	0	15	0	0	0	0	0	0	

3329141 INFO  2025-11-17 11:57:34539 UploadProcess:324 - end get stream and process data
3329142 INFO  2025-11-17 11:57:34540 UploadProcess:523 - begin parse op attlog
3329151 INFO  2025-11-17 11:57:34549 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
3329151 INFO  2025-11-17 11:57:34549 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
3329152 INFO  2025-11-17 11:57:34550 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 07:57:34
3329154 INFO  2025-11-17 11:57:34552 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
3329159 INFO  2025-11-17 11:57:34557 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
3329159 INFO  2025-11-17 11:57:34557 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
3329161 INFO  2025-11-17 11:57:34559 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
3329164 INFO  2025-11-17 11:57:34562 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 07:57:34
3329167 INFO  2025-11-17 11:57:34565 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
3329170 INFO  2025-11-17 11:57:34568 UploadProcess:412 - attlog size:1
3329173 INFO  2025-11-17 11:57:34571 UploadProcess:525 - end parse op attlog
3329176 INFO  2025-11-17 11:57:34574 UploadProcess:327 - end process data and return msg to device
3329177 INFO  2025-11-17 11:57:34575 UploadProcess:331 - return msg to device and request over OK
3329162 INFO  2025-11-17 11:57:34560 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
3329180 INFO  2025-11-17 11:57:34578 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3329185 INFO  2025-11-17 11:57:34583 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
3329186 INFO  2025-11-17 11:57:34584 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3329188 INFO  2025-11-17 11:57:34586 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
3329225 INFO  2025-11-17 11:57:34623 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
3329225 INFO  2025-11-17 11:57:34623 ExternalApiUtil:170 - EXTERNAL API: Method: POST
3329226 INFO  2025-11-17 11:57:34624 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 14:57:34 EAT 2025
3329227 INFO  2025-11-17 11:57:34625 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
3329227 INFO  2025-11-17 11:57:34625 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
3329228 INFO  2025-11-17 11:57:34626 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
3329228 INFO  2025-11-17 11:57:34626 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 14:57 - Meal type determined: lunch
3329229 INFO  2025-11-17 11:57:34627 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
3329230 INFO  2025-11-17 11:57:34628 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
3329233 INFO  2025-11-17 11:57:34631 ExternalApiUtil:207 - EXTERNAL API: Request body written, getting response...
3329240 INFO  2025-11-17 11:57:34638 ExternalApiUtil:210 - EXTERNAL API: Response code received: 500
3329243 WARN  2025-11-17 11:57:34641 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3329245 WARN  2025-11-17 11:57:34643 ExternalApiUtil:281 - âš ï¸  EXTERNAL API CALL FAILED OR RETURNED ERROR
3329246 WARN  2025-11-17 11:57:34644 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3329248 WARN  2025-11-17 11:57:34646 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1002 (original: 1002)
3329249 WARN  2025-11-17 11:57:34647 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 500 (ERROR)
3329250 WARN  2025-11-17 11:57:34648 ExternalApiUtil:285 - EXTERNAL API: API Response Success: false
3329251 WARN  2025-11-17 11:57:34649 ExternalApiUtil:289 - EXTERNAL API: Response Body: <!DOCTYPE HTML><html lang="en">    <head>        <meta charset="utf-8">        <title>Error response</title>    </head>    <body>        <h1>Error response</h1>        <p>Error code: 500</p>        <p>Message: Proxy error: &lt;urlopen error [Errno 64] Host is down&gt;.</p>        <p>Error code explanation: 500 - Server got itself in trouble.</p>    </body></html>
3329253 WARN  2025-11-17 11:57:34651 ExternalApiUtil:290 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3329265 INFO  2025-11-17 11:57:34663 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
3333522 INFO  2025-11-17 11:57:38920 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,197,192.168.8.106,10,35,12,5,11110,2,0,0
3333527 INFO  2025-11-17 11:57:38925 DownloadProcess:59 - get cmd list over and begin contact:0
3333528 INFO  2025-11-17 11:57:38926 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,197,192.168.8.106,10,35,12,5,11110,2,0,0
3354453 INFO  2025-11-17 11:57:59851 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3354455 INFO  2025-11-17 11:57:59853 DownloadProcess:59 - get cmd list over and begin contact:0
3377472 INFO  2025-11-17 11:58:22870 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3377476 INFO  2025-11-17 11:58:22874 DownloadProcess:59 - get cmd list over and begin contact:0
3402442 INFO  2025-11-17 11:58:47840 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3402445 INFO  2025-11-17 11:58:47843 DownloadProcess:59 - get cmd list over and begin contact:0
3428445 INFO  2025-11-17 11:59:13843 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3428448 INFO  2025-11-17 11:59:13846 DownloadProcess:59 - get cmd list over and begin contact:0
3456381 INFO  2025-11-17 11:59:41779 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3456384 INFO  2025-11-17 11:59:41782 DownloadProcess:59 - get cmd list over and begin contact:0
3485382 INFO  2025-11-17 12:00:10780 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3485389 INFO  2025-11-17 12:00:10787 DownloadProcess:59 - get cmd list over and begin contact:0
3516642 INFO  2025-11-17 12:00:4240 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3516645 INFO  2025-11-17 12:00:4243 DownloadProcess:59 - get cmd list over and begin contact:0
3546720 INFO  2025-11-17 12:01:12118 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3546723 INFO  2025-11-17 12:01:12121 DownloadProcess:59 - get cmd list over and begin contact:0
3577571 INFO  2025-11-17 12:01:42969 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3577579 INFO  2025-11-17 12:01:42977 DownloadProcess:59 - get cmd list over and begin contact:0
3607578 INFO  2025-11-17 12:02:12976 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3607580 INFO  2025-11-17 12:02:12978 DownloadProcess:59 - get cmd list over and begin contact:0
3638637 INFO  2025-11-17 12:02:4435 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3638641 INFO  2025-11-17 12:02:4439 DownloadProcess:59 - get cmd list over and begin contact:0
3668709 INFO  2025-11-17 12:03:14107 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3668770 INFO  2025-11-17 12:03:14168 DownloadProcess:59 - get cmd list over and begin contact:0
3699555 INFO  2025-11-17 12:03:44953 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3699564 INFO  2025-11-17 12:03:44962 DownloadProcess:59 - get cmd list over and begin contact:0
3700645 ERROR 2025-11-17 12:03:4643 DeviceInfoDao:406 - java.sql.SQLSyntaxErrorException: PROCEDURE pushdemo.get_device_for_page does not exist
3700681 ERROR 2025-11-17 12:03:4679 DeviceInfoDao:406 - java.sql.SQLSyntaxErrorException: PROCEDURE pushdemo.get_device_for_page does not exist
3702583 ERROR 2025-11-17 12:03:47981 DeviceInfoDao:406 - java.sql.SQLSyntaxErrorException: PROCEDURE pushdemo.get_device_for_page does not exist
3729758 INFO  2025-11-17 12:04:15156 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3729762 INFO  2025-11-17 12:04:15160 DownloadProcess:59 - get cmd list over and begin contact:0
3760650 INFO  2025-11-17 12:04:4648 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3760844 INFO  2025-11-17 12:04:46242 DownloadProcess:59 - get cmd list over and begin contact:0
3763963 ERROR 2025-11-17 12:04:49361 DeviceInfoDao:406 - java.sql.SQLSyntaxErrorException: PROCEDURE pushdemo.get_device_for_page does not exist
3790712 INFO  2025-11-17 12:05:16110 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3790737 INFO  2025-11-17 12:05:16135 DownloadProcess:59 - get cmd list over and begin contact:0
3821641 INFO  2025-11-17 12:05:4739 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3821649 INFO  2025-11-17 12:05:4747 DownloadProcess:59 - get cmd list over and begin contact:0
3825752 ERROR 2025-11-17 12:05:51150 DeviceInfoDao:406 - java.sql.SQLSyntaxErrorException: PROCEDURE pushdemo.get_device_for_page does not exist
3851637 INFO  2025-11-17 12:06:1735 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3851643 INFO  2025-11-17 12:06:1741 DownloadProcess:59 - get cmd list over and begin contact:0
3882631 INFO  2025-11-17 12:06:4829 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3882644 INFO  2025-11-17 12:06:4842 DownloadProcess:59 - get cmd list over and begin contact:0
3912537 INFO  2025-11-17 12:07:17935 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3912539 INFO  2025-11-17 12:07:17937 DownloadProcess:59 - get cmd list over and begin contact:0
3944689 INFO  2025-11-17 12:07:5087 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3944938 INFO  2025-11-17 12:07:50336 DownloadProcess:59 - get cmd list over and begin contact:0
3973578 INFO  2025-11-17 12:08:18976 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
3973588 INFO  2025-11-17 12:08:18986 DownloadProcess:59 - get cmd list over and begin contact:0
4016787 INFO  2025-11-17 12:09:02185 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
4017070 INFO  2025-11-17 12:09:02468 DownloadProcess:59 - get cmd list over and begin contact:0
4880332 INFO  2025-11-17 12:23:25730 UploadProcess:63 - get request and make the device options :192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&options=all&language=69&pushver=2.4.1&DeviceType=att&PushOptionsFlag=1
4880644 INFO  2025-11-17 12:23:2642 UploadProcess:90 - GET OPTION FROM: TDBD250100333
ATTLOGStamp=9999
OPERLOGStamp=0
ATTPHOTOStamp=0
BIODATAStamp=0
IDCARDStamp=0
ERRORLOGStamp=0
TransFlag=TransData AttLog	OpLog	AttPhoto	EnrollUser	ChgUser	EnrollFP	ChgFP	FPImag	FACE	UserPic	BioPhoto
ErrorDelay=60
Delay=30
transTimes=00:00;14:05
TransInterval=1
Realtime=1
Encrypt=0
ServerVer=2.2.14
TimeZone=1200

4882576 INFO  2025-11-17 12:23:27974 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,202,192.168.8.106,10,35,12,5,11110,2,0,0
4882582 INFO  2025-11-17 12:23:27980 DownloadProcess:59 - get cmd list over and begin contact:0
4882583 INFO  2025-11-17 12:23:27981 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,202,192.168.8.106,10,35,12,5,11110,2,0,0
4883051 INFO  2025-11-17 12:23:28449 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=OPERLOG&Stamp=9999
4883067 INFO  2025-11-17 12:23:28465 UploadProcess:266 - update device stamp end and get stream.
4883078 INFO  2025-11-17 12:23:28476 UploadProcess:323 - data:OPLOG 4	1002	2025-11-18 08:23:26	1002	0	0	0

4883080 INFO  2025-11-17 12:23:28478 UploadProcess:324 - end get stream and process data
4883081 INFO  2025-11-17 12:23:28479 UploadProcess:474 - begin parse op log
4883138 INFO  2025-11-17 12:23:28536 UploadProcess:235 - oplog size:1
4883139 INFO  2025-11-17 12:23:28537 UploadProcess:476 - end parse op log
4883140 INFO  2025-11-17 12:23:28538 UploadProcess:327 - end process data and return msg to device
4883142 INFO  2025-11-17 12:23:28540 UploadProcess:331 - return msg to device and request over OK
4883250 INFO  2025-11-17 12:23:28648 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
4883257 INFO  2025-11-17 12:23:28655 UploadProcess:266 - update device stamp end and get stream.
4883258 INFO  2025-11-17 12:23:28656 UploadProcess:323 - data:1002	2025-11-18 08:11:23	0	15	0	0	0	0	0	0	
1002	2025-11-18 08:12:38	0	15	0	0	0	0	0	0	
1002	2025-11-18 08:17:52	0	15	0	0	0	0	0	0	
1002	2025-11-18 08:19:01	0	15	0	0	0	0	0	0	
1002	2025-11-18 08:21:47	0	15	0	0	0	0	0	0	

4883259 INFO  2025-11-17 12:23:28657 UploadProcess:324 - end get stream and process data
4883260 INFO  2025-11-17 12:23:28658 UploadProcess:523 - begin parse op attlog
4883273 INFO  2025-11-17 12:23:28671 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
4883274 INFO  2025-11-17 12:23:28672 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
4883276 INFO  2025-11-17 12:23:28674 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 08:11:23
4883276 INFO  2025-11-17 12:23:28674 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
4883278 INFO  2025-11-17 12:23:28676 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
4883279 INFO  2025-11-17 12:23:28677 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
4883280 INFO  2025-11-17 12:23:28678 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
4883282 INFO  2025-11-17 12:23:28680 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 08:11:23
4883283 INFO  2025-11-17 12:23:28681 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
4883286 INFO  2025-11-17 12:23:28684 UploadProcess:412 - attlog size:1
4883288 INFO  2025-11-17 12:23:28686 UploadProcess:525 - end parse op attlog
4883289 INFO  2025-11-17 12:23:28687 UploadProcess:523 - begin parse op attlog
4883294 INFO  2025-11-17 12:23:28692 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
4883295 INFO  2025-11-17 12:23:28693 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4883296 INFO  2025-11-17 12:23:28694 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
4883296 INFO  2025-11-17 12:23:28694 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4883297 INFO  2025-11-17 12:23:28695 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
4883297 INFO  2025-11-17 12:23:28695 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
4883297 INFO  2025-11-17 12:23:28695 ExternalApiUtil:170 - EXTERNAL API: Method: POST
4883300 INFO  2025-11-17 12:23:28698 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
4883300 INFO  2025-11-17 12:23:28698 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
4883301 INFO  2025-11-17 12:23:28699 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 08:12:38
4883302 INFO  2025-11-17 12:23:28700 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
4883303 INFO  2025-11-17 12:23:28701 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
4883304 INFO  2025-11-17 12:23:28702 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
4883303 INFO  2025-11-17 12:23:28701 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 15:23:28 EAT 2025
4883305 INFO  2025-11-17 12:23:28703 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
4883305 INFO  2025-11-17 12:23:28703 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
4883307 INFO  2025-11-17 12:23:28705 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 08:12:38
4883307 INFO  2025-11-17 12:23:28705 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
4883308 INFO  2025-11-17 12:23:28706 UploadProcess:412 - attlog size:1
4883309 INFO  2025-11-17 12:23:28707 UploadProcess:525 - end parse op attlog
4883311 INFO  2025-11-17 12:23:28709 UploadProcess:523 - begin parse op attlog
4883307 INFO  2025-11-17 12:23:28705 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
4883315 INFO  2025-11-17 12:23:28713 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
4883315 INFO  2025-11-17 12:23:28713 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
4883317 INFO  2025-11-17 12:23:28715 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4883318 INFO  2025-11-17 12:23:28716 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
4883319 INFO  2025-11-17 12:23:28717 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4883319 INFO  2025-11-17 12:23:28717 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
4883320 INFO  2025-11-17 12:23:28718 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
4883321 INFO  2025-11-17 12:23:28719 ExternalApiUtil:170 - EXTERNAL API: Method: POST
4883322 INFO  2025-11-17 12:23:28720 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 15:23:28 EAT 2025
4883323 INFO  2025-11-17 12:23:28721 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
4883324 INFO  2025-11-17 12:23:28722 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
4883325 INFO  2025-11-17 12:23:28723 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 08:17:52
4883326 INFO  2025-11-17 12:23:28724 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
4883327 INFO  2025-11-17 12:23:28725 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
4883328 INFO  2025-11-17 12:23:28726 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
4883316 INFO  2025-11-17 12:23:28714 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 15:23 - Meal type determined: lunch
4883329 INFO  2025-11-17 12:23:28727 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
4883330 INFO  2025-11-17 12:23:28728 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
4883328 INFO  2025-11-17 12:23:28726 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
4883331 INFO  2025-11-17 12:23:28729 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 08:17:52
4883332 INFO  2025-11-17 12:23:28730 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
4883333 INFO  2025-11-17 12:23:28731 UploadProcess:412 - attlog size:1
4883334 INFO  2025-11-17 12:23:28732 UploadProcess:525 - end parse op attlog
4883335 INFO  2025-11-17 12:23:28733 UploadProcess:523 - begin parse op attlog
4883323 INFO  2025-11-17 12:23:28721 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
4883341 INFO  2025-11-17 12:23:28739 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
4883363 INFO  2025-11-17 12:23:28761 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
4883374 INFO  2025-11-17 12:23:28772 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 15:23 - Meal type determined: lunch
4883362 INFO  2025-11-17 12:23:28760 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
4883379 INFO  2025-11-17 12:23:28777 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4883380 INFO  2025-11-17 12:23:28778 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
4883382 INFO  2025-11-17 12:23:28780 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4883383 INFO  2025-11-17 12:23:28781 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
4883385 INFO  2025-11-17 12:23:28783 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
4883387 INFO  2025-11-17 12:23:28785 ExternalApiUtil:170 - EXTERNAL API: Method: POST
4883388 INFO  2025-11-17 12:23:28786 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 15:23:28 EAT 2025
4883389 INFO  2025-11-17 12:23:28787 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
4883390 INFO  2025-11-17 12:23:28788 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
4883378 INFO  2025-11-17 12:23:28776 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
4883391 INFO  2025-11-17 12:23:28789 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
4883369 INFO  2025-11-17 12:23:28767 ExternalApiUtil:207 - EXTERNAL API: Request body written, getting response...
4883391 INFO  2025-11-17 12:23:28789 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
4883395 INFO  2025-11-17 12:23:28793 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 15:23 - Meal type determined: lunch
4883396 INFO  2025-11-17 12:23:28794 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
4883396 INFO  2025-11-17 12:23:28794 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
4883389 INFO  2025-11-17 12:23:28787 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
4883398 INFO  2025-11-17 12:23:28796 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
4883399 INFO  2025-11-17 12:23:28797 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 08:19:01
4883398 INFO  2025-11-17 12:23:28796 ExternalApiUtil:207 - EXTERNAL API: Request body written, getting response...
4883402 INFO  2025-11-17 12:23:28800 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
4883404 INFO  2025-11-17 12:23:28802 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
4883405 INFO  2025-11-17 12:23:28803 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
4883408 INFO  2025-11-17 12:23:28806 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
4883410 INFO  2025-11-17 12:23:28808 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 08:19:01
4883412 INFO  2025-11-17 12:23:28810 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
4883413 INFO  2025-11-17 12:23:28811 UploadProcess:412 - attlog size:1
4883415 INFO  2025-11-17 12:23:28813 UploadProcess:525 - end parse op attlog
4883416 INFO  2025-11-17 12:23:28814 UploadProcess:523 - begin parse op attlog
4883418 INFO  2025-11-17 12:23:28816 ExternalApiUtil:210 - EXTERNAL API: Response code received: 500
4883400 INFO  2025-11-17 12:23:28798 ExternalApiUtil:207 - EXTERNAL API: Request body written, getting response...
4883421 WARN  2025-11-17 12:23:28819 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4883424 WARN  2025-11-17 12:23:28822 ExternalApiUtil:281 - âš ï¸  EXTERNAL API CALL FAILED OR RETURNED ERROR
4883428 WARN  2025-11-17 12:23:28826 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4883430 WARN  2025-11-17 12:23:28828 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1002 (original: 1002)
4883431 WARN  2025-11-17 12:23:28829 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 500 (ERROR)
4883432 WARN  2025-11-17 12:23:28830 ExternalApiUtil:285 - EXTERNAL API: API Response Success: false
4883432 WARN  2025-11-17 12:23:28830 ExternalApiUtil:289 - EXTERNAL API: Response Body: <!DOCTYPE HTML><html lang="en">    <head>        <meta charset="utf-8">        <title>Error response</title>    </head>    <body>        <h1>Error response</h1>        <p>Error code: 500</p>        <p>Message: Proxy error: &lt;urlopen error [Errno 64] Host is down&gt;.</p>        <p>Error code explanation: 500 - Server got itself in trouble.</p>    </body></html>
4883435 WARN  2025-11-17 12:23:28833 ExternalApiUtil:290 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4883415 INFO  2025-11-17 12:23:28813 ExternalApiUtil:210 - EXTERNAL API: Response code received: 500
4883410 INFO  2025-11-17 12:23:28808 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
4883445 INFO  2025-11-17 12:23:28843 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4883447 INFO  2025-11-17 12:23:28845 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
4883448 INFO  2025-11-17 12:23:28846 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4883449 INFO  2025-11-17 12:23:28847 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
4883449 INFO  2025-11-17 12:23:28847 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
4883452 INFO  2025-11-17 12:23:28850 ExternalApiUtil:170 - EXTERNAL API: Method: POST
4883442 WARN  2025-11-17 12:23:28840 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4883453 WARN  2025-11-17 12:23:28851 ExternalApiUtil:281 - âš ï¸  EXTERNAL API CALL FAILED OR RETURNED ERROR
4883454 WARN  2025-11-17 12:23:28852 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4883454 WARN  2025-11-17 12:23:28852 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1002 (original: 1002)
4883456 WARN  2025-11-17 12:23:28854 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 500 (ERROR)
4883457 WARN  2025-11-17 12:23:28855 ExternalApiUtil:285 - EXTERNAL API: API Response Success: false
4883459 WARN  2025-11-17 12:23:28857 ExternalApiUtil:289 - EXTERNAL API: Response Body: <!DOCTYPE HTML><html lang="en">    <head>        <meta charset="utf-8">        <title>Error response</title>    </head>    <body>        <h1>Error response</h1>        <p>Error code: 500</p>        <p>Message: Proxy error: &lt;urlopen error [Errno 64] Host is down&gt;.</p>        <p>Error code explanation: 500 - Server got itself in trouble.</p>    </body></html>
4883460 WARN  2025-11-17 12:23:28858 ExternalApiUtil:290 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4883435 INFO  2025-11-17 12:23:28833 ExternalApiUtil:210 - EXTERNAL API: Response code received: 500
4883452 INFO  2025-11-17 12:23:28850 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 15:23:28 EAT 2025
4883464 INFO  2025-11-17 12:23:28862 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
4883464 INFO  2025-11-17 12:23:28862 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
4883449 INFO  2025-11-17 12:23:28847 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
4883466 INFO  2025-11-17 12:23:28864 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
4883465 INFO  2025-11-17 12:23:28863 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
4883468 INFO  2025-11-17 12:23:28866 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 15:23 - Meal type determined: lunch
4883468 INFO  2025-11-17 12:23:28866 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
4883469 INFO  2025-11-17 12:23:28867 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
4883464 WARN  2025-11-17 12:23:28862 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4883472 WARN  2025-11-17 12:23:28870 ExternalApiUtil:281 - âš ï¸  EXTERNAL API CALL FAILED OR RETURNED ERROR
4883473 WARN  2025-11-17 12:23:28871 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4883474 WARN  2025-11-17 12:23:28872 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1002 (original: 1002)
4883476 WARN  2025-11-17 12:23:28874 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 500 (ERROR)
4883466 INFO  2025-11-17 12:23:28864 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
4883478 INFO  2025-11-17 12:23:28876 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 08:21:47
4883479 INFO  2025-11-17 12:23:28877 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
4883479 INFO  2025-11-17 12:23:28877 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
4883477 WARN  2025-11-17 12:23:28875 ExternalApiUtil:285 - EXTERNAL API: API Response Success: false
4883481 WARN  2025-11-17 12:23:28879 ExternalApiUtil:289 - EXTERNAL API: Response Body: <!DOCTYPE HTML><html lang="en">    <head>        <meta charset="utf-8">        <title>Error response</title>    </head>    <body>        <h1>Error response</h1>        <p>Error code: 500</p>        <p>Message: Proxy error: &lt;urlopen error [Errno 64] Host is down&gt;.</p>        <p>Error code explanation: 500 - Server got itself in trouble.</p>    </body></html>
4883481 WARN  2025-11-17 12:23:28879 ExternalApiUtil:290 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4883474 INFO  2025-11-17 12:23:28872 ExternalApiUtil:207 - EXTERNAL API: Request body written, getting response...
4883480 INFO  2025-11-17 12:23:28878 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
4883483 INFO  2025-11-17 12:23:28881 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
4883487 INFO  2025-11-17 12:23:28885 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 08:21:47
4883489 INFO  2025-11-17 12:23:28887 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
4883493 INFO  2025-11-17 12:23:28891 UploadProcess:412 - attlog size:1
4883500 INFO  2025-11-17 12:23:28898 UploadProcess:525 - end parse op attlog
4883501 INFO  2025-11-17 12:23:28899 UploadProcess:327 - end process data and return msg to device
4883504 INFO  2025-11-17 12:23:28902 UploadProcess:331 - return msg to device and request over OK
4883488 INFO  2025-11-17 12:23:28886 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
4883488 INFO  2025-11-17 12:23:28886 ExternalApiUtil:210 - EXTERNAL API: Response code received: 500
4883510 INFO  2025-11-17 12:23:28908 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4883510 INFO  2025-11-17 12:23:28908 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
4883511 INFO  2025-11-17 12:23:28909 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4883512 INFO  2025-11-17 12:23:28910 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
4883511 INFO  2025-11-17 12:23:28909 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
4883511 WARN  2025-11-17 12:23:28909 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4883514 WARN  2025-11-17 12:23:28912 ExternalApiUtil:281 - âš ï¸  EXTERNAL API CALL FAILED OR RETURNED ERROR
4883512 INFO  2025-11-17 12:23:28910 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
4883516 INFO  2025-11-17 12:23:28914 ExternalApiUtil:170 - EXTERNAL API: Method: POST
4883517 INFO  2025-11-17 12:23:28915 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 15:23:28 EAT 2025
4883517 INFO  2025-11-17 12:23:28915 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
4883515 WARN  2025-11-17 12:23:28913 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4883518 WARN  2025-11-17 12:23:28916 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1002 (original: 1002)
4883519 WARN  2025-11-17 12:23:28917 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 500 (ERROR)
4883519 WARN  2025-11-17 12:23:28917 ExternalApiUtil:285 - EXTERNAL API: API Response Success: false
4883520 WARN  2025-11-17 12:23:28918 ExternalApiUtil:289 - EXTERNAL API: Response Body: <!DOCTYPE HTML><html lang="en">    <head>        <meta charset="utf-8">        <title>Error response</title>    </head>    <body>        <h1>Error response</h1>        <p>Error code: 500</p>        <p>Message: Proxy error: &lt;urlopen error [Errno 64] Host is down&gt;.</p>        <p>Error code explanation: 500 - Server got itself in trouble.</p>    </body></html>
4883520 WARN  2025-11-17 12:23:28918 ExternalApiUtil:290 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4883520 INFO  2025-11-17 12:23:28918 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
4883521 INFO  2025-11-17 12:23:28919 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
4883522 INFO  2025-11-17 12:23:28920 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 15:23 - Meal type determined: lunch
4883522 INFO  2025-11-17 12:23:28920 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
4883523 INFO  2025-11-17 12:23:28921 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
4883527 INFO  2025-11-17 12:23:28925 ExternalApiUtil:207 - EXTERNAL API: Request body written, getting response...
4883534 INFO  2025-11-17 12:23:28932 ExternalApiUtil:210 - EXTERNAL API: Response code received: 500
4883535 WARN  2025-11-17 12:23:28933 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4883536 WARN  2025-11-17 12:23:28934 ExternalApiUtil:281 - âš ï¸  EXTERNAL API CALL FAILED OR RETURNED ERROR
4883536 WARN  2025-11-17 12:23:28934 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4883537 WARN  2025-11-17 12:23:28935 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1002 (original: 1002)
4883537 WARN  2025-11-17 12:23:28935 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 500 (ERROR)
4883537 WARN  2025-11-17 12:23:28935 ExternalApiUtil:285 - EXTERNAL API: API Response Success: false
4883543 WARN  2025-11-17 12:23:28941 ExternalApiUtil:289 - EXTERNAL API: Response Body: <!DOCTYPE HTML><html lang="en">    <head>        <meta charset="utf-8">        <title>Error response</title>    </head>    <body>        <h1>Error response</h1>        <p>Error code: 500</p>        <p>Message: Proxy error: &lt;urlopen error [Errno 64] Host is down&gt;.</p>        <p>Error code explanation: 500 - Server got itself in trouble.</p>    </body></html>
4883543 WARN  2025-11-17 12:23:28941 ExternalApiUtil:290 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4883538 INFO  2025-11-17 12:23:28936 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
4883582 INFO  2025-11-17 12:23:28980 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
4883604 INFO  2025-11-17 12:23:292 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
4887393 INFO  2025-11-17 12:23:32791 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
4887396 INFO  2025-11-17 12:23:32794 DownloadProcess:59 - get cmd list over and begin contact:0
4893571 INFO  2025-11-17 12:23:38969 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
4893575 INFO  2025-11-17 12:23:38973 DownloadProcess:59 - get cmd list over and begin contact:0
4898350 INFO  2025-11-17 12:23:43748 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
4898362 INFO  2025-11-17 12:23:43760 UploadProcess:266 - update device stamp end and get stream.
4898375 INFO  2025-11-17 12:23:43773 UploadProcess:323 - data:1002	2025-11-18 08:23:43	0	15	0	0	0	0	0	0	

4898377 INFO  2025-11-17 12:23:43775 UploadProcess:324 - end get stream and process data
4898378 INFO  2025-11-17 12:23:43776 UploadProcess:523 - begin parse op attlog
4898390 INFO  2025-11-17 12:23:43788 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
4898391 INFO  2025-11-17 12:23:43789 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
4898391 INFO  2025-11-17 12:23:43789 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 08:23:43
4898393 INFO  2025-11-17 12:23:43791 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
4898396 INFO  2025-11-17 12:23:43794 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
4898397 INFO  2025-11-17 12:23:43795 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
4898398 INFO  2025-11-17 12:23:43796 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
4898399 INFO  2025-11-17 12:23:43797 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 08:23:43
4898399 INFO  2025-11-17 12:23:43797 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
4898401 INFO  2025-11-17 12:23:43799 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4898401 INFO  2025-11-17 12:23:43799 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
4898400 INFO  2025-11-17 12:23:43798 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
4898403 INFO  2025-11-17 12:23:43801 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4898403 INFO  2025-11-17 12:23:43801 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
4898404 INFO  2025-11-17 12:23:43802 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
4898403 INFO  2025-11-17 12:23:43801 UploadProcess:412 - attlog size:1
4898405 INFO  2025-11-17 12:23:43803 ExternalApiUtil:170 - EXTERNAL API: Method: POST
4898405 INFO  2025-11-17 12:23:43803 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 15:23:43 EAT 2025
4898406 INFO  2025-11-17 12:23:43804 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
4898407 INFO  2025-11-17 12:23:43805 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
4898405 INFO  2025-11-17 12:23:43803 UploadProcess:525 - end parse op attlog
4898409 INFO  2025-11-17 12:23:43807 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
4898410 INFO  2025-11-17 12:23:43808 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 15:23 - Meal type determined: lunch
4898411 INFO  2025-11-17 12:23:43809 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
4898413 INFO  2025-11-17 12:23:43811 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
4898410 INFO  2025-11-17 12:23:43808 UploadProcess:327 - end process data and return msg to device
4898415 INFO  2025-11-17 12:23:43813 UploadProcess:331 - return msg to device and request over OK
4898416 INFO  2025-11-17 12:23:43814 ExternalApiUtil:207 - EXTERNAL API: Request body written, getting response...
4900749 INFO  2025-11-17 12:23:46147 ExternalApiUtil:210 - EXTERNAL API: Response code received: 201
4900750 INFO  2025-11-17 12:23:46148 ExternalApiUtil:267 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4900751 INFO  2025-11-17 12:23:46149 ExternalApiUtil:268 - âœ… EXTERNAL API CALL SUCCESSFUL
4900752 INFO  2025-11-17 12:23:46150 ExternalApiUtil:269 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4900753 INFO  2025-11-17 12:23:46151 ExternalApiUtil:270 - EXTERNAL API: Student ID: 1002 (original: 1002)
4900753 INFO  2025-11-17 12:23:46151 ExternalApiUtil:271 - EXTERNAL API: HTTP Status Code: 201
4900754 INFO  2025-11-17 12:23:46152 ExternalApiUtil:272 - EXTERNAL API: API Response Success: true
4900755 INFO  2025-11-17 12:23:46153 ExternalApiUtil:273 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"8cd60204-98e1-4e2f-8cd5-e9f34c28620d","student_id":"1002","student_name":"Boaz","admission_no":"1002","meal_type":"lunch","amount":0.0,"date":"2025-11-17T15:23:46.082536+03:00","status":"authorized","qr_code":"1002-lunch-2025-11-17-1763382226085","student_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T15:23:46.080668+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1002","name":"Boaz","class_name":"1","fee_balance":0.0,"payment_status":"paid","id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":null,"created_at":"2025-11-17T10:37:59.437204+03:00"}}
4900756 INFO  2025-11-17 12:23:46154 ExternalApiUtil:274 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4900762 INFO  2025-11-17 12:23:46160 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1002
4901470 INFO  2025-11-17 12:23:46868 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,203,192.168.8.106,10,35,12,5,11110,2,0,0
4901473 INFO  2025-11-17 12:23:46871 DownloadProcess:59 - get cmd list over and begin contact:0
4901476 INFO  2025-11-17 12:23:46874 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,203,192.168.8.106,10,35,12,5,11110,2,0,0
4910432 INFO  2025-11-17 12:23:55830 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
4910442 INFO  2025-11-17 12:23:55840 DownloadProcess:59 - get cmd list over and begin contact:0
4921352 INFO  2025-11-17 12:24:06750 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
4921354 INFO  2025-11-17 12:24:06752 DownloadProcess:59 - get cmd list over and begin contact:0
4933408 INFO  2025-11-17 12:24:18806 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
4933410 INFO  2025-11-17 12:24:18808 DownloadProcess:59 - get cmd list over and begin contact:0
4948341 INFO  2025-11-17 12:24:33739 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
4948344 INFO  2025-11-17 12:24:33742 DownloadProcess:59 - get cmd list over and begin contact:0
4962907 INFO  2025-11-17 12:24:48305 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
4962918 INFO  2025-11-17 12:24:48316 UploadProcess:266 - update device stamp end and get stream.
4962920 INFO  2025-11-17 12:24:48318 UploadProcess:323 - data:1002	2025-11-18 08:24:47	0	15	0	0	0	0	0	0	

4962920 INFO  2025-11-17 12:24:48318 UploadProcess:324 - end get stream and process data
4962921 INFO  2025-11-17 12:24:48319 UploadProcess:523 - begin parse op attlog
4962931 INFO  2025-11-17 12:24:48329 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
4962931 INFO  2025-11-17 12:24:48329 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
4962932 INFO  2025-11-17 12:24:48330 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 08:24:47
4962933 INFO  2025-11-17 12:24:48331 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
4962933 INFO  2025-11-17 12:24:48331 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
4962934 INFO  2025-11-17 12:24:48332 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
4962935 INFO  2025-11-17 12:24:48333 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
4962935 INFO  2025-11-17 12:24:48333 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 08:24:47
4962936 INFO  2025-11-17 12:24:48334 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
4962936 INFO  2025-11-17 12:24:48334 UploadProcess:412 - attlog size:1
4962937 INFO  2025-11-17 12:24:48335 UploadProcess:525 - end parse op attlog
4962937 INFO  2025-11-17 12:24:48335 UploadProcess:327 - end process data and return msg to device
4962938 INFO  2025-11-17 12:24:48336 UploadProcess:331 - return msg to device and request over OK
4962935 INFO  2025-11-17 12:24:48333 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
4962939 INFO  2025-11-17 12:24:48337 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4962939 INFO  2025-11-17 12:24:48337 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
4962940 INFO  2025-11-17 12:24:48338 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4962940 INFO  2025-11-17 12:24:48338 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
4962940 INFO  2025-11-17 12:24:48338 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
4962941 INFO  2025-11-17 12:24:48339 ExternalApiUtil:170 - EXTERNAL API: Method: POST
4962941 INFO  2025-11-17 12:24:48339 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 15:24:48 EAT 2025
4962942 INFO  2025-11-17 12:24:48340 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
4962942 INFO  2025-11-17 12:24:48340 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
4962943 INFO  2025-11-17 12:24:48341 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
4962944 INFO  2025-11-17 12:24:48342 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 15:24 - Meal type determined: lunch
4962944 INFO  2025-11-17 12:24:48342 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
4962945 INFO  2025-11-17 12:24:48343 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
4962949 INFO  2025-11-17 12:24:48347 ExternalApiUtil:207 - EXTERNAL API: Request body written, getting response...
4963436 INFO  2025-11-17 12:24:48834 ExternalApiUtil:210 - EXTERNAL API: Response code received: 201
4963439 INFO  2025-11-17 12:24:48837 ExternalApiUtil:267 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4963440 INFO  2025-11-17 12:24:48838 ExternalApiUtil:268 - âœ… EXTERNAL API CALL SUCCESSFUL
4963441 INFO  2025-11-17 12:24:48839 ExternalApiUtil:269 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4963441 INFO  2025-11-17 12:24:48839 ExternalApiUtil:270 - EXTERNAL API: Student ID: 1002 (original: 1002)
4963442 INFO  2025-11-17 12:24:48840 ExternalApiUtil:271 - EXTERNAL API: HTTP Status Code: 201
4963442 INFO  2025-11-17 12:24:48840 ExternalApiUtil:272 - EXTERNAL API: API Response Success: true
4963443 INFO  2025-11-17 12:24:48841 ExternalApiUtil:273 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"8670b0b7-623a-4dd1-9985-869303c0135d","student_id":"1002","student_name":"Aaron Kailikia","admission_no":"1002","meal_type":"lunch","amount":0.0,"date":"2025-11-17T15:24:48.699273+03:00","status":"authorized","qr_code":"1002-lunch-2025-11-17-1763382288702","student_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T15:24:48.697533+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
4963443 INFO  2025-11-17 12:24:48841 ExternalApiUtil:274 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4963449 INFO  2025-11-17 12:24:48847 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1002
4963552 INFO  2025-11-17 12:24:48950 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,204,192.168.8.106,10,35,12,5,11110,2,0,0
4963555 INFO  2025-11-17 12:24:48953 DownloadProcess:59 - get cmd list over and begin contact:0
4963557 INFO  2025-11-17 12:24:48955 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,204,192.168.8.106,10,35,12,5,11110,2,0,0
4980482 INFO  2025-11-17 12:25:05880 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
4980502 INFO  2025-11-17 12:25:05900 DownloadProcess:59 - get cmd list over and begin contact:0
4998360 INFO  2025-11-17 12:25:23758 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
4998363 INFO  2025-11-17 12:25:23761 DownloadProcess:59 - get cmd list over and begin contact:0
5014249 INFO  2025-11-17 12:25:39647 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
5014261 INFO  2025-11-17 12:25:39659 UploadProcess:266 - update device stamp end and get stream.
5014262 INFO  2025-11-17 12:25:39660 UploadProcess:323 - data:1001	2025-11-18 08:25:39	0	15	0	0	0	0	0	0	

5014263 INFO  2025-11-17 12:25:39661 UploadProcess:324 - end get stream and process data
5014264 INFO  2025-11-17 12:25:39662 UploadProcess:523 - begin parse op attlog
5014279 INFO  2025-11-17 12:25:39677 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
5014280 INFO  2025-11-17 12:25:39678 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
5014281 INFO  2025-11-17 12:25:39679 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1001, User Name: boaz, Timestamp: 2025-11-18 08:25:39
5014282 INFO  2025-11-17 12:25:39680 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1001
5014283 INFO  2025-11-17 12:25:39681 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1001 ===
5014283 INFO  2025-11-17 12:25:39681 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1001
5014284 INFO  2025-11-17 12:25:39682 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1001
5014285 INFO  2025-11-17 12:25:39683 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1001, Timestamp: 2025-11-18 08:25:39
5014285 INFO  2025-11-17 12:25:39683 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
5014284 INFO  2025-11-17 12:25:39682 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1001
5014286 INFO  2025-11-17 12:25:39684 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
5014286 INFO  2025-11-17 12:25:39684 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
5014287 INFO  2025-11-17 12:25:39685 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
5014288 INFO  2025-11-17 12:25:39686 ExternalApiUtil:168 - EXTERNAL API: User ID: 1001
5014288 INFO  2025-11-17 12:25:39686 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
5014288 INFO  2025-11-17 12:25:39686 ExternalApiUtil:170 - EXTERNAL API: Method: POST
5014289 INFO  2025-11-17 12:25:39687 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 15:25:39 EAT 2025
5014286 INFO  2025-11-17 12:25:39684 UploadProcess:412 - attlog size:1
5014291 INFO  2025-11-17 12:25:39689 UploadProcess:525 - end parse op attlog
5014290 INFO  2025-11-17 12:25:39688 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
5014292 INFO  2025-11-17 12:25:39690 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
5014293 INFO  2025-11-17 12:25:39691 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1001, Formatted: 1001
5014294 INFO  2025-11-17 12:25:39692 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 15:25 - Meal type determined: lunch
5014292 INFO  2025-11-17 12:25:39690 UploadProcess:327 - end process data and return msg to device
5014295 INFO  2025-11-17 12:25:39693 UploadProcess:331 - return msg to device and request over OK
5014295 INFO  2025-11-17 12:25:39693 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1001", "meal_type": "lunch"}
5014297 INFO  2025-11-17 12:25:39695 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
5014303 INFO  2025-11-17 12:25:39701 ExternalApiUtil:207 - EXTERNAL API: Request body written, getting response...
5014673 INFO  2025-11-17 12:25:4071 ExternalApiUtil:210 - EXTERNAL API: Response code received: 201
5014675 INFO  2025-11-17 12:25:4073 ExternalApiUtil:267 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
5014677 INFO  2025-11-17 12:25:4075 ExternalApiUtil:268 - âœ… EXTERNAL API CALL SUCCESSFUL
5014677 INFO  2025-11-17 12:25:4075 ExternalApiUtil:269 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
5014678 INFO  2025-11-17 12:25:4076 ExternalApiUtil:270 - EXTERNAL API: Student ID: 1001 (original: 1001)
5014678 INFO  2025-11-17 12:25:4076 ExternalApiUtil:271 - EXTERNAL API: HTTP Status Code: 201
5014679 INFO  2025-11-17 12:25:4077 ExternalApiUtil:272 - EXTERNAL API: API Response Success: true
5014679 INFO  2025-11-17 12:25:4077 ExternalApiUtil:273 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"cb447595-64d8-4b29-ae5b-1302de2fd979","student_id":"1001","student_name":"Peter","admission_no":"1001","meal_type":"lunch","amount":0.0,"date":"2025-11-17T15:25:39.996879+03:00","status":"authorized","qr_code":"1001-lunch-2025-11-17-1763382339999","student_image":"/api/uploads/students/1001.png","created_at":"2025-11-17T15:25:39.995186+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1001","name":"Peter","class_name":"12","fee_balance":0.0,"payment_status":"paid","id":"4a5093ca-992c-4c25-8994-d0109681be50","face_registered":false,"face_image":null,"created_at":"2025-11-17T10:32:08.395587+03:00"}}
5014679 INFO  2025-11-17 12:25:4077 ExternalApiUtil:274 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
5014684 INFO  2025-11-17 12:25:4082 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1001
5019600 INFO  2025-11-17 12:25:44998 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,205,192.168.8.106,10,35,12,5,11110,2,0,0
5019603 INFO  2025-11-17 12:25:451 DownloadProcess:59 - get cmd list over and begin contact:0
5019604 INFO  2025-11-17 12:25:452 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,205,192.168.8.106,10,35,12,5,11110,2,0,0
5021610 INFO  2025-11-17 12:25:478 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
5021618 INFO  2025-11-17 12:25:4716 UploadProcess:266 - update device stamp end and get stream.
5021621 INFO  2025-11-17 12:25:4719 UploadProcess:323 - data:1003	2025-11-18 08:25:46	0	15	0	0	0	0	0	0	

5021621 INFO  2025-11-17 12:25:4719 UploadProcess:324 - end get stream and process data
5021622 INFO  2025-11-17 12:25:4720 UploadProcess:523 - begin parse op attlog
5021630 INFO  2025-11-17 12:25:4728 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
5021631 INFO  2025-11-17 12:25:4729 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
5021632 INFO  2025-11-17 12:25:4730 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1003, User Name: WINSTONE, Timestamp: 2025-11-18 08:25:46
5021633 INFO  2025-11-17 12:25:4731 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1003
5021633 INFO  2025-11-17 12:25:4731 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1003 ===
5021634 INFO  2025-11-17 12:25:4732 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1003
5021634 INFO  2025-11-17 12:25:4732 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1003
5021636 INFO  2025-11-17 12:25:4734 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1003, Timestamp: 2025-11-18 08:25:46
5021636 INFO  2025-11-17 12:25:4734 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
5021637 INFO  2025-11-17 12:25:4735 UploadProcess:412 - attlog size:1
5021637 INFO  2025-11-17 12:25:4735 UploadProcess:525 - end parse op attlog
5021637 INFO  2025-11-17 12:25:4735 UploadProcess:327 - end process data and return msg to device
5021634 INFO  2025-11-17 12:25:4732 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1003
5021638 INFO  2025-11-17 12:25:4736 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
5021639 INFO  2025-11-17 12:25:4737 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
5021639 INFO  2025-11-17 12:25:4737 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
5021639 INFO  2025-11-17 12:25:4737 ExternalApiUtil:168 - EXTERNAL API: User ID: 1003
5021639 INFO  2025-11-17 12:25:4737 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
5021640 INFO  2025-11-17 12:25:4738 ExternalApiUtil:170 - EXTERNAL API: Method: POST
5021640 INFO  2025-11-17 12:25:4738 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 15:25:47 EAT 2025
5021640 INFO  2025-11-17 12:25:4738 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
5021641 INFO  2025-11-17 12:25:4739 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
5021641 INFO  2025-11-17 12:25:4739 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1003, Formatted: 1003
5021638 INFO  2025-11-17 12:25:4736 UploadProcess:331 - return msg to device and request over OK
5021642 INFO  2025-11-17 12:25:4740 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 15:25 - Meal type determined: lunch
5021644 INFO  2025-11-17 12:25:4742 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1003", "meal_type": "lunch"}
5021644 INFO  2025-11-17 12:25:4742 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
5021648 INFO  2025-11-17 12:25:4746 ExternalApiUtil:207 - EXTERNAL API: Request body written, getting response...
5022146 INFO  2025-11-17 12:25:47544 ExternalApiUtil:210 - EXTERNAL API: Response code received: 201
5022147 INFO  2025-11-17 12:25:47545 ExternalApiUtil:267 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
5022148 INFO  2025-11-17 12:25:47546 ExternalApiUtil:268 - âœ… EXTERNAL API CALL SUCCESSFUL
5022148 INFO  2025-11-17 12:25:47546 ExternalApiUtil:269 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
5022149 INFO  2025-11-17 12:25:47547 ExternalApiUtil:270 - EXTERNAL API: Student ID: 1003 (original: 1003)
5022149 INFO  2025-11-17 12:25:47547 ExternalApiUtil:271 - EXTERNAL API: HTTP Status Code: 201
5022150 INFO  2025-11-17 12:25:47548 ExternalApiUtil:272 - EXTERNAL API: API Response Success: true
5022150 INFO  2025-11-17 12:25:47548 ExternalApiUtil:273 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"482b9435-9edd-41ef-b929-b401efb71497","student_id":"1003","student_name":"Winston Langat","admission_no":"1003","meal_type":"lunch","amount":0.0,"date":"2025-11-17T15:25:47.379297+03:00","status":"authorized","qr_code":"1003-lunch-2025-11-17-1763382347381","student_image":null,"created_at":"2025-11-17T15:25:47.377272+03:00","used_at":null},"eligible":true,"reason":"Student has partially paid fees. Meal card generated successfully.","student":{"student_id":"1003","name":"Winston Langat","class_name":"5","fee_balance":12355.0,"payment_status":"partial","id":"a58c53dc-38b2-4b6f-b307-3b33623a1597","face_registered":false,"face_image":null,"created_at":"2025-11-17T10:38:21.990355+03:00"}}
5022150 INFO  2025-11-17 12:25:47548 ExternalApiUtil:274 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
5022156 INFO  2025-11-17 12:25:47554 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1003
5040693 INFO  2025-11-17 12:26:0691 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,206,192.168.8.106,10,35,12,5,11110,2,0,0
5040741 INFO  2025-11-17 12:26:06139 DownloadProcess:59 - get cmd list over and begin contact:0
5040746 INFO  2025-11-17 12:26:06144 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,206,192.168.8.106,10,35,12,5,11110,2,0,0
5064853 INFO  2025-11-17 12:26:30251 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
5064856 INFO  2025-11-17 12:26:30254 DownloadProcess:59 - get cmd list over and begin contact:0
5088352 INFO  2025-11-17 12:26:53750 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
5088451 INFO  2025-11-17 12:26:53849 DownloadProcess:59 - get cmd list over and begin contact:0
5114622 INFO  2025-11-17 12:27:2020 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
5114676 INFO  2025-11-17 12:27:2074 DownloadProcess:59 - get cmd list over and begin contact:0
5142492 INFO  2025-11-17 12:27:47890 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
5142495 INFO  2025-11-17 12:27:47893 DownloadProcess:59 - get cmd list over and begin contact:0
5171422 INFO  2025-11-17 12:28:16820 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
5171423 INFO  2025-11-17 12:28:16821 DownloadProcess:59 - get cmd list over and begin contact:0
5202492 INFO  2025-11-17 12:28:47890 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
5202495 INFO  2025-11-17 12:28:47893 DownloadProcess:59 - get cmd list over and begin contact:0
5232492 INFO  2025-11-17 12:29:17890 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
5232494 INFO  2025-11-17 12:29:17892 DownloadProcess:59 - get cmd list over and begin contact:0
5263412 INFO  2025-11-17 12:29:48810 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
5263415 INFO  2025-11-17 12:29:48813 DownloadProcess:59 - get cmd list over and begin contact:0
5293396 INFO  2025-11-17 12:30:18794 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
5293399 INFO  2025-11-17 12:30:18797 DownloadProcess:59 - get cmd list over and begin contact:0
5324353 INFO  2025-11-17 12:30:49751 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
5324356 INFO  2025-11-17 12:30:49754 DownloadProcess:59 - get cmd list over and begin contact:0
5354413 INFO  2025-11-17 12:31:19811 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
5354415 INFO  2025-11-17 12:31:19813 DownloadProcess:59 - get cmd list over and begin contact:0
5385473 INFO  2025-11-17 12:31:50871 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
5385475 INFO  2025-11-17 12:31:50873 DownloadProcess:59 - get cmd list over and begin contact:0
5415474 INFO  2025-11-17 12:32:20872 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
5415477 INFO  2025-11-17 12:32:20875 DownloadProcess:59 - get cmd list over and begin contact:0
5446403 INFO  2025-11-17 12:32:51801 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
5446405 INFO  2025-11-17 12:32:51803 DownloadProcess:59 - get cmd list over and begin contact:0
5476423 INFO  2025-11-17 12:33:21821 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
5476432 INFO  2025-11-17 12:33:21830 DownloadProcess:59 - get cmd list over and begin contact:0
5507342 INFO  2025-11-17 12:33:52740 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
5507344 INFO  2025-11-17 12:33:52742 DownloadProcess:59 - get cmd list over and begin contact:0
5992459 INFO  2025-11-17 12:41:57857 UploadProcess:63 - get request and make the device options :192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&options=all&language=69&pushver=2.4.1&DeviceType=att&PushOptionsFlag=1
5992862 INFO  2025-11-17 12:41:58260 UploadProcess:90 - GET OPTION FROM: TDBD250100333
ATTLOGStamp=9999
OPERLOGStamp=0
ATTPHOTOStamp=0
BIODATAStamp=0
IDCARDStamp=0
ERRORLOGStamp=0
TransFlag=TransData AttLog	OpLog	AttPhoto	EnrollUser	ChgUser	EnrollFP	ChgFP	FPImag	FACE	UserPic	BioPhoto
ErrorDelay=60
Delay=30
transTimes=00:00;14:05
TransInterval=1
Realtime=1
Encrypt=0
ServerVer=2.2.14
TimeZone=1200

5995346 INFO  2025-11-17 12:42:00744 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,206,192.168.8.106,10,35,12,5,11110,2,0,0
5995604 INFO  2025-11-17 12:42:012 DownloadProcess:59 - get cmd list over and begin contact:0
5995618 INFO  2025-11-17 12:42:0116 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,206,192.168.8.106,10,35,12,5,11110,2,0,0
6000407 INFO  2025-11-17 12:42:05805 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6000410 INFO  2025-11-17 12:42:05808 DownloadProcess:59 - get cmd list over and begin contact:0
6006230 INFO  2025-11-17 12:42:11628 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6006234 INFO  2025-11-17 12:42:11632 DownloadProcess:59 - get cmd list over and begin contact:0
6014220 INFO  2025-11-17 12:42:19618 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6014310 INFO  2025-11-17 12:42:19708 DownloadProcess:59 - get cmd list over and begin contact:0
6024549 INFO  2025-11-17 12:42:29947 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6024552 INFO  2025-11-17 12:42:29950 DownloadProcess:59 - get cmd list over and begin contact:0
6031567 INFO  2025-11-17 12:42:36965 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
6031792 INFO  2025-11-17 12:42:37190 UploadProcess:266 - update device stamp end and get stream.
6031795 INFO  2025-11-17 12:42:37193 UploadProcess:323 - data:1002	2025-11-18 08:42:36	0	15	0	0	0	0	0	0	

6031796 INFO  2025-11-17 12:42:37194 UploadProcess:324 - end get stream and process data
6031796 INFO  2025-11-17 12:42:37194 UploadProcess:523 - begin parse op attlog
6031803 INFO  2025-11-17 12:42:37201 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
6031804 INFO  2025-11-17 12:42:37202 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
6031805 INFO  2025-11-17 12:42:37203 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 08:42:36
6031805 INFO  2025-11-17 12:42:37203 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
6031806 INFO  2025-11-17 12:42:37204 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
6031806 INFO  2025-11-17 12:42:37204 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
6031807 INFO  2025-11-17 12:42:37205 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
6031808 INFO  2025-11-17 12:42:37206 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 08:42:36
6031809 INFO  2025-11-17 12:42:37207 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
6031810 INFO  2025-11-17 12:42:37208 UploadProcess:412 - attlog size:1
6031812 INFO  2025-11-17 12:42:37210 UploadProcess:525 - end parse op attlog
6031813 INFO  2025-11-17 12:42:37211 UploadProcess:327 - end process data and return msg to device
6031814 INFO  2025-11-17 12:42:37212 UploadProcess:331 - return msg to device and request over OK
6031807 INFO  2025-11-17 12:42:37205 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
6031817 INFO  2025-11-17 12:42:37215 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
6031817 INFO  2025-11-17 12:42:37215 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
6031818 INFO  2025-11-17 12:42:37216 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
6031819 INFO  2025-11-17 12:42:37217 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
6031820 INFO  2025-11-17 12:42:37218 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
6031821 INFO  2025-11-17 12:42:37219 ExternalApiUtil:170 - EXTERNAL API: Method: POST
6031821 INFO  2025-11-17 12:42:37219 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 15:42:37 EAT 2025
6031822 INFO  2025-11-17 12:42:37220 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
6031822 INFO  2025-11-17 12:42:37220 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
6031823 INFO  2025-11-17 12:42:37221 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
6031824 INFO  2025-11-17 12:42:37222 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 15:42 - Meal type determined: lunch
6031824 INFO  2025-11-17 12:42:37222 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
6031825 INFO  2025-11-17 12:42:37223 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
6031829 INFO  2025-11-17 12:42:37227 ExternalApiUtil:207 - EXTERNAL API: Request body written, getting response...
6032265 INFO  2025-11-17 12:42:37663 ExternalApiUtil:210 - EXTERNAL API: Response code received: 201
6032269 INFO  2025-11-17 12:42:37667 ExternalApiUtil:267 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
6032270 INFO  2025-11-17 12:42:37668 ExternalApiUtil:268 - âœ… EXTERNAL API CALL SUCCESSFUL
6032272 INFO  2025-11-17 12:42:37670 ExternalApiUtil:269 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
6032273 INFO  2025-11-17 12:42:37671 ExternalApiUtil:270 - EXTERNAL API: Student ID: 1002 (original: 1002)
6032273 INFO  2025-11-17 12:42:37671 ExternalApiUtil:271 - EXTERNAL API: HTTP Status Code: 201
6032274 INFO  2025-11-17 12:42:37672 ExternalApiUtil:272 - EXTERNAL API: API Response Success: true
6032274 INFO  2025-11-17 12:42:37672 ExternalApiUtil:273 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"47530ad8-3c53-4ae4-bb32-d0546499b7f1","student_id":"1002","student_name":"Aaron Kailikia","admission_no":"1002","meal_type":"lunch","amount":0.0,"date":"2025-11-17T15:42:37.357728+03:00","status":"authorized","qr_code":"1002-lunch-2025-11-17-1763383357359","student_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T15:42:37.356841+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
6032275 INFO  2025-11-17 12:42:37673 ExternalApiUtil:274 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
6032283 INFO  2025-11-17 12:42:37681 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1002
6035719 INFO  2025-11-17 12:42:41117 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,207,192.168.8.106,10,35,12,5,11110,2,0,0
6035726 INFO  2025-11-17 12:42:41124 DownloadProcess:59 - get cmd list over and begin contact:0
6035728 INFO  2025-11-17 12:42:41126 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,207,192.168.8.106,10,35,12,5,11110,2,0,0
6047587 INFO  2025-11-17 12:42:52985 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6047588 INFO  2025-11-17 12:42:52986 DownloadProcess:59 - get cmd list over and begin contact:0
6062604 INFO  2025-11-17 12:43:082 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6062606 INFO  2025-11-17 12:43:084 DownloadProcess:59 - get cmd list over and begin contact:0
6078513 INFO  2025-11-17 12:43:23911 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6078675 INFO  2025-11-17 12:43:2473 DownloadProcess:59 - get cmd list over and begin contact:0
6094534 INFO  2025-11-17 12:43:39932 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6094537 INFO  2025-11-17 12:43:39935 DownloadProcess:59 - get cmd list over and begin contact:0
6112464 INFO  2025-11-17 12:43:57862 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6112466 INFO  2025-11-17 12:43:57864 DownloadProcess:59 - get cmd list over and begin contact:0
6133554 INFO  2025-11-17 12:44:18952 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6133555 INFO  2025-11-17 12:44:18953 DownloadProcess:59 - get cmd list over and begin contact:0
6154644 INFO  2025-11-17 12:44:4042 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6154646 INFO  2025-11-17 12:44:4044 DownloadProcess:59 - get cmd list over and begin contact:0
6177645 INFO  2025-11-17 12:45:0343 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6177647 INFO  2025-11-17 12:45:0345 DownloadProcess:59 - get cmd list over and begin contact:0
6202006 INFO  2025-11-17 12:45:27404 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6202012 INFO  2025-11-17 12:45:27410 DownloadProcess:59 - get cmd list over and begin contact:0
6228026 INFO  2025-11-17 12:45:53424 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6228030 INFO  2025-11-17 12:45:53428 DownloadProcess:59 - get cmd list over and begin contact:0
6256146 INFO  2025-11-17 12:46:21544 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6256148 INFO  2025-11-17 12:46:21546 DownloadProcess:59 - get cmd list over and begin contact:0
6285124 INFO  2025-11-17 12:46:50522 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6285128 INFO  2025-11-17 12:46:50526 DownloadProcess:59 - get cmd list over and begin contact:0
6316048 INFO  2025-11-17 12:47:21446 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6316049 INFO  2025-11-17 12:47:21447 DownloadProcess:59 - get cmd list over and begin contact:0
6346051 INFO  2025-11-17 12:47:51449 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6346054 INFO  2025-11-17 12:47:51452 DownloadProcess:59 - get cmd list over and begin contact:0
6377076 INFO  2025-11-17 12:48:22474 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6377079 INFO  2025-11-17 12:48:22477 DownloadProcess:59 - get cmd list over and begin contact:0
6406996 INFO  2025-11-17 12:48:52394 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6407021 INFO  2025-11-17 12:48:52419 DownloadProcess:59 - get cmd list over and begin contact:0
6438034 INFO  2025-11-17 12:49:23432 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6438038 INFO  2025-11-17 12:49:23436 DownloadProcess:59 - get cmd list over and begin contact:0
6467976 INFO  2025-11-17 12:49:53374 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6467977 INFO  2025-11-17 12:49:53375 DownloadProcess:59 - get cmd list over and begin contact:0
6498957 INFO  2025-11-17 12:50:24355 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6498959 INFO  2025-11-17 12:50:24357 DownloadProcess:59 - get cmd list over and begin contact:0
6528979 INFO  2025-11-17 12:50:54377 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6528982 INFO  2025-11-17 12:50:54380 DownloadProcess:59 - get cmd list over and begin contact:0
6559106 INFO  2025-11-17 12:51:24504 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6559108 INFO  2025-11-17 12:51:24506 DownloadProcess:59 - get cmd list over and begin contact:0
6589047 INFO  2025-11-17 12:51:54445 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6589050 INFO  2025-11-17 12:51:54448 DownloadProcess:59 - get cmd list over and begin contact:0
6620245 INFO  2025-11-17 12:52:25643 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6620612 INFO  2025-11-17 12:52:2610 DownloadProcess:59 - get cmd list over and begin contact:0
6651115 INFO  2025-11-17 12:52:56513 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6651121 INFO  2025-11-17 12:52:56519 DownloadProcess:59 - get cmd list over and begin contact:0
6682100 INFO  2025-11-17 12:53:27498 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6682131 INFO  2025-11-17 12:53:27529 DownloadProcess:59 - get cmd list over and begin contact:0
6949288 INFO  2025-11-17 12:57:54686 UploadProcess:63 - get request and make the device options :192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&options=all&language=69&pushver=2.4.1&DeviceType=att&PushOptionsFlag=1
6950232 INFO  2025-11-17 12:57:55630 UploadProcess:90 - GET OPTION FROM: TDBD250100333
ATTLOGStamp=9999
OPERLOGStamp=0
ATTPHOTOStamp=0
BIODATAStamp=0
IDCARDStamp=0
ERRORLOGStamp=0
TransFlag=TransData AttLog	OpLog	AttPhoto	EnrollUser	ChgUser	EnrollFP	ChgFP	FPImag	FACE	UserPic	BioPhoto
ErrorDelay=60
Delay=30
transTimes=00:00;14:05
TransInterval=1
Realtime=1
Encrypt=0
ServerVer=2.2.14
TimeZone=1200

6952397 INFO  2025-11-17 12:57:57795 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,208,192.168.8.106,10,35,12,5,11110,2,0,0
6952446 INFO  2025-11-17 12:57:57844 DownloadProcess:59 - get cmd list over and begin contact:0
6952452 INFO  2025-11-17 12:57:57850 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,208,192.168.8.106,10,35,12,5,11110,2,0,0
6953609 INFO  2025-11-17 12:57:597 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
6953795 INFO  2025-11-17 12:57:59193 UploadProcess:266 - update device stamp end and get stream.
6954106 INFO  2025-11-17 12:57:59504 UploadProcess:323 - data:1002	2025-11-18 08:57:57	0	15	0	0	0	0	0	0	

6954110 INFO  2025-11-17 12:57:59508 UploadProcess:324 - end get stream and process data
6954114 INFO  2025-11-17 12:57:59512 UploadProcess:523 - begin parse op attlog
6954562 INFO  2025-11-17 12:57:59960 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
6954747 INFO  2025-11-17 12:58:00145 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
6954771 INFO  2025-11-17 12:58:00169 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 08:57:57
6954779 INFO  2025-11-17 12:58:00177 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
6955002 INFO  2025-11-17 12:58:00400 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
6955005 INFO  2025-11-17 12:58:00403 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
6955019 INFO  2025-11-17 12:58:00417 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
6955294 INFO  2025-11-17 12:58:00692 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 08:57:57
6955530 INFO  2025-11-17 12:58:00928 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
6955025 INFO  2025-11-17 12:58:00423 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
6955567 INFO  2025-11-17 12:58:00965 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
6955568 INFO  2025-11-17 12:58:00966 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
6955558 INFO  2025-11-17 12:58:00956 UploadProcess:412 - attlog size:1
6955583 INFO  2025-11-17 12:58:00981 UploadProcess:525 - end parse op attlog
6955572 INFO  2025-11-17 12:58:00970 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
6955590 INFO  2025-11-17 12:58:00988 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
6955589 INFO  2025-11-17 12:58:00987 UploadProcess:327 - end process data and return msg to device
6955594 INFO  2025-11-17 12:58:00992 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
6955596 INFO  2025-11-17 12:58:00994 ExternalApiUtil:170 - EXTERNAL API: Method: POST
6955595 INFO  2025-11-17 12:58:00993 UploadProcess:331 - return msg to device and request over OK
6955911 INFO  2025-11-17 12:58:01309 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 15:58:01 EAT 2025
6955924 INFO  2025-11-17 12:58:01322 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
6955928 INFO  2025-11-17 12:58:01326 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
6955934 INFO  2025-11-17 12:58:01332 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
6955936 INFO  2025-11-17 12:58:01334 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 15:58 - Meal type determined: lunch
6955938 INFO  2025-11-17 12:58:01336 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
6955939 INFO  2025-11-17 12:58:01337 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
6956365 ERROR 2025-11-17 12:58:01763 ExternalApiUtil:303 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
6956367 ERROR 2025-11-17 12:58:01765 ExternalApiUtil:304 - âŒ EXTERNAL API CALL FAILED
6956367 ERROR 2025-11-17 12:58:01765 ExternalApiUtil:305 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
6956368 ERROR 2025-11-17 12:58:01766 ExternalApiUtil:306 - EXTERNAL API: Student ID: 1002
6956378 ERROR 2025-11-17 12:58:01776 ExternalApiUtil:307 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
6956386 ERROR 2025-11-17 12:58:01784 ExternalApiUtil:308 - EXTERNAL API: Error: Connection refused (Connection refused)
6956390 ERROR 2025-11-17 12:58:01788 ExternalApiUtil:309 - EXTERNAL API: Exception: java.net.ConnectException
6956394 ERROR 2025-11-17 12:58:01792 ExternalApiUtil:310 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
6957898 ERROR 2025-11-17 12:58:03296 ExternalApiUtil:311 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:203)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:133)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
6957952 INFO  2025-11-17 12:58:03350 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
6958112 INFO  2025-11-17 12:58:03510 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6958133 INFO  2025-11-17 12:58:03531 DownloadProcess:59 - get cmd list over and begin contact:0
6964076 INFO  2025-11-17 12:58:09474 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6964096 INFO  2025-11-17 12:58:09494 DownloadProcess:59 - get cmd list over and begin contact:0
6972180 INFO  2025-11-17 12:58:17578 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6972182 INFO  2025-11-17 12:58:17580 DownloadProcess:59 - get cmd list over and begin contact:0
6981040 INFO  2025-11-17 12:58:26438 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6981043 INFO  2025-11-17 12:58:26441 DownloadProcess:59 - get cmd list over and begin contact:0
6992098 INFO  2025-11-17 12:58:37496 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
6992100 INFO  2025-11-17 12:58:37498 DownloadProcess:59 - get cmd list over and begin contact:0
6994209 INFO  2025-11-17 12:58:39607 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=OPERLOG&Stamp=9999
6994220 INFO  2025-11-17 12:58:39618 UploadProcess:266 - update device stamp end and get stream.
6994222 INFO  2025-11-17 12:58:39620 UploadProcess:323 - data:OPLOG 4	1002	2025-11-18 08:58:39	1002	0	0	0

6994223 INFO  2025-11-17 12:58:39621 UploadProcess:324 - end get stream and process data
6994224 INFO  2025-11-17 12:58:39622 UploadProcess:474 - begin parse op log
6994250 INFO  2025-11-17 12:58:39648 UploadProcess:235 - oplog size:1
6994252 INFO  2025-11-17 12:58:39650 UploadProcess:476 - end parse op log
6994253 INFO  2025-11-17 12:58:39651 UploadProcess:327 - end process data and return msg to device
6994255 INFO  2025-11-17 12:58:39653 UploadProcess:331 - return msg to device and request over OK
7004078 INFO  2025-11-17 12:58:49476 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
7004080 INFO  2025-11-17 12:58:49478 DownloadProcess:59 - get cmd list over and begin contact:0
7019031 INFO  2025-11-17 12:59:04429 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
7019037 INFO  2025-11-17 12:59:04435 DownloadProcess:59 - get cmd list over and begin contact:0
7033969 INFO  2025-11-17 12:59:19367 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
7033971 INFO  2025-11-17 12:59:19369 DownloadProcess:59 - get cmd list over and begin contact:0
7051009 INFO  2025-11-17 12:59:36407 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
7051094 INFO  2025-11-17 12:59:36492 DownloadProcess:59 - get cmd list over and begin contact:0
7068993 INFO  2025-11-17 12:59:54391 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
7069001 INFO  2025-11-17 12:59:54399 DownloadProcess:59 - get cmd list over and begin contact:0
7090033 INFO  2025-11-17 13:00:15431 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
7090040 INFO  2025-11-17 13:00:15438 DownloadProcess:59 - get cmd list over and begin contact:0
7111507 INFO  2025-11-17 13:00:36905 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
7111526 INFO  2025-11-17 13:00:36924 DownloadProcess:59 - get cmd list over and begin contact:0
7135969 INFO  2025-11-17 13:01:01367 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
7135972 INFO  2025-11-17 13:01:01370 DownloadProcess:59 - get cmd list over and begin contact:0
7159542 INFO  2025-11-17 13:01:24940 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
7159546 INFO  2025-11-17 13:01:24944 DownloadProcess:59 - get cmd list over and begin contact:0
7185431 INFO  2025-11-17 13:01:50829 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
7185446 INFO  2025-11-17 13:01:50844 DownloadProcess:59 - get cmd list over and begin contact:0
7210217 INFO  2025-11-17 13:02:15615 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
7210259 INFO  2025-11-17 13:02:15657 UploadProcess:266 - update device stamp end and get stream.
7210292 INFO  2025-11-17 13:02:15690 UploadProcess:323 - data:1002	2025-11-18 09:02:15	0	15	0	0	0	0	0	0	

7210297 INFO  2025-11-17 13:02:15695 UploadProcess:324 - end get stream and process data
7210321 INFO  2025-11-17 13:02:15719 UploadProcess:523 - begin parse op attlog
7210358 INFO  2025-11-17 13:02:15756 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
7210359 INFO  2025-11-17 13:02:15757 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
7210360 INFO  2025-11-17 13:02:15758 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 09:02:15
7210368 INFO  2025-11-17 13:02:15766 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
7210371 INFO  2025-11-17 13:02:15769 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
7210373 INFO  2025-11-17 13:02:15771 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
7210374 INFO  2025-11-17 13:02:15772 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
7210375 INFO  2025-11-17 13:02:15773 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
7210377 INFO  2025-11-17 13:02:15775 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7210378 INFO  2025-11-17 13:02:15776 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
7210379 INFO  2025-11-17 13:02:15777 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7210380 INFO  2025-11-17 13:02:15778 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
7210384 INFO  2025-11-17 13:02:15782 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
7210386 INFO  2025-11-17 13:02:15784 ExternalApiUtil:170 - EXTERNAL API: Method: POST
7210387 INFO  2025-11-17 13:02:15785 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 16:02:15 EAT 2025
7210388 INFO  2025-11-17 13:02:15786 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
7210375 INFO  2025-11-17 13:02:15773 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 09:02:15
7210391 INFO  2025-11-17 13:02:15789 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
7210392 INFO  2025-11-17 13:02:15790 UploadProcess:412 - attlog size:1
7210394 INFO  2025-11-17 13:02:15792 UploadProcess:525 - end parse op attlog
7210397 INFO  2025-11-17 13:02:15795 UploadProcess:327 - end process data and return msg to device
7210390 INFO  2025-11-17 13:02:15788 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
7210413 INFO  2025-11-17 13:02:15811 UploadProcess:331 - return msg to device and request over OK
7210419 INFO  2025-11-17 13:02:15817 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
7210423 INFO  2025-11-17 13:02:15821 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 16:02 - Meal type determined: lunch
7210424 INFO  2025-11-17 13:02:15822 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
7210425 INFO  2025-11-17 13:02:15823 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
7210437 ERROR 2025-11-17 13:02:15835 ExternalApiUtil:303 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7210439 ERROR 2025-11-17 13:02:15837 ExternalApiUtil:304 - âŒ EXTERNAL API CALL FAILED
7210440 ERROR 2025-11-17 13:02:15838 ExternalApiUtil:305 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7210441 ERROR 2025-11-17 13:02:15839 ExternalApiUtil:306 - EXTERNAL API: Student ID: 1002
7210442 ERROR 2025-11-17 13:02:15840 ExternalApiUtil:307 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
7210443 ERROR 2025-11-17 13:02:15841 ExternalApiUtil:308 - EXTERNAL API: Error: Connection refused (Connection refused)
7210445 ERROR 2025-11-17 13:02:15843 ExternalApiUtil:309 - EXTERNAL API: Exception: java.net.ConnectException
7210446 ERROR 2025-11-17 13:02:15844 ExternalApiUtil:310 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7210451 ERROR 2025-11-17 13:02:15849 ExternalApiUtil:311 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:203)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:133)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
7210470 INFO  2025-11-17 13:02:15868 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
7213622 INFO  2025-11-17 13:02:1920 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,209,192.168.8.106,10,35,12,5,11110,2,0,0
7213628 INFO  2025-11-17 13:02:1926 DownloadProcess:59 - get cmd list over and begin contact:0
7213629 INFO  2025-11-17 13:02:1927 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,209,192.168.8.106,10,35,12,5,11110,2,0,0
7242480 INFO  2025-11-17 13:02:47878 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
7242484 INFO  2025-11-17 13:02:47882 DownloadProcess:59 - get cmd list over and begin contact:0
7273499 INFO  2025-11-17 13:03:18897 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
7273503 INFO  2025-11-17 13:03:18901 DownloadProcess:59 - get cmd list over and begin contact:0
7286890 INFO  2025-11-17 13:03:32288 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
7286908 INFO  2025-11-17 13:03:32306 UploadProcess:266 - update device stamp end and get stream.
7286909 INFO  2025-11-17 13:03:32307 UploadProcess:323 - data:1002	2025-11-18 09:03:32	0	15	0	0	0	0	0	0	

7286910 INFO  2025-11-17 13:03:32308 UploadProcess:324 - end get stream and process data
7286912 INFO  2025-11-17 13:03:32310 UploadProcess:523 - begin parse op attlog
7286918 INFO  2025-11-17 13:03:32316 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
7286919 INFO  2025-11-17 13:03:32317 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
7286919 INFO  2025-11-17 13:03:32317 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 09:03:32
7286920 INFO  2025-11-17 13:03:32318 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
7286920 INFO  2025-11-17 13:03:32318 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
7286921 INFO  2025-11-17 13:03:32319 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
7286922 INFO  2025-11-17 13:03:32320 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
7286922 INFO  2025-11-17 13:03:32320 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 09:03:32
7286923 INFO  2025-11-17 13:03:32321 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
7286923 INFO  2025-11-17 13:03:32321 UploadProcess:412 - attlog size:1
7286926 INFO  2025-11-17 13:03:32324 UploadProcess:525 - end parse op attlog
7286926 INFO  2025-11-17 13:03:32324 UploadProcess:327 - end process data and return msg to device
7286927 INFO  2025-11-17 13:03:32325 UploadProcess:331 - return msg to device and request over OK
7286922 INFO  2025-11-17 13:03:32320 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
7286928 INFO  2025-11-17 13:03:32326 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7286929 INFO  2025-11-17 13:03:32327 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
7286929 INFO  2025-11-17 13:03:32327 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7286930 INFO  2025-11-17 13:03:32328 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
7286931 INFO  2025-11-17 13:03:32329 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
7286932 INFO  2025-11-17 13:03:32330 ExternalApiUtil:170 - EXTERNAL API: Method: POST
7286933 INFO  2025-11-17 13:03:32331 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 16:03:32 EAT 2025
7286933 INFO  2025-11-17 13:03:32331 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
7286934 INFO  2025-11-17 13:03:32332 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
7286936 INFO  2025-11-17 13:03:32334 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
7286936 INFO  2025-11-17 13:03:32334 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 16:03 - Meal type determined: lunch
7286937 INFO  2025-11-17 13:03:32335 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
7286937 INFO  2025-11-17 13:03:32335 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
7286939 ERROR 2025-11-17 13:03:32337 ExternalApiUtil:303 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7286940 ERROR 2025-11-17 13:03:32338 ExternalApiUtil:304 - âŒ EXTERNAL API CALL FAILED
7286941 ERROR 2025-11-17 13:03:32339 ExternalApiUtil:305 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7286942 ERROR 2025-11-17 13:03:32340 ExternalApiUtil:306 - EXTERNAL API: Student ID: 1002
7286942 ERROR 2025-11-17 13:03:32340 ExternalApiUtil:307 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
7286942 ERROR 2025-11-17 13:03:32340 ExternalApiUtil:308 - EXTERNAL API: Error: Connection refused (Connection refused)
7286943 ERROR 2025-11-17 13:03:32341 ExternalApiUtil:309 - EXTERNAL API: Exception: java.net.ConnectException
7286944 ERROR 2025-11-17 13:03:32342 ExternalApiUtil:310 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7286944 ERROR 2025-11-17 13:03:32342 ExternalApiUtil:311 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:203)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:133)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
7286953 INFO  2025-11-17 13:03:32351 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
7303675 INFO  2025-11-17 13:03:4973 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,210,192.168.8.106,10,35,12,5,11110,2,0,0
7303680 INFO  2025-11-17 13:03:4978 DownloadProcess:59 - get cmd list over and begin contact:0
7303681 INFO  2025-11-17 13:03:4979 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,210,192.168.8.106,10,35,12,5,11110,2,0,0
7334543 INFO  2025-11-17 13:04:19941 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
7334545 INFO  2025-11-17 13:04:19943 DownloadProcess:59 - get cmd list over and begin contact:0
7347526 INFO  2025-11-17 13:04:32924 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
7347549 INFO  2025-11-17 13:04:32947 UploadProcess:266 - update device stamp end and get stream.
7347555 INFO  2025-11-17 13:04:32953 UploadProcess:323 - data:1002	2025-11-18 09:04:32	0	15	0	0	0	0	0	0	

7347556 INFO  2025-11-17 13:04:32954 UploadProcess:324 - end get stream and process data
7347558 INFO  2025-11-17 13:04:32956 UploadProcess:523 - begin parse op attlog
7347665 INFO  2025-11-17 13:04:3363 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
7347666 INFO  2025-11-17 13:04:3364 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
7347669 INFO  2025-11-17 13:04:3367 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 09:04:32
7347670 INFO  2025-11-17 13:04:3368 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
7347672 INFO  2025-11-17 13:04:3370 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
7347673 INFO  2025-11-17 13:04:3371 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
7347674 INFO  2025-11-17 13:04:3372 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
7347674 INFO  2025-11-17 13:04:3372 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 09:04:32
7347675 INFO  2025-11-17 13:04:3373 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
7347676 INFO  2025-11-17 13:04:3374 UploadProcess:412 - attlog size:1
7347678 INFO  2025-11-17 13:04:3376 UploadProcess:525 - end parse op attlog
7347678 INFO  2025-11-17 13:04:3376 UploadProcess:327 - end process data and return msg to device
7347677 INFO  2025-11-17 13:04:3375 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
7347680 INFO  2025-11-17 13:04:3378 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7347681 INFO  2025-11-17 13:04:3379 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
7347681 INFO  2025-11-17 13:04:3379 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7347682 INFO  2025-11-17 13:04:3380 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
7347683 INFO  2025-11-17 13:04:3381 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
7347684 INFO  2025-11-17 13:04:3382 ExternalApiUtil:170 - EXTERNAL API: Method: POST
7347685 INFO  2025-11-17 13:04:3383 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 16:04:33 EAT 2025
7347686 INFO  2025-11-17 13:04:3384 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
7347679 INFO  2025-11-17 13:04:3377 UploadProcess:331 - return msg to device and request over OK
7347687 INFO  2025-11-17 13:04:3385 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
7347817 INFO  2025-11-17 13:04:33215 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
7347820 INFO  2025-11-17 13:04:33218 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 16:04 - Meal type determined: lunch
7347821 INFO  2025-11-17 13:04:33219 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
7347821 INFO  2025-11-17 13:04:33219 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
7347830 ERROR 2025-11-17 13:04:33228 ExternalApiUtil:303 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7347834 ERROR 2025-11-17 13:04:33232 ExternalApiUtil:304 - âŒ EXTERNAL API CALL FAILED
7347836 ERROR 2025-11-17 13:04:33234 ExternalApiUtil:305 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7347889 ERROR 2025-11-17 13:04:33287 ExternalApiUtil:306 - EXTERNAL API: Student ID: 1002
7347892 ERROR 2025-11-17 13:04:33290 ExternalApiUtil:307 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
7347898 ERROR 2025-11-17 13:04:33296 ExternalApiUtil:308 - EXTERNAL API: Error: Connection refused (Connection refused)
7347903 ERROR 2025-11-17 13:04:33301 ExternalApiUtil:309 - EXTERNAL API: Exception: java.net.ConnectException
7347904 ERROR 2025-11-17 13:04:33302 ExternalApiUtil:310 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7347906 ERROR 2025-11-17 13:04:33304 ExternalApiUtil:311 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:203)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:133)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
7347919 INFO  2025-11-17 13:04:33317 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
7357888 INFO  2025-11-17 13:04:43286 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
7357901 INFO  2025-11-17 13:04:43299 UploadProcess:266 - update device stamp end and get stream.
7357903 INFO  2025-11-17 13:04:43301 UploadProcess:323 - data:1001	2025-11-18 09:04:42	0	15	0	0	0	0	0	0	

7357904 INFO  2025-11-17 13:04:43302 UploadProcess:324 - end get stream and process data
7357904 INFO  2025-11-17 13:04:43302 UploadProcess:523 - begin parse op attlog
7357916 INFO  2025-11-17 13:04:43314 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
7357917 INFO  2025-11-17 13:04:43315 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
7357918 INFO  2025-11-17 13:04:43316 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1001, User Name: boaz, Timestamp: 2025-11-18 09:04:42
7357920 INFO  2025-11-17 13:04:43318 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1001
7357922 INFO  2025-11-17 13:04:43320 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1001 ===
7357922 INFO  2025-11-17 13:04:43320 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1001
7357924 INFO  2025-11-17 13:04:43322 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1001
7357924 INFO  2025-11-17 13:04:43322 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1001, Timestamp: 2025-11-18 09:04:42
7357925 INFO  2025-11-17 13:04:43323 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
7357926 INFO  2025-11-17 13:04:43324 UploadProcess:412 - attlog size:1
7357927 INFO  2025-11-17 13:04:43325 UploadProcess:525 - end parse op attlog
7357928 INFO  2025-11-17 13:04:43326 UploadProcess:327 - end process data and return msg to device
7357929 INFO  2025-11-17 13:04:43327 UploadProcess:331 - return msg to device and request over OK
7357924 INFO  2025-11-17 13:04:43322 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1001
7357931 INFO  2025-11-17 13:04:43329 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7357932 INFO  2025-11-17 13:04:43330 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
7357932 INFO  2025-11-17 13:04:43330 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7357932 INFO  2025-11-17 13:04:43330 ExternalApiUtil:168 - EXTERNAL API: User ID: 1001
7357933 INFO  2025-11-17 13:04:43331 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
7357937 INFO  2025-11-17 13:04:43335 ExternalApiUtil:170 - EXTERNAL API: Method: POST
7357938 INFO  2025-11-17 13:04:43336 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 16:04:43 EAT 2025
7357940 INFO  2025-11-17 13:04:43338 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
7357941 INFO  2025-11-17 13:04:43339 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
7357943 INFO  2025-11-17 13:04:43341 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1001, Formatted: 1001
7357945 INFO  2025-11-17 13:04:43343 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 16:04 - Meal type determined: lunch
7357946 INFO  2025-11-17 13:04:43344 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1001", "meal_type": "lunch"}
7357946 INFO  2025-11-17 13:04:43344 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
7357950 ERROR 2025-11-17 13:04:43348 ExternalApiUtil:303 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7357951 ERROR 2025-11-17 13:04:43349 ExternalApiUtil:304 - âŒ EXTERNAL API CALL FAILED
7357952 ERROR 2025-11-17 13:04:43350 ExternalApiUtil:305 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7357953 ERROR 2025-11-17 13:04:43351 ExternalApiUtil:306 - EXTERNAL API: Student ID: 1001
7357953 ERROR 2025-11-17 13:04:43351 ExternalApiUtil:307 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
7357953 ERROR 2025-11-17 13:04:43351 ExternalApiUtil:308 - EXTERNAL API: Error: Connection refused (Connection refused)
7357953 ERROR 2025-11-17 13:04:43351 ExternalApiUtil:309 - EXTERNAL API: Exception: java.net.ConnectException
7357954 ERROR 2025-11-17 13:04:43352 ExternalApiUtil:310 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7357956 ERROR 2025-11-17 13:04:43354 ExternalApiUtil:311 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:203)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:133)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
7357965 INFO  2025-11-17 13:04:43363 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1001
7364617 INFO  2025-11-17 13:04:5015 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,212,192.168.8.106,10,35,12,5,11110,2,0,0
7364621 INFO  2025-11-17 13:04:5019 DownloadProcess:59 - get cmd list over and begin contact:0
7364626 INFO  2025-11-17 13:04:5024 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,212,192.168.8.106,10,35,12,5,11110,2,0,0
7395571 INFO  2025-11-17 13:05:20969 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
7395580 INFO  2025-11-17 13:05:20978 DownloadProcess:59 - get cmd list over and begin contact:0
7425461 INFO  2025-11-17 13:05:50859 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
7425464 INFO  2025-11-17 13:05:50862 DownloadProcess:59 - get cmd list over and begin contact:0
7435505 INFO  2025-11-17 13:06:00903 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
7435514 INFO  2025-11-17 13:06:00912 UploadProcess:266 - update device stamp end and get stream.
7435515 INFO  2025-11-17 13:06:00913 UploadProcess:323 - data:1002	2025-11-18 09:06:00	0	15	0	0	0	0	0	0	

7435517 INFO  2025-11-17 13:06:00915 UploadProcess:324 - end get stream and process data
7435518 INFO  2025-11-17 13:06:00916 UploadProcess:523 - begin parse op attlog
7435528 INFO  2025-11-17 13:06:00926 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
7435530 INFO  2025-11-17 13:06:00928 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
7435531 INFO  2025-11-17 13:06:00929 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 09:06:00
7435531 INFO  2025-11-17 13:06:00929 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
7435532 INFO  2025-11-17 13:06:00930 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
7435533 INFO  2025-11-17 13:06:00931 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
7435534 INFO  2025-11-17 13:06:00932 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
7435534 INFO  2025-11-17 13:06:00932 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 09:06:00
7435535 INFO  2025-11-17 13:06:00933 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
7435535 INFO  2025-11-17 13:06:00933 UploadProcess:412 - attlog size:1
7435536 INFO  2025-11-17 13:06:00934 UploadProcess:525 - end parse op attlog
7435536 INFO  2025-11-17 13:06:00934 UploadProcess:327 - end process data and return msg to device
7435534 INFO  2025-11-17 13:06:00932 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
7435539 INFO  2025-11-17 13:06:00937 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7435542 INFO  2025-11-17 13:06:00940 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
7435543 INFO  2025-11-17 13:06:00941 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7435543 INFO  2025-11-17 13:06:00941 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
7435537 INFO  2025-11-17 13:06:00935 UploadProcess:331 - return msg to device and request over OK
7435544 INFO  2025-11-17 13:06:00942 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
7435545 INFO  2025-11-17 13:06:00943 ExternalApiUtil:170 - EXTERNAL API: Method: POST
7435546 INFO  2025-11-17 13:06:00944 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 16:06:00 EAT 2025
7435547 INFO  2025-11-17 13:06:00945 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
7435549 INFO  2025-11-17 13:06:00947 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
7435549 INFO  2025-11-17 13:06:00947 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
7435550 INFO  2025-11-17 13:06:00948 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 16:06 - Meal type determined: lunch
7435552 INFO  2025-11-17 13:06:00950 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
7435552 INFO  2025-11-17 13:06:00950 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
7435555 ERROR 2025-11-17 13:06:00953 ExternalApiUtil:303 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7435556 ERROR 2025-11-17 13:06:00954 ExternalApiUtil:304 - âŒ EXTERNAL API CALL FAILED
7435556 ERROR 2025-11-17 13:06:00954 ExternalApiUtil:305 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7435556 ERROR 2025-11-17 13:06:00954 ExternalApiUtil:306 - EXTERNAL API: Student ID: 1002
7435557 ERROR 2025-11-17 13:06:00955 ExternalApiUtil:307 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
7435557 ERROR 2025-11-17 13:06:00955 ExternalApiUtil:308 - EXTERNAL API: Error: Connection refused (Connection refused)
7435558 ERROR 2025-11-17 13:06:00956 ExternalApiUtil:309 - EXTERNAL API: Exception: java.net.ConnectException
7435558 ERROR 2025-11-17 13:06:00956 ExternalApiUtil:310 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7435560 ERROR 2025-11-17 13:06:00958 ExternalApiUtil:311 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:203)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:133)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
7435566 INFO  2025-11-17 13:06:00964 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
7457721 INFO  2025-11-17 13:06:23119 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,213,192.168.8.106,10,35,12,5,11110,2,0,0
7457727 INFO  2025-11-17 13:06:23125 DownloadProcess:59 - get cmd list over and begin contact:0
7457728 INFO  2025-11-17 13:06:23126 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,213,192.168.8.106,10,35,12,5,11110,2,0,0
7487602 INFO  2025-11-17 13:06:530 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
7487806 INFO  2025-11-17 13:06:53204 DownloadProcess:59 - get cmd list over and begin contact:0
7505050 INFO  2025-11-17 13:07:10448 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
7505360 INFO  2025-11-17 13:07:10758 UploadProcess:266 - update device stamp end and get stream.
7506191 INFO  2025-11-17 13:07:11589 UploadProcess:323 - data:1002	2025-11-18 09:07:09	0	15	0	0	0	0	0	0	

7506446 INFO  2025-11-17 13:07:11844 UploadProcess:324 - end get stream and process data
7506471 INFO  2025-11-17 13:07:11869 UploadProcess:523 - begin parse op attlog
7508475 INFO  2025-11-17 13:07:13873 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
7508616 INFO  2025-11-17 13:07:1414 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
7508854 INFO  2025-11-17 13:07:14252 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 09:07:09
7508862 INFO  2025-11-17 13:07:14260 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
7508868 INFO  2025-11-17 13:07:14266 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
7508869 INFO  2025-11-17 13:07:14267 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
7508872 INFO  2025-11-17 13:07:14270 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
7508873 INFO  2025-11-17 13:07:14271 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 09:07:09
7508874 INFO  2025-11-17 13:07:14272 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
7509117 INFO  2025-11-17 13:07:14515 UploadProcess:412 - attlog size:1
7509353 INFO  2025-11-17 13:07:14751 UploadProcess:525 - end parse op attlog
7509888 INFO  2025-11-17 13:07:15286 UploadProcess:327 - end process data and return msg to device
7508874 INFO  2025-11-17 13:07:14272 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
7509977 INFO  2025-11-17 13:07:15375 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7509984 INFO  2025-11-17 13:07:15382 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
7509991 INFO  2025-11-17 13:07:15389 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7509994 INFO  2025-11-17 13:07:15392 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
7509996 INFO  2025-11-17 13:07:15394 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
7509999 INFO  2025-11-17 13:07:15397 ExternalApiUtil:170 - EXTERNAL API: Method: POST
7510002 INFO  2025-11-17 13:07:15400 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 16:07:15 EAT 2025
7509977 INFO  2025-11-17 13:07:15375 UploadProcess:331 - return msg to device and request over OK
7510003 INFO  2025-11-17 13:07:15401 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
7510017 INFO  2025-11-17 13:07:15415 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
7510025 INFO  2025-11-17 13:07:15423 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
7510028 INFO  2025-11-17 13:07:15426 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 16:07 - Meal type determined: lunch
7510033 INFO  2025-11-17 13:07:15431 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
7510035 INFO  2025-11-17 13:07:15433 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
7510046 ERROR 2025-11-17 13:07:15444 ExternalApiUtil:303 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7510053 ERROR 2025-11-17 13:07:15451 ExternalApiUtil:304 - âŒ EXTERNAL API CALL FAILED
7510075 ERROR 2025-11-17 13:07:15473 ExternalApiUtil:305 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7510080 ERROR 2025-11-17 13:07:15478 ExternalApiUtil:306 - EXTERNAL API: Student ID: 1002
7510473 ERROR 2025-11-17 13:07:15871 ExternalApiUtil:307 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
7510500 ERROR 2025-11-17 13:07:15898 ExternalApiUtil:308 - EXTERNAL API: Error: Connection refused (Connection refused)
7510501 ERROR 2025-11-17 13:07:15899 ExternalApiUtil:309 - EXTERNAL API: Exception: java.net.ConnectException
7510506 ERROR 2025-11-17 13:07:15904 ExternalApiUtil:310 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7510511 ERROR 2025-11-17 13:07:15909 ExternalApiUtil:311 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:203)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:133)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
7510829 INFO  2025-11-17 13:07:16227 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
7520581 INFO  2025-11-17 13:07:25979 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,214,192.168.8.106,10,35,12,5,11110,2,0,0
7520756 INFO  2025-11-17 13:07:26154 DownloadProcess:59 - get cmd list over and begin contact:0
7520820 INFO  2025-11-17 13:07:26218 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,214,192.168.8.106,10,35,12,5,11110,2,0,0
7523204 INFO  2025-11-17 13:07:28602 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=OPERLOG&Stamp=9999
7523333 INFO  2025-11-17 13:07:28731 UploadProcess:266 - update device stamp end and get stream.
7523489 INFO  2025-11-17 13:07:28887 UploadProcess:323 - data:OPLOG 4	1002	2025-11-18 09:07:28	1002	0	0	0

7523491 INFO  2025-11-17 13:07:28889 UploadProcess:324 - end get stream and process data
7523500 INFO  2025-11-17 13:07:28898 UploadProcess:474 - begin parse op log
7524160 INFO  2025-11-17 13:07:29558 UploadProcess:235 - oplog size:1
7524162 INFO  2025-11-17 13:07:29560 UploadProcess:476 - end parse op log
7524163 INFO  2025-11-17 13:07:29561 UploadProcess:327 - end process data and return msg to device
7524164 INFO  2025-11-17 13:07:29562 UploadProcess:331 - return msg to device and request over OK
7548227 INFO  2025-11-17 13:07:53625 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
7548247 INFO  2025-11-17 13:07:53645 UploadProcess:266 - update device stamp end and get stream.
7548251 INFO  2025-11-17 13:07:53649 UploadProcess:323 - data:1001	2025-11-18 09:07:52	0	15	0	0	0	0	0	0	

7548254 INFO  2025-11-17 13:07:53652 UploadProcess:324 - end get stream and process data
7548254 INFO  2025-11-17 13:07:53652 UploadProcess:523 - begin parse op attlog
7548267 INFO  2025-11-17 13:07:53665 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
7548269 INFO  2025-11-17 13:07:53667 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
7548269 INFO  2025-11-17 13:07:53667 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1001, User Name: boaz, Timestamp: 2025-11-18 09:07:52
7548271 INFO  2025-11-17 13:07:53669 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1001
7548272 INFO  2025-11-17 13:07:53670 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1001 ===
7548272 INFO  2025-11-17 13:07:53670 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1001
7548273 INFO  2025-11-17 13:07:53671 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1001
7548277 INFO  2025-11-17 13:07:53675 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1001, Timestamp: 2025-11-18 09:07:52
7548279 INFO  2025-11-17 13:07:53677 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
7548281 INFO  2025-11-17 13:07:53679 UploadProcess:412 - attlog size:1
7548284 INFO  2025-11-17 13:07:53682 UploadProcess:525 - end parse op attlog
7548284 INFO  2025-11-17 13:07:53682 UploadProcess:327 - end process data and return msg to device
7548273 INFO  2025-11-17 13:07:53671 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1001
7548287 INFO  2025-11-17 13:07:53685 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7548288 INFO  2025-11-17 13:07:53686 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
7548289 INFO  2025-11-17 13:07:53687 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7548290 INFO  2025-11-17 13:07:53688 ExternalApiUtil:168 - EXTERNAL API: User ID: 1001
7548290 INFO  2025-11-17 13:07:53688 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
7548291 INFO  2025-11-17 13:07:53689 ExternalApiUtil:170 - EXTERNAL API: Method: POST
7548292 INFO  2025-11-17 13:07:53690 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 16:07:53 EAT 2025
7548293 INFO  2025-11-17 13:07:53691 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
7548294 INFO  2025-11-17 13:07:53692 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
7548295 INFO  2025-11-17 13:07:53693 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1001, Formatted: 1001
7548296 INFO  2025-11-17 13:07:53694 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 16:07 - Meal type determined: lunch
7548296 INFO  2025-11-17 13:07:53694 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1001", "meal_type": "lunch"}
7548297 INFO  2025-11-17 13:07:53695 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
7548284 INFO  2025-11-17 13:07:53682 UploadProcess:331 - return msg to device and request over OK
7548302 ERROR 2025-11-17 13:07:53700 ExternalApiUtil:303 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7548303 ERROR 2025-11-17 13:07:53701 ExternalApiUtil:304 - âŒ EXTERNAL API CALL FAILED
7548303 ERROR 2025-11-17 13:07:53701 ExternalApiUtil:305 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7548303 ERROR 2025-11-17 13:07:53701 ExternalApiUtil:306 - EXTERNAL API: Student ID: 1001
7548304 ERROR 2025-11-17 13:07:53702 ExternalApiUtil:307 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
7548304 ERROR 2025-11-17 13:07:53702 ExternalApiUtil:308 - EXTERNAL API: Error: Connection refused (Connection refused)
7548305 ERROR 2025-11-17 13:07:53703 ExternalApiUtil:309 - EXTERNAL API: Exception: java.net.ConnectException
7548305 ERROR 2025-11-17 13:07:53703 ExternalApiUtil:310 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7548305 ERROR 2025-11-17 13:07:53703 ExternalApiUtil:311 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:203)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:133)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
7548315 INFO  2025-11-17 13:07:53713 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1001
7550628 INFO  2025-11-17 13:07:5626 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,215,192.168.8.106,10,35,12,5,11110,2,0,0
7550634 INFO  2025-11-17 13:07:5632 DownloadProcess:59 - get cmd list over and begin contact:0
7550636 INFO  2025-11-17 13:07:5634 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,215,192.168.8.106,10,35,12,5,11110,2,0,0
7581480 INFO  2025-11-17 13:08:26878 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
7581491 INFO  2025-11-17 13:08:26889 DownloadProcess:59 - get cmd list over and begin contact:0
7728046 INFO  2025-11-17 13:10:53444 Dispatcher:31 - Unable to find 'struts.multipart.saveDir' property setting. Defaulting to javax.servlet.context.tempdir
7728917 INFO  2025-11-17 13:10:54315 FileUploadInterceptor:31 - Removing file advFile /usr/local/tomcat/work/Catalina/localhost/ROOT/upload__4abf38eb_19a91f09358__8000_00000003.tmp
224570 INFO  2025-11-17 13:29:52706 ConfigUtil:20 - Loading config from: /usr/local/tomcat/webapps/ROOT/WEB-INF/classes/config.xml
224575 INFO  2025-11-17 13:29:52711 ConfigUtil:25 - Config.xml loaded successfully
224599 INFO  2025-11-17 13:29:52735 BaseDao:101 - jdbc:mysql://mysql:3306/pushdemo?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true user:root pass:root
390061 INFO  2025-11-17 13:32:38197 UploadProcess:63 - get request and make the device options :192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&options=all&language=69&pushver=2.4.1&DeviceType=att&PushOptionsFlag=1
390085 INFO  2025-11-17 13:32:38221 UploadProcess:90 - GET OPTION FROM: TDBD250100333
ATTLOGStamp=9999
OPERLOGStamp=0
ATTPHOTOStamp=0
BIODATAStamp=0
IDCARDStamp=0
ERRORLOGStamp=0
TransFlag=TransData AttLog	OpLog	AttPhoto	EnrollUser	ChgUser	EnrollFP	ChgFP	FPImag	FACE	UserPic	BioPhoto
ErrorDelay=60
Delay=30
transTimes=00:00;14:05
TransInterval=1
Realtime=1
Encrypt=0
ServerVer=2.2.14
TimeZone=1200

391101 INFO  2025-11-17 13:32:39237 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
391118 INFO  2025-11-17 13:32:39254 UploadProcess:266 - update device stamp end and get stream.
391121 INFO  2025-11-17 13:32:39257 UploadProcess:323 - data:1002	2025-11-18 09:09:59	0	15	0	0	0	0	0	0	

391124 INFO  2025-11-17 13:32:39260 UploadProcess:324 - end get stream and process data
391125 INFO  2025-11-17 13:32:39261 UploadProcess:523 - begin parse op attlog
391134 INFO  2025-11-17 13:32:39270 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
391135 INFO  2025-11-17 13:32:39271 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
391136 INFO  2025-11-17 13:32:39272 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 09:09:59
391137 INFO  2025-11-17 13:32:39273 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
391144 INFO  2025-11-17 13:32:39280 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
391145 INFO  2025-11-17 13:32:39281 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
391148 INFO  2025-11-17 13:32:39284 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
391149 INFO  2025-11-17 13:32:39285 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 09:09:59
391148 INFO  2025-11-17 13:32:39284 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
391153 INFO  2025-11-17 13:32:39289 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
391154 INFO  2025-11-17 13:32:39290 UploadProcess:412 - attlog size:1
391155 INFO  2025-11-17 13:32:39291 UploadProcess:525 - end parse op attlog
391156 INFO  2025-11-17 13:32:39292 UploadProcess:327 - end process data and return msg to device
391158 INFO  2025-11-17 13:32:39294 UploadProcess:331 - return msg to device and request over OK
391154 INFO  2025-11-17 13:32:39290 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
391164 INFO  2025-11-17 13:32:39300 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
391166 INFO  2025-11-17 13:32:39302 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
391168 INFO  2025-11-17 13:32:39304 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
391169 INFO  2025-11-17 13:32:39305 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
391170 INFO  2025-11-17 13:32:39306 ExternalApiUtil:170 - EXTERNAL API: Method: POST
391171 INFO  2025-11-17 13:32:39307 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 16:32:39 EAT 2025
391171 INFO  2025-11-17 13:32:39307 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
391215 INFO  2025-11-17 13:32:39351 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
391227 INFO  2025-11-17 13:32:39363 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
391229 INFO  2025-11-17 13:32:39365 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 16:32 - Meal type determined: lunch
391230 INFO  2025-11-17 13:32:39366 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
391232 INFO  2025-11-17 13:32:39368 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
391244 ERROR 2025-11-17 13:32:39380 ExternalApiUtil:303 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
391245 ERROR 2025-11-17 13:32:39381 ExternalApiUtil:304 - âŒ EXTERNAL API CALL FAILED
391245 ERROR 2025-11-17 13:32:39381 ExternalApiUtil:305 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
391246 ERROR 2025-11-17 13:32:39382 ExternalApiUtil:306 - EXTERNAL API: Student ID: 1002
391247 ERROR 2025-11-17 13:32:39383 ExternalApiUtil:307 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
391248 ERROR 2025-11-17 13:32:39384 ExternalApiUtil:308 - EXTERNAL API: Error: Connection refused (Connection refused)
391248 ERROR 2025-11-17 13:32:39384 ExternalApiUtil:309 - EXTERNAL API: Exception: java.net.ConnectException
391249 ERROR 2025-11-17 13:32:39385 ExternalApiUtil:310 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
391301 ERROR 2025-11-17 13:32:39437 ExternalApiUtil:311 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:203)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:133)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
391327 INFO  2025-11-17 13:32:39463 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
392542 INFO  2025-11-17 13:32:40678 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,218,192.168.8.106,10,35,12,5,11110,2,0,0
392546 INFO  2025-11-17 13:32:40682 DownloadProcess:59 - get cmd list over and begin contact:1
392547 INFO  2025-11-17 13:32:40683 DownloadProcess:71 - SN:TDBD250100333cmdSize:65536
392561 INFO  2025-11-17 13:32:40697 DownloadProcess:85 - contact cmd and send list:1
392564 INFO  2025-11-17 13:32:40700 DownloadProcess:86 - cmd info:C:190:PutAdvFile Type=1	FileName=Hello Kaili.jpg	Url=downloadFile?SN=TDBD250100333&path=/putfile/aaron.jpg

392573 INFO  2025-11-17 13:32:40709 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,218,192.168.8.106,10,35,12,5,11110,2,0,0
392772 INFO  2025-11-17 13:32:40908 DownloadProcess:516 - get request for download file:http://192.168.8.104:8080/iclock/downloadFile
392776 INFO  2025-11-17 13:32:40912 DownloadProcess:527 - /usr/local/tomcat/webapps/ROOT//putfile/aaron.jpg
392795 INFO  2025-11-17 13:32:40931 DownloadProcess:551 - download file over, size:16205
393703 INFO  2025-11-17 13:32:41839 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
393716 INFO  2025-11-17 13:32:41852 UploadProcess:266 - update device stamp end and get stream.
393719 INFO  2025-11-17 13:32:41855 UploadProcess:323 - data:1002	2025-11-18 09:11:38	0	15	0	0	0	0	0	0	
1002	2025-11-18 09:31:48	0	15	0	0	0	0	0	0	

393721 INFO  2025-11-17 13:32:41857 UploadProcess:324 - end get stream and process data
393725 INFO  2025-11-17 13:32:41861 UploadProcess:523 - begin parse op attlog
393738 INFO  2025-11-17 13:32:41874 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
393738 INFO  2025-11-17 13:32:41874 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
393740 INFO  2025-11-17 13:32:41876 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 09:11:38
393743 INFO  2025-11-17 13:32:41879 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
393743 INFO  2025-11-17 13:32:41879 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
393746 INFO  2025-11-17 13:32:41882 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
393747 INFO  2025-11-17 13:32:41883 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
393748 INFO  2025-11-17 13:32:41884 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 09:11:38
393748 INFO  2025-11-17 13:32:41884 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
393751 INFO  2025-11-17 13:32:41887 UploadProcess:412 - attlog size:1
393751 INFO  2025-11-17 13:32:41887 UploadProcess:525 - end parse op attlog
393753 INFO  2025-11-17 13:32:41889 UploadProcess:523 - begin parse op attlog
393748 INFO  2025-11-17 13:32:41884 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
393758 INFO  2025-11-17 13:32:41894 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
393761 INFO  2025-11-17 13:32:41897 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
393762 INFO  2025-11-17 13:32:41898 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
393764 INFO  2025-11-17 13:32:41900 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
393766 INFO  2025-11-17 13:32:41902 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
393766 INFO  2025-11-17 13:32:41902 ExternalApiUtil:170 - EXTERNAL API: Method: POST
393767 INFO  2025-11-17 13:32:41903 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 16:32:41 EAT 2025
393768 INFO  2025-11-17 13:32:41904 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
393767 INFO  2025-11-17 13:32:41903 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
393772 INFO  2025-11-17 13:32:41908 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
393773 INFO  2025-11-17 13:32:41909 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 09:31:48
393773 INFO  2025-11-17 13:32:41909 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
393774 INFO  2025-11-17 13:32:41910 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
393774 INFO  2025-11-17 13:32:41910 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
393771 INFO  2025-11-17 13:32:41907 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
393776 INFO  2025-11-17 13:32:41912 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
393777 INFO  2025-11-17 13:32:41913 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 16:32 - Meal type determined: lunch
393778 INFO  2025-11-17 13:32:41914 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
393779 INFO  2025-11-17 13:32:41915 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
393777 INFO  2025-11-17 13:32:41913 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
393781 INFO  2025-11-17 13:32:41917 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 09:31:48
393784 ERROR 2025-11-17 13:32:41920 ExternalApiUtil:303 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
393785 ERROR 2025-11-17 13:32:41921 ExternalApiUtil:304 - âŒ EXTERNAL API CALL FAILED
393785 ERROR 2025-11-17 13:32:41921 ExternalApiUtil:305 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
393786 ERROR 2025-11-17 13:32:41922 ExternalApiUtil:306 - EXTERNAL API: Student ID: 1002
393786 ERROR 2025-11-17 13:32:41922 ExternalApiUtil:307 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
393787 ERROR 2025-11-17 13:32:41923 ExternalApiUtil:308 - EXTERNAL API: Error: Connection refused (Connection refused)
393787 ERROR 2025-11-17 13:32:41923 ExternalApiUtil:309 - EXTERNAL API: Exception: java.net.ConnectException
393788 ERROR 2025-11-17 13:32:41924 ExternalApiUtil:310 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
393788 ERROR 2025-11-17 13:32:41924 ExternalApiUtil:311 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:203)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:133)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
393777 INFO  2025-11-17 13:32:41913 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
393789 INFO  2025-11-17 13:32:41925 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
393791 INFO  2025-11-17 13:32:41927 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
393791 INFO  2025-11-17 13:32:41927 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
393792 INFO  2025-11-17 13:32:41928 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
393792 INFO  2025-11-17 13:32:41928 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
393793 INFO  2025-11-17 13:32:41929 ExternalApiUtil:170 - EXTERNAL API: Method: POST
393784 INFO  2025-11-17 13:32:41920 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
393794 INFO  2025-11-17 13:32:41930 UploadProcess:412 - attlog size:1
393795 INFO  2025-11-17 13:32:41931 UploadProcess:525 - end parse op attlog
393795 INFO  2025-11-17 13:32:41931 UploadProcess:327 - end process data and return msg to device
393793 INFO  2025-11-17 13:32:41929 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 16:32:41 EAT 2025
393796 INFO  2025-11-17 13:32:41932 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
393796 INFO  2025-11-17 13:32:41932 UploadProcess:331 - return msg to device and request over OK
393794 INFO  2025-11-17 13:32:41930 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
393797 INFO  2025-11-17 13:32:41933 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
393799 INFO  2025-11-17 13:32:41935 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
393800 INFO  2025-11-17 13:32:41936 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 16:32 - Meal type determined: lunch
393800 INFO  2025-11-17 13:32:41936 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
393800 INFO  2025-11-17 13:32:41936 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
393802 ERROR 2025-11-17 13:32:41938 ExternalApiUtil:303 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
393803 ERROR 2025-11-17 13:32:41939 ExternalApiUtil:304 - âŒ EXTERNAL API CALL FAILED
393803 ERROR 2025-11-17 13:32:41939 ExternalApiUtil:305 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
393804 ERROR 2025-11-17 13:32:41940 ExternalApiUtil:306 - EXTERNAL API: Student ID: 1002
393804 ERROR 2025-11-17 13:32:41940 ExternalApiUtil:307 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
393806 ERROR 2025-11-17 13:32:41942 ExternalApiUtil:308 - EXTERNAL API: Error: Connection refused (Connection refused)
393806 ERROR 2025-11-17 13:32:41942 ExternalApiUtil:309 - EXTERNAL API: Exception: java.net.ConnectException
393806 ERROR 2025-11-17 13:32:41942 ExternalApiUtil:310 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
393807 ERROR 2025-11-17 13:32:41943 ExternalApiUtil:311 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:203)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:133)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
393818 INFO  2025-11-17 13:32:41954 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
394332 INFO  2025-11-17 13:32:42468 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=OPERLOG&Stamp=9999
394343 INFO  2025-11-17 13:32:42479 UploadProcess:266 - update device stamp end and get stream.
394345 INFO  2025-11-17 13:32:42481 UploadProcess:323 - data:OPLOG 4	1002	2025-11-18 09:11:46	1002	0	0	0

394348 INFO  2025-11-17 13:32:42484 UploadProcess:324 - end get stream and process data
394351 INFO  2025-11-17 13:32:42487 UploadProcess:474 - begin parse op log
394359 INFO  2025-11-17 13:32:42495 UploadProcess:235 - oplog size:1
394362 INFO  2025-11-17 13:32:42498 UploadProcess:476 - end parse op log
394362 INFO  2025-11-17 13:32:42498 UploadProcess:327 - end process data and return msg to device
394363 INFO  2025-11-17 13:32:42499 UploadProcess:331 - return msg to device and request over OK
394843 INFO  2025-11-17 13:32:42979 DownloadProcess:191 - get request and begin process cmd return.192.168.65.1;http://192.168.8.104:8080/iclock/devicecmd?SN=TDBD250100333
394844 INFO  2025-11-17 13:32:42980 DownloadProcess:193 - content-length:31
394847 INFO  2025-11-17 13:32:42983 DownloadProcess:231 - DEV CMD RETURN:
ID=190&Return=0&CMD=PutAdvFile

394848 INFO  2025-11-17 13:32:42984 DownloadProcess:232 - update cmd return begin
394856 INFO  2025-11-17 13:32:42992 DownloadProcess:239 - update cmd return end
394952 INFO  2025-11-17 13:32:4388 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
394956 INFO  2025-11-17 13:32:4392 DownloadProcess:59 - get cmd list over and begin contact:0
397151 INFO  2025-11-17 13:32:45287 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
397152 INFO  2025-11-17 13:32:45288 DownloadProcess:59 - get cmd list over and begin contact:0
400120 INFO  2025-11-17 13:32:48256 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
400123 INFO  2025-11-17 13:32:48259 DownloadProcess:59 - get cmd list over and begin contact:0
405298 INFO  2025-11-17 13:32:53434 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
405307 INFO  2025-11-17 13:32:53443 DownloadProcess:59 - get cmd list over and begin contact:0
411212 INFO  2025-11-17 13:32:59348 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
411216 INFO  2025-11-17 13:32:59352 DownloadProcess:59 - get cmd list over and begin contact:0
419261 INFO  2025-11-17 13:33:07397 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
419366 INFO  2025-11-17 13:33:07502 DownloadProcess:59 - get cmd list over and begin contact:0
428252 INFO  2025-11-17 13:33:16388 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
428255 INFO  2025-11-17 13:33:16391 DownloadProcess:59 - get cmd list over and begin contact:0
439132 INFO  2025-11-17 13:33:27268 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
439135 INFO  2025-11-17 13:33:27271 DownloadProcess:59 - get cmd list over and begin contact:0
451081 INFO  2025-11-17 13:33:39217 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
451084 INFO  2025-11-17 13:33:39220 DownloadProcess:59 - get cmd list over and begin contact:0
452651 INFO  2025-11-17 13:33:40787 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
452663 INFO  2025-11-17 13:33:40799 UploadProcess:266 - update device stamp end and get stream.
452666 INFO  2025-11-17 13:33:40802 UploadProcess:323 - data:1002	2025-11-18 09:33:39	0	15	0	0	0	0	0	0	

452666 INFO  2025-11-17 13:33:40802 UploadProcess:324 - end get stream and process data
452667 INFO  2025-11-17 13:33:40803 UploadProcess:523 - begin parse op attlog
452675 INFO  2025-11-17 13:33:40811 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
452676 INFO  2025-11-17 13:33:40812 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
452677 INFO  2025-11-17 13:33:40813 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 09:33:39
452677 INFO  2025-11-17 13:33:40813 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
452678 INFO  2025-11-17 13:33:40814 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
452679 INFO  2025-11-17 13:33:40815 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
452681 INFO  2025-11-17 13:33:40817 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
452681 INFO  2025-11-17 13:33:40817 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 09:33:39
452682 INFO  2025-11-17 13:33:40818 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
452683 INFO  2025-11-17 13:33:40819 UploadProcess:412 - attlog size:1
452683 INFO  2025-11-17 13:33:40819 UploadProcess:525 - end parse op attlog
452684 INFO  2025-11-17 13:33:40820 UploadProcess:327 - end process data and return msg to device
452681 INFO  2025-11-17 13:33:40817 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
452685 INFO  2025-11-17 13:33:40821 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
452686 INFO  2025-11-17 13:33:40822 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
452687 INFO  2025-11-17 13:33:40823 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
452688 INFO  2025-11-17 13:33:40824 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
452690 INFO  2025-11-17 13:33:40826 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
452691 INFO  2025-11-17 13:33:40827 ExternalApiUtil:170 - EXTERNAL API: Method: POST
452692 INFO  2025-11-17 13:33:40828 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 16:33:40 EAT 2025
452693 INFO  2025-11-17 13:33:40829 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
452693 INFO  2025-11-17 13:33:40829 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
452685 INFO  2025-11-17 13:33:40821 UploadProcess:331 - return msg to device and request over OK
452695 INFO  2025-11-17 13:33:40831 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
452699 INFO  2025-11-17 13:33:40835 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 16:33 - Meal type determined: lunch
452700 INFO  2025-11-17 13:33:40836 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
452701 INFO  2025-11-17 13:33:40837 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
452704 ERROR 2025-11-17 13:33:40840 ExternalApiUtil:303 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
452705 ERROR 2025-11-17 13:33:40841 ExternalApiUtil:304 - âŒ EXTERNAL API CALL FAILED
452705 ERROR 2025-11-17 13:33:40841 ExternalApiUtil:305 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
452706 ERROR 2025-11-17 13:33:40842 ExternalApiUtil:306 - EXTERNAL API: Student ID: 1002
452706 ERROR 2025-11-17 13:33:40842 ExternalApiUtil:307 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
452707 ERROR 2025-11-17 13:33:40843 ExternalApiUtil:308 - EXTERNAL API: Error: Connection refused (Connection refused)
452707 ERROR 2025-11-17 13:33:40843 ExternalApiUtil:309 - EXTERNAL API: Exception: java.net.ConnectException
452708 ERROR 2025-11-17 13:33:40844 ExternalApiUtil:310 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
452708 ERROR 2025-11-17 13:33:40844 ExternalApiUtil:311 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:203)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:133)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
452716 INFO  2025-11-17 13:33:40852 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
466341 INFO  2025-11-17 13:33:54477 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,219,192.168.8.106,10,35,12,5,11110,2,0,0
466346 INFO  2025-11-17 13:33:54482 DownloadProcess:59 - get cmd list over and begin contact:0
466347 INFO  2025-11-17 13:33:54483 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,219,192.168.8.106,10,35,12,5,11110,2,0,0
478516 WARN  2025-11-17 13:34:06652 Dispatcher:49 - Could not find action or result
There is no Action mapped for namespace / and action name attLogAction. - [unknown location]
	at com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:178)
	at org.apache.struts2.impl.StrutsActionProxy.prepare(StrutsActionProxy.java:61)
	at org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:39)
	at com.opensymphony.xwork2.DefaultActionProxyFactory.createActionProxy(DefaultActionProxyFactory.java:47)
	at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:478)
	at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
	at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:142)
	at com.zk.util.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:63)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:166)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:142)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:88)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:83)
	at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:643)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:72)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:935)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1831)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:973)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:491)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.lang.Thread.run(Thread.java:750)
481154 INFO  2025-11-17 13:34:09290 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
481159 INFO  2025-11-17 13:34:09295 DownloadProcess:59 - get cmd list over and begin contact:0
498162 INFO  2025-11-17 13:34:26298 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
498164 INFO  2025-11-17 13:34:26300 DownloadProcess:59 - get cmd list over and begin contact:0
517056 INFO  2025-11-17 13:34:45192 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
517059 INFO  2025-11-17 13:34:45195 DownloadProcess:59 - get cmd list over and begin contact:0
530255 INFO  2025-11-17 13:34:58391 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
530267 INFO  2025-11-17 13:34:58403 UploadProcess:266 - update device stamp end and get stream.
530269 INFO  2025-11-17 13:34:58405 UploadProcess:323 - data:1002	2025-11-18 09:34:57	0	15	0	0	0	0	0	0	

530270 INFO  2025-11-17 13:34:58406 UploadProcess:324 - end get stream and process data
530271 INFO  2025-11-17 13:34:58407 UploadProcess:523 - begin parse op attlog
530281 INFO  2025-11-17 13:34:58417 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
530282 INFO  2025-11-17 13:34:58418 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
530283 INFO  2025-11-17 13:34:58419 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 09:34:57
530284 INFO  2025-11-17 13:34:58420 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
530285 INFO  2025-11-17 13:34:58421 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
530286 INFO  2025-11-17 13:34:58422 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
530287 INFO  2025-11-17 13:34:58423 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
530287 INFO  2025-11-17 13:34:58423 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 09:34:57
530288 INFO  2025-11-17 13:34:58424 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
530288 INFO  2025-11-17 13:34:58424 UploadProcess:412 - attlog size:1
530289 INFO  2025-11-17 13:34:58425 UploadProcess:525 - end parse op attlog
530290 INFO  2025-11-17 13:34:58426 UploadProcess:327 - end process data and return msg to device
530287 INFO  2025-11-17 13:34:58423 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
530291 INFO  2025-11-17 13:34:58427 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
530291 INFO  2025-11-17 13:34:58427 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
530292 INFO  2025-11-17 13:34:58428 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
530292 INFO  2025-11-17 13:34:58428 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
530292 INFO  2025-11-17 13:34:58428 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
530293 INFO  2025-11-17 13:34:58429 ExternalApiUtil:170 - EXTERNAL API: Method: POST
530296 INFO  2025-11-17 13:34:58432 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 16:34:58 EAT 2025
530297 INFO  2025-11-17 13:34:58433 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
530298 INFO  2025-11-17 13:34:58434 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
530299 INFO  2025-11-17 13:34:58435 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
530300 INFO  2025-11-17 13:34:58436 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 16:34 - Meal type determined: lunch
530291 INFO  2025-11-17 13:34:58427 UploadProcess:331 - return msg to device and request over OK
530301 INFO  2025-11-17 13:34:58437 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
530303 INFO  2025-11-17 13:34:58439 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
530312 INFO  2025-11-17 13:34:58448 ExternalApiUtil:207 - EXTERNAL API: Request body written, getting response...
530536 INFO  2025-11-17 13:34:58672 ExternalApiUtil:210 - EXTERNAL API: Response code received: 201
530538 WARN  2025-11-17 13:34:58674 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
530539 WARN  2025-11-17 13:34:58675 ExternalApiUtil:281 - âš ï¸  EXTERNAL API CALL FAILED OR RETURNED ERROR
530542 WARN  2025-11-17 13:34:58678 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
530543 WARN  2025-11-17 13:34:58679 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1002 (original: 1002)
530547 WARN  2025-11-17 13:34:58683 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 201 (OK)
530548 WARN  2025-11-17 13:34:58684 ExternalApiUtil:285 - EXTERNAL API: API Response Success: false
530548 WARN  2025-11-17 13:34:58684 ExternalApiUtil:287 - EXTERNAL API: Error Reason: Student already has a lunch meal card for 2025-11-17. Activate student for reprint, use reprint button, or set force=true to allow duplicate.
530550 WARN  2025-11-17 13:34:58686 ExternalApiUtil:289 - EXTERNAL API: Response Body: {"success":false,"meal_card":null,"eligible":true,"reason":"Student already has a lunch meal card for 2025-11-17. Activate student for reprint, use reprint button, or set force=true to allow duplicate.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
530551 WARN  2025-11-17 13:34:58687 ExternalApiUtil:290 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
530596 INFO  2025-11-17 13:34:58732 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
537405 INFO  2025-11-17 13:35:05541 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,220,192.168.8.106,10,35,12,5,11110,2,0,0
537420 INFO  2025-11-17 13:35:05556 DownloadProcess:59 - get cmd list over and begin contact:0
537420 INFO  2025-11-17 13:35:05556 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,220,192.168.8.106,10,35,12,5,11110,2,0,0
558117 INFO  2025-11-17 13:35:26253 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
558119 INFO  2025-11-17 13:35:26255 DownloadProcess:59 - get cmd list over and begin contact:0
582161 INFO  2025-11-17 13:35:50297 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
582164 INFO  2025-11-17 13:35:50300 DownloadProcess:59 - get cmd list over and begin contact:0
589731 INFO  2025-11-17 13:35:57867 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
589741 INFO  2025-11-17 13:35:57877 UploadProcess:266 - update device stamp end and get stream.
589743 INFO  2025-11-17 13:35:57879 UploadProcess:323 - data:1002	2025-11-18 09:35:57	0	15	0	0	0	0	0	0	

589744 INFO  2025-11-17 13:35:57880 UploadProcess:324 - end get stream and process data
589745 INFO  2025-11-17 13:35:57881 UploadProcess:523 - begin parse op attlog
589751 INFO  2025-11-17 13:35:57887 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
589751 INFO  2025-11-17 13:35:57887 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
589752 INFO  2025-11-17 13:35:57888 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 09:35:57
589752 INFO  2025-11-17 13:35:57888 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
589753 INFO  2025-11-17 13:35:57889 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
589753 INFO  2025-11-17 13:35:57889 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
589753 INFO  2025-11-17 13:35:57889 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
589754 INFO  2025-11-17 13:35:57890 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 09:35:57
589754 INFO  2025-11-17 13:35:57890 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
589755 INFO  2025-11-17 13:35:57891 UploadProcess:412 - attlog size:1
589755 INFO  2025-11-17 13:35:57891 UploadProcess:525 - end parse op attlog
589755 INFO  2025-11-17 13:35:57891 UploadProcess:327 - end process data and return msg to device
589754 INFO  2025-11-17 13:35:57890 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
589756 INFO  2025-11-17 13:35:57892 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
589757 INFO  2025-11-17 13:35:57893 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
589757 INFO  2025-11-17 13:35:57893 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
589757 INFO  2025-11-17 13:35:57893 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
589758 INFO  2025-11-17 13:35:57894 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
589758 INFO  2025-11-17 13:35:57894 ExternalApiUtil:170 - EXTERNAL API: Method: POST
589759 INFO  2025-11-17 13:35:57895 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 16:35:57 EAT 2025
589759 INFO  2025-11-17 13:35:57895 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
589759 INFO  2025-11-17 13:35:57895 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
589760 INFO  2025-11-17 13:35:57896 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
589760 INFO  2025-11-17 13:35:57896 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 16:35 - Meal type determined: lunch
589761 INFO  2025-11-17 13:35:57897 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
589761 INFO  2025-11-17 13:35:57897 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
589756 INFO  2025-11-17 13:35:57892 UploadProcess:331 - return msg to device and request over OK
589765 INFO  2025-11-17 13:35:57901 ExternalApiUtil:207 - EXTERNAL API: Request body written, getting response...
589872 INFO  2025-11-17 13:35:588 ExternalApiUtil:210 - EXTERNAL API: Response code received: 201
589874 WARN  2025-11-17 13:35:5810 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
589874 WARN  2025-11-17 13:35:5810 ExternalApiUtil:281 - âš ï¸  EXTERNAL API CALL FAILED OR RETURNED ERROR
589875 WARN  2025-11-17 13:35:5811 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
589875 WARN  2025-11-17 13:35:5811 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1002 (original: 1002)
589876 WARN  2025-11-17 13:35:5812 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 201 (OK)
589876 WARN  2025-11-17 13:35:5812 ExternalApiUtil:285 - EXTERNAL API: API Response Success: false
589877 WARN  2025-11-17 13:35:5813 ExternalApiUtil:287 - EXTERNAL API: Error Reason: Student already has a lunch meal card for 2025-11-17. Activate student for reprint, use reprint button, or set force=true to allow duplicate.
589877 WARN  2025-11-17 13:35:5813 ExternalApiUtil:289 - EXTERNAL API: Response Body: {"success":false,"meal_card":null,"eligible":true,"reason":"Student already has a lunch meal card for 2025-11-17. Activate student for reprint, use reprint button, or set force=true to allow duplicate.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
589877 WARN  2025-11-17 13:35:5813 ExternalApiUtil:290 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
589888 INFO  2025-11-17 13:35:5824 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
603938 INFO  2025-11-17 13:36:1274 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
603957 INFO  2025-11-17 13:36:1293 UploadProcess:266 - update device stamp end and get stream.
603959 INFO  2025-11-17 13:36:1295 UploadProcess:323 - data:1001	2025-11-18 09:36:11	0	15	0	0	0	0	0	0	

603959 INFO  2025-11-17 13:36:1295 UploadProcess:324 - end get stream and process data
603960 INFO  2025-11-17 13:36:1296 UploadProcess:523 - begin parse op attlog
603970 INFO  2025-11-17 13:36:12106 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
603972 INFO  2025-11-17 13:36:12108 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
603973 INFO  2025-11-17 13:36:12109 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1001, User Name: boaz, Timestamp: 2025-11-18 09:36:11
603975 INFO  2025-11-17 13:36:12111 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1001
603976 INFO  2025-11-17 13:36:12112 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1001 ===
603976 INFO  2025-11-17 13:36:12112 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1001
603977 INFO  2025-11-17 13:36:12113 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1001
603977 INFO  2025-11-17 13:36:12113 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1001, Timestamp: 2025-11-18 09:36:11
603978 INFO  2025-11-17 13:36:12114 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
603979 INFO  2025-11-17 13:36:12115 UploadProcess:412 - attlog size:1
603977 INFO  2025-11-17 13:36:12113 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1001
603981 INFO  2025-11-17 13:36:12117 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
603980 INFO  2025-11-17 13:36:12116 UploadProcess:525 - end parse op attlog
603983 INFO  2025-11-17 13:36:12119 UploadProcess:327 - end process data and return msg to device
603982 INFO  2025-11-17 13:36:12118 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
603986 INFO  2025-11-17 13:36:12122 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
603988 INFO  2025-11-17 13:36:12124 ExternalApiUtil:168 - EXTERNAL API: User ID: 1001
603985 INFO  2025-11-17 13:36:12121 UploadProcess:331 - return msg to device and request over OK
603994 INFO  2025-11-17 13:36:12130 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
603998 INFO  2025-11-17 13:36:12134 ExternalApiUtil:170 - EXTERNAL API: Method: POST
604007 INFO  2025-11-17 13:36:12143 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 16:36:12 EAT 2025
604009 INFO  2025-11-17 13:36:12145 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
604012 INFO  2025-11-17 13:36:12148 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
604013 INFO  2025-11-17 13:36:12149 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1001, Formatted: 1001
604016 INFO  2025-11-17 13:36:12152 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 16:36 - Meal type determined: lunch
604018 INFO  2025-11-17 13:36:12154 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1001", "meal_type": "lunch"}
604018 INFO  2025-11-17 13:36:12154 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
604022 INFO  2025-11-17 13:36:12158 ExternalApiUtil:207 - EXTERNAL API: Request body written, getting response...
604485 INFO  2025-11-17 13:36:12621 ExternalApiUtil:210 - EXTERNAL API: Response code received: 201
604489 INFO  2025-11-17 13:36:12625 ExternalApiUtil:267 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
604489 INFO  2025-11-17 13:36:12625 ExternalApiUtil:268 - âœ… EXTERNAL API CALL SUCCESSFUL
604490 INFO  2025-11-17 13:36:12626 ExternalApiUtil:269 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
604490 INFO  2025-11-17 13:36:12626 ExternalApiUtil:270 - EXTERNAL API: Student ID: 1001 (original: 1001)
604490 INFO  2025-11-17 13:36:12626 ExternalApiUtil:271 - EXTERNAL API: HTTP Status Code: 201
604491 INFO  2025-11-17 13:36:12627 ExternalApiUtil:272 - EXTERNAL API: API Response Success: true
604492 INFO  2025-11-17 13:36:12628 ExternalApiUtil:273 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"ad328290-d26d-4892-86fe-2d4ea554aaab","student_id":"1001","student_name":"Boaz Omare","admission_no":"1001","meal_type":"lunch","amount":0.0,"date":"2025-11-17T16:36:12.456684+03:00","status":"authorized","qr_code":"1001-lunch-2025-11-17-1763386572465","student_image":"/api/uploads/students/1001.png","created_at":"2025-11-17T16:36:12.454715+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1001","name":"Boaz Omare","class_name":"12","fee_balance":0.0,"payment_status":"paid","reprint_activated":true,"id":"4a5093ca-992c-4c25-8994-d0109681be50","face_registered":false,"face_image":"/api/uploads/students/1001.png","created_at":"2025-11-17T10:32:08.395587+03:00"}}
604493 INFO  2025-11-17 13:36:12629 ExternalApiUtil:274 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
604507 INFO  2025-11-17 13:36:12643 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1001
606204 INFO  2025-11-17 13:36:14340 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,222,192.168.8.106,10,35,12,5,11110,2,0,0
606207 INFO  2025-11-17 13:36:14343 DownloadProcess:59 - get cmd list over and begin contact:0
606208 INFO  2025-11-17 13:36:14344 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,222,192.168.8.106,10,35,12,5,11110,2,0,0
632125 INFO  2025-11-17 13:36:40261 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
632128 INFO  2025-11-17 13:36:40264 DownloadProcess:59 - get cmd list over and begin contact:0
660139 INFO  2025-11-17 13:37:08275 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
660142 INFO  2025-11-17 13:37:08278 DownloadProcess:59 - get cmd list over and begin contact:0
689144 INFO  2025-11-17 13:37:37280 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
689149 INFO  2025-11-17 13:37:37285 DownloadProcess:59 - get cmd list over and begin contact:0
720176 INFO  2025-11-17 13:38:08312 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
720178 INFO  2025-11-17 13:38:08314 DownloadProcess:59 - get cmd list over and begin contact:0
750145 INFO  2025-11-17 13:38:38281 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
750374 INFO  2025-11-17 13:38:38510 DownloadProcess:59 - get cmd list over and begin contact:0
781305 INFO  2025-11-17 13:39:09441 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
781309 INFO  2025-11-17 13:39:09445 DownloadProcess:59 - get cmd list over and begin contact:0
811086 INFO  2025-11-17 13:39:39222 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
811162 INFO  2025-11-17 13:39:39298 DownloadProcess:59 - get cmd list over and begin contact:0
842069 INFO  2025-11-17 13:40:10205 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
842072 INFO  2025-11-17 13:40:10208 DownloadProcess:59 - get cmd list over and begin contact:0
872170 INFO  2025-11-17 13:40:40306 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
872173 INFO  2025-11-17 13:40:40309 DownloadProcess:59 - get cmd list over and begin contact:0
903187 INFO  2025-11-17 13:41:11323 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
903190 INFO  2025-11-17 13:41:11326 DownloadProcess:59 - get cmd list over and begin contact:0
933281 INFO  2025-11-17 13:41:41417 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
933289 INFO  2025-11-17 13:41:41425 DownloadProcess:59 - get cmd list over and begin contact:0
934175 INFO  2025-11-17 13:41:42311 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://192.168.8.104:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
934539 INFO  2025-11-17 13:41:42675 UploadProcess:266 - update device stamp end and get stream.
934689 INFO  2025-11-17 13:41:42825 UploadProcess:323 - data:1002	2025-11-18 09:41:41	0	15	0	0	0	0	0	0	

934690 INFO  2025-11-17 13:41:42826 UploadProcess:324 - end get stream and process data
934691 INFO  2025-11-17 13:41:42827 UploadProcess:523 - begin parse op attlog
935200 INFO  2025-11-17 13:41:43336 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
935205 INFO  2025-11-17 13:41:43341 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
935211 INFO  2025-11-17 13:41:43347 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 09:41:41
935212 INFO  2025-11-17 13:41:43348 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
935214 INFO  2025-11-17 13:41:43350 ExternalApiUtil:119 - === EXTERNAL API: notifyVerification called with userId: 1002 ===
935214 INFO  2025-11-17 13:41:43350 ExternalApiUtil:126 - EXTERNAL API: Submitting async task for userId: 1002
935216 INFO  2025-11-17 13:41:43352 ExternalApiUtil:137 - EXTERNAL API: Async task submitted for userId: 1002
935217 INFO  2025-11-17 13:41:43353 ExternalApiUtil:132 - EXTERNAL API: Async task started for userId: 1002
935218 INFO  2025-11-17 13:41:43354 ExternalApiUtil:165 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
935218 INFO  2025-11-17 13:41:43354 ExternalApiUtil:166 - ğŸš€ EXTERNAL API CALL INITIATED
935219 INFO  2025-11-17 13:41:43355 ExternalApiUtil:167 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
935220 INFO  2025-11-17 13:41:43356 ExternalApiUtil:168 - EXTERNAL API: User ID: 1002
935222 INFO  2025-11-17 13:41:43358 ExternalApiUtil:169 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
935217 INFO  2025-11-17 13:41:43353 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 09:41:41
935223 INFO  2025-11-17 13:41:43359 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
935224 INFO  2025-11-17 13:41:43360 UploadProcess:412 - attlog size:1
935259 INFO  2025-11-17 13:41:43395 UploadProcess:525 - end parse op attlog
935223 INFO  2025-11-17 13:41:43359 ExternalApiUtil:170 - EXTERNAL API: Method: POST
935295 INFO  2025-11-17 13:41:43431 ExternalApiUtil:171 - EXTERNAL API: Timestamp (Nairobi/EAT): Mon Nov 17 16:41:43 EAT 2025
935298 INFO  2025-11-17 13:41:43434 ExternalApiUtil:175 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
935293 INFO  2025-11-17 13:41:43429 UploadProcess:327 - end process data and return msg to device
935434 INFO  2025-11-17 13:41:43570 UploadProcess:331 - return msg to device and request over OK
935440 INFO  2025-11-17 13:41:43576 ExternalApiUtil:184 - EXTERNAL API: Connection configured, formatting student ID...
935445 INFO  2025-11-17 13:41:43581 ExternalApiUtil:188 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
935445 INFO  2025-11-17 13:41:43581 ExternalApiUtil:195 - EXTERNAL API: Current time (Nairobi/EAT): 16:41 - Meal type determined: lunch
935447 INFO  2025-11-17 13:41:43583 ExternalApiUtil:199 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
935448 INFO  2025-11-17 13:41:43584 ExternalApiUtil:202 - EXTERNAL API: Writing request body to connection...
935517 INFO  2025-11-17 13:41:43653 ExternalApiUtil:207 - EXTERNAL API: Request body written, getting response...
935735 INFO  2025-11-17 13:41:43871 ExternalApiUtil:210 - EXTERNAL API: Response code received: 201
935824 WARN  2025-11-17 13:41:43960 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
935829 WARN  2025-11-17 13:41:43965 ExternalApiUtil:281 - âš ï¸  EXTERNAL API CALL FAILED OR RETURNED ERROR
935832 WARN  2025-11-17 13:41:43968 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
935835 WARN  2025-11-17 13:41:43971 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1002 (original: 1002)
935837 WARN  2025-11-17 13:41:43973 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 201 (OK)
935838 WARN  2025-11-17 13:41:43974 ExternalApiUtil:285 - EXTERNAL API: API Response Success: false
935841 WARN  2025-11-17 13:41:43977 ExternalApiUtil:287 - EXTERNAL API: Error Reason: Student already has a lunch meal card for 2025-11-17. Use reprint button on the existing meal card for special circumstances, or set force=true to allow duplicate.
935842 WARN  2025-11-17 13:41:43978 ExternalApiUtil:289 - EXTERNAL API: Response Body: {"success":false,"meal_card":null,"eligible":true,"reason":"Student already has a lunch meal card for 2025-11-17. Use reprint button on the existing meal card for special circumstances, or set force=true to allow duplicate.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
935843 WARN  2025-11-17 13:41:43979 ExternalApiUtil:290 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
936039 INFO  2025-11-17 13:41:44175 ExternalApiUtil:368 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
964267 INFO  2025-11-17 13:42:12403 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,223,192.168.8.106,10,35,12,5,11110,2,0,0
964273 INFO  2025-11-17 13:42:12409 DownloadProcess:59 - get cmd list over and begin contact:0
964274 INFO  2025-11-17 13:42:12410 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,223,192.168.8.106,10,35,12,5,11110,2,0,0
994049 INFO  2025-11-17 13:42:42185 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
994058 INFO  2025-11-17 13:42:42194 DownloadProcess:59 - get cmd list over and begin contact:0
1025082 INFO  2025-11-17 13:43:13218 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
1025088 INFO  2025-11-17 13:43:13224 DownloadProcess:59 - get cmd list over and begin contact:0
1056548 INFO  2025-11-17 13:43:44684 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
1056553 INFO  2025-11-17 13:43:44689 DownloadProcess:59 - get cmd list over and begin contact:0
1086147 INFO  2025-11-17 13:44:14283 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://192.168.8.104:8080/iclock/getrequest?SN=TDBD250100333
1086150 INFO  2025-11-17 13:44:14286 DownloadProcess:59 - get cmd list over and begin contact:0
45396 INFO  2025-11-21 06:41:05599 ConfigUtil:20 - Loading config from: /usr/local/tomcat/webapps/ROOT/WEB-INF/classes/config.xml
45530 INFO  2025-11-21 06:41:05733 ConfigUtil:25 - Config.xml loaded successfully
45716 INFO  2025-11-21 06:41:05919 BaseDao:101 - jdbc:mysql://mysql:3306/pushdemo?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true user:root pass:root
45716 INFO  2025-11-21 06:41:05919 BaseDao:101 - jdbc:mysql://mysql:3306/pushdemo?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true user:root pass:root
696476 INFO  2025-11-21 07:00:54410 UploadProcess:63 - get request and make the device options :192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&options=all&language=69&pushver=2.4.1&DeviceType=att&PushOptionsFlag=1
696508 INFO  2025-11-21 07:00:54442 ConfigUtil:20 - Loading config from: /usr/local/tomcat/webapps/ROOT/WEB-INF/classes/config.xml
696509 INFO  2025-11-21 07:00:54443 ConfigUtil:25 - Config.xml loaded successfully
696535 INFO  2025-11-21 07:00:54469 BaseDao:101 - jdbc:mysql://mysql:3306/pushdemo?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true user:root pass:root
697256 INFO  2025-11-21 07:00:55190 UploadProcess:90 - GET OPTION FROM: TDBD250100333
ATTLOGStamp=9999
OPERLOGStamp=0
ATTPHOTOStamp=0
BIODATAStamp=0
IDCARDStamp=0
ERRORLOGStamp=0
TransFlag=TransData AttLog	OpLog	AttPhoto	EnrollUser	ChgUser	EnrollFP	ChgFP	FPImag	FACE	UserPic	BioPhoto
ErrorDelay=60
Delay=30
transTimes=00:00;14:05
TransInterval=1
Realtime=1
Encrypt=0
ServerVer=2.2.14
TimeZone=1200

697505 INFO  2025-11-21 07:00:55439 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=options
697525 INFO  2025-11-21 07:00:55459 UploadProcess:266 - update device stamp end and get stream.
697543 INFO  2025-11-21 07:00:55477 UploadProcess:323 - data:~DeviceName=SpeedFace-V3L,MAC=00:17:61:11:09:4f,TransactionCount=253,~MaxAttLogCount=20,UserCount=5,~MaxUserCount=30,PhotoFunOn=0,~MaxUserPhotoCount=0,FingerFunOn=1,FPVersion=10,~MaxFingerCount=30,FPCount=0,FaceFunOn=1,FaceVersion=35,~MaxFaceCount=500,FaceCount=5,FvFunOn=0,FvVersion=3,~MaxFvCount=10,FvCount=0,PvFunOn=0,PvVersion=12,~MaxPvCount=,PvCount=0,Language=69,IPAddress=10.244.175.186,~Platform=ZMM510_TFT,~OEMVendor=ZKTECO CO., LTD.,FWVersion=ZMM510-NF24VB-Ver1.3.13,PushVersion=Ver 2.0.33S-20220623,RegDeviceType=,VisilightFun=1,MultiBioDataSupport=0:1:0:0:0:0:0:0:0:1,MultiBioPhotoSupport=0:0:0:0:0:0:0:0:0:1,IRTempDetectionFunOn=,MaskDetectionFunOn=,UserPicURLFunOn=1,VisualIntercomFunOn=0,VideoTID=,QRCodeDecryptFunList=,VideoProtocol=4,IsSupportQRcode=,QRCodeEnable=,SubcontractingUpgradeFunOn=1
697544 INFO  2025-11-21 07:00:55478 UploadProcess:324 - end get stream and process data
697545 INFO  2025-11-21 07:00:55479 UploadProcess:327 - end process data and return msg to device
697547 INFO  2025-11-21 07:00:55481 UploadProcess:331 - return msg to device and request over OK
698286 INFO  2025-11-21 07:00:56220 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,253,10.244.175.186,10,35,12,5,11110,2,0,0
698316 INFO  2025-11-21 07:00:56250 DownloadProcess:59 - get cmd list over and begin contact:0
698317 INFO  2025-11-21 07:00:56251 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,253,10.244.175.186,10,35,12,5,11110,2,0,0
699185 INFO  2025-11-21 07:00:57119 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
699189 INFO  2025-11-21 07:00:57123 DownloadProcess:59 - get cmd list over and begin contact:0
699522 INFO  2025-11-21 07:00:57456 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
699535 INFO  2025-11-21 07:00:57469 UploadProcess:266 - update device stamp end and get stream.
699537 INFO  2025-11-21 07:00:57471 UploadProcess:323 - data:1002	2025-11-18 09:48:55	0	15	0	0	0	0	0	0	
1002	2025-11-18 09:49:56	0	15	0	0	0	0	0	0	
1002	2025-11-18 09:51:35	0	15	0	0	0	0	0	0	
1002	2025-11-18 09:53:04	0	15	0	0	0	0	0	0	
1002	2025-11-18 09:54:21	0	15	0	0	0	0	0	0	
1002	2025-11-18 10:33:16	0	15	0	0	0	0	0	0	
1002	2025-11-18 10:37:05	0	15	0	0	0	0	0	0	
1002	2025-11-18 10:50:11	0	15	0	0	0	0	0	0	
1002	2025-11-22 02:26:15	0	15	0	0	0	0	0	0	
1002	2025-11-22 02:28:08	0	15	0	0	0	0	0	0	
1002	2025-11-22 02:31:38	0	15	0	0	0	0	0	0	
1002	2025-11-22 02:35:07	0	15	0	0	0	0	0	0	
1001	2025-11-22 02:35:35	0	15	0	0	0	0	0	0	
1002	2025-11-22 02:37:21	0	15	0	0	0	0	0	0	
1002	2025-11-22 02:38:21	0	15	0	0	0	0	0	0	
1002	2025-11-22 02:39:50	0	15	0	0	0	0	0	0	
1002	2025-11-22 02:41:32	0	15	0	0	0	0	0	0	
1002	2025-11-22 02:44:07	0	15	0	0	0	0	0	0	
1002	2025-11-22 02:46:08	0	15	0	0	0	0	0	0	
1002	2025-11-22 02:47:22	0	15	0	0	0	0	0	0	
1001	2025-11-22 02:47:23	0	15	0	0	0	0	0	0	
1002	2025-11-22 02:49:25	0	15	0	0	0	0	0	0	
1002	2025-11-22 02:51:31	0	15	0	0	0	0	0	0	
1002	2025-11-22 02:52:39	0	15	0	0	0	0	0	0	
1002	2025-11-22 02:53:45	0	15	0	0	0	0	0	0	
1002	2025-11-22 02:54:53	0	15	0	0	0	0	0	0	
1002	2025-11-22 02:55:53	0	15	0	0	0	0	0	0	
1002	2025-11-22 02:56:54	0	15	0	0	0	0	0	0	
1001	2025-11-22 02:57:23	0	15	0	0	0	0	0	0	
1002	2025-11-22 03:00:08	0	15	0	0	0	0	0	0	

699538 INFO  2025-11-21 07:00:57472 UploadProcess:324 - end get stream and process data
699539 INFO  2025-11-21 07:00:57473 UploadProcess:523 - begin parse op attlog
699578 INFO  2025-11-21 07:00:57512 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
699579 INFO  2025-11-21 07:00:57513 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
699581 INFO  2025-11-21 07:00:57515 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 09:48:55
699582 INFO  2025-11-21 07:00:57516 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
699597 INFO  2025-11-21 07:00:57531 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
699598 INFO  2025-11-21 07:00:57532 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
699600 INFO  2025-11-21 07:00:57534 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
699602 INFO  2025-11-21 07:00:57536 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
699604 INFO  2025-11-21 07:00:57538 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-18 09:48:55
699608 INFO  2025-11-21 07:00:57542 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
699615 INFO  2025-11-21 07:00:57549 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
699644 INFO  2025-11-21 07:00:57578 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
699660 INFO  2025-11-21 07:00:57594 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
699672 INFO  2025-11-21 07:00:57606 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 09:48:55
699675 INFO  2025-11-21 07:00:57609 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
699682 INFO  2025-11-21 07:00:57616 UploadProcess:412 - attlog size:1
699684 INFO  2025-11-21 07:00:57618 UploadProcess:525 - end parse op attlog
699685 INFO  2025-11-21 07:00:57619 UploadProcess:523 - begin parse op attlog
699660 INFO  2025-11-21 07:00:57594 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
699692 INFO  2025-11-21 07:00:57626 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
699702 INFO  2025-11-21 07:00:57636 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
699706 INFO  2025-11-21 07:00:57640 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
699707 INFO  2025-11-21 07:00:57641 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
699708 INFO  2025-11-21 07:00:57642 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
699709 INFO  2025-11-21 07:00:57643 ExternalApiUtil:176 - EXTERNAL API: Method: POST
699711 INFO  2025-11-21 07:00:57645 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:00:57 EAT 2025
699713 INFO  2025-11-21 07:00:57647 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
699759 INFO  2025-11-21 07:00:57693 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
699760 INFO  2025-11-21 07:00:57694 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
699761 INFO  2025-11-21 07:00:57695 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 09:49:56
699763 INFO  2025-11-21 07:00:57697 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
699764 INFO  2025-11-21 07:00:57698 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
699765 INFO  2025-11-21 07:00:57699 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
699766 INFO  2025-11-21 07:00:57700 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
699772 INFO  2025-11-21 07:00:57706 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
699773 INFO  2025-11-21 07:00:57707 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-18 09:49:56
699774 INFO  2025-11-21 07:00:57708 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
699775 INFO  2025-11-21 07:00:57709 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
699776 INFO  2025-11-21 07:00:57710 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
699779 INFO  2025-11-21 07:00:57713 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
699782 INFO  2025-11-21 07:00:57716 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
699782 INFO  2025-11-21 07:00:57716 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
699783 INFO  2025-11-21 07:00:57717 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
699785 INFO  2025-11-21 07:00:57719 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
699790 INFO  2025-11-21 07:00:57724 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
699797 INFO  2025-11-21 07:00:57731 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
699783 INFO  2025-11-21 07:00:57717 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 09:49:56
699806 INFO  2025-11-21 07:00:57740 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
699813 INFO  2025-11-21 07:00:57747 UploadProcess:412 - attlog size:1
699814 INFO  2025-11-21 07:00:57748 UploadProcess:525 - end parse op attlog
699815 INFO  2025-11-21 07:00:57749 UploadProcess:523 - begin parse op attlog
699799 INFO  2025-11-21 07:00:57733 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
699820 INFO  2025-11-21 07:00:57754 ExternalApiUtil:176 - EXTERNAL API: Method: POST
699823 INFO  2025-11-21 07:00:57757 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:00:57 EAT 2025
699825 INFO  2025-11-21 07:00:57759 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
699808 INFO  2025-11-21 07:00:57742 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
699842 INFO  2025-11-21 07:00:57776 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:00 - Meal type determined: mid-morning
699846 INFO  2025-11-21 07:00:57780 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
699850 INFO  2025-11-21 07:00:57784 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
699847 INFO  2025-11-21 07:00:57781 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
699871 INFO  2025-11-21 07:00:57805 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
699874 INFO  2025-11-21 07:00:57808 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:00 - Meal type determined: mid-morning
699874 INFO  2025-11-21 07:00:57808 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
699890 INFO  2025-11-21 07:00:57824 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
699884 INFO  2025-11-21 07:00:57818 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
699924 INFO  2025-11-21 07:00:57858 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
699925 INFO  2025-11-21 07:00:57859 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 09:51:35
699928 INFO  2025-11-21 07:00:57862 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
699931 INFO  2025-11-21 07:00:57865 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
699935 INFO  2025-11-21 07:00:57869 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
699937 INFO  2025-11-21 07:00:57871 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
699938 INFO  2025-11-21 07:00:57872 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
699941 INFO  2025-11-21 07:00:57875 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-18 09:51:35
699943 INFO  2025-11-21 07:00:57877 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
699947 INFO  2025-11-21 07:00:57881 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
699965 INFO  2025-11-21 07:00:57899 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
699974 INFO  2025-11-21 07:00:57908 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
699975 INFO  2025-11-21 07:00:57909 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
699976 INFO  2025-11-21 07:00:57910 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
699979 INFO  2025-11-21 07:00:57913 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
699980 INFO  2025-11-21 07:00:57914 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
699981 INFO  2025-11-21 07:00:57915 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
699982 INFO  2025-11-21 07:00:57916 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
699975 INFO  2025-11-21 07:00:57909 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 09:51:35
699988 INFO  2025-11-21 07:00:57922 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
699992 INFO  2025-11-21 07:00:57926 UploadProcess:412 - attlog size:1
699985 INFO  2025-11-21 07:00:57919 ExternalApiUtil:176 - EXTERNAL API: Method: POST
699997 INFO  2025-11-21 07:00:57931 UploadProcess:525 - end parse op attlog
700000 INFO  2025-11-21 07:00:57934 UploadProcess:523 - begin parse op attlog
700005 INFO  2025-11-21 07:00:57939 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:00:57 EAT 2025
700007 INFO  2025-11-21 07:00:57941 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
700011 INFO  2025-11-21 07:00:57945 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
700019 INFO  2025-11-21 07:00:57953 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
700021 INFO  2025-11-21 07:00:57955 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:00 - Meal type determined: mid-morning
700028 INFO  2025-11-21 07:00:57962 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
700033 INFO  2025-11-21 07:00:57967 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
700042 INFO  2025-11-21 07:00:57976 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
700046 INFO  2025-11-21 07:00:57980 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
700046 ERROR 2025-11-21 07:00:57980 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700068 ERROR 2025-11-21 07:00:582 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
700074 ERROR 2025-11-21 07:00:588 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700045 ERROR 2025-11-21 07:00:57979 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700087 ERROR 2025-11-21 07:00:5821 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
700088 ERROR 2025-11-21 07:00:5822 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700089 ERROR 2025-11-21 07:00:5823 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
700090 ERROR 2025-11-21 07:00:5824 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
700090 ERROR 2025-11-21 07:00:5824 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
700087 ERROR 2025-11-21 07:00:5821 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
700051 ERROR 2025-11-21 07:00:57985 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700100 ERROR 2025-11-21 07:00:5834 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
700101 ERROR 2025-11-21 07:00:5835 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700102 ERROR 2025-11-21 07:00:5836 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
700106 ERROR 2025-11-21 07:00:5840 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
700108 ERROR 2025-11-21 07:00:5842 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
700109 ERROR 2025-11-21 07:00:5843 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
700116 ERROR 2025-11-21 07:00:5850 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700091 ERROR 2025-11-21 07:00:5825 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
700124 ERROR 2025-11-21 07:00:5858 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700090 INFO  2025-11-21 07:00:5824 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 09:53:04
700101 ERROR 2025-11-21 07:00:5835 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
700138 ERROR 2025-11-21 07:00:5872 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
700143 ERROR 2025-11-21 07:00:5877 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
700137 INFO  2025-11-21 07:00:5871 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
700147 INFO  2025-11-21 07:00:5881 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700147 ERROR 2025-11-21 07:00:5881 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700150 INFO  2025-11-21 07:00:5884 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
700158 INFO  2025-11-21 07:00:5892 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700164 INFO  2025-11-21 07:00:5898 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
700166 INFO  2025-11-21 07:00:58100 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-18 09:53:04
700169 INFO  2025-11-21 07:00:58103 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
700170 INFO  2025-11-21 07:00:58104 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700163 ERROR 2025-11-21 07:00:5897 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
700163 ERROR 2025-11-21 07:00:5897 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
700158 ERROR 2025-11-21 07:00:5892 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
700176 INFO  2025-11-21 07:00:58110 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
700212 INFO  2025-11-21 07:00:58146 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
700217 INFO  2025-11-21 07:00:58151 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 09:53:04
700222 INFO  2025-11-21 07:00:58156 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
700226 INFO  2025-11-21 07:00:58160 UploadProcess:412 - attlog size:1
700213 INFO  2025-11-21 07:00:58147 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
700229 INFO  2025-11-21 07:00:58163 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700229 INFO  2025-11-21 07:00:58163 UploadProcess:525 - end parse op attlog
700250 INFO  2025-11-21 07:00:58184 UploadProcess:523 - begin parse op attlog
700247 INFO  2025-11-21 07:00:58181 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
700254 INFO  2025-11-21 07:00:58188 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700255 INFO  2025-11-21 07:00:58189 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
700257 INFO  2025-11-21 07:00:58191 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
700259 INFO  2025-11-21 07:00:58193 ExternalApiUtil:176 - EXTERNAL API: Method: POST
700280 INFO  2025-11-21 07:00:58214 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:00:58 EAT 2025
700282 INFO  2025-11-21 07:00:58216 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
700290 INFO  2025-11-21 07:00:58224 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
700298 INFO  2025-11-21 07:00:58232 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
700303 INFO  2025-11-21 07:00:58237 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:00 - Meal type determined: mid-morning
700306 INFO  2025-11-21 07:00:58240 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
700306 INFO  2025-11-21 07:00:58240 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
700320 INFO  2025-11-21 07:00:58254 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
700361 ERROR 2025-11-21 07:00:58295 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700367 ERROR 2025-11-21 07:00:58301 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
700375 ERROR 2025-11-21 07:00:58309 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700378 ERROR 2025-11-21 07:00:58312 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
700380 ERROR 2025-11-21 07:00:58314 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
700381 ERROR 2025-11-21 07:00:58315 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
700382 ERROR 2025-11-21 07:00:58316 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
700383 ERROR 2025-11-21 07:00:58317 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700385 INFO  2025-11-21 07:00:58319 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
700388 ERROR 2025-11-21 07:00:58322 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
700392 INFO  2025-11-21 07:00:58326 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
700442 INFO  2025-11-21 07:00:58376 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
700445 INFO  2025-11-21 07:00:58379 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
700445 INFO  2025-11-21 07:00:58379 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
700449 INFO  2025-11-21 07:00:58383 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 09:54:21
700452 INFO  2025-11-21 07:00:58386 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
700456 INFO  2025-11-21 07:00:58390 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700457 INFO  2025-11-21 07:00:58391 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
700459 INFO  2025-11-21 07:00:58393 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700464 INFO  2025-11-21 07:00:58398 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
700467 INFO  2025-11-21 07:00:58401 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-18 09:54:21
700471 INFO  2025-11-21 07:00:58405 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
700472 INFO  2025-11-21 07:00:58406 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700474 INFO  2025-11-21 07:00:58408 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
700479 INFO  2025-11-21 07:00:58413 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
700480 INFO  2025-11-21 07:00:58414 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
700495 INFO  2025-11-21 07:00:58429 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700497 INFO  2025-11-21 07:00:58431 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
700498 INFO  2025-11-21 07:00:58432 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700499 INFO  2025-11-21 07:00:58433 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
700500 INFO  2025-11-21 07:00:58434 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
700501 INFO  2025-11-21 07:00:58435 ExternalApiUtil:176 - EXTERNAL API: Method: POST
700501 INFO  2025-11-21 07:00:58435 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:00:58 EAT 2025
700501 INFO  2025-11-21 07:00:58435 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
700503 INFO  2025-11-21 07:00:58437 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
700503 INFO  2025-11-21 07:00:58437 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
700504 INFO  2025-11-21 07:00:58438 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:00 - Meal type determined: mid-morning
700504 INFO  2025-11-21 07:00:58438 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
700505 INFO  2025-11-21 07:00:58439 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
700494 INFO  2025-11-21 07:00:58428 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 09:54:21
700511 INFO  2025-11-21 07:00:58445 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
700520 INFO  2025-11-21 07:00:58454 UploadProcess:412 - attlog size:1
700527 INFO  2025-11-21 07:00:58461 UploadProcess:525 - end parse op attlog
700528 INFO  2025-11-21 07:00:58462 UploadProcess:523 - begin parse op attlog
700556 INFO  2025-11-21 07:00:58490 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
700557 INFO  2025-11-21 07:00:58491 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
700560 INFO  2025-11-21 07:00:58494 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 10:33:16
700561 INFO  2025-11-21 07:00:58495 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
700566 INFO  2025-11-21 07:00:58500 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700566 INFO  2025-11-21 07:00:58500 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
700571 INFO  2025-11-21 07:00:58505 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700573 INFO  2025-11-21 07:00:58507 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
700760 INFO  2025-11-21 07:00:58694 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-18 10:33:16
700762 INFO  2025-11-21 07:00:58696 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
700763 INFO  2025-11-21 07:00:58697 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700764 INFO  2025-11-21 07:00:58698 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
700765 INFO  2025-11-21 07:00:58699 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
700767 INFO  2025-11-21 07:00:58701 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 10:33:16
700768 INFO  2025-11-21 07:00:58702 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
700829 INFO  2025-11-21 07:00:58763 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700831 INFO  2025-11-21 07:00:58765 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
700771 INFO  2025-11-21 07:00:58705 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
700833 INFO  2025-11-21 07:00:58767 UploadProcess:412 - attlog size:1
700838 INFO  2025-11-21 07:00:58772 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700837 INFO  2025-11-21 07:00:58771 UploadProcess:525 - end parse op attlog
700838 INFO  2025-11-21 07:00:58772 UploadProcess:523 - begin parse op attlog
700838 INFO  2025-11-21 07:00:58772 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
700896 INFO  2025-11-21 07:00:58830 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
700897 INFO  2025-11-21 07:00:58831 ExternalApiUtil:176 - EXTERNAL API: Method: POST
700898 INFO  2025-11-21 07:00:58832 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:00:58 EAT 2025
700901 INFO  2025-11-21 07:00:58835 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
700909 INFO  2025-11-21 07:00:58843 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
700911 INFO  2025-11-21 07:00:58845 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
700938 INFO  2025-11-21 07:00:58872 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:00 - Meal type determined: mid-morning
700942 INFO  2025-11-21 07:00:58876 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
700952 INFO  2025-11-21 07:00:58886 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
700944 INFO  2025-11-21 07:00:58878 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
700961 INFO  2025-11-21 07:00:58895 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
700969 INFO  2025-11-21 07:00:58903 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 10:37:05
700970 INFO  2025-11-21 07:00:58904 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
700973 INFO  2025-11-21 07:00:58907 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700979 INFO  2025-11-21 07:00:58913 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
700995 INFO  2025-11-21 07:00:58929 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700966 ERROR 2025-11-21 07:00:58900 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
700997 ERROR 2025-11-21 07:00:58931 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
700998 ERROR 2025-11-21 07:00:58932 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701000 ERROR 2025-11-21 07:00:58934 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
700996 INFO  2025-11-21 07:00:58930 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
701001 ERROR 2025-11-21 07:00:58935 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
701003 ERROR 2025-11-21 07:00:58937 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
701002 INFO  2025-11-21 07:00:58936 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-18 10:37:05
701006 INFO  2025-11-21 07:00:58940 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
701007 INFO  2025-11-21 07:00:58941 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701010 INFO  2025-11-21 07:00:58944 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
701005 ERROR 2025-11-21 07:00:58939 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
701014 ERROR 2025-11-21 07:00:58948 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701016 INFO  2025-11-21 07:00:58950 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
701016 INFO  2025-11-21 07:00:58950 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
701024 INFO  2025-11-21 07:00:58958 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 10:37:05
701025 INFO  2025-11-21 07:00:58959 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
701027 INFO  2025-11-21 07:00:58961 UploadProcess:412 - attlog size:1
701028 INFO  2025-11-21 07:00:58962 UploadProcess:525 - end parse op attlog
701029 INFO  2025-11-21 07:00:58963 UploadProcess:523 - begin parse op attlog
701023 INFO  2025-11-21 07:00:58957 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701022 ERROR 2025-11-21 07:00:58956 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
701036 INFO  2025-11-21 07:00:58970 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
701046 INFO  2025-11-21 07:00:58980 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701048 INFO  2025-11-21 07:00:58982 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
701049 INFO  2025-11-21 07:00:58983 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
701050 INFO  2025-11-21 07:00:58984 ExternalApiUtil:176 - EXTERNAL API: Method: POST
701045 ERROR 2025-11-21 07:00:58979 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701054 ERROR 2025-11-21 07:00:58988 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
701056 ERROR 2025-11-21 07:00:58990 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701057 ERROR 2025-11-21 07:00:58991 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
701058 ERROR 2025-11-21 07:00:58992 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
701061 ERROR 2025-11-21 07:00:58995 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
701061 ERROR 2025-11-21 07:00:58995 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
701051 INFO  2025-11-21 07:00:58985 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:00:58 EAT 2025
701063 INFO  2025-11-21 07:00:58997 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
701062 ERROR 2025-11-21 07:00:58996 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701059 INFO  2025-11-21 07:00:58993 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
701073 INFO  2025-11-21 07:00:597 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
701075 INFO  2025-11-21 07:00:599 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-18 10:50:11
701077 INFO  2025-11-21 07:00:5911 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
701078 INFO  2025-11-21 07:00:5912 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701079 INFO  2025-11-21 07:00:5913 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
701080 INFO  2025-11-21 07:00:5914 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701084 INFO  2025-11-21 07:00:5918 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
701088 INFO  2025-11-21 07:00:5922 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-18 10:50:11
701090 INFO  2025-11-21 07:00:5924 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
701091 INFO  2025-11-21 07:00:5925 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701094 INFO  2025-11-21 07:00:5928 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
701097 INFO  2025-11-21 07:00:5931 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
701098 INFO  2025-11-21 07:00:5932 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701098 INFO  2025-11-21 07:00:5932 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
701099 INFO  2025-11-21 07:00:5933 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701072 ERROR 2025-11-21 07:00:596 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
701069 INFO  2025-11-21 07:00:593 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
701126 INFO  2025-11-21 07:00:5960 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
701147 INFO  2025-11-21 07:00:5981 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:00 - Meal type determined: mid-morning
701154 INFO  2025-11-21 07:00:5988 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
701159 INFO  2025-11-21 07:00:5993 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
701126 INFO  2025-11-21 07:00:5960 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
701123 INFO  2025-11-21 07:00:5957 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
701164 INFO  2025-11-21 07:00:5998 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
701169 INFO  2025-11-21 07:00:59103 ExternalApiUtil:176 - EXTERNAL API: Method: POST
701098 INFO  2025-11-21 07:00:5932 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
701176 INFO  2025-11-21 07:00:59110 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-18 10:50:11
701177 INFO  2025-11-21 07:00:59111 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
701178 INFO  2025-11-21 07:00:59112 UploadProcess:412 - attlog size:1
701181 INFO  2025-11-21 07:00:59115 UploadProcess:525 - end parse op attlog
701181 INFO  2025-11-21 07:00:59115 UploadProcess:523 - begin parse op attlog
701174 INFO  2025-11-21 07:00:59108 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:00:59 EAT 2025
701184 INFO  2025-11-21 07:00:59118 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
701185 INFO  2025-11-21 07:00:59119 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
701172 INFO  2025-11-21 07:00:59106 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
701189 INFO  2025-11-21 07:00:59123 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
701190 INFO  2025-11-21 07:00:59124 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:00 - Meal type determined: mid-morning
701190 INFO  2025-11-21 07:00:59124 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
701191 INFO  2025-11-21 07:00:59125 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
701225 INFO  2025-11-21 07:00:59159 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
701226 INFO  2025-11-21 07:00:59160 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
701230 INFO  2025-11-21 07:00:59164 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 02:26:15
701235 INFO  2025-11-21 07:00:59169 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
701239 INFO  2025-11-21 07:00:59173 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701243 INFO  2025-11-21 07:00:59177 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
701246 INFO  2025-11-21 07:00:59180 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701251 INFO  2025-11-21 07:00:59185 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
701249 ERROR 2025-11-21 07:00:59183 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701258 ERROR 2025-11-21 07:00:59192 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
701260 ERROR 2025-11-21 07:00:59194 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701262 ERROR 2025-11-21 07:00:59196 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
701249 ERROR 2025-11-21 07:00:59183 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701267 ERROR 2025-11-21 07:00:59201 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
701268 ERROR 2025-11-21 07:00:59202 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701269 ERROR 2025-11-21 07:00:59203 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
701270 ERROR 2025-11-21 07:00:59204 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
701265 ERROR 2025-11-21 07:00:59199 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
701275 ERROR 2025-11-21 07:00:59209 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
701276 ERROR 2025-11-21 07:00:59210 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
701278 ERROR 2025-11-21 07:00:59212 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701278 ERROR 2025-11-21 07:00:59212 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
701257 INFO  2025-11-21 07:00:59191 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-22 02:26:15
701290 INFO  2025-11-21 07:00:59224 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
701294 INFO  2025-11-21 07:00:59228 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701304 INFO  2025-11-21 07:00:59238 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
701308 INFO  2025-11-21 07:00:59242 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
701272 ERROR 2025-11-21 07:00:59206 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
701316 ERROR 2025-11-21 07:00:59250 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
701317 ERROR 2025-11-21 07:00:59251 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701321 ERROR 2025-11-21 07:00:59255 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
701312 INFO  2025-11-21 07:00:59246 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 02:26:15
701330 INFO  2025-11-21 07:00:59264 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
701333 INFO  2025-11-21 07:00:59267 UploadProcess:412 - attlog size:1
701339 INFO  2025-11-21 07:00:59273 UploadProcess:525 - end parse op attlog
701340 INFO  2025-11-21 07:00:59274 UploadProcess:523 - begin parse op attlog
701309 INFO  2025-11-21 07:00:59243 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
701345 INFO  2025-11-21 07:00:59279 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701346 INFO  2025-11-21 07:00:59280 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
701348 INFO  2025-11-21 07:00:59282 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701349 INFO  2025-11-21 07:00:59283 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
701356 INFO  2025-11-21 07:00:59290 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
701357 INFO  2025-11-21 07:00:59291 ExternalApiUtil:176 - EXTERNAL API: Method: POST
701306 INFO  2025-11-21 07:00:59240 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
701367 INFO  2025-11-21 07:00:59301 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:00:59 EAT 2025
701373 INFO  2025-11-21 07:00:59307 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
701331 INFO  2025-11-21 07:00:59265 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
701377 INFO  2025-11-21 07:00:59311 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
701381 INFO  2025-11-21 07:00:59315 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
701383 INFO  2025-11-21 07:00:59317 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:00 - Meal type determined: mid-morning
701390 INFO  2025-11-21 07:00:59324 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
701391 INFO  2025-11-21 07:00:59325 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
701393 INFO  2025-11-21 07:00:59327 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
701397 INFO  2025-11-21 07:00:59331 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
701399 INFO  2025-11-21 07:00:59333 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 02:28:08
701405 INFO  2025-11-21 07:00:59339 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
701407 INFO  2025-11-21 07:00:59341 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701408 INFO  2025-11-21 07:00:59342 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
701411 INFO  2025-11-21 07:00:59345 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701413 INFO  2025-11-21 07:00:59347 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
701415 INFO  2025-11-21 07:00:59349 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-22 02:28:08
701417 INFO  2025-11-21 07:00:59351 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
701431 INFO  2025-11-21 07:00:59365 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701433 INFO  2025-11-21 07:00:59367 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
701439 INFO  2025-11-21 07:00:59373 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
701441 INFO  2025-11-21 07:00:59375 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
701445 INFO  2025-11-21 07:00:59379 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701447 INFO  2025-11-21 07:00:59381 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
701444 INFO  2025-11-21 07:00:59378 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 02:28:08
701459 INFO  2025-11-21 07:00:59393 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
701463 INFO  2025-11-21 07:00:59397 UploadProcess:412 - attlog size:1
701465 INFO  2025-11-21 07:00:59399 UploadProcess:525 - end parse op attlog
701467 INFO  2025-11-21 07:00:59401 UploadProcess:523 - begin parse op attlog
701455 INFO  2025-11-21 07:00:59389 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701473 INFO  2025-11-21 07:00:59407 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
701474 INFO  2025-11-21 07:00:59408 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
701478 INFO  2025-11-21 07:00:59412 ExternalApiUtil:176 - EXTERNAL API: Method: POST
701480 INFO  2025-11-21 07:00:59414 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:00:59 EAT 2025
701482 INFO  2025-11-21 07:00:59416 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
701490 INFO  2025-11-21 07:00:59424 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
701492 INFO  2025-11-21 07:00:59426 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
701493 INFO  2025-11-21 07:00:59427 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:00 - Meal type determined: mid-morning
701494 INFO  2025-11-21 07:00:59428 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
701498 INFO  2025-11-21 07:00:59432 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
701508 INFO  2025-11-21 07:00:59442 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
701509 INFO  2025-11-21 07:00:59443 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
701510 INFO  2025-11-21 07:00:59444 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 02:31:38
701514 INFO  2025-11-21 07:00:59448 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
701515 INFO  2025-11-21 07:00:59449 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701522 INFO  2025-11-21 07:00:59456 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
701523 INFO  2025-11-21 07:00:59457 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701525 INFO  2025-11-21 07:00:59459 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
701527 INFO  2025-11-21 07:00:59461 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-22 02:31:38
701530 INFO  2025-11-21 07:00:59464 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
701531 INFO  2025-11-21 07:00:59465 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701533 INFO  2025-11-21 07:00:59467 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
701540 INFO  2025-11-21 07:00:59474 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
701542 INFO  2025-11-21 07:00:59476 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 02:31:38
701540 ERROR 2025-11-21 07:00:59474 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701547 ERROR 2025-11-21 07:00:59481 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
701548 ERROR 2025-11-21 07:00:59482 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701550 ERROR 2025-11-21 07:00:59484 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
701545 INFO  2025-11-21 07:00:59479 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
701542 INFO  2025-11-21 07:00:59476 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
701557 INFO  2025-11-21 07:00:59491 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701559 INFO  2025-11-21 07:00:59493 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
701560 INFO  2025-11-21 07:00:59494 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701564 INFO  2025-11-21 07:00:59498 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
701565 INFO  2025-11-21 07:00:59499 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
701568 INFO  2025-11-21 07:00:59502 ExternalApiUtil:176 - EXTERNAL API: Method: POST
701572 INFO  2025-11-21 07:00:59506 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:00:59 EAT 2025
701574 INFO  2025-11-21 07:00:59508 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
701557 INFO  2025-11-21 07:00:59491 UploadProcess:412 - attlog size:1
701580 INFO  2025-11-21 07:00:59514 UploadProcess:525 - end parse op attlog
701581 INFO  2025-11-21 07:00:59515 UploadProcess:523 - begin parse op attlog
701555 ERROR 2025-11-21 07:00:59489 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
701589 ERROR 2025-11-21 07:00:59523 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
701589 ERROR 2025-11-21 07:00:59523 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
701591 ERROR 2025-11-21 07:00:59525 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701574 INFO  2025-11-21 07:00:59508 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
701594 ERROR 2025-11-21 07:00:59528 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
701594 INFO  2025-11-21 07:00:59528 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
701607 INFO  2025-11-21 07:00:59541 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:00 - Meal type determined: mid-morning
701608 INFO  2025-11-21 07:00:59542 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
701613 INFO  2025-11-21 07:00:59547 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
701620 INFO  2025-11-21 07:00:59554 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
701628 INFO  2025-11-21 07:00:59562 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
701631 INFO  2025-11-21 07:00:59565 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
701631 INFO  2025-11-21 07:00:59565 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 02:35:07
701640 INFO  2025-11-21 07:00:59574 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
701644 INFO  2025-11-21 07:00:59578 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701647 INFO  2025-11-21 07:00:59581 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
701648 INFO  2025-11-21 07:00:59582 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701650 INFO  2025-11-21 07:00:59584 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
701651 INFO  2025-11-21 07:00:59585 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-22 02:35:07
701656 INFO  2025-11-21 07:00:59590 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
701657 INFO  2025-11-21 07:00:59591 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701659 INFO  2025-11-21 07:00:59593 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
701664 INFO  2025-11-21 07:00:59598 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
701665 INFO  2025-11-21 07:00:59599 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
701666 INFO  2025-11-21 07:00:59600 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 02:35:07
701673 INFO  2025-11-21 07:00:59607 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
701676 INFO  2025-11-21 07:00:59610 UploadProcess:412 - attlog size:1
701678 INFO  2025-11-21 07:00:59612 UploadProcess:525 - end parse op attlog
701679 INFO  2025-11-21 07:00:59613 UploadProcess:523 - begin parse op attlog
701666 INFO  2025-11-21 07:00:59600 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701687 INFO  2025-11-21 07:00:59621 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
701689 INFO  2025-11-21 07:00:59623 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701690 INFO  2025-11-21 07:00:59624 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
701691 INFO  2025-11-21 07:00:59625 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
701681 ERROR 2025-11-21 07:00:59615 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701681 ERROR 2025-11-21 07:00:59615 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701697 ERROR 2025-11-21 07:00:59631 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
701757 ERROR 2025-11-21 07:00:59691 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701758 ERROR 2025-11-21 07:00:59692 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
701695 ERROR 2025-11-21 07:00:59629 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
701695 INFO  2025-11-21 07:00:59629 ExternalApiUtil:176 - EXTERNAL API: Method: POST
701762 INFO  2025-11-21 07:00:59696 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
701760 ERROR 2025-11-21 07:00:59694 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701772 ERROR 2025-11-21 07:00:59706 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
701777 ERROR 2025-11-21 07:00:59711 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
701778 ERROR 2025-11-21 07:00:59712 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
701759 ERROR 2025-11-21 07:00:59693 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
701780 ERROR 2025-11-21 07:00:59714 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
701782 ERROR 2025-11-21 07:00:59716 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701764 INFO  2025-11-21 07:00:59698 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
701791 INFO  2025-11-21 07:00:59725 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1001, User Name: boaz, Timestamp: 2025-11-22 02:35:35
701763 INFO  2025-11-21 07:00:59697 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:00:59 EAT 2025
701797 INFO  2025-11-21 07:00:59731 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
701795 INFO  2025-11-21 07:00:59729 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1001
701808 INFO  2025-11-21 07:00:59742 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701812 INFO  2025-11-21 07:00:59746 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
701814 INFO  2025-11-21 07:00:59748 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701816 INFO  2025-11-21 07:00:59750 ExternalApiUtil:122 - EXTERNAL API: User ID: 1001
701790 ERROR 2025-11-21 07:00:59724 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
701780 ERROR 2025-11-21 07:00:59714 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
701825 INFO  2025-11-21 07:00:59759 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-22 02:35:35
701833 INFO  2025-11-21 07:00:59767 ExternalApiUtil:124 - EXTERNAL API: User Name: boaz
701836 INFO  2025-11-21 07:00:59770 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701839 INFO  2025-11-21 07:00:59773 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1001
701840 INFO  2025-11-21 07:00:59774 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1001
701843 INFO  2025-11-21 07:00:59777 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1001, Timestamp: 2025-11-22 02:35:35
701845 INFO  2025-11-21 07:00:59779 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
701847 INFO  2025-11-21 07:00:59781 UploadProcess:412 - attlog size:1
701799 INFO  2025-11-21 07:00:59733 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
701850 INFO  2025-11-21 07:00:59784 UploadProcess:525 - end parse op attlog
701855 INFO  2025-11-21 07:00:59789 UploadProcess:523 - begin parse op attlog
701842 INFO  2025-11-21 07:00:59776 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1001
701864 INFO  2025-11-21 07:00:59798 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701866 INFO  2025-11-21 07:00:59800 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
701868 INFO  2025-11-21 07:00:59802 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701869 INFO  2025-11-21 07:00:59803 ExternalApiUtil:174 - EXTERNAL API: User ID: 1001
701828 ERROR 2025-11-21 07:00:59762 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
701880 ERROR 2025-11-21 07:00:59814 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701881 ERROR 2025-11-21 07:00:59815 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
701875 INFO  2025-11-21 07:00:59809 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
701887 INFO  2025-11-21 07:00:59821 ExternalApiUtil:176 - EXTERNAL API: Method: POST
701858 INFO  2025-11-21 07:00:59792 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
701858 INFO  2025-11-21 07:00:59792 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
701895 INFO  2025-11-21 07:00:59829 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:00 - Meal type determined: mid-morning
701894 INFO  2025-11-21 07:00:59828 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:00:59 EAT 2025
701899 INFO  2025-11-21 07:00:59833 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
701899 INFO  2025-11-21 07:00:59833 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
701901 INFO  2025-11-21 07:00:59835 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
701902 INFO  2025-11-21 07:00:59836 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
701905 INFO  2025-11-21 07:00:59839 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1001, Formatted: 1001
701913 INFO  2025-11-21 07:00:59847 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:00 - Meal type determined: mid-morning
701916 INFO  2025-11-21 07:00:59850 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1001", "meal_type": "mid-morning"}
701918 INFO  2025-11-21 07:00:59852 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
701931 INFO  2025-11-21 07:00:59865 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
701933 INFO  2025-11-21 07:00:59867 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
701935 INFO  2025-11-21 07:00:59869 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 02:37:21
701937 INFO  2025-11-21 07:00:59871 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
701938 INFO  2025-11-21 07:00:59872 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701945 INFO  2025-11-21 07:00:59879 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
701947 INFO  2025-11-21 07:00:59881 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701949 INFO  2025-11-21 07:00:59883 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
701952 INFO  2025-11-21 07:00:59886 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
701953 INFO  2025-11-21 07:00:59887 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-22 02:37:21
701955 INFO  2025-11-21 07:00:59889 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
701960 INFO  2025-11-21 07:00:59894 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701964 INFO  2025-11-21 07:00:59898 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
701966 INFO  2025-11-21 07:00:59900 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
701966 INFO  2025-11-21 07:00:59900 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701967 INFO  2025-11-21 07:00:59901 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
701966 INFO  2025-11-21 07:00:59900 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
701971 INFO  2025-11-21 07:00:59905 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701977 INFO  2025-11-21 07:00:59911 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
701973 INFO  2025-11-21 07:00:59907 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 02:37:21
701980 INFO  2025-11-21 07:00:59914 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
701979 INFO  2025-11-21 07:00:59913 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
701979 ERROR 2025-11-21 07:00:59913 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701986 ERROR 2025-11-21 07:00:59920 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
701987 ERROR 2025-11-21 07:00:59921 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
701995 ERROR 2025-11-21 07:00:59929 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1001
701977 ERROR 2025-11-21 07:00:59911 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702000 ERROR 2025-11-21 07:00:59934 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
702001 ERROR 2025-11-21 07:00:59935 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702002 ERROR 2025-11-21 07:00:59936 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
701997 ERROR 2025-11-21 07:00:59931 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
702006 ERROR 2025-11-21 07:00:59940 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
702010 ERROR 2025-11-21 07:00:59944 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
702011 ERROR 2025-11-21 07:00:59945 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702012 ERROR 2025-11-21 07:00:59946 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
701985 INFO  2025-11-21 07:00:59919 ExternalApiUtil:176 - EXTERNAL API: Method: POST
701984 INFO  2025-11-21 07:00:59918 UploadProcess:412 - attlog size:1
702019 INFO  2025-11-21 07:00:59953 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:00:59 EAT 2025
702029 INFO  2025-11-21 07:00:59963 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
702004 ERROR 2025-11-21 07:00:59938 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
702034 ERROR 2025-11-21 07:00:59968 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
702032 INFO  2025-11-21 07:00:59966 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
702045 INFO  2025-11-21 07:00:59979 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
702029 INFO  2025-11-21 07:00:59963 UploadProcess:525 - end parse op attlog
702145 INFO  2025-11-21 07:01:0079 UploadProcess:523 - begin parse op attlog
702056 INFO  2025-11-21 07:00:59990 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:00 - Meal type determined: mid-morning
702045 ERROR 2025-11-21 07:00:59979 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
702152 ERROR 2025-11-21 07:01:0086 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702154 ERROR 2025-11-21 07:01:0088 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
702037 INFO  2025-11-21 07:00:59971 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1001
702152 INFO  2025-11-21 07:01:0086 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
702171 INFO  2025-11-21 07:01:00105 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
702177 INFO  2025-11-21 07:01:00111 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
702179 INFO  2025-11-21 07:01:00113 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
702178 INFO  2025-11-21 07:01:00112 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
702180 INFO  2025-11-21 07:01:00114 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 02:38:21
702192 INFO  2025-11-21 07:01:00126 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
702194 INFO  2025-11-21 07:01:00128 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702197 INFO  2025-11-21 07:01:00131 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
702198 INFO  2025-11-21 07:01:00132 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702199 INFO  2025-11-21 07:01:00133 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
702200 INFO  2025-11-21 07:01:00134 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-22 02:38:21
702202 INFO  2025-11-21 07:01:00136 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
702205 INFO  2025-11-21 07:01:00139 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702206 INFO  2025-11-21 07:01:00140 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
702208 INFO  2025-11-21 07:01:00142 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
702209 INFO  2025-11-21 07:01:00143 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702208 INFO  2025-11-21 07:01:00142 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
702215 INFO  2025-11-21 07:01:00149 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 02:38:21
702218 INFO  2025-11-21 07:01:00152 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
702224 INFO  2025-11-21 07:01:00158 UploadProcess:412 - attlog size:1
702225 INFO  2025-11-21 07:01:00159 UploadProcess:525 - end parse op attlog
702246 INFO  2025-11-21 07:01:00180 UploadProcess:523 - begin parse op attlog
702212 INFO  2025-11-21 07:01:00146 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
702262 INFO  2025-11-21 07:01:00196 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702267 INFO  2025-11-21 07:01:00201 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
702271 INFO  2025-11-21 07:01:00205 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
702276 INFO  2025-11-21 07:01:00210 ExternalApiUtil:176 - EXTERNAL API: Method: POST
702278 INFO  2025-11-21 07:01:00212 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:01:00 EAT 2025
702280 INFO  2025-11-21 07:01:00214 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
702280 INFO  2025-11-21 07:01:00214 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
702276 ERROR 2025-11-21 07:01:00210 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702285 ERROR 2025-11-21 07:01:00219 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
702287 ERROR 2025-11-21 07:01:00221 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702303 ERROR 2025-11-21 07:01:00237 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
702305 ERROR 2025-11-21 07:01:00239 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
702306 ERROR 2025-11-21 07:01:00240 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
702307 ERROR 2025-11-21 07:01:00241 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
702309 ERROR 2025-11-21 07:01:00243 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702310 ERROR 2025-11-21 07:01:00244 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
702282 INFO  2025-11-21 07:01:00216 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
702280 INFO  2025-11-21 07:01:00214 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
702315 INFO  2025-11-21 07:01:00249 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
702315 INFO  2025-11-21 07:01:00249 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 02:39:50
702314 INFO  2025-11-21 07:01:00248 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:01 - Meal type determined: mid-morning
702321 INFO  2025-11-21 07:01:00255 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
702333 INFO  2025-11-21 07:01:00267 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
702320 INFO  2025-11-21 07:01:00254 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
702339 INFO  2025-11-21 07:01:00273 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702340 INFO  2025-11-21 07:01:00274 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
702342 INFO  2025-11-21 07:01:00276 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702346 INFO  2025-11-21 07:01:00280 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
702348 INFO  2025-11-21 07:01:00282 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-22 02:39:50
702349 INFO  2025-11-21 07:01:00283 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
702396 INFO  2025-11-21 07:01:00330 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702397 ERROR 2025-11-21 07:01:00331 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702403 ERROR 2025-11-21 07:01:00337 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
702404 ERROR 2025-11-21 07:01:00338 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702407 ERROR 2025-11-21 07:01:00341 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
702408 ERROR 2025-11-21 07:01:00342 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
702409 ERROR 2025-11-21 07:01:00343 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
702410 ERROR 2025-11-21 07:01:00344 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
702412 ERROR 2025-11-21 07:01:00346 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702416 ERROR 2025-11-21 07:01:00350 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
702400 INFO  2025-11-21 07:01:00334 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
702420 INFO  2025-11-21 07:01:00354 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
702414 INFO  2025-11-21 07:01:00348 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
702422 INFO  2025-11-21 07:01:00356 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 02:39:50
702423 INFO  2025-11-21 07:01:00357 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
702425 INFO  2025-11-21 07:01:00359 UploadProcess:412 - attlog size:1
702427 INFO  2025-11-21 07:01:00361 UploadProcess:525 - end parse op attlog
702429 INFO  2025-11-21 07:01:00363 UploadProcess:523 - begin parse op attlog
702421 INFO  2025-11-21 07:01:00355 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
702434 INFO  2025-11-21 07:01:00368 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702436 INFO  2025-11-21 07:01:00370 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
702444 INFO  2025-11-21 07:01:00378 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702445 INFO  2025-11-21 07:01:00379 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
702444 INFO  2025-11-21 07:01:00378 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
702447 INFO  2025-11-21 07:01:00381 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
702455 INFO  2025-11-21 07:01:00389 ExternalApiUtil:176 - EXTERNAL API: Method: POST
702461 INFO  2025-11-21 07:01:00395 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:01:00 EAT 2025
702463 INFO  2025-11-21 07:01:00397 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
702465 INFO  2025-11-21 07:01:00399 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
702469 INFO  2025-11-21 07:01:00403 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
702482 INFO  2025-11-21 07:01:00416 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
702485 INFO  2025-11-21 07:01:00419 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:01 - Meal type determined: mid-morning
702486 INFO  2025-11-21 07:01:00420 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
702487 INFO  2025-11-21 07:01:00421 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
702484 INFO  2025-11-21 07:01:00418 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
702491 INFO  2025-11-21 07:01:00425 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 02:41:32
702493 INFO  2025-11-21 07:01:00427 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
702495 INFO  2025-11-21 07:01:00429 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702496 INFO  2025-11-21 07:01:00430 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
702497 INFO  2025-11-21 07:01:00431 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702498 INFO  2025-11-21 07:01:00432 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
702500 INFO  2025-11-21 07:01:00434 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-22 02:41:32
702500 INFO  2025-11-21 07:01:00434 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
702503 INFO  2025-11-21 07:01:00437 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702505 INFO  2025-11-21 07:01:00439 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
702510 INFO  2025-11-21 07:01:00444 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
702510 INFO  2025-11-21 07:01:00444 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702511 INFO  2025-11-21 07:01:00445 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
702510 INFO  2025-11-21 07:01:00444 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
702513 INFO  2025-11-21 07:01:00447 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 02:41:32
702514 INFO  2025-11-21 07:01:00448 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
702517 INFO  2025-11-21 07:01:00451 UploadProcess:412 - attlog size:1
702519 INFO  2025-11-21 07:01:00453 UploadProcess:525 - end parse op attlog
702512 INFO  2025-11-21 07:01:00446 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702521 INFO  2025-11-21 07:01:00455 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
702522 INFO  2025-11-21 07:01:00456 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
702523 INFO  2025-11-21 07:01:00457 ExternalApiUtil:176 - EXTERNAL API: Method: POST
702525 INFO  2025-11-21 07:01:00459 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:01:00 EAT 2025
702520 INFO  2025-11-21 07:01:00454 UploadProcess:523 - begin parse op attlog
702528 INFO  2025-11-21 07:01:00462 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
702530 INFO  2025-11-21 07:01:00464 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
702532 INFO  2025-11-21 07:01:00466 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
702539 INFO  2025-11-21 07:01:00473 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:01 - Meal type determined: mid-morning
702540 INFO  2025-11-21 07:01:00474 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
702540 INFO  2025-11-21 07:01:00474 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
702555 INFO  2025-11-21 07:01:00489 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
702557 INFO  2025-11-21 07:01:00491 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
702559 INFO  2025-11-21 07:01:00493 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 02:44:07
702563 INFO  2025-11-21 07:01:00497 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
702566 INFO  2025-11-21 07:01:00500 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702568 INFO  2025-11-21 07:01:00502 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
702569 INFO  2025-11-21 07:01:00503 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702569 INFO  2025-11-21 07:01:00503 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
702571 INFO  2025-11-21 07:01:00505 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-22 02:44:07
702572 INFO  2025-11-21 07:01:00506 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
702574 INFO  2025-11-21 07:01:00508 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702575 INFO  2025-11-21 07:01:00509 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
702578 INFO  2025-11-21 07:01:00512 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
702579 INFO  2025-11-21 07:01:00513 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 02:44:07
702580 INFO  2025-11-21 07:01:00514 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
702579 INFO  2025-11-21 07:01:00513 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
702582 INFO  2025-11-21 07:01:00516 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702584 INFO  2025-11-21 07:01:00518 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
702585 INFO  2025-11-21 07:01:00519 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702587 INFO  2025-11-21 07:01:00521 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
702587 INFO  2025-11-21 07:01:00521 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
702589 INFO  2025-11-21 07:01:00523 ExternalApiUtil:176 - EXTERNAL API: Method: POST
702590 INFO  2025-11-21 07:01:00524 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:01:00 EAT 2025
702591 INFO  2025-11-21 07:01:00525 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
702581 INFO  2025-11-21 07:01:00515 UploadProcess:412 - attlog size:1
702595 INFO  2025-11-21 07:01:00529 UploadProcess:525 - end parse op attlog
702597 INFO  2025-11-21 07:01:00531 UploadProcess:523 - begin parse op attlog
702593 INFO  2025-11-21 07:01:00527 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
702634 INFO  2025-11-21 07:01:00568 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
702656 INFO  2025-11-21 07:01:00590 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:01 - Meal type determined: mid-morning
702658 INFO  2025-11-21 07:01:00592 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
702659 INFO  2025-11-21 07:01:00593 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
702679 INFO  2025-11-21 07:01:00613 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
702680 INFO  2025-11-21 07:01:00614 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
702692 INFO  2025-11-21 07:01:00626 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 02:46:08
702692 INFO  2025-11-21 07:01:00626 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
702695 INFO  2025-11-21 07:01:00629 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702698 INFO  2025-11-21 07:01:00632 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
702703 INFO  2025-11-21 07:01:00637 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702705 INFO  2025-11-21 07:01:00639 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
702707 INFO  2025-11-21 07:01:00641 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-22 02:46:08
702710 INFO  2025-11-21 07:01:00644 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
702712 INFO  2025-11-21 07:01:00646 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702715 INFO  2025-11-21 07:01:00649 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
702716 INFO  2025-11-21 07:01:00650 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
702719 INFO  2025-11-21 07:01:00653 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 02:46:08
702720 INFO  2025-11-21 07:01:00654 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
702723 INFO  2025-11-21 07:01:00657 UploadProcess:412 - attlog size:1
702725 INFO  2025-11-21 07:01:00659 UploadProcess:525 - end parse op attlog
702727 INFO  2025-11-21 07:01:00661 UploadProcess:523 - begin parse op attlog
702716 INFO  2025-11-21 07:01:00650 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
702732 INFO  2025-11-21 07:01:00666 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702732 INFO  2025-11-21 07:01:00666 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
702734 INFO  2025-11-21 07:01:00668 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702737 INFO  2025-11-21 07:01:00671 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
702739 INFO  2025-11-21 07:01:00673 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
702741 INFO  2025-11-21 07:01:00675 ExternalApiUtil:176 - EXTERNAL API: Method: POST
702742 INFO  2025-11-21 07:01:00676 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:01:00 EAT 2025
702745 INFO  2025-11-21 07:01:00679 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
702745 INFO  2025-11-21 07:01:00679 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
702748 INFO  2025-11-21 07:01:00682 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
702750 INFO  2025-11-21 07:01:00684 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
702753 INFO  2025-11-21 07:01:00687 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:01 - Meal type determined: mid-morning
702753 INFO  2025-11-21 07:01:00687 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
702771 INFO  2025-11-21 07:01:00705 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
702750 INFO  2025-11-21 07:01:00684 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
702781 INFO  2025-11-21 07:01:00715 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 02:47:22
702782 INFO  2025-11-21 07:01:00716 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
702788 INFO  2025-11-21 07:01:00722 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702803 INFO  2025-11-21 07:01:00737 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
702803 INFO  2025-11-21 07:01:00737 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702802 ERROR 2025-11-21 07:01:00736 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702805 ERROR 2025-11-21 07:01:00739 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
702806 ERROR 2025-11-21 07:01:00740 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702806 ERROR 2025-11-21 07:01:00740 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
702807 ERROR 2025-11-21 07:01:00741 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
702802 ERROR 2025-11-21 07:01:00736 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702808 ERROR 2025-11-21 07:01:00742 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
702812 ERROR 2025-11-21 07:01:00746 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702812 ERROR 2025-11-21 07:01:00746 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
702819 ERROR 2025-11-21 07:01:00753 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
702819 ERROR 2025-11-21 07:01:00753 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
702820 ERROR 2025-11-21 07:01:00754 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
702827 ERROR 2025-11-21 07:01:00761 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702802 ERROR 2025-11-21 07:01:00736 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702832 ERROR 2025-11-21 07:01:00766 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
702802 ERROR 2025-11-21 07:01:00736 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702837 ERROR 2025-11-21 07:01:00771 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
702840 ERROR 2025-11-21 07:01:00774 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702841 ERROR 2025-11-21 07:01:00775 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
702842 ERROR 2025-11-21 07:01:00776 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
702845 ERROR 2025-11-21 07:01:00779 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
702846 ERROR 2025-11-21 07:01:00780 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
702847 ERROR 2025-11-21 07:01:00781 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702848 ERROR 2025-11-21 07:01:00782 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
702836 ERROR 2025-11-21 07:01:00770 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702924 ERROR 2025-11-21 07:01:00858 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
702924 ERROR 2025-11-21 07:01:00858 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
702925 ERROR 2025-11-21 07:01:00859 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
702925 ERROR 2025-11-21 07:01:00859 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
702925 ERROR 2025-11-21 07:01:00859 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702926 ERROR 2025-11-21 07:01:00860 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
702830 ERROR 2025-11-21 07:01:00764 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
702808 ERROR 2025-11-21 07:01:00742 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
702930 ERROR 2025-11-21 07:01:00864 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
702931 ERROR 2025-11-21 07:01:00865 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702932 ERROR 2025-11-21 07:01:00866 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
702805 INFO  2025-11-21 07:01:00739 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
702942 INFO  2025-11-21 07:01:00876 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-22 02:47:22
702943 INFO  2025-11-21 07:01:00877 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
702936 INFO  2025-11-21 07:01:00870 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
702945 INFO  2025-11-21 07:01:00879 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702947 INFO  2025-11-21 07:01:00881 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
702948 INFO  2025-11-21 07:01:00882 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
702950 INFO  2025-11-21 07:01:00884 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
702951 INFO  2025-11-21 07:01:00885 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
702953 INFO  2025-11-21 07:01:00887 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 02:47:22
702955 INFO  2025-11-21 07:01:00889 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
702957 INFO  2025-11-21 07:01:00891 UploadProcess:412 - attlog size:1
702957 INFO  2025-11-21 07:01:00891 UploadProcess:525 - end parse op attlog
702953 INFO  2025-11-21 07:01:00887 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702965 INFO  2025-11-21 07:01:00899 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
702966 INFO  2025-11-21 07:01:00900 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702964 INFO  2025-11-21 07:01:00898 UploadProcess:523 - begin parse op attlog
702969 INFO  2025-11-21 07:01:00903 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
702967 INFO  2025-11-21 07:01:00901 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
702966 INFO  2025-11-21 07:01:00900 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
702971 INFO  2025-11-21 07:01:00905 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
702978 INFO  2025-11-21 07:01:00912 ExternalApiUtil:176 - EXTERNAL API: Method: POST
702978 INFO  2025-11-21 07:01:00912 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:01:00 EAT 2025
702979 INFO  2025-11-21 07:01:00913 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
702979 INFO  2025-11-21 07:01:00913 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
702980 INFO  2025-11-21 07:01:00914 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
702980 INFO  2025-11-21 07:01:00914 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:01 - Meal type determined: mid-morning
702981 INFO  2025-11-21 07:01:00915 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
702981 INFO  2025-11-21 07:01:00915 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
702990 INFO  2025-11-21 07:01:00924 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
702994 INFO  2025-11-21 07:01:00928 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
702995 INFO  2025-11-21 07:01:00929 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1001, User Name: boaz, Timestamp: 2025-11-22 02:47:23
702996 INFO  2025-11-21 07:01:00930 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1001
702996 INFO  2025-11-21 07:01:00930 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
702997 INFO  2025-11-21 07:01:00931 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
702997 INFO  2025-11-21 07:01:00931 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703000 INFO  2025-11-21 07:01:00934 ExternalApiUtil:122 - EXTERNAL API: User ID: 1001
703001 INFO  2025-11-21 07:01:00935 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-22 02:47:23
703000 ERROR 2025-11-21 07:01:00934 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703003 ERROR 2025-11-21 07:01:00937 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
703009 ERROR 2025-11-21 07:01:00943 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703009 ERROR 2025-11-21 07:01:00943 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
703010 ERROR 2025-11-21 07:01:00944 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703010 ERROR 2025-11-21 07:01:00944 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
703011 ERROR 2025-11-21 07:01:00945 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
703012 ERROR 2025-11-21 07:01:00946 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703012 ERROR 2025-11-21 07:01:00946 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
703003 INFO  2025-11-21 07:01:00937 ExternalApiUtil:124 - EXTERNAL API: User Name: boaz
703020 INFO  2025-11-21 07:01:00954 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703026 INFO  2025-11-21 07:01:00960 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1001
703028 INFO  2025-11-21 07:01:00962 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1001
703030 INFO  2025-11-21 07:01:00964 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1001
703030 INFO  2025-11-21 07:01:00964 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
703034 INFO  2025-11-21 07:01:00968 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703036 INFO  2025-11-21 07:01:00970 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
703038 INFO  2025-11-21 07:01:00972 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703038 INFO  2025-11-21 07:01:00972 ExternalApiUtil:174 - EXTERNAL API: User ID: 1001
703039 INFO  2025-11-21 07:01:00973 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703039 INFO  2025-11-21 07:01:00973 ExternalApiUtil:176 - EXTERNAL API: Method: POST
703032 INFO  2025-11-21 07:01:00966 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1001, Timestamp: 2025-11-22 02:47:23
703047 INFO  2025-11-21 07:01:00981 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
703047 INFO  2025-11-21 07:01:00981 UploadProcess:412 - attlog size:1
703054 INFO  2025-11-21 07:01:00988 UploadProcess:525 - end parse op attlog
703054 INFO  2025-11-21 07:01:00988 UploadProcess:523 - begin parse op attlog
703040 INFO  2025-11-21 07:01:00974 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:01:00 EAT 2025
703057 INFO  2025-11-21 07:01:00991 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703058 INFO  2025-11-21 07:01:00992 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
703062 INFO  2025-11-21 07:01:00996 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1001, Formatted: 1001
703063 INFO  2025-11-21 07:01:00997 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:01 - Meal type determined: mid-morning
703064 INFO  2025-11-21 07:01:00998 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1001", "meal_type": "mid-morning"}
703064 INFO  2025-11-21 07:01:00998 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
703080 INFO  2025-11-21 07:01:0114 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
703081 INFO  2025-11-21 07:01:0115 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
703083 INFO  2025-11-21 07:01:0117 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 02:49:25
703084 INFO  2025-11-21 07:01:0118 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
703086 INFO  2025-11-21 07:01:0120 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703087 INFO  2025-11-21 07:01:0121 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
703087 INFO  2025-11-21 07:01:0121 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703087 INFO  2025-11-21 07:01:0121 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
703088 INFO  2025-11-21 07:01:0122 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-22 02:49:25
703095 INFO  2025-11-21 07:01:0129 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
703096 INFO  2025-11-21 07:01:0130 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703092 ERROR 2025-11-21 07:01:0126 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703098 ERROR 2025-11-21 07:01:0132 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
703097 INFO  2025-11-21 07:01:0131 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
703104 INFO  2025-11-21 07:01:0138 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
703102 ERROR 2025-11-21 07:01:0136 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703105 INFO  2025-11-21 07:01:0139 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 02:49:25
703104 INFO  2025-11-21 07:01:0138 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
703118 INFO  2025-11-21 07:01:0152 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703119 INFO  2025-11-21 07:01:0153 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
703122 INFO  2025-11-21 07:01:0156 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703124 INFO  2025-11-21 07:01:0158 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
703124 INFO  2025-11-21 07:01:0158 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703128 INFO  2025-11-21 07:01:0162 ExternalApiUtil:176 - EXTERNAL API: Method: POST
703130 INFO  2025-11-21 07:01:0164 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:01:01 EAT 2025
703132 INFO  2025-11-21 07:01:0166 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703116 INFO  2025-11-21 07:01:0150 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
703136 INFO  2025-11-21 07:01:0170 UploadProcess:412 - attlog size:1
703115 ERROR 2025-11-21 07:01:0149 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1001
703137 ERROR 2025-11-21 07:01:0171 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703137 INFO  2025-11-21 07:01:0171 UploadProcess:525 - end parse op attlog
703139 INFO  2025-11-21 07:01:0173 UploadProcess:523 - begin parse op attlog
703136 INFO  2025-11-21 07:01:0170 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
703140 INFO  2025-11-21 07:01:0174 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
703146 INFO  2025-11-21 07:01:0180 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:01 - Meal type determined: mid-morning
703149 INFO  2025-11-21 07:01:0183 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
703138 ERROR 2025-11-21 07:01:0172 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
703155 INFO  2025-11-21 07:01:0189 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
703161 ERROR 2025-11-21 07:01:0195 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
703162 ERROR 2025-11-21 07:01:0196 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703164 ERROR 2025-11-21 07:01:0198 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
703164 INFO  2025-11-21 07:01:0198 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
703172 INFO  2025-11-21 07:01:01106 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
703173 INFO  2025-11-21 07:01:01107 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 02:51:31
703174 INFO  2025-11-21 07:01:01108 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
703175 INFO  2025-11-21 07:01:01109 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703176 INFO  2025-11-21 07:01:01110 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
703181 INFO  2025-11-21 07:01:01115 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703183 INFO  2025-11-21 07:01:01117 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
703184 INFO  2025-11-21 07:01:01118 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-22 02:51:31
703185 INFO  2025-11-21 07:01:01119 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
703189 INFO  2025-11-21 07:01:01123 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703194 INFO  2025-11-21 07:01:01128 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
703197 INFO  2025-11-21 07:01:01131 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
703187 INFO  2025-11-21 07:01:01121 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1001
703199 INFO  2025-11-21 07:01:01133 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 02:51:31
703202 INFO  2025-11-21 07:01:01136 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
703198 INFO  2025-11-21 07:01:01132 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
703207 INFO  2025-11-21 07:01:01141 UploadProcess:412 - attlog size:1
703208 INFO  2025-11-21 07:01:01142 UploadProcess:525 - end parse op attlog
703207 INFO  2025-11-21 07:01:01141 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703212 INFO  2025-11-21 07:01:01146 UploadProcess:523 - begin parse op attlog
703213 INFO  2025-11-21 07:01:01147 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
703215 INFO  2025-11-21 07:01:01149 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703218 INFO  2025-11-21 07:01:01152 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
703220 INFO  2025-11-21 07:01:01154 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703221 INFO  2025-11-21 07:01:01155 ExternalApiUtil:176 - EXTERNAL API: Method: POST
703222 INFO  2025-11-21 07:01:01156 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:01:01 EAT 2025
703223 INFO  2025-11-21 07:01:01157 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703227 INFO  2025-11-21 07:01:01161 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
703230 INFO  2025-11-21 07:01:01164 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
703231 INFO  2025-11-21 07:01:01165 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:01 - Meal type determined: mid-morning
703232 INFO  2025-11-21 07:01:01166 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
703237 INFO  2025-11-21 07:01:01171 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
703239 INFO  2025-11-21 07:01:01173 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
703241 INFO  2025-11-21 07:01:01175 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
703247 INFO  2025-11-21 07:01:01181 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 02:52:39
703249 ERROR 2025-11-21 07:01:01183 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703252 ERROR 2025-11-21 07:01:01186 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
703254 ERROR 2025-11-21 07:01:01188 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703250 INFO  2025-11-21 07:01:01184 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
703256 INFO  2025-11-21 07:01:01190 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703255 ERROR 2025-11-21 07:01:01189 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
703261 ERROR 2025-11-21 07:01:01195 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703264 ERROR 2025-11-21 07:01:01198 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
703264 ERROR 2025-11-21 07:01:01198 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
703265 ERROR 2025-11-21 07:01:01199 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703266 ERROR 2025-11-21 07:01:01200 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
703259 ERROR 2025-11-21 07:01:01193 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703271 ERROR 2025-11-21 07:01:01205 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
703271 ERROR 2025-11-21 07:01:01205 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703272 ERROR 2025-11-21 07:01:01206 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
703273 ERROR 2025-11-21 07:01:01207 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703274 ERROR 2025-11-21 07:01:01208 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
703280 ERROR 2025-11-21 07:01:01214 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
703281 ERROR 2025-11-21 07:01:01215 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703281 ERROR 2025-11-21 07:01:01215 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
703259 INFO  2025-11-21 07:01:01193 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
703284 INFO  2025-11-21 07:01:01218 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703288 INFO  2025-11-21 07:01:01222 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
703289 INFO  2025-11-21 07:01:01223 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-22 02:52:39
703289 INFO  2025-11-21 07:01:01223 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
703295 INFO  2025-11-21 07:01:01229 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703301 INFO  2025-11-21 07:01:01235 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
703302 INFO  2025-11-21 07:01:01236 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
703289 INFO  2025-11-21 07:01:01223 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
703305 INFO  2025-11-21 07:01:01239 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
703304 INFO  2025-11-21 07:01:01238 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 02:52:39
703302 INFO  2025-11-21 07:01:01236 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
703312 INFO  2025-11-21 07:01:01246 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703312 INFO  2025-11-21 07:01:01246 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
703315 INFO  2025-11-21 07:01:01249 UploadProcess:412 - attlog size:1
703316 INFO  2025-11-21 07:01:01250 UploadProcess:525 - end parse op attlog
703320 INFO  2025-11-21 07:01:01254 UploadProcess:523 - begin parse op attlog
703314 INFO  2025-11-21 07:01:01248 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
703322 INFO  2025-11-21 07:01:01256 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703324 INFO  2025-11-21 07:01:01258 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
703327 INFO  2025-11-21 07:01:01261 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703330 INFO  2025-11-21 07:01:01264 ExternalApiUtil:176 - EXTERNAL API: Method: POST
703331 INFO  2025-11-21 07:01:01265 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:01:01 EAT 2025
703332 INFO  2025-11-21 07:01:01266 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703335 INFO  2025-11-21 07:01:01269 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
703336 INFO  2025-11-21 07:01:01270 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
703338 INFO  2025-11-21 07:01:01272 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:01 - Meal type determined: mid-morning
703338 INFO  2025-11-21 07:01:01272 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
703339 INFO  2025-11-21 07:01:01273 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
703335 INFO  2025-11-21 07:01:01269 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
703346 INFO  2025-11-21 07:01:01280 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
703347 INFO  2025-11-21 07:01:01281 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 02:53:45
703348 INFO  2025-11-21 07:01:01282 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
703350 INFO  2025-11-21 07:01:01284 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703353 INFO  2025-11-21 07:01:01287 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
703354 INFO  2025-11-21 07:01:01288 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703356 INFO  2025-11-21 07:01:01290 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
703357 INFO  2025-11-21 07:01:01291 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-22 02:53:45
703359 INFO  2025-11-21 07:01:01293 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
703361 INFO  2025-11-21 07:01:01295 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703364 INFO  2025-11-21 07:01:01298 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
703366 INFO  2025-11-21 07:01:01300 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
703368 INFO  2025-11-21 07:01:01302 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 02:53:45
703369 INFO  2025-11-21 07:01:01303 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
703369 INFO  2025-11-21 07:01:01303 UploadProcess:412 - attlog size:1
703372 INFO  2025-11-21 07:01:01306 UploadProcess:525 - end parse op attlog
703373 INFO  2025-11-21 07:01:01307 UploadProcess:523 - begin parse op attlog
703367 INFO  2025-11-21 07:01:01301 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
703376 INFO  2025-11-21 07:01:01310 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703379 INFO  2025-11-21 07:01:01313 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
703382 INFO  2025-11-21 07:01:01316 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703383 INFO  2025-11-21 07:01:01317 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
703384 INFO  2025-11-21 07:01:01318 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703379 ERROR 2025-11-21 07:01:01313 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703386 ERROR 2025-11-21 07:01:01320 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
703387 ERROR 2025-11-21 07:01:01321 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703389 ERROR 2025-11-21 07:01:01323 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
703390 ERROR 2025-11-21 07:01:01324 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703390 ERROR 2025-11-21 07:01:01324 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
703392 ERROR 2025-11-21 07:01:01326 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
703398 ERROR 2025-11-21 07:01:01332 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703399 ERROR 2025-11-21 07:01:01333 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
703386 INFO  2025-11-21 07:01:01320 ExternalApiUtil:176 - EXTERNAL API: Method: POST
703402 INFO  2025-11-21 07:01:01336 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:01:01 EAT 2025
703403 INFO  2025-11-21 07:01:01337 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703407 INFO  2025-11-21 07:01:01341 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
703408 INFO  2025-11-21 07:01:01342 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
703405 INFO  2025-11-21 07:01:01339 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
703412 INFO  2025-11-21 07:01:01346 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
703414 INFO  2025-11-21 07:01:01348 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 02:54:53
703415 INFO  2025-11-21 07:01:01349 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
703417 INFO  2025-11-21 07:01:01351 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703418 INFO  2025-11-21 07:01:01352 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
703419 INFO  2025-11-21 07:01:01353 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703421 INFO  2025-11-21 07:01:01355 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
703423 INFO  2025-11-21 07:01:01357 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-22 02:54:53
703423 INFO  2025-11-21 07:01:01357 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
703428 INFO  2025-11-21 07:01:01362 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703431 INFO  2025-11-21 07:01:01365 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
703433 INFO  2025-11-21 07:01:01367 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
703434 INFO  2025-11-21 07:01:01368 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703435 INFO  2025-11-21 07:01:01369 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
703436 INFO  2025-11-21 07:01:01370 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703439 INFO  2025-11-21 07:01:01373 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
703440 INFO  2025-11-21 07:01:01374 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703440 INFO  2025-11-21 07:01:01374 ExternalApiUtil:176 - EXTERNAL API: Method: POST
703443 INFO  2025-11-21 07:01:01377 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:01:01 EAT 2025
703446 INFO  2025-11-21 07:01:01380 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703446 INFO  2025-11-21 07:01:01380 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
703412 INFO  2025-11-21 07:01:01346 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:01 - Meal type determined: mid-morning
703448 INFO  2025-11-21 07:01:01382 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
703450 INFO  2025-11-21 07:01:01384 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
703447 INFO  2025-11-21 07:01:01381 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
703452 INFO  2025-11-21 07:01:01386 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:01 - Meal type determined: mid-morning
703454 INFO  2025-11-21 07:01:01388 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
703445 INFO  2025-11-21 07:01:01379 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
703433 INFO  2025-11-21 07:01:01367 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
703456 INFO  2025-11-21 07:01:01390 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 02:54:53
703455 INFO  2025-11-21 07:01:01389 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
703458 INFO  2025-11-21 07:01:01392 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
703464 INFO  2025-11-21 07:01:01398 UploadProcess:412 - attlog size:1
703464 INFO  2025-11-21 07:01:01398 UploadProcess:525 - end parse op attlog
703465 INFO  2025-11-21 07:01:01399 UploadProcess:523 - begin parse op attlog
703470 ERROR 2025-11-21 07:01:01404 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703470 ERROR 2025-11-21 07:01:01404 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
703472 ERROR 2025-11-21 07:01:01406 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703472 ERROR 2025-11-21 07:01:01406 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
703473 ERROR 2025-11-21 07:01:01407 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703474 ERROR 2025-11-21 07:01:01408 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
703475 ERROR 2025-11-21 07:01:01409 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
703478 ERROR 2025-11-21 07:01:01412 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703478 ERROR 2025-11-21 07:01:01412 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
703474 ERROR 2025-11-21 07:01:01408 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703483 ERROR 2025-11-21 07:01:01417 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
703484 ERROR 2025-11-21 07:01:01418 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703482 INFO  2025-11-21 07:01:01416 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
703488 INFO  2025-11-21 07:01:01422 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
703489 INFO  2025-11-21 07:01:01423 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 02:55:53
703490 INFO  2025-11-21 07:01:01424 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
703490 INFO  2025-11-21 07:01:01424 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703495 INFO  2025-11-21 07:01:01429 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
703496 INFO  2025-11-21 07:01:01430 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
703488 ERROR 2025-11-21 07:01:01422 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
703497 ERROR 2025-11-21 07:01:01431 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703499 ERROR 2025-11-21 07:01:01433 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
703501 ERROR 2025-11-21 07:01:01435 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
703502 ERROR 2025-11-21 07:01:01436 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703504 ERROR 2025-11-21 07:01:01438 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
703496 INFO  2025-11-21 07:01:01430 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703514 INFO  2025-11-21 07:01:01448 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
703515 INFO  2025-11-21 07:01:01449 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-22 02:55:53
703516 INFO  2025-11-21 07:01:01450 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
703519 INFO  2025-11-21 07:01:01453 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703521 INFO  2025-11-21 07:01:01455 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
703522 INFO  2025-11-21 07:01:01456 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
703528 INFO  2025-11-21 07:01:01462 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 02:55:53
703529 INFO  2025-11-21 07:01:01463 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
703530 INFO  2025-11-21 07:01:01464 UploadProcess:412 - attlog size:1
703531 INFO  2025-11-21 07:01:01465 UploadProcess:525 - end parse op attlog
703520 INFO  2025-11-21 07:01:01454 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
703532 INFO  2025-11-21 07:01:01466 UploadProcess:523 - begin parse op attlog
703523 INFO  2025-11-21 07:01:01457 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
703536 INFO  2025-11-21 07:01:01470 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703537 INFO  2025-11-21 07:01:01471 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
703538 INFO  2025-11-21 07:01:01472 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703545 INFO  2025-11-21 07:01:01479 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
703545 INFO  2025-11-21 07:01:01479 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703547 INFO  2025-11-21 07:01:01481 ExternalApiUtil:176 - EXTERNAL API: Method: POST
703548 INFO  2025-11-21 07:01:01482 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:01:01 EAT 2025
703548 INFO  2025-11-21 07:01:01482 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703550 INFO  2025-11-21 07:01:01484 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
703551 INFO  2025-11-21 07:01:01485 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
703555 INFO  2025-11-21 07:01:01489 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:01 - Meal type determined: mid-morning
703556 INFO  2025-11-21 07:01:01490 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
703556 INFO  2025-11-21 07:01:01490 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
703562 INFO  2025-11-21 07:01:01496 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
703563 INFO  2025-11-21 07:01:01497 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 02:56:54
703564 INFO  2025-11-21 07:01:01498 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
703565 INFO  2025-11-21 07:01:01499 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703560 INFO  2025-11-21 07:01:01494 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
703568 INFO  2025-11-21 07:01:01502 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
703572 INFO  2025-11-21 07:01:01506 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703577 INFO  2025-11-21 07:01:01511 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
703578 INFO  2025-11-21 07:01:01512 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-22 02:56:54
703579 INFO  2025-11-21 07:01:01513 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
703580 INFO  2025-11-21 07:01:01514 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703581 INFO  2025-11-21 07:01:01515 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
703582 INFO  2025-11-21 07:01:01516 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
703583 INFO  2025-11-21 07:01:01517 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 02:56:54
703585 INFO  2025-11-21 07:01:01519 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
703585 INFO  2025-11-21 07:01:01519 UploadProcess:412 - attlog size:1
703586 INFO  2025-11-21 07:01:01520 UploadProcess:525 - end parse op attlog
703588 INFO  2025-11-21 07:01:01522 UploadProcess:523 - begin parse op attlog
703582 INFO  2025-11-21 07:01:01516 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
703596 INFO  2025-11-21 07:01:01530 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703596 INFO  2025-11-21 07:01:01530 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
703598 INFO  2025-11-21 07:01:01532 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703599 INFO  2025-11-21 07:01:01533 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
703602 INFO  2025-11-21 07:01:01536 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703602 INFO  2025-11-21 07:01:01536 ExternalApiUtil:176 - EXTERNAL API: Method: POST
703607 INFO  2025-11-21 07:01:01541 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:01:01 EAT 2025
703608 INFO  2025-11-21 07:01:01542 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703609 INFO  2025-11-21 07:01:01543 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
703612 INFO  2025-11-21 07:01:01546 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
703613 INFO  2025-11-21 07:01:01547 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:01 - Meal type determined: mid-morning
703614 INFO  2025-11-21 07:01:01548 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
703615 INFO  2025-11-21 07:01:01549 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
703639 INFO  2025-11-21 07:01:01573 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
703640 INFO  2025-11-21 07:01:01574 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
703640 INFO  2025-11-21 07:01:01574 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1001, User Name: boaz, Timestamp: 2025-11-22 02:57:23
703657 INFO  2025-11-21 07:01:01591 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1001
703660 INFO  2025-11-21 07:01:01594 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703665 INFO  2025-11-21 07:01:01599 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
703666 INFO  2025-11-21 07:01:01600 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703670 INFO  2025-11-21 07:01:01604 ExternalApiUtil:122 - EXTERNAL API: User ID: 1001
703671 INFO  2025-11-21 07:01:01605 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-22 02:57:23
703671 INFO  2025-11-21 07:01:01605 ExternalApiUtil:124 - EXTERNAL API: User Name: boaz
703672 INFO  2025-11-21 07:01:01606 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703673 INFO  2025-11-21 07:01:01607 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1001
703673 INFO  2025-11-21 07:01:01607 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1001
703674 INFO  2025-11-21 07:01:01608 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1001, Timestamp: 2025-11-22 02:57:23
703678 INFO  2025-11-21 07:01:01612 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
703677 INFO  2025-11-21 07:01:01611 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1001
703680 INFO  2025-11-21 07:01:01614 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703681 INFO  2025-11-21 07:01:01615 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
703680 INFO  2025-11-21 07:01:01614 UploadProcess:412 - attlog size:1
703686 INFO  2025-11-21 07:01:01620 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703686 INFO  2025-11-21 07:01:01620 ExternalApiUtil:174 - EXTERNAL API: User ID: 1001
703686 INFO  2025-11-21 07:01:01620 UploadProcess:525 - end parse op attlog
703691 INFO  2025-11-21 07:01:01625 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703692 INFO  2025-11-21 07:01:01626 ExternalApiUtil:176 - EXTERNAL API: Method: POST
703692 INFO  2025-11-21 07:01:01626 UploadProcess:523 - begin parse op attlog
703702 INFO  2025-11-21 07:01:01636 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:01:01 EAT 2025
703705 INFO  2025-11-21 07:01:01639 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703715 INFO  2025-11-21 07:01:01649 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
703715 INFO  2025-11-21 07:01:01649 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1001, Formatted: 1001
703716 INFO  2025-11-21 07:01:01650 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:01 - Meal type determined: mid-morning
703716 INFO  2025-11-21 07:01:01650 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1001", "meal_type": "mid-morning"}
703716 INFO  2025-11-21 07:01:01650 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
703723 ERROR 2025-11-21 07:01:01657 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703724 ERROR 2025-11-21 07:01:01658 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
703727 ERROR 2025-11-21 07:01:01661 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703730 ERROR 2025-11-21 07:01:01664 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
703745 ERROR 2025-11-21 07:01:01679 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703747 ERROR 2025-11-21 07:01:01681 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
703749 ERROR 2025-11-21 07:01:01683 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
703753 ERROR 2025-11-21 07:01:01687 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703755 ERROR 2025-11-21 07:01:01689 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
703723 ERROR 2025-11-21 07:01:01657 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703775 ERROR 2025-11-21 07:01:01709 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
703780 ERROR 2025-11-21 07:01:01714 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703783 ERROR 2025-11-21 07:01:01717 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
703785 ERROR 2025-11-21 07:01:01719 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703786 ERROR 2025-11-21 07:01:01720 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
703786 ERROR 2025-11-21 07:01:01720 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
703787 ERROR 2025-11-21 07:01:01721 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703787 INFO  2025-11-21 07:01:01721 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
703796 INFO  2025-11-21 07:01:01730 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
703798 INFO  2025-11-21 07:01:01732 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 03:00:08
703801 INFO  2025-11-21 07:01:01735 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
703803 INFO  2025-11-21 07:01:01737 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703807 INFO  2025-11-21 07:01:01741 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
703813 INFO  2025-11-21 07:01:01747 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703817 INFO  2025-11-21 07:01:01751 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
703790 ERROR 2025-11-21 07:01:01724 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
703820 INFO  2025-11-21 07:01:01754 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-22 03:00:08
703831 INFO  2025-11-21 07:01:01765 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
703835 INFO  2025-11-21 07:01:01769 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703838 INFO  2025-11-21 07:01:01772 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
703836 INFO  2025-11-21 07:01:01770 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
703839 INFO  2025-11-21 07:01:01773 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
703845 INFO  2025-11-21 07:01:01779 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703846 INFO  2025-11-21 07:01:01780 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
703848 INFO  2025-11-21 07:01:01782 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703849 INFO  2025-11-21 07:01:01783 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
703851 INFO  2025-11-21 07:01:01785 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703852 INFO  2025-11-21 07:01:01786 ExternalApiUtil:176 - EXTERNAL API: Method: POST
703839 INFO  2025-11-21 07:01:01773 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
703853 INFO  2025-11-21 07:01:01787 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:01:01 EAT 2025
703854 INFO  2025-11-21 07:01:01788 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703853 INFO  2025-11-21 07:01:01787 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 03:00:08
703858 INFO  2025-11-21 07:01:01792 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
703863 INFO  2025-11-21 07:01:01797 UploadProcess:412 - attlog size:1
703857 INFO  2025-11-21 07:01:01791 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
703863 INFO  2025-11-21 07:01:01797 UploadProcess:525 - end parse op attlog
703867 INFO  2025-11-21 07:01:01801 UploadProcess:327 - end process data and return msg to device
703868 INFO  2025-11-21 07:01:01802 UploadProcess:331 - return msg to device and request over OK
703864 INFO  2025-11-21 07:01:01798 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
703878 INFO  2025-11-21 07:01:01812 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:01 - Meal type determined: mid-morning
703880 INFO  2025-11-21 07:01:01814 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
703882 INFO  2025-11-21 07:01:01816 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
703928 ERROR 2025-11-21 07:01:01862 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703928 ERROR 2025-11-21 07:01:01862 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
703931 ERROR 2025-11-21 07:01:01865 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703932 ERROR 2025-11-21 07:01:01866 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1001
703938 ERROR 2025-11-21 07:01:01872 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703939 ERROR 2025-11-21 07:01:01873 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
703940 ERROR 2025-11-21 07:01:01874 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
703944 ERROR 2025-11-21 07:01:01878 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703946 ERROR 2025-11-21 07:01:01880 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
703960 INFO  2025-11-21 07:01:01894 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
703969 INFO  2025-11-21 07:01:01903 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1001
703981 ERROR 2025-11-21 07:01:01915 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703982 ERROR 2025-11-21 07:01:01916 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
703983 ERROR 2025-11-21 07:01:01917 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703984 ERROR 2025-11-21 07:01:01918 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
703985 ERROR 2025-11-21 07:01:01919 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
703985 ERROR 2025-11-21 07:01:01919 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
703986 ERROR 2025-11-21 07:01:01920 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
703986 ERROR 2025-11-21 07:01:01920 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
703986 ERROR 2025-11-21 07:01:01920 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
704000 INFO  2025-11-21 07:01:01934 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
704855 INFO  2025-11-21 07:01:02789 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=OPERLOG&Stamp=9999
704865 INFO  2025-11-21 07:01:02799 UploadProcess:266 - update device stamp end and get stream.
704869 INFO  2025-11-21 07:01:02803 UploadProcess:323 - data:OPLOG 0	0	2025-11-22 02:25:32	0	0	0	0
OPLOG 3	0	2025-11-22 02:25:38	54	0	0	0
OPLOG 3	0	2025-11-22 02:25:39	54	0	0	0
OPLOG 3	0	2025-11-22 02:25:39	54	0	0	0
OPLOG 4	1002	2025-11-22 02:31:49	1002	0	0	0
OPLOG 82	1002	2025-11-22 02:33:03	add adms address	0	0	0
OPLOG 4	1002	2025-11-22 03:00:25	1002	0	0	0

704870 INFO  2025-11-21 07:01:02804 UploadProcess:324 - end get stream and process data
704870 INFO  2025-11-21 07:01:02804 UploadProcess:474 - begin parse op log
704903 INFO  2025-11-21 07:01:02837 UploadProcess:235 - oplog size:1
704904 INFO  2025-11-21 07:01:02838 UploadProcess:476 - end parse op log
704906 INFO  2025-11-21 07:01:02840 UploadProcess:474 - begin parse op log
704915 INFO  2025-11-21 07:01:02849 UploadProcess:235 - oplog size:1
704916 INFO  2025-11-21 07:01:02850 UploadProcess:476 - end parse op log
704916 INFO  2025-11-21 07:01:02850 UploadProcess:474 - begin parse op log
704925 INFO  2025-11-21 07:01:02859 UploadProcess:235 - oplog size:1
704926 INFO  2025-11-21 07:01:02860 UploadProcess:476 - end parse op log
704929 INFO  2025-11-21 07:01:02863 UploadProcess:474 - begin parse op log
704942 INFO  2025-11-21 07:01:02876 UploadProcess:235 - oplog size:1
704942 INFO  2025-11-21 07:01:02876 UploadProcess:476 - end parse op log
704943 INFO  2025-11-21 07:01:02877 UploadProcess:474 - begin parse op log
704953 INFO  2025-11-21 07:01:02887 UploadProcess:235 - oplog size:1
704954 INFO  2025-11-21 07:01:02888 UploadProcess:476 - end parse op log
704954 INFO  2025-11-21 07:01:02888 UploadProcess:474 - begin parse op log
704964 INFO  2025-11-21 07:01:02898 UploadProcess:235 - oplog size:1
704964 INFO  2025-11-21 07:01:02898 UploadProcess:476 - end parse op log
704965 INFO  2025-11-21 07:01:02899 UploadProcess:474 - begin parse op log
704973 INFO  2025-11-21 07:01:02907 UploadProcess:235 - oplog size:1
704974 INFO  2025-11-21 07:01:02908 UploadProcess:476 - end parse op log
704974 INFO  2025-11-21 07:01:02908 UploadProcess:327 - end process data and return msg to device
704975 INFO  2025-11-21 07:01:02909 UploadProcess:331 - return msg to device and request over OK
705877 INFO  2025-11-21 07:01:03811 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
705882 INFO  2025-11-21 07:01:03816 DownloadProcess:59 - get cmd list over and begin contact:0
709530 INFO  2025-11-21 07:01:07464 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
709538 INFO  2025-11-21 07:01:07472 DownloadProcess:59 - get cmd list over and begin contact:0
715343 INFO  2025-11-21 07:01:13277 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
715346 INFO  2025-11-21 07:01:13280 DownloadProcess:59 - get cmd list over and begin contact:0
722322 INFO  2025-11-21 07:01:20256 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
722325 INFO  2025-11-21 07:01:20259 DownloadProcess:59 - get cmd list over and begin contact:0
731630 INFO  2025-11-21 07:01:29564 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
731634 INFO  2025-11-21 07:01:29568 DownloadProcess:59 - get cmd list over and begin contact:0
735431 INFO  2025-11-21 07:01:33365 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
735446 INFO  2025-11-21 07:01:33380 UploadProcess:266 - update device stamp end and get stream.
735449 INFO  2025-11-21 07:01:33383 UploadProcess:323 - data:1002	2025-11-22 03:01:33	0	15	0	0	0	0	0	0	

735451 INFO  2025-11-21 07:01:33385 UploadProcess:324 - end get stream and process data
735453 INFO  2025-11-21 07:01:33387 UploadProcess:523 - begin parse op attlog
735468 INFO  2025-11-21 07:01:33402 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
735469 INFO  2025-11-21 07:01:33403 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
735469 INFO  2025-11-21 07:01:33403 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 03:01:33
735470 INFO  2025-11-21 07:01:33404 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
735471 INFO  2025-11-21 07:01:33405 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
735472 INFO  2025-11-21 07:01:33406 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
735479 INFO  2025-11-21 07:01:33413 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
735481 INFO  2025-11-21 07:01:33415 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
735482 INFO  2025-11-21 07:01:33416 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-22 03:01:33
735484 INFO  2025-11-21 07:01:33418 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
735486 INFO  2025-11-21 07:01:33420 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
735487 INFO  2025-11-21 07:01:33421 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
735488 INFO  2025-11-21 07:01:33422 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
735489 INFO  2025-11-21 07:01:33423 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 03:01:33
735494 INFO  2025-11-21 07:01:33428 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
735502 INFO  2025-11-21 07:01:33436 UploadProcess:412 - attlog size:1
735503 INFO  2025-11-21 07:01:33437 UploadProcess:525 - end parse op attlog
735516 INFO  2025-11-21 07:01:33450 UploadProcess:327 - end process data and return msg to device
735488 INFO  2025-11-21 07:01:33422 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
735517 INFO  2025-11-21 07:01:33451 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
735518 INFO  2025-11-21 07:01:33452 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
735521 INFO  2025-11-21 07:01:33455 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
735523 INFO  2025-11-21 07:01:33457 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
735530 INFO  2025-11-21 07:01:33464 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
735531 INFO  2025-11-21 07:01:33465 ExternalApiUtil:176 - EXTERNAL API: Method: POST
735517 INFO  2025-11-21 07:01:33451 UploadProcess:331 - return msg to device and request over OK
735537 INFO  2025-11-21 07:01:33471 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:01:33 EAT 2025
735553 INFO  2025-11-21 07:01:33487 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
735553 INFO  2025-11-21 07:01:33487 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
735554 INFO  2025-11-21 07:01:33488 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
735554 INFO  2025-11-21 07:01:33488 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:01 - Meal type determined: mid-morning
735554 INFO  2025-11-21 07:01:33488 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
735556 INFO  2025-11-21 07:01:33490 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
735586 ERROR 2025-11-21 07:01:33520 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
735586 ERROR 2025-11-21 07:01:33520 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
735588 ERROR 2025-11-21 07:01:33522 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
735591 ERROR 2025-11-21 07:01:33525 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
735602 ERROR 2025-11-21 07:01:33536 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
735602 ERROR 2025-11-21 07:01:33536 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
735605 ERROR 2025-11-21 07:01:33539 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
735605 ERROR 2025-11-21 07:01:33539 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
735606 ERROR 2025-11-21 07:01:33540 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
735639 INFO  2025-11-21 07:01:33573 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
741951 INFO  2025-11-21 07:01:39885 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,254,10.244.175.186,10,35,12,5,11110,2,0,0
741954 INFO  2025-11-21 07:01:39888 DownloadProcess:59 - get cmd list over and begin contact:0
741955 INFO  2025-11-21 07:01:39889 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,254,10.244.175.186,10,35,12,5,11110,2,0,0
753333 INFO  2025-11-21 07:01:51267 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
753337 INFO  2025-11-21 07:01:51271 DownloadProcess:59 - get cmd list over and begin contact:0
767539 INFO  2025-11-21 07:02:05473 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
767542 INFO  2025-11-21 07:02:05476 DownloadProcess:59 - get cmd list over and begin contact:0
782231 INFO  2025-11-21 07:02:20165 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
782238 INFO  2025-11-21 07:02:20172 DownloadProcess:59 - get cmd list over and begin contact:0
798846 INFO  2025-11-21 07:02:36780 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
798850 INFO  2025-11-21 07:02:36784 DownloadProcess:59 - get cmd list over and begin contact:0
816717 INFO  2025-11-21 07:02:54651 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
816733 INFO  2025-11-21 07:02:54667 DownloadProcess:59 - get cmd list over and begin contact:0
826738 INFO  2025-11-21 07:03:04672 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
826754 INFO  2025-11-21 07:03:04688 UploadProcess:266 - update device stamp end and get stream.
826759 INFO  2025-11-21 07:03:04693 UploadProcess:323 - data:1002	2025-11-22 03:03:04	0	15	0	0	0	0	0	0	

826760 INFO  2025-11-21 07:03:04694 UploadProcess:324 - end get stream and process data
826761 INFO  2025-11-21 07:03:04695 UploadProcess:523 - begin parse op attlog
826774 INFO  2025-11-21 07:03:04708 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
826775 INFO  2025-11-21 07:03:04709 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
826776 INFO  2025-11-21 07:03:04710 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 03:03:04
826776 INFO  2025-11-21 07:03:04710 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
826778 INFO  2025-11-21 07:03:04712 ExternalApiUtil:119 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
826779 INFO  2025-11-21 07:03:04713 ExternalApiUtil:120 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
826780 INFO  2025-11-21 07:03:04714 ExternalApiUtil:121 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
826781 INFO  2025-11-21 07:03:04715 ExternalApiUtil:122 - EXTERNAL API: User ID: 1002
826781 INFO  2025-11-21 07:03:04715 ExternalApiUtil:123 - EXTERNAL API: Verification Time: 2025-11-22 03:03:04
826784 INFO  2025-11-21 07:03:04718 ExternalApiUtil:124 - EXTERNAL API: User Name: kailikia AARON
826788 INFO  2025-11-21 07:03:04722 ExternalApiUtil:125 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
826789 INFO  2025-11-21 07:03:04723 ExternalApiUtil:132 - âœ… EXTERNAL API: Submitting async task for userId: 1002
826791 INFO  2025-11-21 07:03:04725 ExternalApiUtil:143 - EXTERNAL API: Async task submitted for userId: 1002
826792 INFO  2025-11-21 07:03:04726 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 03:03:04
826791 INFO  2025-11-21 07:03:04725 ExternalApiUtil:138 - EXTERNAL API: Async task started for userId: 1002
826795 INFO  2025-11-21 07:03:04729 ExternalApiUtil:171 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
826796 INFO  2025-11-21 07:03:04730 ExternalApiUtil:172 - ğŸš€ EXTERNAL API CALL INITIATED
826796 INFO  2025-11-21 07:03:04730 ExternalApiUtil:173 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
826798 INFO  2025-11-21 07:03:04732 ExternalApiUtil:174 - EXTERNAL API: User ID: 1002
826801 INFO  2025-11-21 07:03:04735 ExternalApiUtil:175 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
826802 INFO  2025-11-21 07:03:04736 ExternalApiUtil:176 - EXTERNAL API: Method: POST
826794 INFO  2025-11-21 07:03:04728 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
826808 INFO  2025-11-21 07:03:04742 UploadProcess:412 - attlog size:1
826808 INFO  2025-11-21 07:03:04742 UploadProcess:525 - end parse op attlog
826810 INFO  2025-11-21 07:03:04744 UploadProcess:327 - end process data and return msg to device
826804 INFO  2025-11-21 07:03:04738 ExternalApiUtil:177 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:03:04 EAT 2025
826812 INFO  2025-11-21 07:03:04746 ExternalApiUtil:181 - EXTERNAL API: Creating connection to: http://10.244.175.45:8002/api/meal-cards/generate-with-check
826813 INFO  2025-11-21 07:03:04747 ExternalApiUtil:190 - EXTERNAL API: Connection configured, formatting student ID...
826812 INFO  2025-11-21 07:03:04746 UploadProcess:331 - return msg to device and request over OK
826814 INFO  2025-11-21 07:03:04748 ExternalApiUtil:194 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
826842 INFO  2025-11-21 07:03:04776 ExternalApiUtil:201 - EXTERNAL API: Current time (Nairobi/EAT): 10:03 - Meal type determined: mid-morning
826845 INFO  2025-11-21 07:03:04779 ExternalApiUtil:205 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
826845 INFO  2025-11-21 07:03:04779 ExternalApiUtil:208 - EXTERNAL API: Writing request body to connection...
826907 ERROR 2025-11-21 07:03:04841 ExternalApiUtil:315 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
826908 ERROR 2025-11-21 07:03:04842 ExternalApiUtil:316 - âŒ EXTERNAL API CALL FAILED
826908 ERROR 2025-11-21 07:03:04842 ExternalApiUtil:317 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
826910 ERROR 2025-11-21 07:03:04844 ExternalApiUtil:318 - EXTERNAL API: Student ID: 1002
826910 ERROR 2025-11-21 07:03:04844 ExternalApiUtil:319 - EXTERNAL API: URL: http://10.244.175.45:8002/api/meal-cards/generate-with-check
826913 ERROR 2025-11-21 07:03:04847 ExternalApiUtil:320 - EXTERNAL API: Error: Connection refused (Connection refused)
826913 ERROR 2025-11-21 07:03:04847 ExternalApiUtil:321 - EXTERNAL API: Exception: java.net.ConnectException
826914 ERROR 2025-11-21 07:03:04848 ExternalApiUtil:322 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
826919 ERROR 2025-11-21 07:03:04853 ExternalApiUtil:323 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:209)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:139)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
826944 INFO  2025-11-21 07:03:04878 ExternalApiUtil:380 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
15322 INFO  2025-11-21 07:03:35792 ConfigUtil:20 - Loading config from: /usr/local/tomcat/webapps/ROOT/WEB-INF/classes/config.xml
15325 INFO  2025-11-21 07:03:35795 ConfigUtil:25 - Config.xml loaded successfully
15344 INFO  2025-11-21 07:03:35814 BaseDao:101 - jdbc:mysql://mysql:3306/pushdemo?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true user:root pass:root
16186 INFO  2025-11-21 07:03:36656 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,255,10.244.175.186,10,35,12,5,11110,2,0,0
16200 INFO  2025-11-21 07:03:36670 DownloadProcess:59 - get cmd list over and begin contact:0
16202 INFO  2025-11-21 07:03:36672 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,255,10.244.175.186,10,35,12,5,11110,2,0,0
42410 INFO  2025-11-21 07:04:02880 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
42430 INFO  2025-11-21 07:04:02900 DownloadProcess:59 - get cmd list over and begin contact:0
65729 INFO  2025-11-21 07:04:26199 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
65733 INFO  2025-11-21 07:04:26203 DownloadProcess:59 - get cmd list over and begin contact:0
91971 INFO  2025-11-21 07:04:52441 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
91978 INFO  2025-11-21 07:04:52448 DownloadProcess:59 - get cmd list over and begin contact:0
120165 INFO  2025-11-21 07:05:20635 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
120171 INFO  2025-11-21 07:05:20641 DownloadProcess:59 - get cmd list over and begin contact:0
148963 INFO  2025-11-21 07:05:49433 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
148972 INFO  2025-11-21 07:05:49442 DownloadProcess:59 - get cmd list over and begin contact:0
179678 INFO  2025-11-21 07:06:20148 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
179681 INFO  2025-11-21 07:06:20151 DownloadProcess:59 - get cmd list over and begin contact:0
191821 INFO  2025-11-21 07:06:32291 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
191839 INFO  2025-11-21 07:06:32309 UploadProcess:266 - update device stamp end and get stream.
191846 INFO  2025-11-21 07:06:32316 UploadProcess:323 - data:1002	2025-11-22 03:06:32	0	15	0	0	0	0	0	0	

191846 INFO  2025-11-21 07:06:32316 UploadProcess:324 - end get stream and process data
191847 INFO  2025-11-21 07:06:32317 UploadProcess:523 - begin parse op attlog
191892 INFO  2025-11-21 07:06:32362 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
191893 INFO  2025-11-21 07:06:32363 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
191894 INFO  2025-11-21 07:06:32364 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 03:06:32
191895 INFO  2025-11-21 07:06:32365 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
191908 INFO  2025-11-21 07:06:32378 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
191909 INFO  2025-11-21 07:06:32379 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
191910 INFO  2025-11-21 07:06:32380 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
191911 INFO  2025-11-21 07:06:32381 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
191912 INFO  2025-11-21 07:06:32382 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 03:06:32
191914 INFO  2025-11-21 07:06:32384 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
191916 INFO  2025-11-21 07:06:32386 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
191929 INFO  2025-11-21 07:06:32399 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
191940 INFO  2025-11-21 07:06:32410 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
191943 INFO  2025-11-21 07:06:32413 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 03:06:32
191944 INFO  2025-11-21 07:06:32414 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
191940 INFO  2025-11-21 07:06:32410 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
191946 INFO  2025-11-21 07:06:32416 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
191949 INFO  2025-11-21 07:06:32419 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
191945 INFO  2025-11-21 07:06:32415 UploadProcess:412 - attlog size:1
191957 INFO  2025-11-21 07:06:32427 UploadProcess:525 - end parse op attlog
191958 INFO  2025-11-21 07:06:32428 UploadProcess:327 - end process data and return msg to device
191960 INFO  2025-11-21 07:06:32430 UploadProcess:331 - return msg to device and request over OK
191955 INFO  2025-11-21 07:06:32425 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
191973 INFO  2025-11-21 07:06:32443 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
191974 INFO  2025-11-21 07:06:32444 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
191975 INFO  2025-11-21 07:06:32445 ExternalApiUtil:177 - EXTERNAL API: Method: POST
191977 INFO  2025-11-21 07:06:32447 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:06:32 EAT 2025
191978 INFO  2025-11-21 07:06:32448 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
191992 INFO  2025-11-21 07:06:32462 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
192002 INFO  2025-11-21 07:06:32472 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
192004 INFO  2025-11-21 07:06:32474 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 10:06 - Meal type determined: mid-morning
192008 INFO  2025-11-21 07:06:32478 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
192010 INFO  2025-11-21 07:06:32480 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
192025 INFO  2025-11-21 07:06:32495 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
192026 INFO  2025-11-21 07:06:32496 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
192027 INFO  2025-11-21 07:06:32497 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
192033 INFO  2025-11-21 07:06:32503 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
192443 INFO  2025-11-21 07:06:32913 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
192445 INFO  2025-11-21 07:06:32915 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
192446 INFO  2025-11-21 07:06:32916 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
192448 INFO  2025-11-21 07:06:32918 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
192461 INFO  2025-11-21 07:06:32931 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
192466 INFO  2025-11-21 07:06:32936 ExternalApiUtil:281 - âœ… EXTERNAL API CALL SUCCESSFUL
192469 INFO  2025-11-21 07:06:32939 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
192469 INFO  2025-11-21 07:06:32939 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1002 (original: 1002)
192471 INFO  2025-11-21 07:06:32941 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 201
192472 INFO  2025-11-21 07:06:32942 ExternalApiUtil:285 - EXTERNAL API: API Response Success: true
192475 INFO  2025-11-21 07:06:32945 ExternalApiUtil:286 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"6ff92637-365c-4854-ab5c-400125a8cd89","student_id":"1002","student_name":"Aaron Kailikia","admission_no":"1002","meal_type":"mid-morning","amount":0.0,"date":"2025-11-21T10:06:32.788462+03:00","status":"authorized","qr_code":"1002-mid-morning-2025-11-21-1763708792789","student_image":"/api/uploads/students/1002.png","created_at":"2025-11-21T10:06:32.787964+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
192479 INFO  2025-11-21 07:06:32949 ExternalApiUtil:287 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
192521 INFO  2025-11-21 07:06:32991 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1002
209249 INFO  2025-11-21 07:06:49719 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
209267 INFO  2025-11-21 07:06:49737 UploadProcess:266 - update device stamp end and get stream.
209273 INFO  2025-11-21 07:06:49743 UploadProcess:323 - data:1001	2025-11-22 03:06:49	0	15	0	0	0	0	0	0	

209274 INFO  2025-11-21 07:06:49744 UploadProcess:324 - end get stream and process data
209275 INFO  2025-11-21 07:06:49745 UploadProcess:523 - begin parse op attlog
209589 INFO  2025-11-21 07:06:5059 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
209591 INFO  2025-11-21 07:06:5061 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
209593 INFO  2025-11-21 07:06:5063 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1001, User Name: boaz, Timestamp: 2025-11-22 03:06:49
209600 INFO  2025-11-21 07:06:5070 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1001
209605 INFO  2025-11-21 07:06:5075 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
209609 INFO  2025-11-21 07:06:5079 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
209616 INFO  2025-11-21 07:06:5086 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
209617 INFO  2025-11-21 07:06:5087 ExternalApiUtil:123 - EXTERNAL API: User ID: 1001
209618 INFO  2025-11-21 07:06:5088 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 03:06:49
209624 INFO  2025-11-21 07:06:5094 ExternalApiUtil:125 - EXTERNAL API: User Name: boaz
209625 INFO  2025-11-21 07:06:5095 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
209626 INFO  2025-11-21 07:06:5096 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1001
209629 INFO  2025-11-21 07:06:5099 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1001
209630 INFO  2025-11-21 07:06:50100 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
209632 INFO  2025-11-21 07:06:50102 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
209634 INFO  2025-11-21 07:06:50104 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
209634 INFO  2025-11-21 07:06:50104 ExternalApiUtil:175 - EXTERNAL API: User ID: 1001
209635 INFO  2025-11-21 07:06:50105 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
209640 INFO  2025-11-21 07:06:50110 ExternalApiUtil:177 - EXTERNAL API: Method: POST
209642 INFO  2025-11-21 07:06:50112 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:06:50 EAT 2025
209643 INFO  2025-11-21 07:06:50113 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
209630 INFO  2025-11-21 07:06:50100 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1001
209648 INFO  2025-11-21 07:06:50118 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1001, Timestamp: 2025-11-22 03:06:49
209649 INFO  2025-11-21 07:06:50119 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
209650 INFO  2025-11-21 07:06:50120 UploadProcess:412 - attlog size:1
209652 INFO  2025-11-21 07:06:50122 UploadProcess:525 - end parse op attlog
209657 INFO  2025-11-21 07:06:50127 UploadProcess:327 - end process data and return msg to device
209658 INFO  2025-11-21 07:06:50128 UploadProcess:331 - return msg to device and request over OK
209650 INFO  2025-11-21 07:06:50120 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
209665 INFO  2025-11-21 07:06:50135 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1001, Formatted: 1001
209667 INFO  2025-11-21 07:06:50137 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 10:06 - Meal type determined: mid-morning
209671 INFO  2025-11-21 07:06:50141 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1001", "meal_type": "mid-morning"}
209675 INFO  2025-11-21 07:06:50145 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
209680 INFO  2025-11-21 07:06:50150 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
209682 INFO  2025-11-21 07:06:50152 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
209683 INFO  2025-11-21 07:06:50153 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
209684 INFO  2025-11-21 07:06:50154 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
210056 INFO  2025-11-21 07:06:50526 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,257,10.244.175.186,10,35,12,5,11110,2,0,0
210060 INFO  2025-11-21 07:06:50530 DownloadProcess:59 - get cmd list over and begin contact:0
210061 INFO  2025-11-21 07:06:50531 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,257,10.244.175.186,10,35,12,5,11110,2,0,0
210184 INFO  2025-11-21 07:06:50654 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
210185 INFO  2025-11-21 07:06:50655 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
210187 INFO  2025-11-21 07:06:50657 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
210187 INFO  2025-11-21 07:06:50657 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
210190 INFO  2025-11-21 07:06:50660 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
210193 INFO  2025-11-21 07:06:50663 ExternalApiUtil:281 - âœ… EXTERNAL API CALL SUCCESSFUL
210194 INFO  2025-11-21 07:06:50664 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
210195 INFO  2025-11-21 07:06:50665 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1001 (original: 1001)
210197 INFO  2025-11-21 07:06:50667 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 201
210201 INFO  2025-11-21 07:06:50671 ExternalApiUtil:285 - EXTERNAL API: API Response Success: true
210203 INFO  2025-11-21 07:06:50673 ExternalApiUtil:286 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"c5441dea-035f-4e3c-a193-caecb21806b0","student_id":"1001","student_name":"Boaz Omare","admission_no":"1001","meal_type":"mid-morning","amount":0.0,"date":"2025-11-21T10:06:50.589056+03:00","status":"authorized","qr_code":"1001-mid-morning-2025-11-21-1763708810589","student_image":"/api/uploads/students/1001.png","created_at":"2025-11-21T10:06:50.588662+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1001","name":"Boaz Omare","class_name":"12","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"4a5093ca-992c-4c25-8994-d0109681be50","face_registered":false,"face_image":"/api/uploads/students/1001.png","created_at":"2025-11-17T10:32:08.395587+03:00"}}
210209 INFO  2025-11-21 07:06:50679 ExternalApiUtil:287 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
210323 INFO  2025-11-21 07:06:50793 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1001
241270 INFO  2025-11-21 07:07:21740 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
241275 INFO  2025-11-21 07:07:21745 DownloadProcess:59 - get cmd list over and begin contact:0
265508 INFO  2025-11-21 07:07:45978 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
265522 INFO  2025-11-21 07:07:45992 UploadProcess:266 - update device stamp end and get stream.
265525 INFO  2025-11-21 07:07:45995 UploadProcess:323 - data:1002	2025-11-22 03:07:45	0	15	0	0	0	0	0	0	

265556 INFO  2025-11-21 07:07:4626 UploadProcess:324 - end get stream and process data
265559 INFO  2025-11-21 07:07:4629 UploadProcess:523 - begin parse op attlog
265580 INFO  2025-11-21 07:07:4650 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
265580 INFO  2025-11-21 07:07:4650 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
265581 INFO  2025-11-21 07:07:4651 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 03:07:45
265582 INFO  2025-11-21 07:07:4652 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
265584 INFO  2025-11-21 07:07:4654 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
265586 INFO  2025-11-21 07:07:4656 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
265587 INFO  2025-11-21 07:07:4657 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
265588 INFO  2025-11-21 07:07:4658 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
265593 INFO  2025-11-21 07:07:4663 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 03:07:45
265596 INFO  2025-11-21 07:07:4666 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
265600 INFO  2025-11-21 07:07:4670 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
265601 INFO  2025-11-21 07:07:4671 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
265604 INFO  2025-11-21 07:07:4674 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
265606 INFO  2025-11-21 07:07:4676 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
265608 INFO  2025-11-21 07:07:4678 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
265610 INFO  2025-11-21 07:07:4680 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
265622 INFO  2025-11-21 07:07:4692 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
265625 INFO  2025-11-21 07:07:4695 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
265606 INFO  2025-11-21 07:07:4676 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
265628 INFO  2025-11-21 07:07:4698 ExternalApiUtil:177 - EXTERNAL API: Method: POST
265630 INFO  2025-11-21 07:07:46100 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 03:07:45
265660 INFO  2025-11-21 07:07:46130 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:07:46 EAT 2025
265663 INFO  2025-11-21 07:07:46133 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
265663 INFO  2025-11-21 07:07:46133 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
265666 INFO  2025-11-21 07:07:46136 UploadProcess:412 - attlog size:1
265669 INFO  2025-11-21 07:07:46139 UploadProcess:525 - end parse op attlog
265666 INFO  2025-11-21 07:07:46136 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
265672 INFO  2025-11-21 07:07:46142 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
265670 INFO  2025-11-21 07:07:46140 UploadProcess:327 - end process data and return msg to device
265683 INFO  2025-11-21 07:07:46153 UploadProcess:331 - return msg to device and request over OK
265686 INFO  2025-11-21 07:07:46156 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 10:07 - Meal type determined: mid-morning
265693 INFO  2025-11-21 07:07:46163 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
265699 INFO  2025-11-21 07:07:46169 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
265709 INFO  2025-11-21 07:07:46179 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
265713 INFO  2025-11-21 07:07:46183 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
265716 INFO  2025-11-21 07:07:46186 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
265717 INFO  2025-11-21 07:07:46187 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
266377 INFO  2025-11-21 07:07:46847 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
266377 INFO  2025-11-21 07:07:46847 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
266378 INFO  2025-11-21 07:07:46848 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
266379 INFO  2025-11-21 07:07:46849 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
266380 INFO  2025-11-21 07:07:46850 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
266381 INFO  2025-11-21 07:07:46851 ExternalApiUtil:281 - âœ… EXTERNAL API CALL SUCCESSFUL
266382 INFO  2025-11-21 07:07:46852 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
266382 INFO  2025-11-21 07:07:46852 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1002 (original: 1002)
266383 INFO  2025-11-21 07:07:46853 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 201
266384 INFO  2025-11-21 07:07:46854 ExternalApiUtil:285 - EXTERNAL API: API Response Success: true
266384 INFO  2025-11-21 07:07:46854 ExternalApiUtil:286 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"a4b590ce-3eba-476d-9dea-661b42bb412d","student_id":"1002","student_name":"Aaron Kailikia","admission_no":"1002","meal_type":"mid-morning","amount":0.0,"date":"2025-11-21T10:07:46.660733+03:00","status":"authorized","qr_code":"1002-mid-morning-2025-11-21-1763708866661","student_image":"/api/uploads/students/1002.png","created_at":"2025-11-21T10:07:46.660297+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
266386 INFO  2025-11-21 07:07:46856 ExternalApiUtil:287 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
266397 INFO  2025-11-21 07:07:46867 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1002
271560 INFO  2025-11-21 07:07:5230 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,258,10.244.175.186,10,35,12,5,11110,2,0,0
271564 INFO  2025-11-21 07:07:5234 DownloadProcess:59 - get cmd list over and begin contact:0
271564 INFO  2025-11-21 07:07:5234 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,258,10.244.175.186,10,35,12,5,11110,2,0,0
303051 INFO  2025-11-21 07:08:23521 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
303056 INFO  2025-11-21 07:08:23526 DownloadProcess:59 - get cmd list over and begin contact:0
332120 INFO  2025-11-21 07:08:52590 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
332127 INFO  2025-11-21 07:08:52597 DownloadProcess:59 - get cmd list over and begin contact:0
348318 INFO  2025-11-21 07:09:08788 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
348327 INFO  2025-11-21 07:09:08797 UploadProcess:266 - update device stamp end and get stream.
348329 INFO  2025-11-21 07:09:08799 UploadProcess:323 - data:1002	2025-11-22 03:09:08	0	15	0	0	0	0	0	0	

348330 INFO  2025-11-21 07:09:08800 UploadProcess:324 - end get stream and process data
348331 INFO  2025-11-21 07:09:08801 UploadProcess:523 - begin parse op attlog
348436 INFO  2025-11-21 07:09:08906 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
348437 INFO  2025-11-21 07:09:08907 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
348442 INFO  2025-11-21 07:09:08912 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 03:09:08
348443 INFO  2025-11-21 07:09:08913 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
348445 INFO  2025-11-21 07:09:08915 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
348463 INFO  2025-11-21 07:09:08933 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
348467 INFO  2025-11-21 07:09:08937 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
348473 INFO  2025-11-21 07:09:08943 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
348484 INFO  2025-11-21 07:09:08954 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 03:09:08
348487 INFO  2025-11-21 07:09:08957 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
348491 INFO  2025-11-21 07:09:08961 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
348497 INFO  2025-11-21 07:09:08967 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
348503 INFO  2025-11-21 07:09:08973 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
348505 INFO  2025-11-21 07:09:08975 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 03:09:08
348506 INFO  2025-11-21 07:09:08976 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
348507 INFO  2025-11-21 07:09:08977 UploadProcess:412 - attlog size:1
348517 INFO  2025-11-21 07:09:08987 UploadProcess:525 - end parse op attlog
348519 INFO  2025-11-21 07:09:08989 UploadProcess:327 - end process data and return msg to device
348526 INFO  2025-11-21 07:09:08996 UploadProcess:331 - return msg to device and request over OK
348504 INFO  2025-11-21 07:09:08974 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
348530 INFO  2025-11-21 07:09:090 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
348531 INFO  2025-11-21 07:09:091 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
348534 INFO  2025-11-21 07:09:094 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
348538 INFO  2025-11-21 07:09:098 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
348538 INFO  2025-11-21 07:09:098 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
348543 INFO  2025-11-21 07:09:0913 ExternalApiUtil:177 - EXTERNAL API: Method: POST
348546 INFO  2025-11-21 07:09:0916 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:09:09 EAT 2025
348547 INFO  2025-11-21 07:09:0917 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
348549 INFO  2025-11-21 07:09:0919 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
348551 INFO  2025-11-21 07:09:0921 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
348555 INFO  2025-11-21 07:09:0925 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 10:09 - Meal type determined: mid-morning
348556 INFO  2025-11-21 07:09:0926 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
348561 INFO  2025-11-21 07:09:0931 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
348571 INFO  2025-11-21 07:09:0941 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
348571 INFO  2025-11-21 07:09:0941 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
348573 INFO  2025-11-21 07:09:0943 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
348573 INFO  2025-11-21 07:09:0943 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
349015 INFO  2025-11-21 07:09:09485 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
349016 INFO  2025-11-21 07:09:09486 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
349017 INFO  2025-11-21 07:09:09487 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
349021 INFO  2025-11-21 07:09:09491 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
349023 INFO  2025-11-21 07:09:09493 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
349023 INFO  2025-11-21 07:09:09493 ExternalApiUtil:281 - âœ… EXTERNAL API CALL SUCCESSFUL
349025 INFO  2025-11-21 07:09:09495 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
349027 INFO  2025-11-21 07:09:09497 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1002 (original: 1002)
349029 INFO  2025-11-21 07:09:09499 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 201
349031 INFO  2025-11-21 07:09:09501 ExternalApiUtil:285 - EXTERNAL API: API Response Success: true
349032 INFO  2025-11-21 07:09:09502 ExternalApiUtil:286 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"e9ac6e05-83e6-4e2a-81ee-939b5ea24632","student_id":"1002","student_name":"Aaron Kailikia","admission_no":"1002","meal_type":"mid-morning","amount":0.0,"date":"2025-11-21T10:09:09.361164+03:00","status":"authorized","qr_code":"1002-mid-morning-2025-11-21-1763708949361","student_image":"/api/uploads/students/1002.png","created_at":"2025-11-21T10:09:09.360801+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
349038 INFO  2025-11-21 07:09:09508 ExternalApiUtil:287 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
349052 INFO  2025-11-21 07:09:09522 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1002
362849 INFO  2025-11-21 07:09:23319 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,259,10.244.175.186,10,35,12,5,11110,2,0,0
362853 INFO  2025-11-21 07:09:23323 DownloadProcess:59 - get cmd list over and begin contact:0
362855 INFO  2025-11-21 07:09:23325 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,259,10.244.175.186,10,35,12,5,11110,2,0,0
392841 INFO  2025-11-21 07:09:53311 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
392847 INFO  2025-11-21 07:09:53317 DownloadProcess:59 - get cmd list over and begin contact:0
424025 INFO  2025-11-21 07:10:24495 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
424135 INFO  2025-11-21 07:10:24605 DownloadProcess:59 - get cmd list over and begin contact:0
454959 INFO  2025-11-21 07:10:55429 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
455101 INFO  2025-11-21 07:10:55571 DownloadProcess:59 - get cmd list over and begin contact:0
465174 INFO  2025-11-21 07:11:05644 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
466139 INFO  2025-11-21 07:11:06609 UploadProcess:266 - update device stamp end and get stream.
466231 INFO  2025-11-21 07:11:06701 UploadProcess:323 - data:1002	2025-11-22 03:11:05	0	15	0	0	0	0	0	0	

466233 INFO  2025-11-21 07:11:06703 UploadProcess:324 - end get stream and process data
466244 INFO  2025-11-21 07:11:06714 UploadProcess:523 - begin parse op attlog
466336 INFO  2025-11-21 07:11:06806 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
466388 INFO  2025-11-21 07:11:06858 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
466397 INFO  2025-11-21 07:11:06867 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 03:11:05
466399 INFO  2025-11-21 07:11:06869 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
466400 INFO  2025-11-21 07:11:06870 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
466401 INFO  2025-11-21 07:11:06871 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
466403 INFO  2025-11-21 07:11:06873 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
466410 INFO  2025-11-21 07:11:06880 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
466412 INFO  2025-11-21 07:11:06882 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 03:11:05
466417 INFO  2025-11-21 07:11:06887 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
466417 INFO  2025-11-21 07:11:06887 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
466419 INFO  2025-11-21 07:11:06889 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
466421 INFO  2025-11-21 07:11:06891 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
466567 INFO  2025-11-21 07:11:0737 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
466568 INFO  2025-11-21 07:11:0738 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
466568 INFO  2025-11-21 07:11:0738 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
466569 INFO  2025-11-21 07:11:0739 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
466569 INFO  2025-11-21 07:11:0739 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
466573 INFO  2025-11-21 07:11:0743 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
466574 INFO  2025-11-21 07:11:0744 ExternalApiUtil:177 - EXTERNAL API: Method: POST
466577 INFO  2025-11-21 07:11:0747 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:11:07 EAT 2025
466591 INFO  2025-11-21 07:11:0761 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
466592 INFO  2025-11-21 07:11:0762 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
466568 INFO  2025-11-21 07:11:0738 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 03:11:05
466597 INFO  2025-11-21 07:11:0767 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
466597 INFO  2025-11-21 07:11:0767 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
466598 INFO  2025-11-21 07:11:0768 UploadProcess:412 - attlog size:1
466601 INFO  2025-11-21 07:11:0771 UploadProcess:525 - end parse op attlog
466601 INFO  2025-11-21 07:11:0771 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 10:11 - Meal type determined: mid-morning
466606 INFO  2025-11-21 07:11:0776 UploadProcess:327 - end process data and return msg to device
466641 INFO  2025-11-21 07:11:07111 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
466657 INFO  2025-11-21 07:11:07127 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
466650 INFO  2025-11-21 07:11:07120 UploadProcess:331 - return msg to device and request over OK
466702 ERROR 2025-11-21 07:11:07172 ExternalApiUtil:316 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
466707 ERROR 2025-11-21 07:11:07177 ExternalApiUtil:317 - âŒ EXTERNAL API CALL FAILED
466708 ERROR 2025-11-21 07:11:07178 ExternalApiUtil:318 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
466774 ERROR 2025-11-21 07:11:07244 ExternalApiUtil:319 - EXTERNAL API: Student ID: 1002
466775 ERROR 2025-11-21 07:11:07245 ExternalApiUtil:320 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
466803 ERROR 2025-11-21 07:11:07273 ExternalApiUtil:321 - EXTERNAL API: Error: Connection refused (Connection refused)
466807 ERROR 2025-11-21 07:11:07277 ExternalApiUtil:322 - EXTERNAL API: Exception: java.net.ConnectException
466810 ERROR 2025-11-21 07:11:07280 ExternalApiUtil:323 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
467487 ERROR 2025-11-21 07:11:07957 ExternalApiUtil:324 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:210)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:140)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
467548 INFO  2025-11-21 07:11:0818 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
486071 INFO  2025-11-21 07:11:26541 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,260,10.244.175.186,10,35,12,5,11110,2,0,0
486081 INFO  2025-11-21 07:11:26551 DownloadProcess:59 - get cmd list over and begin contact:0
486086 INFO  2025-11-21 07:11:26556 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,260,10.244.175.186,10,35,12,5,11110,2,0,0
515820 INFO  2025-11-21 07:11:56290 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
515825 INFO  2025-11-21 07:11:56295 DownloadProcess:59 - get cmd list over and begin contact:0
546692 INFO  2025-11-21 07:12:27162 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
546736 INFO  2025-11-21 07:12:27206 DownloadProcess:59 - get cmd list over and begin contact:0
578905 INFO  2025-11-21 07:12:59375 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
578919 INFO  2025-11-21 07:12:59389 DownloadProcess:59 - get cmd list over and begin contact:0
607792 INFO  2025-11-21 07:13:28262 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
607803 INFO  2025-11-21 07:13:28273 DownloadProcess:59 - get cmd list over and begin contact:0
642008 INFO  2025-11-21 07:14:02478 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
642013 INFO  2025-11-21 07:14:02483 DownloadProcess:59 - get cmd list over and begin contact:0
653881 INFO  2025-11-21 07:14:14351 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
653896 INFO  2025-11-21 07:14:14366 UploadProcess:266 - update device stamp end and get stream.
653899 INFO  2025-11-21 07:14:14369 UploadProcess:323 - data:1002	2025-11-22 03:14:13	0	15	0	0	0	0	0	0	

653900 INFO  2025-11-21 07:14:14370 UploadProcess:324 - end get stream and process data
653901 INFO  2025-11-21 07:14:14371 UploadProcess:523 - begin parse op attlog
653913 INFO  2025-11-21 07:14:14383 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
653916 INFO  2025-11-21 07:14:14386 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
653916 INFO  2025-11-21 07:14:14386 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 03:14:13
653917 INFO  2025-11-21 07:14:14387 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
653919 INFO  2025-11-21 07:14:14389 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
653920 INFO  2025-11-21 07:14:14390 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
653921 INFO  2025-11-21 07:14:14391 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
653922 INFO  2025-11-21 07:14:14392 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
653924 INFO  2025-11-21 07:14:14394 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 03:14:13
653925 INFO  2025-11-21 07:14:14395 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
653927 INFO  2025-11-21 07:14:14397 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
653929 INFO  2025-11-21 07:14:14399 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
653929 INFO  2025-11-21 07:14:14399 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
653931 INFO  2025-11-21 07:14:14401 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 03:14:13
653932 INFO  2025-11-21 07:14:14402 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
653932 INFO  2025-11-21 07:14:14402 UploadProcess:412 - attlog size:1
653933 INFO  2025-11-21 07:14:14403 UploadProcess:525 - end parse op attlog
653934 INFO  2025-11-21 07:14:14404 UploadProcess:327 - end process data and return msg to device
653935 INFO  2025-11-21 07:14:14405 UploadProcess:331 - return msg to device and request over OK
653930 INFO  2025-11-21 07:14:14400 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
653938 INFO  2025-11-21 07:14:14408 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
653939 INFO  2025-11-21 07:14:14409 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
653940 INFO  2025-11-21 07:14:14410 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
653940 INFO  2025-11-21 07:14:14410 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
653941 INFO  2025-11-21 07:14:14411 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
653941 INFO  2025-11-21 07:14:14411 ExternalApiUtil:177 - EXTERNAL API: Method: POST
653942 INFO  2025-11-21 07:14:14412 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:14:14 EAT 2025
653942 INFO  2025-11-21 07:14:14412 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
653943 INFO  2025-11-21 07:14:14413 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
653944 INFO  2025-11-21 07:14:14414 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
653946 INFO  2025-11-21 07:14:14416 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 10:14 - Meal type determined: mid-morning
653946 INFO  2025-11-21 07:14:14416 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
653947 INFO  2025-11-21 07:14:14417 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
653954 ERROR 2025-11-21 07:14:14424 ExternalApiUtil:316 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
653954 ERROR 2025-11-21 07:14:14424 ExternalApiUtil:317 - âŒ EXTERNAL API CALL FAILED
653957 ERROR 2025-11-21 07:14:14427 ExternalApiUtil:318 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
653958 ERROR 2025-11-21 07:14:14428 ExternalApiUtil:319 - EXTERNAL API: Student ID: 1002
653958 ERROR 2025-11-21 07:14:14428 ExternalApiUtil:320 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
653958 ERROR 2025-11-21 07:14:14428 ExternalApiUtil:321 - EXTERNAL API: Error: Connection refused (Connection refused)
653959 ERROR 2025-11-21 07:14:14429 ExternalApiUtil:322 - EXTERNAL API: Exception: java.net.ConnectException
653959 ERROR 2025-11-21 07:14:14429 ExternalApiUtil:323 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
653962 ERROR 2025-11-21 07:14:14432 ExternalApiUtil:324 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:210)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:140)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
653971 INFO  2025-11-21 07:14:14441 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
671748 INFO  2025-11-21 07:14:32218 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,261,10.244.175.186,10,35,12,5,11110,2,0,0
671758 INFO  2025-11-21 07:14:32228 DownloadProcess:59 - get cmd list over and begin contact:0
671759 INFO  2025-11-21 07:14:32229 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,261,10.244.175.186,10,35,12,5,11110,2,0,0
702696 INFO  2025-11-21 07:15:03166 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
702699 INFO  2025-11-21 07:15:03169 DownloadProcess:59 - get cmd list over and begin contact:0
732745 INFO  2025-11-21 07:15:33215 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
732821 INFO  2025-11-21 07:15:33291 DownloadProcess:59 - get cmd list over and begin contact:0
743443 INFO  2025-11-21 07:15:43913 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
743456 INFO  2025-11-21 07:15:43926 UploadProcess:266 - update device stamp end and get stream.
743458 INFO  2025-11-21 07:15:43928 UploadProcess:323 - data:1002	2025-11-22 03:15:44	0	15	0	0	0	0	0	0	

743461 INFO  2025-11-21 07:15:43931 UploadProcess:324 - end get stream and process data
743461 INFO  2025-11-21 07:15:43931 UploadProcess:523 - begin parse op attlog
743471 INFO  2025-11-21 07:15:43941 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
743472 INFO  2025-11-21 07:15:43942 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
743591 INFO  2025-11-21 07:15:4461 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 03:15:44
743593 INFO  2025-11-21 07:15:4463 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
743594 INFO  2025-11-21 07:15:4464 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
743595 INFO  2025-11-21 07:15:4465 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
743595 INFO  2025-11-21 07:15:4465 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
743596 INFO  2025-11-21 07:15:4466 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
743597 INFO  2025-11-21 07:15:4467 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 03:15:44
743598 INFO  2025-11-21 07:15:4468 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
743598 INFO  2025-11-21 07:15:4468 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
743599 INFO  2025-11-21 07:15:4469 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
743599 INFO  2025-11-21 07:15:4469 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
743600 INFO  2025-11-21 07:15:4470 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 03:15:44
743600 INFO  2025-11-21 07:15:4470 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
743601 INFO  2025-11-21 07:15:4471 UploadProcess:412 - attlog size:1
743601 INFO  2025-11-21 07:15:4471 UploadProcess:525 - end parse op attlog
743601 INFO  2025-11-21 07:15:4471 UploadProcess:327 - end process data and return msg to device
743600 INFO  2025-11-21 07:15:4470 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
743602 INFO  2025-11-21 07:15:4472 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
743603 INFO  2025-11-21 07:15:4473 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
743603 INFO  2025-11-21 07:15:4473 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
743603 INFO  2025-11-21 07:15:4473 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
743604 INFO  2025-11-21 07:15:4474 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
743604 INFO  2025-11-21 07:15:4474 ExternalApiUtil:177 - EXTERNAL API: Method: POST
743602 INFO  2025-11-21 07:15:4472 UploadProcess:331 - return msg to device and request over OK
743605 INFO  2025-11-21 07:15:4475 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:15:44 EAT 2025
743608 INFO  2025-11-21 07:15:4478 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
743609 INFO  2025-11-21 07:15:4479 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
743609 INFO  2025-11-21 07:15:4479 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
743610 INFO  2025-11-21 07:15:4480 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 10:15 - Meal type determined: mid-morning
743610 INFO  2025-11-21 07:15:4480 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
743611 INFO  2025-11-21 07:15:4481 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
743615 ERROR 2025-11-21 07:15:4485 ExternalApiUtil:316 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
743617 ERROR 2025-11-21 07:15:4487 ExternalApiUtil:317 - âŒ EXTERNAL API CALL FAILED
743619 ERROR 2025-11-21 07:15:4489 ExternalApiUtil:318 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
743620 ERROR 2025-11-21 07:15:4490 ExternalApiUtil:319 - EXTERNAL API: Student ID: 1002
743621 ERROR 2025-11-21 07:15:4491 ExternalApiUtil:320 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
743622 ERROR 2025-11-21 07:15:4492 ExternalApiUtil:321 - EXTERNAL API: Error: Connection refused (Connection refused)
743623 ERROR 2025-11-21 07:15:4493 ExternalApiUtil:322 - EXTERNAL API: Exception: java.net.ConnectException
743623 ERROR 2025-11-21 07:15:4493 ExternalApiUtil:323 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
743623 ERROR 2025-11-21 07:15:4493 ExternalApiUtil:324 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:210)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:140)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
743883 INFO  2025-11-21 07:15:44353 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
764831 INFO  2025-11-21 07:16:05301 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,262,10.244.175.186,10,35,12,5,11110,2,0,0
764855 INFO  2025-11-21 07:16:05325 DownloadProcess:59 - get cmd list over and begin contact:0
764858 INFO  2025-11-21 07:16:05328 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,262,10.244.175.186,10,35,12,5,11110,2,0,0
794014 INFO  2025-11-21 07:16:34484 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
794020 INFO  2025-11-21 07:16:34490 DownloadProcess:59 - get cmd list over and begin contact:0
825576 INFO  2025-11-21 07:17:0646 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
825584 INFO  2025-11-21 07:17:0654 DownloadProcess:59 - get cmd list over and begin contact:0
855035 INFO  2025-11-21 07:17:35505 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
855047 INFO  2025-11-21 07:17:35517 DownloadProcess:59 - get cmd list over and begin contact:0
886413 INFO  2025-11-21 07:18:06883 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
886424 INFO  2025-11-21 07:18:06894 DownloadProcess:59 - get cmd list over and begin contact:0
913471 INFO  2025-11-21 07:18:33941 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=OPERLOG&Stamp=9999
913513 INFO  2025-11-21 07:18:33983 UploadProcess:266 - update device stamp end and get stream.
913518 INFO  2025-11-21 07:18:33988 UploadProcess:323 - data:OPLOG 4	1002	2025-11-22 03:18:33	1002	0	0	0

913519 INFO  2025-11-21 07:18:33989 UploadProcess:324 - end get stream and process data
913520 INFO  2025-11-21 07:18:33990 UploadProcess:474 - begin parse op log
913569 INFO  2025-11-21 07:18:3439 UploadProcess:235 - oplog size:1
913570 INFO  2025-11-21 07:18:3440 UploadProcess:476 - end parse op log
913571 INFO  2025-11-21 07:18:3441 UploadProcess:327 - end process data and return msg to device
913573 INFO  2025-11-21 07:18:3443 UploadProcess:331 - return msg to device and request over OK
916139 INFO  2025-11-21 07:18:36609 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
916145 INFO  2025-11-21 07:18:36615 DownloadProcess:59 - get cmd list over and begin contact:0
948009 INFO  2025-11-21 07:19:08479 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
948021 INFO  2025-11-21 07:19:08491 DownloadProcess:59 - get cmd list over and begin contact:0
976833 INFO  2025-11-21 07:19:37303 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
976838 INFO  2025-11-21 07:19:37308 DownloadProcess:59 - get cmd list over and begin contact:0
2999553 INFO  2025-11-21 07:53:2023 UploadProcess:63 - get request and make the device options :192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&options=all&language=69&pushver=2.4.1&DeviceType=att&PushOptionsFlag=1
3000148 INFO  2025-11-21 07:53:20618 UploadProcess:90 - GET OPTION FROM: TDBD250100333
ATTLOGStamp=9999
OPERLOGStamp=0
ATTPHOTOStamp=0
BIODATAStamp=0
IDCARDStamp=0
ERRORLOGStamp=0
TransFlag=TransData AttLog	OpLog	AttPhoto	EnrollUser	ChgUser	EnrollFP	ChgFP	FPImag	FACE	UserPic	BioPhoto
ErrorDelay=60
Delay=30
transTimes=00:00;14:05
TransInterval=1
Realtime=1
Encrypt=0
ServerVer=2.2.14
TimeZone=1200

3003054 INFO  2025-11-21 07:53:23524 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,263,10.244.175.186,10,35,12,5,11110,2,0,0
3003430 INFO  2025-11-21 07:53:23900 DownloadProcess:59 - get cmd list over and begin contact:0
3003441 INFO  2025-11-21 07:53:23911 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,263,10.244.175.186,10,35,12,5,11110,2,0,0
3028820 INFO  2025-11-21 07:53:49290 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
3029089 INFO  2025-11-21 07:53:49559 UploadProcess:266 - update device stamp end and get stream.
3029368 INFO  2025-11-21 07:53:49838 UploadProcess:323 - data:1002	2025-11-22 03:53:15	0	15	0	0	0	0	0	0	

3030085 INFO  2025-11-21 07:53:50555 UploadProcess:324 - end get stream and process data
3030144 INFO  2025-11-21 07:53:50614 UploadProcess:523 - begin parse op attlog
3030275 INFO  2025-11-21 07:53:50745 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
3030284 INFO  2025-11-21 07:53:50754 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
3030299 INFO  2025-11-21 07:53:50769 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 03:53:15
3030349 INFO  2025-11-21 07:53:50819 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
3030380 INFO  2025-11-21 07:53:50850 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3030462 INFO  2025-11-21 07:53:50932 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
3030727 INFO  2025-11-21 07:53:51197 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3030743 INFO  2025-11-21 07:53:51213 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
3030999 INFO  2025-11-21 07:53:51469 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 03:53:15
3031296 INFO  2025-11-21 07:53:51766 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
3031558 INFO  2025-11-21 07:53:5228 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3032023 INFO  2025-11-21 07:53:52493 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
3032191 INFO  2025-11-21 07:53:52661 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
3032220 INFO  2025-11-21 07:53:52690 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 03:53:15
3032387 INFO  2025-11-21 07:53:52857 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
3032577 INFO  2025-11-21 07:53:5347 UploadProcess:412 - attlog size:1
3032740 INFO  2025-11-21 07:53:53210 UploadProcess:525 - end parse op attlog
3032746 INFO  2025-11-21 07:53:53216 UploadProcess:327 - end process data and return msg to device
3032193 INFO  2025-11-21 07:53:52663 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
3032758 INFO  2025-11-21 07:53:53228 UploadProcess:331 - return msg to device and request over OK
3032760 INFO  2025-11-21 07:53:53230 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3032781 INFO  2025-11-21 07:53:53251 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
3032782 INFO  2025-11-21 07:53:53252 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3032785 INFO  2025-11-21 07:53:53255 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
3032789 INFO  2025-11-21 07:53:53259 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
3032797 INFO  2025-11-21 07:53:53267 ExternalApiUtil:177 - EXTERNAL API: Method: POST
3033196 INFO  2025-11-21 07:53:53666 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:53:53 EAT 2025
3033324 INFO  2025-11-21 07:53:53794 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
3033603 INFO  2025-11-21 07:53:5473 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
3033745 INFO  2025-11-21 07:53:54215 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
3033788 INFO  2025-11-21 07:53:54258 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 10:53 - Meal type determined: mid-morning
3033922 INFO  2025-11-21 07:53:54392 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
3033927 INFO  2025-11-21 07:53:54397 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
3033971 ERROR 2025-11-21 07:53:54441 ExternalApiUtil:316 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3033974 ERROR 2025-11-21 07:53:54444 ExternalApiUtil:317 - âŒ EXTERNAL API CALL FAILED
3033978 ERROR 2025-11-21 07:53:54448 ExternalApiUtil:318 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3033982 ERROR 2025-11-21 07:53:54452 ExternalApiUtil:319 - EXTERNAL API: Student ID: 1002
3033988 ERROR 2025-11-21 07:53:54458 ExternalApiUtil:320 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
3034049 ERROR 2025-11-21 07:53:54519 ExternalApiUtil:321 - EXTERNAL API: Error: Connection refused (Connection refused)
3034058 ERROR 2025-11-21 07:53:54528 ExternalApiUtil:322 - EXTERNAL API: Exception: java.net.ConnectException
3034069 ERROR 2025-11-21 07:53:54539 ExternalApiUtil:323 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3034073 ERROR 2025-11-21 07:53:54543 ExternalApiUtil:324 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:210)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:140)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
3034248 INFO  2025-11-21 07:53:54718 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
3035626 INFO  2025-11-21 07:53:5696 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3035898 INFO  2025-11-21 07:53:56368 DownloadProcess:59 - get cmd list over and begin contact:0
3042075 INFO  2025-11-21 07:54:02545 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3042279 INFO  2025-11-21 07:54:02749 DownloadProcess:59 - get cmd list over and begin contact:0
3050814 INFO  2025-11-21 07:54:11284 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3050822 INFO  2025-11-21 07:54:11292 DownloadProcess:59 - get cmd list over and begin contact:0
3062016 INFO  2025-11-21 07:54:22486 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3062032 INFO  2025-11-21 07:54:22502 DownloadProcess:59 - get cmd list over and begin contact:0
3074367 INFO  2025-11-21 07:54:34837 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3074383 INFO  2025-11-21 07:54:34853 DownloadProcess:59 - get cmd list over and begin contact:0
3084898 INFO  2025-11-21 07:54:45368 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3084911 INFO  2025-11-21 07:54:45381 DownloadProcess:59 - get cmd list over and begin contact:0
3100447 INFO  2025-11-21 07:55:00917 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3100501 INFO  2025-11-21 07:55:00971 DownloadProcess:59 - get cmd list over and begin contact:0
3114945 INFO  2025-11-21 07:55:15415 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3114966 INFO  2025-11-21 07:55:15436 DownloadProcess:59 - get cmd list over and begin contact:0
3123738 INFO  2025-11-21 07:55:24208 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
3123759 INFO  2025-11-21 07:55:24229 UploadProcess:266 - update device stamp end and get stream.
3123762 INFO  2025-11-21 07:55:24232 UploadProcess:323 - data:1002	2025-11-22 03:55:24	0	15	0	0	0	0	0	0	

3123762 INFO  2025-11-21 07:55:24232 UploadProcess:324 - end get stream and process data
3123763 INFO  2025-11-21 07:55:24233 UploadProcess:523 - begin parse op attlog
3123773 INFO  2025-11-21 07:55:24243 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
3123775 INFO  2025-11-21 07:55:24245 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
3123776 INFO  2025-11-21 07:55:24246 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 03:55:24
3123777 INFO  2025-11-21 07:55:24247 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
3123777 INFO  2025-11-21 07:55:24247 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3123778 INFO  2025-11-21 07:55:24248 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
3123778 INFO  2025-11-21 07:55:24248 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3123779 INFO  2025-11-21 07:55:24249 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
3123779 INFO  2025-11-21 07:55:24249 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 03:55:24
3123779 INFO  2025-11-21 07:55:24249 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
3123780 INFO  2025-11-21 07:55:24250 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3123780 INFO  2025-11-21 07:55:24250 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
3123781 INFO  2025-11-21 07:55:24251 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
3123783 INFO  2025-11-21 07:55:24253 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 03:55:24
3123784 INFO  2025-11-21 07:55:24254 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
3123786 INFO  2025-11-21 07:55:24256 UploadProcess:412 - attlog size:1
3123787 INFO  2025-11-21 07:55:24257 UploadProcess:525 - end parse op attlog
3123789 INFO  2025-11-21 07:55:24259 UploadProcess:327 - end process data and return msg to device
3123790 INFO  2025-11-21 07:55:24260 UploadProcess:331 - return msg to device and request over OK
3123792 INFO  2025-11-21 07:55:24262 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
3123793 INFO  2025-11-21 07:55:24263 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3123794 INFO  2025-11-21 07:55:24264 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
3123794 INFO  2025-11-21 07:55:24264 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3123795 INFO  2025-11-21 07:55:24265 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
3123795 INFO  2025-11-21 07:55:24265 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
3123796 INFO  2025-11-21 07:55:24266 ExternalApiUtil:177 - EXTERNAL API: Method: POST
3123797 INFO  2025-11-21 07:55:24267 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:55:24 EAT 2025
3123798 INFO  2025-11-21 07:55:24268 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
3123799 INFO  2025-11-21 07:55:24269 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
3123802 INFO  2025-11-21 07:55:24272 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
3123803 INFO  2025-11-21 07:55:24273 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 10:55 - Meal type determined: mid-morning
3123804 INFO  2025-11-21 07:55:24274 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
3123805 INFO  2025-11-21 07:55:24275 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
3123826 ERROR 2025-11-21 07:55:24296 ExternalApiUtil:316 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3123827 ERROR 2025-11-21 07:55:24297 ExternalApiUtil:317 - âŒ EXTERNAL API CALL FAILED
3123828 ERROR 2025-11-21 07:55:24298 ExternalApiUtil:318 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3123828 ERROR 2025-11-21 07:55:24298 ExternalApiUtil:319 - EXTERNAL API: Student ID: 1002
3123829 ERROR 2025-11-21 07:55:24299 ExternalApiUtil:320 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
3123829 ERROR 2025-11-21 07:55:24299 ExternalApiUtil:321 - EXTERNAL API: Error: Connection refused (Connection refused)
3123830 ERROR 2025-11-21 07:55:24300 ExternalApiUtil:322 - EXTERNAL API: Exception: java.net.ConnectException
3123830 ERROR 2025-11-21 07:55:24300 ExternalApiUtil:323 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3123831 ERROR 2025-11-21 07:55:24301 ExternalApiUtil:324 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:210)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:140)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
3123846 INFO  2025-11-21 07:55:24316 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
3132204 INFO  2025-11-21 07:55:32674 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,264,10.244.175.186,10,35,12,5,11110,2,0,0
3132213 INFO  2025-11-21 07:55:32683 DownloadProcess:59 - get cmd list over and begin contact:0
3132219 INFO  2025-11-21 07:55:32689 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,264,10.244.175.186,10,35,12,5,11110,2,0,0
3149985 INFO  2025-11-21 07:55:50455 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3149988 INFO  2025-11-21 07:55:50458 DownloadProcess:59 - get cmd list over and begin contact:0
3170980 INFO  2025-11-21 07:56:11450 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3170992 INFO  2025-11-21 07:56:11462 DownloadProcess:59 - get cmd list over and begin contact:0
3191855 INFO  2025-11-21 07:56:32325 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3191860 INFO  2025-11-21 07:56:32330 DownloadProcess:59 - get cmd list over and begin contact:0
3201206 INFO  2025-11-21 07:56:41676 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
3201224 INFO  2025-11-21 07:56:41694 UploadProcess:266 - update device stamp end and get stream.
3201226 INFO  2025-11-21 07:56:41696 UploadProcess:323 - data:1002	2025-11-22 03:56:42	0	15	0	0	0	0	0	0	

3201228 INFO  2025-11-21 07:56:41698 UploadProcess:324 - end get stream and process data
3201230 INFO  2025-11-21 07:56:41700 UploadProcess:523 - begin parse op attlog
3201243 INFO  2025-11-21 07:56:41713 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
3201244 INFO  2025-11-21 07:56:41714 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
3201354 INFO  2025-11-21 07:56:41824 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 03:56:42
3201356 INFO  2025-11-21 07:56:41826 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
3201358 INFO  2025-11-21 07:56:41828 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3201359 INFO  2025-11-21 07:56:41829 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
3201360 INFO  2025-11-21 07:56:41830 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3201362 INFO  2025-11-21 07:56:41832 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
3201368 INFO  2025-11-21 07:56:41838 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 03:56:42
3201372 INFO  2025-11-21 07:56:41842 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
3201374 INFO  2025-11-21 07:56:41844 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3201375 INFO  2025-11-21 07:56:41845 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
3201378 INFO  2025-11-21 07:56:41848 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
3201381 INFO  2025-11-21 07:56:41851 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 03:56:42
3201384 INFO  2025-11-21 07:56:41854 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
3201386 INFO  2025-11-21 07:56:41856 UploadProcess:412 - attlog size:1
3201388 INFO  2025-11-21 07:56:41858 UploadProcess:525 - end parse op attlog
3201394 INFO  2025-11-21 07:56:41864 UploadProcess:327 - end process data and return msg to device
3201385 INFO  2025-11-21 07:56:41855 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
3201398 INFO  2025-11-21 07:56:41868 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3201399 INFO  2025-11-21 07:56:41869 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
3201400 INFO  2025-11-21 07:56:41870 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3201400 INFO  2025-11-21 07:56:41870 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
3201401 INFO  2025-11-21 07:56:41871 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
3201401 INFO  2025-11-21 07:56:41871 ExternalApiUtil:177 - EXTERNAL API: Method: POST
3201402 INFO  2025-11-21 07:56:41872 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:56:41 EAT 2025
3201402 INFO  2025-11-21 07:56:41872 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
3201403 INFO  2025-11-21 07:56:41873 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
3201404 INFO  2025-11-21 07:56:41874 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
3201404 INFO  2025-11-21 07:56:41874 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 10:56 - Meal type determined: mid-morning
3201405 INFO  2025-11-21 07:56:41875 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "mid-morning"}
3201405 INFO  2025-11-21 07:56:41875 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
3201396 INFO  2025-11-21 07:56:41866 UploadProcess:331 - return msg to device and request over OK
3201412 INFO  2025-11-21 07:56:41882 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
3201414 INFO  2025-11-21 07:56:41884 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3201414 INFO  2025-11-21 07:56:41884 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
3201415 INFO  2025-11-21 07:56:41885 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3201829 INFO  2025-11-21 07:56:42299 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3201830 INFO  2025-11-21 07:56:42300 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
3201831 INFO  2025-11-21 07:56:42301 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3201832 INFO  2025-11-21 07:56:42302 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
3201837 INFO  2025-11-21 07:56:42307 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3201838 INFO  2025-11-21 07:56:42308 ExternalApiUtil:281 - âœ… EXTERNAL API CALL SUCCESSFUL
3201841 INFO  2025-11-21 07:56:42311 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3201843 INFO  2025-11-21 07:56:42313 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1002 (original: 1002)
3202104 INFO  2025-11-21 07:56:42574 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 201
3202111 INFO  2025-11-21 07:56:42581 ExternalApiUtil:285 - EXTERNAL API: API Response Success: true
3202115 INFO  2025-11-21 07:56:42585 ExternalApiUtil:286 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"121db0f7-f36f-418c-a49a-b50965dda96a","student_id":"1002","student_name":"Aaron Kailikia","admission_no":"1002","meal_type":"mid-morning","amount":0.0,"date":"2025-11-21T10:56:42.071437+03:00","status":"authorized","qr_code":"1002-mid-morning-2025-11-21-1763711802071","student_image":"/api/uploads/students/1002.png","created_at":"2025-11-21T10:56:42.070993+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
3202117 INFO  2025-11-21 07:56:42587 ExternalApiUtil:287 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3202155 INFO  2025-11-21 07:56:42625 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1002
3216030 INFO  2025-11-21 07:56:56500 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,265,10.244.175.186,10,35,12,5,11110,2,0,0
3216036 INFO  2025-11-21 07:56:56506 DownloadProcess:59 - get cmd list over and begin contact:0
3216037 INFO  2025-11-21 07:56:56507 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,265,10.244.175.186,10,35,12,5,11110,2,0,0
3232740 INFO  2025-11-21 07:57:13210 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
3232781 INFO  2025-11-21 07:57:13251 UploadProcess:266 - update device stamp end and get stream.
3232783 INFO  2025-11-21 07:57:13253 UploadProcess:323 - data:1001	2025-11-22 03:57:13	0	15	0	0	0	0	0	0	

3232783 INFO  2025-11-21 07:57:13253 UploadProcess:324 - end get stream and process data
3232784 INFO  2025-11-21 07:57:13254 UploadProcess:523 - begin parse op attlog
3232796 INFO  2025-11-21 07:57:13266 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
3232796 INFO  2025-11-21 07:57:13266 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
3232797 INFO  2025-11-21 07:57:13267 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1001, User Name: boaz, Timestamp: 2025-11-22 03:57:13
3232797 INFO  2025-11-21 07:57:13267 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1001
3232798 INFO  2025-11-21 07:57:13268 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3232798 INFO  2025-11-21 07:57:13268 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
3232799 INFO  2025-11-21 07:57:13269 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3232799 INFO  2025-11-21 07:57:13269 ExternalApiUtil:123 - EXTERNAL API: User ID: 1001
3232800 INFO  2025-11-21 07:57:13270 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 03:57:13
3232801 INFO  2025-11-21 07:57:13271 ExternalApiUtil:125 - EXTERNAL API: User Name: boaz
3232801 INFO  2025-11-21 07:57:13271 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3232802 INFO  2025-11-21 07:57:13272 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1001
3232802 INFO  2025-11-21 07:57:13272 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1001
3232805 INFO  2025-11-21 07:57:13275 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1001, Timestamp: 2025-11-22 03:57:13
3232807 INFO  2025-11-21 07:57:13277 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
3232807 INFO  2025-11-21 07:57:13277 UploadProcess:412 - attlog size:1
3232807 INFO  2025-11-21 07:57:13277 UploadProcess:525 - end parse op attlog
3232808 INFO  2025-11-21 07:57:13278 UploadProcess:327 - end process data and return msg to device
3232806 INFO  2025-11-21 07:57:13276 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1001
3232809 INFO  2025-11-21 07:57:13279 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3232810 INFO  2025-11-21 07:57:13280 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
3232810 INFO  2025-11-21 07:57:13280 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3232810 INFO  2025-11-21 07:57:13280 ExternalApiUtil:175 - EXTERNAL API: User ID: 1001
3232811 INFO  2025-11-21 07:57:13281 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
3232812 INFO  2025-11-21 07:57:13282 ExternalApiUtil:177 - EXTERNAL API: Method: POST
3232812 INFO  2025-11-21 07:57:13282 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 10:57:13 EAT 2025
3232813 INFO  2025-11-21 07:57:13283 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
3232813 INFO  2025-11-21 07:57:13283 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
3232813 INFO  2025-11-21 07:57:13283 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1001, Formatted: 1001
3232814 INFO  2025-11-21 07:57:13284 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 10:57 - Meal type determined: mid-morning
3232814 INFO  2025-11-21 07:57:13284 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1001", "meal_type": "mid-morning"}
3232814 INFO  2025-11-21 07:57:13284 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
3232808 INFO  2025-11-21 07:57:13278 UploadProcess:331 - return msg to device and request over OK
3232818 INFO  2025-11-21 07:57:13288 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
3232818 INFO  2025-11-21 07:57:13288 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3232819 INFO  2025-11-21 07:57:13289 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
3232819 INFO  2025-11-21 07:57:13289 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3233129 INFO  2025-11-21 07:57:13599 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3233129 INFO  2025-11-21 07:57:13599 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
3233130 INFO  2025-11-21 07:57:13600 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3233131 INFO  2025-11-21 07:57:13601 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
3233131 INFO  2025-11-21 07:57:13601 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3233132 INFO  2025-11-21 07:57:13602 ExternalApiUtil:281 - âœ… EXTERNAL API CALL SUCCESSFUL
3233133 INFO  2025-11-21 07:57:13603 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3233133 INFO  2025-11-21 07:57:13603 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1001 (original: 1001)
3233134 INFO  2025-11-21 07:57:13604 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 201
3233134 INFO  2025-11-21 07:57:13604 ExternalApiUtil:285 - EXTERNAL API: API Response Success: true
3233135 INFO  2025-11-21 07:57:13605 ExternalApiUtil:286 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"d3d1f688-0a83-45f9-9fd5-d7843560e004","student_id":"1001","student_name":"Boaz Omare","admission_no":"1001","meal_type":"mid-morning","amount":0.0,"date":"2025-11-21T10:57:13.332655+03:00","status":"authorized","qr_code":"1001-mid-morning-2025-11-21-1763711833333","student_image":"/api/uploads/students/1001.png","created_at":"2025-11-21T10:57:13.331988+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1001","name":"Boaz Omare","class_name":"12","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"4a5093ca-992c-4c25-8994-d0109681be50","face_registered":false,"face_image":"/api/uploads/students/1001.png","created_at":"2025-11-17T10:32:08.395587+03:00"}}
3233135 INFO  2025-11-21 07:57:13605 ExternalApiUtil:287 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3233197 INFO  2025-11-21 07:57:13667 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1001
3240058 INFO  2025-11-21 07:57:20528 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,266,10.244.175.186,10,35,12,5,11110,2,0,0
3240134 INFO  2025-11-21 07:57:20604 DownloadProcess:59 - get cmd list over and begin contact:0
3240136 INFO  2025-11-21 07:57:20606 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,266,10.244.175.186,10,35,12,5,11110,2,0,0
3266158 INFO  2025-11-21 07:57:46628 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3266218 INFO  2025-11-21 07:57:46688 DownloadProcess:59 - get cmd list over and begin contact:0
3294551 INFO  2025-11-21 07:58:1521 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3294553 INFO  2025-11-21 07:58:1523 DownloadProcess:59 - get cmd list over and begin contact:0
3323126 INFO  2025-11-21 07:58:43596 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3323131 INFO  2025-11-21 07:58:43601 DownloadProcess:59 - get cmd list over and begin contact:0
3353977 INFO  2025-11-21 07:59:14447 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3353979 INFO  2025-11-21 07:59:14449 DownloadProcess:59 - get cmd list over and begin contact:0
3384139 INFO  2025-11-21 07:59:44609 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3384143 INFO  2025-11-21 07:59:44613 DownloadProcess:59 - get cmd list over and begin contact:0
3415799 INFO  2025-11-21 08:00:16269 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3415802 INFO  2025-11-21 08:00:16272 DownloadProcess:59 - get cmd list over and begin contact:0
3445338 INFO  2025-11-21 08:00:45808 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3445340 INFO  2025-11-21 08:00:45810 DownloadProcess:59 - get cmd list over and begin contact:0
3476412 INFO  2025-11-21 08:01:16882 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3476415 INFO  2025-11-21 08:01:16885 DownloadProcess:59 - get cmd list over and begin contact:0
3506946 INFO  2025-11-21 08:01:47416 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3506955 INFO  2025-11-21 08:01:47425 DownloadProcess:59 - get cmd list over and begin contact:0
3537125 INFO  2025-11-21 08:02:17595 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3537170 INFO  2025-11-21 08:02:17640 DownloadProcess:59 - get cmd list over and begin contact:0
3567195 INFO  2025-11-21 08:02:47665 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3567198 INFO  2025-11-21 08:02:47668 DownloadProcess:59 - get cmd list over and begin contact:0
3598171 INFO  2025-11-21 08:03:18641 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3598174 INFO  2025-11-21 08:03:18644 DownloadProcess:59 - get cmd list over and begin contact:0
3628769 INFO  2025-11-21 08:03:49239 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3628774 INFO  2025-11-21 08:03:49244 DownloadProcess:59 - get cmd list over and begin contact:0
3659114 INFO  2025-11-21 08:04:19584 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3659126 INFO  2025-11-21 08:04:19596 DownloadProcess:59 - get cmd list over and begin contact:0
3689190 INFO  2025-11-21 08:04:49660 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3689194 INFO  2025-11-21 08:04:49664 DownloadProcess:59 - get cmd list over and begin contact:0
3720484 INFO  2025-11-21 08:05:20954 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3720487 INFO  2025-11-21 08:05:20957 DownloadProcess:59 - get cmd list over and begin contact:0
3750114 INFO  2025-11-21 08:05:50584 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3750116 INFO  2025-11-21 08:05:50586 DownloadProcess:59 - get cmd list over and begin contact:0
3781059 INFO  2025-11-21 08:06:21529 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3781061 INFO  2025-11-21 08:06:21531 DownloadProcess:59 - get cmd list over and begin contact:0
3811695 INFO  2025-11-21 08:06:52165 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3811701 INFO  2025-11-21 08:06:52171 DownloadProcess:59 - get cmd list over and begin contact:0
3842415 INFO  2025-11-21 08:07:22885 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3842426 INFO  2025-11-21 08:07:22896 DownloadProcess:59 - get cmd list over and begin contact:0
3872082 INFO  2025-11-21 08:07:52552 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3872085 INFO  2025-11-21 08:07:52555 DownloadProcess:59 - get cmd list over and begin contact:0
19646 INFO  2025-11-21 08:54:10445 UploadProcess:63 - get request and make the device options :192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&options=all&language=69&pushver=2.4.1&DeviceType=att&PushOptionsFlag=1
20143 INFO  2025-11-21 08:54:10942 ConfigUtil:20 - Loading config from: /usr/local/tomcat/webapps/ROOT/WEB-INF/classes/config.xml
20145 INFO  2025-11-21 08:54:10944 ConfigUtil:25 - Config.xml loaded successfully
20662 INFO  2025-11-21 08:54:11461 BaseDao:101 - jdbc:mysql://mysql:3306/pushdemo?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true user:root pass:root
21827 INFO  2025-11-21 08:54:12626 BaseDao:101 - jdbc:mysql://mysql:3306/pushdemo?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true user:root pass:root
27718 INFO  2025-11-21 08:54:18517 UploadProcess:90 - GET OPTION FROM: TDBD250100333
ATTLOGStamp=9999
OPERLOGStamp=0
ATTPHOTOStamp=0
BIODATAStamp=0
IDCARDStamp=0
ERRORLOGStamp=0
TransFlag=TransData AttLog	OpLog	AttPhoto	EnrollUser	ChgUser	EnrollFP	ChgFP	FPImag	FACE	UserPic	BioPhoto
ErrorDelay=60
Delay=30
transTimes=00:00;14:05
TransInterval=1
Realtime=1
Encrypt=0
ServerVer=2.2.14
TimeZone=1200

28487 INFO  2025-11-21 08:54:19286 UploadProcess:63 - get request and make the device options :192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&options=all&language=69&pushver=2.4.1&DeviceType=att&PushOptionsFlag=1
28836 INFO  2025-11-21 08:54:19635 UploadProcess:90 - GET OPTION FROM: TDBD250100333
ATTLOGStamp=9999
OPERLOGStamp=0
ATTPHOTOStamp=0
BIODATAStamp=0
IDCARDStamp=0
ERRORLOGStamp=0
TransFlag=TransData AttLog	OpLog	AttPhoto	EnrollUser	ChgUser	EnrollFP	ChgFP	FPImag	FACE	UserPic	BioPhoto
ErrorDelay=60
Delay=30
transTimes=00:00;14:05
TransInterval=1
Realtime=1
Encrypt=0
ServerVer=2.2.14
TimeZone=1200

31304 INFO  2025-11-21 08:54:22103 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,274,10.244.175.186,10,35,12,5,11110,3,0,0
31388 INFO  2025-11-21 08:54:22187 DownloadProcess:59 - get cmd list over and begin contact:0
31390 INFO  2025-11-21 08:54:22189 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,274,10.244.175.186,10,35,12,5,11110,3,0,0
32618 INFO  2025-11-21 08:54:23417 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=OPERLOG&Stamp=9999
32743 INFO  2025-11-21 08:54:23542 UploadProcess:266 - update device stamp end and get stream.
32793 INFO  2025-11-21 08:54:23592 UploadProcess:323 - data:USER PIN=1002	Name=kailikia AARON	Pri=14	Passwd=	Card=2648135	Grp=1	TZ=0000000100000000	Verify=-1	ViceCard=	StartDatetime=0	EndDatetime=0

32805 INFO  2025-11-21 08:54:23604 UploadProcess:324 - end get stream and process data
32824 INFO  2025-11-21 08:54:23623 UploadProcess:482 - begin parse op user
32827 INFO  2025-11-21 08:54:23626 UploadProcess:275 - user data:
USER PIN=1002	Name=kailikia AARON	Pri=14	Passwd=	Card=2648135	Grp=1	TZ=0000000100000000	Verify=-1	ViceCard=	StartDatetime=0	EndDatetime=0
33412 ERROR 2025-11-21 08:54:24211 UserInfoDao:237 - java.sql.BatchUpdateException: Duplicate entry '1002-TDBD250100333' for key 'user_info.USER_PIN'
33484 INFO  2025-11-21 08:54:24283 UploadProcess:289 - user size:USER PIN=1002	Name=kailikia AARON	Pri=14	Passwd=	Card=2648135	Grp=1	TZ=0000000100000000	Verify=-1	ViceCard=	StartDatetime=0	EndDatetime=0
33489 INFO  2025-11-21 08:54:24288 UploadProcess:484 - end parse op user
33495 INFO  2025-11-21 08:54:24294 UploadProcess:327 - end process data and return msg to device
33622 INFO  2025-11-21 08:54:24421 UploadProcess:331 - return msg to device and request over OK
35112 INFO  2025-11-21 08:54:25911 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
35568 INFO  2025-11-21 08:54:26367 UploadProcess:266 - update device stamp end and get stream.
35580 INFO  2025-11-21 08:54:26379 UploadProcess:323 - data:1002	2025-11-22 04:12:00	0	15	0	0	0	0	0	0	
1002	2025-11-22 07:13:14	0	15	0	0	0	0	0	0	
1002	2025-11-21 11:15:46	0	15	0	0	0	0	0	0	
1002	2025-11-21 11:31:30	0	15	0	0	0	0	0	0	
1002	2025-11-21 11:33:39	0	4	0	0	0	0	0	0	
1002	2025-11-21 11:35:36	0	4	0	0	0	0	0	0	
1002	2025-11-21 11:37:26	0	4	0	0	0	0	0	0	
1002	2025-11-21 11:42:36	0	4	0	0	0	0	0	0	

35587 INFO  2025-11-21 08:54:26386 UploadProcess:324 - end get stream and process data
35590 INFO  2025-11-21 08:54:26389 UploadProcess:523 - begin parse op attlog
35716 INFO  2025-11-21 08:54:26515 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
35730 INFO  2025-11-21 08:54:26529 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
35781 INFO  2025-11-21 08:54:26580 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 04:12:00
35793 INFO  2025-11-21 08:54:26592 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
35831 INFO  2025-11-21 08:54:26630 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
35842 INFO  2025-11-21 08:54:26641 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
35845 INFO  2025-11-21 08:54:26644 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
35885 INFO  2025-11-21 08:54:26684 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
35888 INFO  2025-11-21 08:54:26687 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 04:12:00
35892 INFO  2025-11-21 08:54:26691 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
35904 INFO  2025-11-21 08:54:26703 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
35914 INFO  2025-11-21 08:54:26713 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
35921 INFO  2025-11-21 08:54:26720 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
35922 INFO  2025-11-21 08:54:26721 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
35925 INFO  2025-11-21 08:54:26724 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
35925 INFO  2025-11-21 08:54:26724 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 04:12:00
35929 INFO  2025-11-21 08:54:26728 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
35931 INFO  2025-11-21 08:54:26730 UploadProcess:412 - attlog size:1
35933 INFO  2025-11-21 08:54:26732 UploadProcess:525 - end parse op attlog
35929 INFO  2025-11-21 08:54:26728 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
35937 INFO  2025-11-21 08:54:26736 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
35953 INFO  2025-11-21 08:54:26752 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
35935 INFO  2025-11-21 08:54:26734 UploadProcess:523 - begin parse op attlog
35956 INFO  2025-11-21 08:54:26755 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
35964 INFO  2025-11-21 08:54:26763 ExternalApiUtil:177 - EXTERNAL API: Method: POST
35992 INFO  2025-11-21 08:54:26791 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 11:54:26 EAT 2025
35994 INFO  2025-11-21 08:54:26793 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
36190 INFO  2025-11-21 08:54:26989 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
36203 INFO  2025-11-21 08:54:272 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
36216 INFO  2025-11-21 08:54:2715 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
36232 INFO  2025-11-21 08:54:2731 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 07:13:14
36236 INFO  2025-11-21 08:54:2735 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
36247 INFO  2025-11-21 08:54:2746 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
36231 INFO  2025-11-21 08:54:2730 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
36258 INFO  2025-11-21 08:54:2757 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
36264 INFO  2025-11-21 08:54:2763 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
36260 INFO  2025-11-21 08:54:2759 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 11:54 - Meal type determined: lunch
36271 INFO  2025-11-21 08:54:2770 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
36282 INFO  2025-11-21 08:54:2781 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
36268 INFO  2025-11-21 08:54:2767 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
36385 INFO  2025-11-21 08:54:27184 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 07:13:14
36387 INFO  2025-11-21 08:54:27186 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
36389 INFO  2025-11-21 08:54:27188 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
36394 INFO  2025-11-21 08:54:27193 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
36403 ERROR 2025-11-21 08:54:27202 ExternalApiUtil:316 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
36406 INFO  2025-11-21 08:54:27205 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
36409 INFO  2025-11-21 08:54:27208 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
36406 INFO  2025-11-21 08:54:27205 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
36416 INFO  2025-11-21 08:54:27215 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
36419 INFO  2025-11-21 08:54:27218 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
36407 ERROR 2025-11-21 08:54:27206 ExternalApiUtil:317 - âŒ EXTERNAL API CALL FAILED
36422 INFO  2025-11-21 08:54:27221 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
36417 INFO  2025-11-21 08:54:27216 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 07:13:14
36430 INFO  2025-11-21 08:54:27229 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
36457 INFO  2025-11-21 08:54:27256 UploadProcess:412 - attlog size:1
36429 INFO  2025-11-21 08:54:27228 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
36507 INFO  2025-11-21 08:54:27306 ExternalApiUtil:177 - EXTERNAL API: Method: POST
36422 ERROR 2025-11-21 08:54:27221 ExternalApiUtil:318 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
36524 ERROR 2025-11-21 08:54:27323 ExternalApiUtil:319 - EXTERNAL API: Student ID: 1002
36520 INFO  2025-11-21 08:54:27319 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 11:54:27 EAT 2025
36539 INFO  2025-11-21 08:54:27338 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
36504 INFO  2025-11-21 08:54:27303 UploadProcess:525 - end parse op attlog
36531 ERROR 2025-11-21 08:54:27330 ExternalApiUtil:320 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
36754 ERROR 2025-11-21 08:54:27553 ExternalApiUtil:321 - EXTERNAL API: Error: Connection refused (Connection refused)
36623 INFO  2025-11-21 08:54:27422 UploadProcess:523 - begin parse op attlog
36595 INFO  2025-11-21 08:54:27394 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
36956 INFO  2025-11-21 08:54:27755 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
36958 INFO  2025-11-21 08:54:27757 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 11:54 - Meal type determined: lunch
36998 INFO  2025-11-21 08:54:27797 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
37007 INFO  2025-11-21 08:54:27806 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
36868 ERROR 2025-11-21 08:54:27667 ExternalApiUtil:322 - EXTERNAL API: Exception: java.net.ConnectException
37660 ERROR 2025-11-21 08:54:28459 ExternalApiUtil:323 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
37593 ERROR 2025-11-21 08:54:28392 ExternalApiUtil:316 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
37790 INFO  2025-11-21 08:54:28589 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
37894 INFO  2025-11-21 08:54:28693 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
37903 INFO  2025-11-21 08:54:28702 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-21 11:15:46
37844 ERROR 2025-11-21 08:54:28643 ExternalApiUtil:317 - âŒ EXTERNAL API CALL FAILED
37915 INFO  2025-11-21 08:54:28714 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
37916 ERROR 2025-11-21 08:54:28715 ExternalApiUtil:318 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
37923 ERROR 2025-11-21 08:54:28722 ExternalApiUtil:319 - EXTERNAL API: Student ID: 1002
37920 ERROR 2025-11-21 08:54:28719 ExternalApiUtil:324 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:210)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:140)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
37919 INFO  2025-11-21 08:54:28718 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
37986 INFO  2025-11-21 08:54:28785 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
37926 ERROR 2025-11-21 08:54:28725 ExternalApiUtil:320 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
38007 ERROR 2025-11-21 08:54:28806 ExternalApiUtil:321 - EXTERNAL API: Error: Connection refused (Connection refused)
38009 ERROR 2025-11-21 08:54:28808 ExternalApiUtil:322 - EXTERNAL API: Exception: java.net.ConnectException
38005 INFO  2025-11-21 08:54:28804 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
38018 ERROR 2025-11-21 08:54:28817 ExternalApiUtil:323 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
38021 INFO  2025-11-21 08:54:28820 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
38086 INFO  2025-11-21 08:54:28885 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-21 11:15:46
38027 ERROR 2025-11-21 08:54:28826 ExternalApiUtil:324 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:210)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:140)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
38089 INFO  2025-11-21 08:54:28888 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
38154 INFO  2025-11-21 08:54:28953 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
38168 INFO  2025-11-21 08:54:28967 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
38170 INFO  2025-11-21 08:54:28969 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
38171 INFO  2025-11-21 08:54:28970 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
38176 INFO  2025-11-21 08:54:28975 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
38183 INFO  2025-11-21 08:54:28982 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
38184 INFO  2025-11-21 08:54:28983 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
38185 INFO  2025-11-21 08:54:28984 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
38186 INFO  2025-11-21 08:54:28985 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
38186 INFO  2025-11-21 08:54:28985 ExternalApiUtil:177 - EXTERNAL API: Method: POST
38175 INFO  2025-11-21 08:54:28974 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-21 11:15:46
38190 INFO  2025-11-21 08:54:28989 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
44783 INFO  2025-11-21 08:54:35582 UploadProcess:412 - attlog size:1
44817 INFO  2025-11-21 08:54:35616 UploadProcess:525 - end parse op attlog
38187 INFO  2025-11-21 08:54:28986 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 11:54:28 EAT 2025
45591 INFO  2025-11-21 08:54:36390 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
45454 INFO  2025-11-21 08:54:36253 UploadProcess:523 - begin parse op attlog
45665 INFO  2025-11-21 08:54:36464 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
46167 INFO  2025-11-21 08:54:36966 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
46242 INFO  2025-11-21 08:54:3741 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 11:54 - Meal type determined: lunch
46336 INFO  2025-11-21 08:54:37135 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
46718 INFO  2025-11-21 08:54:37517 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
46720 INFO  2025-11-21 08:54:37519 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
46744 ERROR 2025-11-21 08:54:37543 ExternalApiUtil:316 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
46766 ERROR 2025-11-21 08:54:37565 ExternalApiUtil:317 - âŒ EXTERNAL API CALL FAILED
46797 ERROR 2025-11-21 08:54:37596 ExternalApiUtil:318 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
46804 ERROR 2025-11-21 08:54:37603 ExternalApiUtil:319 - EXTERNAL API: Student ID: 1002
46913 ERROR 2025-11-21 08:54:37712 ExternalApiUtil:320 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
46930 ERROR 2025-11-21 08:54:37729 ExternalApiUtil:321 - EXTERNAL API: Error: Connection refused (Connection refused)
46933 INFO  2025-11-21 08:54:37732 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
46946 ERROR 2025-11-21 08:54:37745 ExternalApiUtil:322 - EXTERNAL API: Exception: java.net.ConnectException
46958 ERROR 2025-11-21 08:54:37757 ExternalApiUtil:323 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
46967 ERROR 2025-11-21 08:54:37766 ExternalApiUtil:324 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:210)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:140)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
47099 INFO  2025-11-21 08:54:37898 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
47135 INFO  2025-11-21 08:54:37934 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
47143 INFO  2025-11-21 08:54:37942 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
47152 INFO  2025-11-21 08:54:37951 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-21 11:31:30
47162 INFO  2025-11-21 08:54:37961 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
47165 INFO  2025-11-21 08:54:37964 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
47207 INFO  2025-11-21 08:54:386 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
47219 INFO  2025-11-21 08:54:3818 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
47225 INFO  2025-11-21 08:54:3824 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
47287 INFO  2025-11-21 08:54:3886 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-21 11:31:30
47290 INFO  2025-11-21 08:54:3889 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
47291 INFO  2025-11-21 08:54:3890 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
47743 INFO  2025-11-21 08:54:38542 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
47762 INFO  2025-11-21 08:54:38561 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
47766 INFO  2025-11-21 08:54:38565 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-21 11:31:30
47773 INFO  2025-11-21 08:54:38572 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
47785 INFO  2025-11-21 08:54:38584 UploadProcess:412 - attlog size:1
47788 INFO  2025-11-21 08:54:38587 UploadProcess:525 - end parse op attlog
47800 INFO  2025-11-21 08:54:38599 UploadProcess:523 - begin parse op attlog
47765 INFO  2025-11-21 08:54:38564 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
47808 INFO  2025-11-21 08:54:38607 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
47816 INFO  2025-11-21 08:54:38615 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
47819 INFO  2025-11-21 08:54:38618 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
47823 INFO  2025-11-21 08:54:38622 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
47826 INFO  2025-11-21 08:54:38625 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
47829 INFO  2025-11-21 08:54:38628 ExternalApiUtil:177 - EXTERNAL API: Method: POST
47831 INFO  2025-11-21 08:54:38630 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 11:54:38 EAT 2025
47838 INFO  2025-11-21 08:54:38637 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
47839 INFO  2025-11-21 08:54:38638 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
47842 INFO  2025-11-21 08:54:38641 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
47843 INFO  2025-11-21 08:54:38642 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 11:54 - Meal type determined: lunch
47843 INFO  2025-11-21 08:54:38642 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
47863 INFO  2025-11-21 08:54:38662 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
47874 ERROR 2025-11-21 08:54:38673 ExternalApiUtil:316 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
47876 ERROR 2025-11-21 08:54:38675 ExternalApiUtil:317 - âŒ EXTERNAL API CALL FAILED
47878 ERROR 2025-11-21 08:54:38677 ExternalApiUtil:318 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
47878 ERROR 2025-11-21 08:54:38677 ExternalApiUtil:319 - EXTERNAL API: Student ID: 1002
47879 ERROR 2025-11-21 08:54:38678 ExternalApiUtil:320 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
47881 ERROR 2025-11-21 08:54:38680 ExternalApiUtil:321 - EXTERNAL API: Error: Connection refused (Connection refused)
47886 ERROR 2025-11-21 08:54:38685 ExternalApiUtil:322 - EXTERNAL API: Exception: java.net.ConnectException
47887 ERROR 2025-11-21 08:54:38686 ExternalApiUtil:323 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
47888 ERROR 2025-11-21 08:54:38687 ExternalApiUtil:324 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:210)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:140)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
47907 INFO  2025-11-21 08:54:38706 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
48307 INFO  2025-11-21 08:54:39106 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
48309 INFO  2025-11-21 08:54:39108 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-21 11:33:39
48310 INFO  2025-11-21 08:54:39109 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
48311 INFO  2025-11-21 08:54:39110 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
48314 INFO  2025-11-21 08:54:39113 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
48317 INFO  2025-11-21 08:54:39116 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
48320 INFO  2025-11-21 08:54:39119 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
48325 INFO  2025-11-21 08:54:39124 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-21 11:33:39
48329 INFO  2025-11-21 08:54:39128 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
48339 INFO  2025-11-21 08:54:39138 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
48346 INFO  2025-11-21 08:54:39145 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
48459 INFO  2025-11-21 08:54:39258 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
48470 INFO  2025-11-21 08:54:39269 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-21 11:33:39
48486 INFO  2025-11-21 08:54:39285 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
48495 INFO  2025-11-21 08:54:39294 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
48521 INFO  2025-11-21 08:54:39320 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
48575 INFO  2025-11-21 08:54:39374 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
48579 INFO  2025-11-21 08:54:39378 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
48663 INFO  2025-11-21 08:54:39462 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
48495 INFO  2025-11-21 08:54:39294 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
48665 INFO  2025-11-21 08:54:39464 UploadProcess:412 - attlog size:1
48668 INFO  2025-11-21 08:54:39467 UploadProcess:525 - end parse op attlog
48671 INFO  2025-11-21 08:54:39470 UploadProcess:523 - begin parse op attlog
48664 INFO  2025-11-21 08:54:39463 ExternalApiUtil:177 - EXTERNAL API: Method: POST
48673 INFO  2025-11-21 08:54:39472 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 11:54:39 EAT 2025
48674 INFO  2025-11-21 08:54:39473 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
48675 INFO  2025-11-21 08:54:39474 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
48676 INFO  2025-11-21 08:54:39475 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
48677 INFO  2025-11-21 08:54:39476 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 11:54 - Meal type determined: lunch
48678 INFO  2025-11-21 08:54:39477 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
48682 INFO  2025-11-21 08:54:39481 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
48716 ERROR 2025-11-21 08:54:39515 ExternalApiUtil:316 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
48777 ERROR 2025-11-21 08:54:39576 ExternalApiUtil:317 - âŒ EXTERNAL API CALL FAILED
48783 ERROR 2025-11-21 08:54:39582 ExternalApiUtil:318 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
48867 ERROR 2025-11-21 08:54:39666 ExternalApiUtil:319 - EXTERNAL API: Student ID: 1002
48885 ERROR 2025-11-21 08:54:39684 ExternalApiUtil:320 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
48756 INFO  2025-11-21 08:54:39555 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
48896 ERROR 2025-11-21 08:54:39695 ExternalApiUtil:321 - EXTERNAL API: Error: Connection refused (Connection refused)
48900 ERROR 2025-11-21 08:54:39699 ExternalApiUtil:322 - EXTERNAL API: Exception: java.net.ConnectException
49039 ERROR 2025-11-21 08:54:39838 ExternalApiUtil:323 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
49058 ERROR 2025-11-21 08:54:39857 ExternalApiUtil:324 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:210)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:140)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
48862 INFO  2025-11-21 08:54:39661 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
49088 INFO  2025-11-21 08:54:39887 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
49093 INFO  2025-11-21 08:54:39892 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-21 11:35:36
49095 INFO  2025-11-21 08:54:39894 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
49104 INFO  2025-11-21 08:54:39903 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
49105 INFO  2025-11-21 08:54:39904 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
49108 INFO  2025-11-21 08:54:39907 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
49115 INFO  2025-11-21 08:54:39914 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
49121 INFO  2025-11-21 08:54:39920 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-21 11:35:36
49110 INFO  2025-11-21 08:54:39909 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
49138 INFO  2025-11-21 08:54:39937 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
49148 INFO  2025-11-21 08:54:39947 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
49151 INFO  2025-11-21 08:54:39950 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
49153 INFO  2025-11-21 08:54:39952 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
49233 INFO  2025-11-21 08:54:4032 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-21 11:35:36
49254 INFO  2025-11-21 08:54:4053 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
49153 INFO  2025-11-21 08:54:39952 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
49309 INFO  2025-11-21 08:54:40108 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
49310 INFO  2025-11-21 08:54:40109 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
49311 INFO  2025-11-21 08:54:40110 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
49313 INFO  2025-11-21 08:54:40112 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
49315 INFO  2025-11-21 08:54:40114 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
49318 INFO  2025-11-21 08:54:40117 ExternalApiUtil:177 - EXTERNAL API: Method: POST
49309 INFO  2025-11-21 08:54:40108 UploadProcess:412 - attlog size:1
49325 INFO  2025-11-21 08:54:40124 UploadProcess:525 - end parse op attlog
49329 INFO  2025-11-21 08:54:40128 UploadProcess:523 - begin parse op attlog
49321 INFO  2025-11-21 08:54:40120 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 11:54:40 EAT 2025
49339 INFO  2025-11-21 08:54:40138 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
49340 INFO  2025-11-21 08:54:40139 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
49345 INFO  2025-11-21 08:54:40144 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
49345 INFO  2025-11-21 08:54:40144 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 11:54 - Meal type determined: lunch
49346 INFO  2025-11-21 08:54:40145 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
49347 INFO  2025-11-21 08:54:40146 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
49542 ERROR 2025-11-21 08:54:40341 ExternalApiUtil:316 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
49543 ERROR 2025-11-21 08:54:40342 ExternalApiUtil:317 - âŒ EXTERNAL API CALL FAILED
49543 ERROR 2025-11-21 08:54:40342 ExternalApiUtil:318 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
49575 ERROR 2025-11-21 08:54:40374 ExternalApiUtil:319 - EXTERNAL API: Student ID: 1002
49656 ERROR 2025-11-21 08:54:40455 ExternalApiUtil:320 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
49657 ERROR 2025-11-21 08:54:40456 ExternalApiUtil:321 - EXTERNAL API: Error: Connection refused (Connection refused)
49658 ERROR 2025-11-21 08:54:40457 ExternalApiUtil:322 - EXTERNAL API: Exception: java.net.ConnectException
49659 ERROR 2025-11-21 08:54:40458 ExternalApiUtil:323 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
49659 ERROR 2025-11-21 08:54:40458 ExternalApiUtil:324 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:210)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:140)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
49550 INFO  2025-11-21 08:54:40349 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
49676 INFO  2025-11-21 08:54:40475 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
49678 INFO  2025-11-21 08:54:40477 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-21 11:37:26
49679 INFO  2025-11-21 08:54:40478 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
49680 INFO  2025-11-21 08:54:40479 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
49681 INFO  2025-11-21 08:54:40480 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
49721 INFO  2025-11-21 08:54:40520 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
49748 INFO  2025-11-21 08:54:40547 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
49694 INFO  2025-11-21 08:54:40493 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
49813 INFO  2025-11-21 08:54:40612 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-21 11:37:26
49816 INFO  2025-11-21 08:54:40615 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
49818 INFO  2025-11-21 08:54:40617 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
49822 INFO  2025-11-21 08:54:40621 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
49859 INFO  2025-11-21 08:54:40658 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
49860 INFO  2025-11-21 08:54:40659 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
49861 INFO  2025-11-21 08:54:40660 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
49859 INFO  2025-11-21 08:54:40658 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
49873 INFO  2025-11-21 08:54:40672 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-21 11:37:26
49867 INFO  2025-11-21 08:54:40666 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
49876 INFO  2025-11-21 08:54:40675 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
49884 INFO  2025-11-21 08:54:40683 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
49882 INFO  2025-11-21 08:54:40681 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
49894 INFO  2025-11-21 08:54:40693 UploadProcess:412 - attlog size:1
49899 INFO  2025-11-21 08:54:40698 UploadProcess:525 - end parse op attlog
49885 INFO  2025-11-21 08:54:40684 ExternalApiUtil:177 - EXTERNAL API: Method: POST
49902 INFO  2025-11-21 08:54:40701 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 11:54:40 EAT 2025
49902 INFO  2025-11-21 08:54:40701 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
49903 INFO  2025-11-21 08:54:40702 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
49903 INFO  2025-11-21 08:54:40702 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
49904 INFO  2025-11-21 08:54:40703 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 11:54 - Meal type determined: lunch
49904 INFO  2025-11-21 08:54:40703 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
49904 INFO  2025-11-21 08:54:40703 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
49901 INFO  2025-11-21 08:54:40700 UploadProcess:523 - begin parse op attlog
49910 ERROR 2025-11-21 08:54:40709 ExternalApiUtil:316 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
49941 ERROR 2025-11-21 08:54:40740 ExternalApiUtil:317 - âŒ EXTERNAL API CALL FAILED
49942 ERROR 2025-11-21 08:54:40741 ExternalApiUtil:318 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
49942 ERROR 2025-11-21 08:54:40741 ExternalApiUtil:319 - EXTERNAL API: Student ID: 1002
49943 ERROR 2025-11-21 08:54:40742 ExternalApiUtil:320 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
49945 ERROR 2025-11-21 08:54:40744 ExternalApiUtil:321 - EXTERNAL API: Error: Connection refused (Connection refused)
49950 ERROR 2025-11-21 08:54:40749 ExternalApiUtil:322 - EXTERNAL API: Exception: java.net.ConnectException
49950 ERROR 2025-11-21 08:54:40749 ExternalApiUtil:323 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
49951 ERROR 2025-11-21 08:54:40750 ExternalApiUtil:324 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:210)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:140)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
49978 INFO  2025-11-21 08:54:40777 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
49982 INFO  2025-11-21 08:54:40781 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
49990 INFO  2025-11-21 08:54:40789 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-21 11:42:36
49994 INFO  2025-11-21 08:54:40793 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
50018 INFO  2025-11-21 08:54:40817 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
50021 INFO  2025-11-21 08:54:40820 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
50024 INFO  2025-11-21 08:54:40823 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
50020 INFO  2025-11-21 08:54:40819 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
50026 INFO  2025-11-21 08:54:40825 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
50028 INFO  2025-11-21 08:54:40827 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-21 11:42:36
50033 INFO  2025-11-21 08:54:40832 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
50036 INFO  2025-11-21 08:54:40835 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
50038 INFO  2025-11-21 08:54:40837 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
50040 INFO  2025-11-21 08:54:40839 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
50049 INFO  2025-11-21 08:54:40848 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-21 11:42:36
50041 INFO  2025-11-21 08:54:40840 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
50074 INFO  2025-11-21 08:54:40873 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
50085 INFO  2025-11-21 08:54:40884 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
50089 INFO  2025-11-21 08:54:40888 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
50104 INFO  2025-11-21 08:54:40903 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
50106 INFO  2025-11-21 08:54:40905 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
50107 INFO  2025-11-21 08:54:40906 ExternalApiUtil:177 - EXTERNAL API: Method: POST
50056 INFO  2025-11-21 08:54:40855 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
50110 INFO  2025-11-21 08:54:40909 UploadProcess:412 - attlog size:1
50107 INFO  2025-11-21 08:54:40906 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 11:54:40 EAT 2025
50112 INFO  2025-11-21 08:54:40911 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
50113 INFO  2025-11-21 08:54:40912 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
50122 INFO  2025-11-21 08:54:40921 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
50123 INFO  2025-11-21 08:54:40922 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 11:54 - Meal type determined: lunch
50123 INFO  2025-11-21 08:54:40922 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
50124 INFO  2025-11-21 08:54:40923 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
50127 ERROR 2025-11-21 08:54:40926 ExternalApiUtil:316 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
50128 ERROR 2025-11-21 08:54:40927 ExternalApiUtil:317 - âŒ EXTERNAL API CALL FAILED
50131 ERROR 2025-11-21 08:54:40930 ExternalApiUtil:318 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
50136 ERROR 2025-11-21 08:54:40935 ExternalApiUtil:319 - EXTERNAL API: Student ID: 1002
50139 ERROR 2025-11-21 08:54:40938 ExternalApiUtil:320 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
50141 ERROR 2025-11-21 08:54:40940 ExternalApiUtil:321 - EXTERNAL API: Error: Connection refused (Connection refused)
50155 ERROR 2025-11-21 08:54:40954 ExternalApiUtil:322 - EXTERNAL API: Exception: java.net.ConnectException
50155 ERROR 2025-11-21 08:54:40954 ExternalApiUtil:323 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
50156 ERROR 2025-11-21 08:54:40955 ExternalApiUtil:324 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:210)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:140)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
50111 INFO  2025-11-21 08:54:40910 UploadProcess:525 - end parse op attlog
50161 INFO  2025-11-21 08:54:40960 UploadProcess:327 - end process data and return msg to device
50168 INFO  2025-11-21 08:54:40967 UploadProcess:331 - return msg to device and request over OK
50183 INFO  2025-11-21 08:54:40982 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
50475 INFO  2025-11-21 08:54:41274 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=OPERLOG&Stamp=9999
50568 INFO  2025-11-21 08:54:41367 UploadProcess:266 - update device stamp end and get stream.
50570 INFO  2025-11-21 08:54:41369 UploadProcess:323 - data:OPLOG 4	1002	2025-11-22 04:12:34	1002	0	0	0
OPLOG 108	1002	2025-11-22 01:57:46	NTPTimeZone	0	0	0
OPLOG 108	1002	2025-11-22 07:12:59	NTPTimeZone	0	0	0
OPLOG 4	1002	2025-11-22 07:13:32	1002	0	0	0
OPLOG 108	1002	2025-11-21 13:15:07	NTPTimeZone	0	0	0
OPLOG 108	1002	2025-11-21 12:15:11	NTPTimeZone	0	0	0
OPLOG 21	1002	2025-11-21 11:15:18	TimeSet	0	0	0
OPLOG 4	1002	2025-11-21 11:33:05	1002	0	0	0

50571 INFO  2025-11-21 08:54:41370 UploadProcess:324 - end get stream and process data
50572 INFO  2025-11-21 08:54:41371 UploadProcess:474 - begin parse op log
50628 INFO  2025-11-21 08:54:41427 UploadProcess:235 - oplog size:1
50630 INFO  2025-11-21 08:54:41429 UploadProcess:476 - end parse op log
50631 INFO  2025-11-21 08:54:41430 UploadProcess:474 - begin parse op log
50678 INFO  2025-11-21 08:54:41477 UploadProcess:235 - oplog size:1
50680 INFO  2025-11-21 08:54:41479 UploadProcess:476 - end parse op log
50685 INFO  2025-11-21 08:54:41484 UploadProcess:474 - begin parse op log
50807 INFO  2025-11-21 08:54:41606 UploadProcess:235 - oplog size:1
50812 INFO  2025-11-21 08:54:41611 UploadProcess:476 - end parse op log
50817 INFO  2025-11-21 08:54:41616 UploadProcess:474 - begin parse op log
50916 INFO  2025-11-21 08:54:41715 UploadProcess:235 - oplog size:1
50916 INFO  2025-11-21 08:54:41715 UploadProcess:476 - end parse op log
50927 INFO  2025-11-21 08:54:41726 UploadProcess:474 - begin parse op log
51079 INFO  2025-11-21 08:54:41878 UploadProcess:235 - oplog size:1
51100 INFO  2025-11-21 08:54:41899 UploadProcess:476 - end parse op log
51104 INFO  2025-11-21 08:54:41903 UploadProcess:474 - begin parse op log
51143 INFO  2025-11-21 08:54:41942 UploadProcess:235 - oplog size:1
51146 INFO  2025-11-21 08:54:41945 UploadProcess:476 - end parse op log
51153 INFO  2025-11-21 08:54:41952 UploadProcess:474 - begin parse op log
51180 INFO  2025-11-21 08:54:41979 UploadProcess:235 - oplog size:1
51182 INFO  2025-11-21 08:54:41981 UploadProcess:476 - end parse op log
51190 INFO  2025-11-21 08:54:41989 UploadProcess:474 - begin parse op log
51205 INFO  2025-11-21 08:54:424 UploadProcess:235 - oplog size:1
51206 INFO  2025-11-21 08:54:425 UploadProcess:476 - end parse op log
51208 INFO  2025-11-21 08:54:427 UploadProcess:327 - end process data and return msg to device
51210 INFO  2025-11-21 08:54:429 UploadProcess:331 - return msg to device and request over OK
51838 INFO  2025-11-21 08:54:42637 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
52489 INFO  2025-11-21 08:54:43288 UploadProcess:266 - update device stamp end and get stream.
52498 INFO  2025-11-21 08:54:43297 UploadProcess:323 - data:1002	2025-11-22 04:54:42	0	4	0	0	0	0	0	0	

52552 INFO  2025-11-21 08:54:43351 UploadProcess:324 - end get stream and process data
52554 INFO  2025-11-21 08:54:43353 UploadProcess:523 - begin parse op attlog
52711 INFO  2025-11-21 08:54:43510 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
52725 INFO  2025-11-21 08:54:43524 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
52730 INFO  2025-11-21 08:54:43529 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 04:54:42
52733 INFO  2025-11-21 08:54:43532 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
52734 INFO  2025-11-21 08:54:43533 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
52739 INFO  2025-11-21 08:54:43538 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
52741 INFO  2025-11-21 08:54:43540 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
52746 INFO  2025-11-21 08:54:43545 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
52756 INFO  2025-11-21 08:54:43555 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 04:54:42
52768 INFO  2025-11-21 08:54:43567 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
52775 INFO  2025-11-21 08:54:43574 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
52818 INFO  2025-11-21 08:54:43617 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
52910 INFO  2025-11-21 08:54:43709 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
52939 INFO  2025-11-21 08:54:43738 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 04:54:42
52947 INFO  2025-11-21 08:54:43746 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
52949 INFO  2025-11-21 08:54:43748 UploadProcess:412 - attlog size:1
52950 INFO  2025-11-21 08:54:43749 UploadProcess:525 - end parse op attlog
52954 INFO  2025-11-21 08:54:43753 UploadProcess:327 - end process data and return msg to device
52971 INFO  2025-11-21 08:54:43770 UploadProcess:331 - return msg to device and request over OK
52948 INFO  2025-11-21 08:54:43747 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
53005 INFO  2025-11-21 08:54:43804 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
53006 INFO  2025-11-21 08:54:43805 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
53006 INFO  2025-11-21 08:54:43805 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,275,10.244.175.186,10,35,12,5,11110,3,0,0
53008 INFO  2025-11-21 08:54:43807 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
53010 INFO  2025-11-21 08:54:43809 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
53016 INFO  2025-11-21 08:54:43815 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
53028 INFO  2025-11-21 08:54:43827 ExternalApiUtil:177 - EXTERNAL API: Method: POST
53023 INFO  2025-11-21 08:54:43822 DownloadProcess:59 - get cmd list over and begin contact:0
53029 INFO  2025-11-21 08:54:43828 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 11:54:43 EAT 2025
53107 INFO  2025-11-21 08:54:43906 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
53113 INFO  2025-11-21 08:54:43912 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
53079 INFO  2025-11-21 08:54:43878 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,275,10.244.175.186,10,35,12,5,11110,3,0,0
53141 INFO  2025-11-21 08:54:43940 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
53314 INFO  2025-11-21 08:54:44113 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 11:54 - Meal type determined: lunch
53355 INFO  2025-11-21 08:54:44154 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
53396 INFO  2025-11-21 08:54:44195 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
53543 ERROR 2025-11-21 08:54:44342 ExternalApiUtil:316 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
53545 ERROR 2025-11-21 08:54:44344 ExternalApiUtil:317 - âŒ EXTERNAL API CALL FAILED
53550 ERROR 2025-11-21 08:54:44349 ExternalApiUtil:318 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
53552 ERROR 2025-11-21 08:54:44351 ExternalApiUtil:319 - EXTERNAL API: Student ID: 1002
53554 ERROR 2025-11-21 08:54:44353 ExternalApiUtil:320 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
53593 ERROR 2025-11-21 08:54:44392 ExternalApiUtil:321 - EXTERNAL API: Error: Connection refused (Connection refused)
53596 ERROR 2025-11-21 08:54:44395 ExternalApiUtil:322 - EXTERNAL API: Exception: java.net.ConnectException
53601 ERROR 2025-11-21 08:54:44400 ExternalApiUtil:323 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
53605 ERROR 2025-11-21 08:54:44404 ExternalApiUtil:324 - Full stack trace:
java.net.ConnectException: Connection refused (Connection refused)
	at java.net.PlainSocketImpl.socketConnect(Native Method)
	at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)
	at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)
	at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)
	at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)
	at java.net.Socket.connect(Socket.java:607)
	at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:465)
	at sun.net.www.http.HttpClient.openServer(HttpClient.java:560)
	at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
	at sun.net.www.http.HttpClient.New(HttpClient.java:341)
	at sun.net.www.http.HttpClient.New(HttpClient.java:359)
	at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:1245)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1179)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1073)
	at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:1007)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream0(HttpURLConnection.java:1359)
	at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1334)
	at com.zk.util.ExternalApiUtil.callExternalApi(ExternalApiUtil.java:210)
	at com.zk.util.ExternalApiUtil.access$100(ExternalApiUtil.java:22)
	at com.zk.util.ExternalApiUtil$1.run(ExternalApiUtil.java:140)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
53979 INFO  2025-11-21 08:54:44778 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
61023 INFO  2025-11-21 08:54:51822 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
62216 INFO  2025-11-21 08:54:5315 DownloadProcess:59 - get cmd list over and begin contact:0
70152 INFO  2025-11-21 08:55:00951 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
70284 INFO  2025-11-21 08:55:0183 DownloadProcess:59 - get cmd list over and begin contact:0
81308 INFO  2025-11-21 08:55:12107 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
81725 INFO  2025-11-21 08:55:12524 DownloadProcess:59 - get cmd list over and begin contact:0
227334 INFO  2025-11-21 08:57:38133 UploadProcess:63 - get request and make the device options :192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&options=all&language=69&pushver=2.4.1&DeviceType=att&PushOptionsFlag=1
227377 INFO  2025-11-21 08:57:38176 UploadProcess:90 - GET OPTION FROM: TDBD250100333
ATTLOGStamp=9999
OPERLOGStamp=0
ATTPHOTOStamp=0
BIODATAStamp=0
IDCARDStamp=0
ERRORLOGStamp=0
TransFlag=TransData AttLog	OpLog	AttPhoto	EnrollUser	ChgUser	EnrollFP	ChgFP	FPImag	FACE	UserPic	BioPhoto
ErrorDelay=60
Delay=30
transTimes=00:00;14:05
TransInterval=1
Realtime=1
Encrypt=0
ServerVer=2.2.14
TimeZone=1200

229420 INFO  2025-11-21 08:57:40219 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,276,10.244.175.186,10,35,12,5,11110,3,0,0
229461 INFO  2025-11-21 08:57:40260 DownloadProcess:59 - get cmd list over and begin contact:0
229462 INFO  2025-11-21 08:57:40261 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,276,10.244.175.186,10,35,12,5,11110,3,0,0
230879 INFO  2025-11-21 08:57:41678 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
230906 INFO  2025-11-21 08:57:41705 UploadProcess:266 - update device stamp end and get stream.
230911 INFO  2025-11-21 08:57:41710 UploadProcess:323 - data:1002	2025-11-22 04:56:44	0	4	0	0	0	0	0	0	

230912 INFO  2025-11-21 08:57:41711 UploadProcess:324 - end get stream and process data
230914 INFO  2025-11-21 08:57:41713 UploadProcess:523 - begin parse op attlog
230939 INFO  2025-11-21 08:57:41738 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
230941 INFO  2025-11-21 08:57:41740 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
230942 INFO  2025-11-21 08:57:41741 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 04:56:44
230944 INFO  2025-11-21 08:57:41743 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
230945 INFO  2025-11-21 08:57:41744 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
230946 INFO  2025-11-21 08:57:41745 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
230948 INFO  2025-11-21 08:57:41747 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
230949 INFO  2025-11-21 08:57:41748 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
230957 INFO  2025-11-21 08:57:41756 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 04:56:44
230961 INFO  2025-11-21 08:57:41760 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
230963 INFO  2025-11-21 08:57:41762 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
230964 INFO  2025-11-21 08:57:41763 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
230965 INFO  2025-11-21 08:57:41764 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
230967 INFO  2025-11-21 08:57:41766 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 04:56:44
230969 INFO  2025-11-21 08:57:41768 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
230970 INFO  2025-11-21 08:57:41769 UploadProcess:412 - attlog size:1
230971 INFO  2025-11-21 08:57:41770 UploadProcess:525 - end parse op attlog
230972 INFO  2025-11-21 08:57:41771 UploadProcess:327 - end process data and return msg to device
230980 INFO  2025-11-21 08:57:41779 UploadProcess:331 - return msg to device and request over OK
230967 INFO  2025-11-21 08:57:41766 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
230992 INFO  2025-11-21 08:57:41791 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
230994 INFO  2025-11-21 08:57:41793 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
230996 INFO  2025-11-21 08:57:41795 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
230998 INFO  2025-11-21 08:57:41797 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
231000 INFO  2025-11-21 08:57:41799 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
231008 INFO  2025-11-21 08:57:41807 ExternalApiUtil:177 - EXTERNAL API: Method: POST
231014 INFO  2025-11-21 08:57:41813 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 11:57:41 EAT 2025
231018 INFO  2025-11-21 08:57:41817 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
231020 INFO  2025-11-21 08:57:41819 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
231021 INFO  2025-11-21 08:57:41820 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
231022 INFO  2025-11-21 08:57:41821 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 11:57 - Meal type determined: lunch
231023 INFO  2025-11-21 08:57:41822 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
231024 INFO  2025-11-21 08:57:41823 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
231033 INFO  2025-11-21 08:57:41832 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
231034 INFO  2025-11-21 08:57:41833 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
231036 INFO  2025-11-21 08:57:41835 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
231037 INFO  2025-11-21 08:57:41836 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
231566 INFO  2025-11-21 08:57:42365 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
231566 INFO  2025-11-21 08:57:42365 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
231567 INFO  2025-11-21 08:57:42366 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
231567 INFO  2025-11-21 08:57:42366 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
231570 INFO  2025-11-21 08:57:42369 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
231571 INFO  2025-11-21 08:57:42370 ExternalApiUtil:281 - âœ… EXTERNAL API CALL SUCCESSFUL
231572 INFO  2025-11-21 08:57:42371 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
231573 INFO  2025-11-21 08:57:42372 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1002 (original: 1002)
231573 INFO  2025-11-21 08:57:42372 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 201
231574 INFO  2025-11-21 08:57:42373 ExternalApiUtil:285 - EXTERNAL API: API Response Success: true
231574 INFO  2025-11-21 08:57:42373 ExternalApiUtil:286 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"6fa399fc-89fd-467a-b461-3a7d236e96da","student_id":"1002","student_name":"Aaron Kailikia","admission_no":"1002","meal_type":"lunch","amount":0.0,"date":"2025-11-21T11:57:42.368585+03:00","status":"authorized","qr_code":"1002-lunch-2025-11-21-1763715462369","student_image":"/api/uploads/students/1002.png","created_at":"2025-11-21T11:57:42.368181+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
231576 INFO  2025-11-21 08:57:42375 ExternalApiUtil:287 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
231599 INFO  2025-11-21 08:57:42398 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1002
234385 INFO  2025-11-21 08:57:45184 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
234475 INFO  2025-11-21 08:57:45274 DownloadProcess:59 - get cmd list over and begin contact:0
243302 INFO  2025-11-21 08:57:54101 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
243344 INFO  2025-11-21 08:57:54143 DownloadProcess:59 - get cmd list over and begin contact:0
244678 INFO  2025-11-21 08:57:55477 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
244701 INFO  2025-11-21 08:57:55500 UploadProcess:266 - update device stamp end and get stream.
244731 INFO  2025-11-21 08:57:55530 UploadProcess:323 - data:1002	2025-11-22 04:57:54	0	4	0	0	0	0	0	0	

244733 INFO  2025-11-21 08:57:55532 UploadProcess:324 - end get stream and process data
244734 INFO  2025-11-21 08:57:55533 UploadProcess:523 - begin parse op attlog
244760 INFO  2025-11-21 08:57:55559 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
244761 INFO  2025-11-21 08:57:55560 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
244763 INFO  2025-11-21 08:57:55562 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 04:57:54
244764 INFO  2025-11-21 08:57:55563 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
244765 INFO  2025-11-21 08:57:55564 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
244766 INFO  2025-11-21 08:57:55565 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
244775 INFO  2025-11-21 08:57:55574 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
244777 INFO  2025-11-21 08:57:55576 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
244778 INFO  2025-11-21 08:57:55577 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 04:57:54
244781 INFO  2025-11-21 08:57:55580 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
244783 INFO  2025-11-21 08:57:55582 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
244787 INFO  2025-11-21 08:57:55586 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
244788 INFO  2025-11-21 08:57:55587 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
244791 INFO  2025-11-21 08:57:55590 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 04:57:54
244801 INFO  2025-11-21 08:57:55600 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
244915 INFO  2025-11-21 08:57:55714 UploadProcess:412 - attlog size:1
244931 INFO  2025-11-21 08:57:55730 UploadProcess:525 - end parse op attlog
244934 INFO  2025-11-21 08:57:55733 UploadProcess:327 - end process data and return msg to device
244790 INFO  2025-11-21 08:57:55589 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
244944 INFO  2025-11-21 08:57:55743 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
244945 INFO  2025-11-21 08:57:55744 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
244946 INFO  2025-11-21 08:57:55745 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
244936 INFO  2025-11-21 08:57:55735 UploadProcess:331 - return msg to device and request over OK
244946 INFO  2025-11-21 08:57:55745 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
244951 INFO  2025-11-21 08:57:55750 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
244955 INFO  2025-11-21 08:57:55754 ExternalApiUtil:177 - EXTERNAL API: Method: POST
244964 INFO  2025-11-21 08:57:55763 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 11:57:55 EAT 2025
244969 INFO  2025-11-21 08:57:55768 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
244971 INFO  2025-11-21 08:57:55770 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
244973 INFO  2025-11-21 08:57:55772 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
244975 INFO  2025-11-21 08:57:55774 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 11:57 - Meal type determined: lunch
244976 INFO  2025-11-21 08:57:55775 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
244979 INFO  2025-11-21 08:57:55778 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
245040 INFO  2025-11-21 08:57:55839 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
245041 INFO  2025-11-21 08:57:55840 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
245043 INFO  2025-11-21 08:57:55842 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
245044 INFO  2025-11-21 08:57:55843 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
245709 INFO  2025-11-21 08:57:56508 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
245710 INFO  2025-11-21 08:57:56509 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
245711 INFO  2025-11-21 08:57:56510 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
245712 INFO  2025-11-21 08:57:56511 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
245715 INFO  2025-11-21 08:57:56514 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
245716 INFO  2025-11-21 08:57:56515 ExternalApiUtil:281 - âœ… EXTERNAL API CALL SUCCESSFUL
245717 INFO  2025-11-21 08:57:56516 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
245718 INFO  2025-11-21 08:57:56517 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1002 (original: 1002)
245719 INFO  2025-11-21 08:57:56518 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 201
245720 INFO  2025-11-21 08:57:56519 ExternalApiUtil:285 - EXTERNAL API: API Response Success: true
245721 INFO  2025-11-21 08:57:56520 ExternalApiUtil:286 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"b188397f-81d6-474f-a4a1-0548ab669ca6","student_id":"1002","student_name":"Aaron Kailikia","admission_no":"1002","meal_type":"lunch","amount":0.0,"date":"2025-11-21T11:57:56.220149+03:00","status":"authorized","qr_code":"1002-lunch-2025-11-21-1763715476220","student_image":"/api/uploads/students/1002.png","created_at":"2025-11-21T11:57:56.219818+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
245722 INFO  2025-11-21 08:57:56521 ExternalApiUtil:287 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
245732 INFO  2025-11-21 08:57:56531 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1002
250206 INFO  2025-11-21 08:58:015 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,277,10.244.175.186,10,35,12,5,11110,3,0,0
250210 INFO  2025-11-21 08:58:019 DownloadProcess:59 - get cmd list over and begin contact:0
250211 INFO  2025-11-21 08:58:0110 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,277,10.244.175.186,10,35,12,5,11110,3,0,0
259191 INFO  2025-11-21 08:58:09990 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
259202 INFO  2025-11-21 08:58:101 DownloadProcess:59 - get cmd list over and begin contact:0
270281 INFO  2025-11-21 08:58:2180 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
270284 INFO  2025-11-21 08:58:2183 DownloadProcess:59 - get cmd list over and begin contact:0
282382 INFO  2025-11-21 08:58:33181 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
282385 INFO  2025-11-21 08:58:33184 DownloadProcess:59 - get cmd list over and begin contact:0
297523 INFO  2025-11-21 08:58:48322 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
297528 INFO  2025-11-21 08:58:48327 DownloadProcess:59 - get cmd list over and begin contact:0
311252 INFO  2025-11-21 08:59:0251 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
311609 INFO  2025-11-21 08:59:02408 UploadProcess:266 - update device stamp end and get stream.
311612 INFO  2025-11-21 08:59:02411 UploadProcess:323 - data:1001	2025-11-22 04:59:00	0	15	0	0	0	0	0	0	

311612 INFO  2025-11-21 08:59:02411 UploadProcess:324 - end get stream and process data
311613 INFO  2025-11-21 08:59:02412 UploadProcess:523 - begin parse op attlog
312017 INFO  2025-11-21 08:59:02816 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
312018 INFO  2025-11-21 08:59:02817 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
312019 INFO  2025-11-21 08:59:02818 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1001, User Name: boaz, Timestamp: 2025-11-22 04:59:00
312021 INFO  2025-11-21 08:59:02820 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1001
312025 INFO  2025-11-21 08:59:02824 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
312026 INFO  2025-11-21 08:59:02825 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
312027 INFO  2025-11-21 08:59:02826 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
312029 INFO  2025-11-21 08:59:02828 ExternalApiUtil:123 - EXTERNAL API: User ID: 1001
312031 INFO  2025-11-21 08:59:02830 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 04:59:00
312033 INFO  2025-11-21 08:59:02832 ExternalApiUtil:125 - EXTERNAL API: User Name: boaz
312035 INFO  2025-11-21 08:59:02834 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
312035 INFO  2025-11-21 08:59:02834 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1001
312037 INFO  2025-11-21 08:59:02836 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1001
312038 INFO  2025-11-21 08:59:02837 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1001, Timestamp: 2025-11-22 04:59:00
312040 INFO  2025-11-21 08:59:02839 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
312041 INFO  2025-11-21 08:59:02840 UploadProcess:412 - attlog size:1
312037 INFO  2025-11-21 08:59:02836 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1001
312043 INFO  2025-11-21 08:59:02842 UploadProcess:525 - end parse op attlog
312045 INFO  2025-11-21 08:59:02844 UploadProcess:327 - end process data and return msg to device
312046 INFO  2025-11-21 08:59:02845 UploadProcess:331 - return msg to device and request over OK
312045 INFO  2025-11-21 08:59:02844 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
312049 INFO  2025-11-21 08:59:02848 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
312050 INFO  2025-11-21 08:59:02849 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
312051 INFO  2025-11-21 08:59:02850 ExternalApiUtil:175 - EXTERNAL API: User ID: 1001
312056 INFO  2025-11-21 08:59:02855 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
312057 INFO  2025-11-21 08:59:02856 ExternalApiUtil:177 - EXTERNAL API: Method: POST
312058 INFO  2025-11-21 08:59:02857 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 11:59:02 EAT 2025
312059 INFO  2025-11-21 08:59:02858 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
312060 INFO  2025-11-21 08:59:02859 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
312062 INFO  2025-11-21 08:59:02861 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1001, Formatted: 1001
312063 INFO  2025-11-21 08:59:02862 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 11:59 - Meal type determined: lunch
312064 INFO  2025-11-21 08:59:02863 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1001", "meal_type": "lunch"}
312064 INFO  2025-11-21 08:59:02863 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
312068 INFO  2025-11-21 08:59:02867 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
312069 INFO  2025-11-21 08:59:02868 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
312070 INFO  2025-11-21 08:59:02869 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
312070 INFO  2025-11-21 08:59:02869 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
312482 INFO  2025-11-21 08:59:03281 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,278,10.244.175.186,10,35,12,5,11110,3,0,0
312488 INFO  2025-11-21 08:59:03287 DownloadProcess:59 - get cmd list over and begin contact:0
312490 INFO  2025-11-21 08:59:03289 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,278,10.244.175.186,10,35,12,5,11110,3,0,0
313453 INFO  2025-11-21 08:59:04252 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
313454 INFO  2025-11-21 08:59:04253 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
313455 INFO  2025-11-21 08:59:04254 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
313456 INFO  2025-11-21 08:59:04255 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
313457 INFO  2025-11-21 08:59:04256 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
313459 INFO  2025-11-21 08:59:04258 ExternalApiUtil:281 - âœ… EXTERNAL API CALL SUCCESSFUL
313459 INFO  2025-11-21 08:59:04258 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
313460 INFO  2025-11-21 08:59:04259 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1001 (original: 1001)
313461 INFO  2025-11-21 08:59:04260 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 201
313461 INFO  2025-11-21 08:59:04260 ExternalApiUtil:285 - EXTERNAL API: API Response Success: true
313462 INFO  2025-11-21 08:59:04261 ExternalApiUtil:286 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"4026d3db-08b8-4e46-978e-bcb0a464e736","student_id":"1001","student_name":"Boaz Omare","admission_no":"1001","meal_type":"lunch","amount":0.0,"date":"2025-11-21T11:59:04.390113+03:00","status":"authorized","qr_code":"1001-lunch-2025-11-21-1763715544390","student_image":"/api/uploads/students/1001.png","created_at":"2025-11-21T11:59:04.389784+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1001","name":"Boaz Omare","class_name":"12","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"4a5093ca-992c-4c25-8994-d0109681be50","face_registered":false,"face_image":"/api/uploads/students/1001.png","created_at":"2025-11-17T10:32:08.395587+03:00"}}
313464 INFO  2025-11-21 08:59:04263 ExternalApiUtil:287 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
313669 INFO  2025-11-21 08:59:04468 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1001
329301 INFO  2025-11-21 08:59:20100 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
329778 INFO  2025-11-21 08:59:20577 DownloadProcess:59 - get cmd list over and begin contact:0
347312 INFO  2025-11-21 08:59:38111 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
347321 INFO  2025-11-21 08:59:38120 DownloadProcess:59 - get cmd list over and begin contact:0
368378 INFO  2025-11-21 08:59:59177 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
368380 INFO  2025-11-21 08:59:59179 DownloadProcess:59 - get cmd list over and begin contact:0
370417 INFO  2025-11-21 09:00:01216 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
370428 INFO  2025-11-21 09:00:01227 UploadProcess:266 - update device stamp end and get stream.
370433 INFO  2025-11-21 09:00:01232 UploadProcess:323 - data:1001	2025-11-22 05:00:00	0	15	0	0	0	0	0	0	

370433 INFO  2025-11-21 09:00:01232 UploadProcess:324 - end get stream and process data
370434 INFO  2025-11-21 09:00:01233 UploadProcess:523 - begin parse op attlog
370449 INFO  2025-11-21 09:00:01248 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
370451 INFO  2025-11-21 09:00:01250 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
370454 INFO  2025-11-21 09:00:01253 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1001, User Name: boaz, Timestamp: 2025-11-22 05:00:00
370454 INFO  2025-11-21 09:00:01253 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1001
370455 INFO  2025-11-21 09:00:01254 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
370456 INFO  2025-11-21 09:00:01255 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
370457 INFO  2025-11-21 09:00:01256 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
370459 INFO  2025-11-21 09:00:01258 ExternalApiUtil:123 - EXTERNAL API: User ID: 1001
370460 INFO  2025-11-21 09:00:01259 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 05:00:00
370460 INFO  2025-11-21 09:00:01259 ExternalApiUtil:125 - EXTERNAL API: User Name: boaz
370461 INFO  2025-11-21 09:00:01260 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
370461 INFO  2025-11-21 09:00:01260 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1001
370462 INFO  2025-11-21 09:00:01261 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1001
370463 INFO  2025-11-21 09:00:01262 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1001, Timestamp: 2025-11-22 05:00:00
370464 INFO  2025-11-21 09:00:01263 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
370465 INFO  2025-11-21 09:00:01264 UploadProcess:412 - attlog size:1
370463 INFO  2025-11-21 09:00:01262 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1001
370471 INFO  2025-11-21 09:00:01270 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
370472 INFO  2025-11-21 09:00:01271 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
370473 INFO  2025-11-21 09:00:01272 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
370474 INFO  2025-11-21 09:00:01273 ExternalApiUtil:175 - EXTERNAL API: User ID: 1001
370474 INFO  2025-11-21 09:00:01273 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
370476 INFO  2025-11-21 09:00:01275 ExternalApiUtil:177 - EXTERNAL API: Method: POST
370468 INFO  2025-11-21 09:00:01267 UploadProcess:525 - end parse op attlog
370482 INFO  2025-11-21 09:00:01281 UploadProcess:327 - end process data and return msg to device
370483 INFO  2025-11-21 09:00:01282 UploadProcess:331 - return msg to device and request over OK
370481 INFO  2025-11-21 09:00:01280 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 12:00:01 EAT 2025
370487 INFO  2025-11-21 09:00:01286 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
370488 INFO  2025-11-21 09:00:01287 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
370489 INFO  2025-11-21 09:00:01288 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1001, Formatted: 1001
370490 INFO  2025-11-21 09:00:01289 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 12:00 - Meal type determined: lunch
370491 INFO  2025-11-21 09:00:01290 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1001", "meal_type": "lunch"}
370492 INFO  2025-11-21 09:00:01291 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
370505 INFO  2025-11-21 09:00:01304 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
370508 INFO  2025-11-21 09:00:01307 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
370509 INFO  2025-11-21 09:00:01308 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
370516 INFO  2025-11-21 09:00:01315 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
370823 INFO  2025-11-21 09:00:01622 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
370824 INFO  2025-11-21 09:00:01623 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
370825 INFO  2025-11-21 09:00:01624 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
370825 INFO  2025-11-21 09:00:01624 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
370827 INFO  2025-11-21 09:00:01626 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
370828 INFO  2025-11-21 09:00:01627 ExternalApiUtil:281 - âœ… EXTERNAL API CALL SUCCESSFUL
370828 INFO  2025-11-21 09:00:01627 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
370829 INFO  2025-11-21 09:00:01628 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1001 (original: 1001)
370829 INFO  2025-11-21 09:00:01628 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 201
370830 INFO  2025-11-21 09:00:01629 ExternalApiUtil:285 - EXTERNAL API: API Response Success: true
370830 INFO  2025-11-21 09:00:01629 ExternalApiUtil:286 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"03727bda-f320-4889-a64c-4f4a53f86331","student_id":"1001","student_name":"Boaz Omare","admission_no":"1001","meal_type":"lunch","amount":0.0,"date":"2025-11-21T12:00:01.702061+03:00","status":"authorized","qr_code":"1001-lunch-2025-11-21-1763715601702","student_image":"/api/uploads/students/1001.png","created_at":"2025-11-21T12:00:01.701526+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1001","name":"Boaz Omare","class_name":"12","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"4a5093ca-992c-4c25-8994-d0109681be50","face_registered":false,"face_image":"/api/uploads/students/1001.png","created_at":"2025-11-17T10:32:08.395587+03:00"}}
370831 INFO  2025-11-21 09:00:01630 ExternalApiUtil:287 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
370839 INFO  2025-11-21 09:00:01638 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1001
389489 INFO  2025-11-21 09:00:20288 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,279,10.244.175.186,10,35,12,5,11110,3,0,0
389503 INFO  2025-11-21 09:00:20302 DownloadProcess:59 - get cmd list over and begin contact:0
389504 INFO  2025-11-21 09:00:20303 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,279,10.244.175.186,10,35,12,5,11110,3,0,0
413485 INFO  2025-11-21 09:00:44284 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
413489 INFO  2025-11-21 09:00:44288 DownloadProcess:59 - get cmd list over and begin contact:0
422023 INFO  2025-11-21 09:00:52822 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
422037 INFO  2025-11-21 09:00:52836 UploadProcess:266 - update device stamp end and get stream.
422041 INFO  2025-11-21 09:00:52840 UploadProcess:323 - data:1002	2025-11-22 05:00:51	0	15	0	0	0	0	0	0	

422042 INFO  2025-11-21 09:00:52841 UploadProcess:324 - end get stream and process data
422043 INFO  2025-11-21 09:00:52842 UploadProcess:523 - begin parse op attlog
422055 INFO  2025-11-21 09:00:52854 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
422057 INFO  2025-11-21 09:00:52856 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
422058 INFO  2025-11-21 09:00:52857 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 05:00:51
422058 INFO  2025-11-21 09:00:52857 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
422060 INFO  2025-11-21 09:00:52859 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
422061 INFO  2025-11-21 09:00:52860 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
422062 INFO  2025-11-21 09:00:52861 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
422062 INFO  2025-11-21 09:00:52861 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
422063 INFO  2025-11-21 09:00:52862 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 05:00:51
422064 INFO  2025-11-21 09:00:52863 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
422066 INFO  2025-11-21 09:00:52865 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
422066 INFO  2025-11-21 09:00:52865 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
422067 INFO  2025-11-21 09:00:52866 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
422069 INFO  2025-11-21 09:00:52868 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 05:00:51
422070 INFO  2025-11-21 09:00:52869 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
422072 INFO  2025-11-21 09:00:52871 UploadProcess:412 - attlog size:1
422072 INFO  2025-11-21 09:00:52871 UploadProcess:525 - end parse op attlog
422073 INFO  2025-11-21 09:00:52872 UploadProcess:327 - end process data and return msg to device
422074 INFO  2025-11-21 09:00:52873 UploadProcess:331 - return msg to device and request over OK
422068 INFO  2025-11-21 09:00:52867 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
422076 INFO  2025-11-21 09:00:52875 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
422077 INFO  2025-11-21 09:00:52876 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
422077 INFO  2025-11-21 09:00:52876 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
422078 INFO  2025-11-21 09:00:52877 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
422079 INFO  2025-11-21 09:00:52878 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
422080 INFO  2025-11-21 09:00:52879 ExternalApiUtil:177 - EXTERNAL API: Method: POST
422080 INFO  2025-11-21 09:00:52879 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 12:00:52 EAT 2025
422081 INFO  2025-11-21 09:00:52880 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
422081 INFO  2025-11-21 09:00:52880 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
422083 INFO  2025-11-21 09:00:52882 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
422084 INFO  2025-11-21 09:00:52883 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 12:00 - Meal type determined: lunch
422084 INFO  2025-11-21 09:00:52883 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
422085 INFO  2025-11-21 09:00:52884 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
422090 INFO  2025-11-21 09:00:52889 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
422093 INFO  2025-11-21 09:00:52892 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
422093 INFO  2025-11-21 09:00:52892 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
422094 INFO  2025-11-21 09:00:52893 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
422634 INFO  2025-11-21 09:00:53433 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
422635 INFO  2025-11-21 09:00:53434 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
422635 INFO  2025-11-21 09:00:53434 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
422636 INFO  2025-11-21 09:00:53435 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
422637 INFO  2025-11-21 09:00:53436 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
422641 INFO  2025-11-21 09:00:53440 ExternalApiUtil:281 - âœ… EXTERNAL API CALL SUCCESSFUL
422641 INFO  2025-11-21 09:00:53440 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
422642 INFO  2025-11-21 09:00:53441 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1002 (original: 1002)
422642 INFO  2025-11-21 09:00:53441 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 201
422643 INFO  2025-11-21 09:00:53442 ExternalApiUtil:285 - EXTERNAL API: API Response Success: true
422643 INFO  2025-11-21 09:00:53442 ExternalApiUtil:286 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"20d815cd-986a-4a20-9254-290539dce9c1","student_id":"1002","student_name":"Aaron Kailikia","admission_no":"1002","meal_type":"lunch","amount":0.0,"date":"2025-11-21T12:00:53.300711+03:00","status":"authorized","qr_code":"1002-lunch-2025-11-21-1763715653301","student_image":"/api/uploads/students/1002.png","created_at":"2025-11-21T12:00:53.300246+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
422644 INFO  2025-11-21 09:00:53443 ExternalApiUtil:287 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
422684 INFO  2025-11-21 09:00:53483 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1002
437972 INFO  2025-11-21 09:01:08771 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,280,10.244.175.186,10,35,12,5,11110,3,0,0
438047 INFO  2025-11-21 09:01:08846 DownloadProcess:59 - get cmd list over and begin contact:0
438048 INFO  2025-11-21 09:01:08847 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,280,10.244.175.186,10,35,12,5,11110,3,0,0
440526 INFO  2025-11-21 09:01:11325 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=OPERLOG&Stamp=9999
441046 INFO  2025-11-21 09:01:11845 UploadProcess:266 - update device stamp end and get stream.
441257 INFO  2025-11-21 09:01:1256 UploadProcess:323 - data:OPLOG 4	1002	2025-11-22 05:01:10	1002	0	0	0

441271 INFO  2025-11-21 09:01:1270 UploadProcess:324 - end get stream and process data
441271 INFO  2025-11-21 09:01:1270 UploadProcess:474 - begin parse op log
441621 INFO  2025-11-21 09:01:12420 UploadProcess:235 - oplog size:1
441761 INFO  2025-11-21 09:01:12560 UploadProcess:476 - end parse op log
441771 INFO  2025-11-21 09:01:12570 UploadProcess:327 - end process data and return msg to device
441773 INFO  2025-11-21 09:01:12572 UploadProcess:331 - return msg to device and request over OK
460998 INFO  2025-11-21 09:01:31797 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=OPERLOG&Stamp=9999
464064 INFO  2025-11-21 09:01:34863 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,280,10.244.175.186,10,35,12,5,11110,3,0,0
466689 INFO  2025-11-21 09:01:37488 UploadProcess:266 - update device stamp end and get stream.
466695 INFO  2025-11-21 09:01:37494 DownloadProcess:59 - get cmd list over and begin contact:0
466698 INFO  2025-11-21 09:01:37497 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,280,10.244.175.186,10,35,12,5,11110,3,0,0
466710 INFO  2025-11-21 09:01:37509 UploadProcess:323 - data:USER PIN=1002	Name=kailikia AARON	Pri=14	Passwd=	Card=8430582	Grp=1	TZ=0000000100000000	Verify=-1	ViceCard=	StartDatetime=0	EndDatetime=0

466842 INFO  2025-11-21 09:01:37641 UploadProcess:324 - end get stream and process data
466846 INFO  2025-11-21 09:01:37645 UploadProcess:482 - begin parse op user
466848 INFO  2025-11-21 09:01:37647 UploadProcess:275 - user data:
USER PIN=1002	Name=kailikia AARON	Pri=14	Passwd=	Card=8430582	Grp=1	TZ=0000000100000000	Verify=-1	ViceCard=	StartDatetime=0	EndDatetime=0
467027 ERROR 2025-11-21 09:01:37826 UserInfoDao:237 - java.sql.BatchUpdateException: Duplicate entry '1002-TDBD250100333' for key 'user_info.USER_PIN'
467043 INFO  2025-11-21 09:01:37842 UploadProcess:289 - user size:USER PIN=1002	Name=kailikia AARON	Pri=14	Passwd=	Card=8430582	Grp=1	TZ=0000000100000000	Verify=-1	ViceCard=	StartDatetime=0	EndDatetime=0
467047 INFO  2025-11-21 09:01:37846 UploadProcess:484 - end parse op user
467048 INFO  2025-11-21 09:01:37847 UploadProcess:327 - end process data and return msg to device
467049 INFO  2025-11-21 09:01:37848 UploadProcess:331 - return msg to device and request over OK
485227 INFO  2025-11-21 09:01:5626 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
485264 INFO  2025-11-21 09:01:5663 UploadProcess:266 - update device stamp end and get stream.
485274 INFO  2025-11-21 09:01:5673 UploadProcess:323 - data:1002	2025-11-22 05:01:54	0	4	0	0	0	0	0	0	

485276 INFO  2025-11-21 09:01:5675 UploadProcess:324 - end get stream and process data
485277 INFO  2025-11-21 09:01:5676 UploadProcess:523 - begin parse op attlog
485365 INFO  2025-11-21 09:01:56164 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
485369 INFO  2025-11-21 09:01:56168 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
485373 INFO  2025-11-21 09:01:56172 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 05:01:54
485378 INFO  2025-11-21 09:01:56177 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
485379 INFO  2025-11-21 09:01:56178 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
485381 INFO  2025-11-21 09:01:56180 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
485385 INFO  2025-11-21 09:01:56184 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
485385 INFO  2025-11-21 09:01:56184 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
485388 INFO  2025-11-21 09:01:56187 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 05:01:54
485391 INFO  2025-11-21 09:01:56190 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
485392 INFO  2025-11-21 09:01:56191 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
485393 INFO  2025-11-21 09:01:56192 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
485394 INFO  2025-11-21 09:01:56193 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
485395 INFO  2025-11-21 09:01:56194 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
485397 INFO  2025-11-21 09:01:56196 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
485397 INFO  2025-11-21 09:01:56196 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
485396 INFO  2025-11-21 09:01:56195 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 05:01:54
485402 INFO  2025-11-21 09:01:56201 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
485402 INFO  2025-11-21 09:01:56201 UploadProcess:412 - attlog size:1
485401 INFO  2025-11-21 09:01:56200 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
485491 INFO  2025-11-21 09:01:56290 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
485492 INFO  2025-11-21 09:01:56291 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
485406 INFO  2025-11-21 09:01:56205 UploadProcess:525 - end parse op attlog
485499 INFO  2025-11-21 09:01:56298 UploadProcess:327 - end process data and return msg to device
485495 INFO  2025-11-21 09:01:56294 ExternalApiUtil:177 - EXTERNAL API: Method: POST
485502 INFO  2025-11-21 09:01:56301 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 12:01:56 EAT 2025
485503 INFO  2025-11-21 09:01:56302 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
485504 INFO  2025-11-21 09:01:56303 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
485501 INFO  2025-11-21 09:01:56300 UploadProcess:331 - return msg to device and request over OK
485508 INFO  2025-11-21 09:01:56307 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
485528 INFO  2025-11-21 09:01:56327 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 12:01 - Meal type determined: lunch
485529 INFO  2025-11-21 09:01:56328 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
485530 INFO  2025-11-21 09:01:56329 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
485610 INFO  2025-11-21 09:01:56409 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
485611 INFO  2025-11-21 09:01:56410 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
485611 INFO  2025-11-21 09:01:56410 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
485612 INFO  2025-11-21 09:01:56411 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
485979 INFO  2025-11-21 09:01:56778 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
485982 INFO  2025-11-21 09:01:56781 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
485982 INFO  2025-11-21 09:01:56781 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
485990 INFO  2025-11-21 09:01:56789 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
485993 INFO  2025-11-21 09:01:56792 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
485995 INFO  2025-11-21 09:01:56794 ExternalApiUtil:281 - âœ… EXTERNAL API CALL SUCCESSFUL
485996 INFO  2025-11-21 09:01:56795 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
485996 INFO  2025-11-21 09:01:56795 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1002 (original: 1002)
486000 INFO  2025-11-21 09:01:56799 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 201
486001 INFO  2025-11-21 09:01:56800 ExternalApiUtil:285 - EXTERNAL API: API Response Success: true
486001 INFO  2025-11-21 09:01:56800 ExternalApiUtil:286 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"111aa0f1-c41d-49a5-ae79-559cb3e12202","student_id":"1002","student_name":"Aaron Kailikia","admission_no":"1002","meal_type":"lunch","amount":0.0,"date":"2025-11-21T12:01:56.590018+03:00","status":"authorized","qr_code":"1002-lunch-2025-11-21-1763715716590","student_image":"/api/uploads/students/1002.png","created_at":"2025-11-21T12:01:56.589535+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
486002 INFO  2025-11-21 09:01:56801 ExternalApiUtil:287 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
486015 INFO  2025-11-21 09:01:56814 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1002
494230 INFO  2025-11-21 09:02:0529 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,281,10.244.175.186,10,35,12,5,11110,3,0,0
494236 INFO  2025-11-21 09:02:0535 DownloadProcess:59 - get cmd list over and begin contact:0
494239 INFO  2025-11-21 09:02:0538 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,281,10.244.175.186,10,35,12,5,11110,3,0,0
522899 INFO  2025-11-21 09:02:33698 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
522907 INFO  2025-11-21 09:02:33706 DownloadProcess:59 - get cmd list over and begin contact:0
553810 INFO  2025-11-21 09:03:04609 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
553812 INFO  2025-11-21 09:03:04611 DownloadProcess:59 - get cmd list over and begin contact:0
583833 INFO  2025-11-21 09:03:34632 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
583838 INFO  2025-11-21 09:03:34637 DownloadProcess:59 - get cmd list over and begin contact:0
614821 INFO  2025-11-21 09:04:05620 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
614824 INFO  2025-11-21 09:04:05623 DownloadProcess:59 - get cmd list over and begin contact:0
644838 INFO  2025-11-21 09:04:35637 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
644960 INFO  2025-11-21 09:04:35759 DownloadProcess:59 - get cmd list over and begin contact:0
678932 INFO  2025-11-21 09:05:09731 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
679000 INFO  2025-11-21 09:05:09799 DownloadProcess:59 - get cmd list over and begin contact:0
707693 INFO  2025-11-21 09:05:38492 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
707697 INFO  2025-11-21 09:05:38496 DownloadProcess:59 - get cmd list over and begin contact:0
738816 INFO  2025-11-21 09:06:09615 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
738824 INFO  2025-11-21 09:06:09623 DownloadProcess:59 - get cmd list over and begin contact:0
768884 INFO  2025-11-21 09:06:39683 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
768888 INFO  2025-11-21 09:06:39687 DownloadProcess:59 - get cmd list over and begin contact:0
799825 INFO  2025-11-21 09:07:10624 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
799833 INFO  2025-11-21 09:07:10632 DownloadProcess:59 - get cmd list over and begin contact:0
829818 INFO  2025-11-21 09:07:40617 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
829828 INFO  2025-11-21 09:07:40627 DownloadProcess:59 - get cmd list over and begin contact:0
860806 INFO  2025-11-21 09:08:11605 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
860809 INFO  2025-11-21 09:08:11608 DownloadProcess:59 - get cmd list over and begin contact:0
986569 INFO  2025-11-21 09:10:17368 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
986571 INFO  2025-11-21 09:10:17370 DownloadProcess:59 - get cmd list over and begin contact:0
1017056 INFO  2025-11-21 09:10:47855 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1017058 INFO  2025-11-21 09:10:47857 DownloadProcess:59 - get cmd list over and begin contact:0
1032837 INFO  2025-11-21 09:11:03636 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
1032853 INFO  2025-11-21 09:11:03652 UploadProcess:266 - update device stamp end and get stream.
1032855 INFO  2025-11-21 09:11:03654 UploadProcess:323 - data:1002	2025-11-22 05:11:02	0	4	0	0	0	0	0	0	

1032859 INFO  2025-11-21 09:11:03658 UploadProcess:324 - end get stream and process data
1032860 INFO  2025-11-21 09:11:03659 UploadProcess:523 - begin parse op attlog
1032869 INFO  2025-11-21 09:11:03668 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
1032870 INFO  2025-11-21 09:11:03669 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
1032871 INFO  2025-11-21 09:11:03670 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 05:11:02
1032873 INFO  2025-11-21 09:11:03672 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
1032874 INFO  2025-11-21 09:11:03673 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1032875 INFO  2025-11-21 09:11:03674 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
1032876 INFO  2025-11-21 09:11:03675 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1032877 INFO  2025-11-21 09:11:03676 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
1032878 INFO  2025-11-21 09:11:03677 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 05:11:02
1032879 INFO  2025-11-21 09:11:03678 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
1032880 INFO  2025-11-21 09:11:03679 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1032880 INFO  2025-11-21 09:11:03679 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
1032881 INFO  2025-11-21 09:11:03680 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
1032882 INFO  2025-11-21 09:11:03681 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 05:11:02
1032883 INFO  2025-11-21 09:11:03682 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
1032896 INFO  2025-11-21 09:11:03695 UploadProcess:412 - attlog size:1
1032898 INFO  2025-11-21 09:11:03697 UploadProcess:525 - end parse op attlog
1032899 INFO  2025-11-21 09:11:03698 UploadProcess:327 - end process data and return msg to device
1032902 INFO  2025-11-21 09:11:03701 UploadProcess:331 - return msg to device and request over OK
1032882 INFO  2025-11-21 09:11:03681 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
1032908 INFO  2025-11-21 09:11:03707 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1032908 INFO  2025-11-21 09:11:03707 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
1032911 INFO  2025-11-21 09:11:03710 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1032915 INFO  2025-11-21 09:11:03714 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
1032916 INFO  2025-11-21 09:11:03715 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
1032916 INFO  2025-11-21 09:11:03715 ExternalApiUtil:177 - EXTERNAL API: Method: POST
1032917 INFO  2025-11-21 09:11:03716 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 12:11:03 EAT 2025
1032917 INFO  2025-11-21 09:11:03716 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
1032918 INFO  2025-11-21 09:11:03717 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
1032920 INFO  2025-11-21 09:11:03719 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
1032921 INFO  2025-11-21 09:11:03720 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 12:11 - Meal type determined: lunch
1032921 INFO  2025-11-21 09:11:03720 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
1032922 INFO  2025-11-21 09:11:03721 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
1032927 INFO  2025-11-21 09:11:03726 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
1032928 INFO  2025-11-21 09:11:03727 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1032929 INFO  2025-11-21 09:11:03728 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
1032930 INFO  2025-11-21 09:11:03729 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1033227 INFO  2025-11-21 09:11:0426 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1033228 INFO  2025-11-21 09:11:0427 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
1033229 INFO  2025-11-21 09:11:0428 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1033230 INFO  2025-11-21 09:11:0429 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
1033232 INFO  2025-11-21 09:11:0431 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1033232 INFO  2025-11-21 09:11:0431 ExternalApiUtil:281 - âœ… EXTERNAL API CALL SUCCESSFUL
1033233 INFO  2025-11-21 09:11:0432 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1033233 INFO  2025-11-21 09:11:0432 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1002 (original: 1002)
1033234 INFO  2025-11-21 09:11:0433 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 201
1033234 INFO  2025-11-21 09:11:0433 ExternalApiUtil:285 - EXTERNAL API: API Response Success: true
1033235 INFO  2025-11-21 09:11:0434 ExternalApiUtil:286 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"3239488c-c0a0-41aa-8287-b9c8d652b0ae","student_id":"1002","student_name":"Aaron Kailikia","admission_no":"1002","meal_type":"lunch","amount":0.0,"date":"2025-11-21T12:11:03.891524+03:00","status":"authorized","qr_code":"1002-lunch-2025-11-21-1763716263892","student_image":"/api/uploads/students/1002.png","created_at":"2025-11-21T12:11:03.891027+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
1033236 INFO  2025-11-21 09:11:0435 ExternalApiUtil:287 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1033255 INFO  2025-11-21 09:11:0454 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1002
1047841 INFO  2025-11-21 09:11:18640 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,282,10.244.175.186,10,35,12,5,11110,3,0,0
1047844 INFO  2025-11-21 09:11:18643 DownloadProcess:59 - get cmd list over and begin contact:0
1047847 INFO  2025-11-21 09:11:18646 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,282,10.244.175.186,10,35,12,5,11110,3,0,0
1077933 INFO  2025-11-21 09:11:48732 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1077938 INFO  2025-11-21 09:11:48737 DownloadProcess:59 - get cmd list over and begin contact:0
1108816 INFO  2025-11-21 09:12:19615 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1108961 INFO  2025-11-21 09:12:19760 DownloadProcess:59 - get cmd list over and begin contact:0
1138811 INFO  2025-11-21 09:12:49610 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1138814 INFO  2025-11-21 09:12:49613 DownloadProcess:59 - get cmd list over and begin contact:0
1152625 INFO  2025-11-21 09:13:03424 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
1152727 INFO  2025-11-21 09:13:03526 UploadProcess:266 - update device stamp end and get stream.
1152731 INFO  2025-11-21 09:13:03530 UploadProcess:323 - data:1002	2025-11-22 05:13:02	0	4	0	0	0	0	0	0	

1152733 INFO  2025-11-21 09:13:03532 UploadProcess:324 - end get stream and process data
1152740 INFO  2025-11-21 09:13:03539 UploadProcess:523 - begin parse op attlog
1153033 INFO  2025-11-21 09:13:03832 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
1153039 INFO  2025-11-21 09:13:03838 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
1153045 INFO  2025-11-21 09:13:03844 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 05:13:02
1153049 INFO  2025-11-21 09:13:03848 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
1153051 INFO  2025-11-21 09:13:03850 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1153053 INFO  2025-11-21 09:13:03852 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
1153057 INFO  2025-11-21 09:13:03856 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1153059 INFO  2025-11-21 09:13:03858 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
1153059 INFO  2025-11-21 09:13:03858 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 05:13:02
1153060 INFO  2025-11-21 09:13:03859 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
1153061 INFO  2025-11-21 09:13:03860 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1153062 INFO  2025-11-21 09:13:03861 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
1153066 INFO  2025-11-21 09:13:03865 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
1153076 INFO  2025-11-21 09:13:03875 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
1153085 INFO  2025-11-21 09:13:03884 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 05:13:02
1153087 INFO  2025-11-21 09:13:03886 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
1153086 INFO  2025-11-21 09:13:03885 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1153101 INFO  2025-11-21 09:13:03900 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
1153102 INFO  2025-11-21 09:13:03901 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1153091 INFO  2025-11-21 09:13:03890 UploadProcess:412 - attlog size:1
1153112 INFO  2025-11-21 09:13:03911 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
1153114 INFO  2025-11-21 09:13:03913 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
1153116 INFO  2025-11-21 09:13:03915 ExternalApiUtil:177 - EXTERNAL API: Method: POST
1153115 INFO  2025-11-21 09:13:03914 UploadProcess:525 - end parse op attlog
1153276 INFO  2025-11-21 09:13:0475 UploadProcess:327 - end process data and return msg to device
1153281 INFO  2025-11-21 09:13:0480 UploadProcess:331 - return msg to device and request over OK
1153277 INFO  2025-11-21 09:13:0476 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 12:13:04 EAT 2025
1153285 INFO  2025-11-21 09:13:0484 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
1153286 INFO  2025-11-21 09:13:0485 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
1153287 INFO  2025-11-21 09:13:0486 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
1153288 INFO  2025-11-21 09:13:0487 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 12:13 - Meal type determined: lunch
1153289 INFO  2025-11-21 09:13:0488 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
1153290 INFO  2025-11-21 09:13:0489 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
1153307 INFO  2025-11-21 09:13:04106 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
1153308 INFO  2025-11-21 09:13:04107 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1153309 INFO  2025-11-21 09:13:04108 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
1153313 INFO  2025-11-21 09:13:04112 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1153826 INFO  2025-11-21 09:13:04625 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1153830 INFO  2025-11-21 09:13:04629 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
1153837 INFO  2025-11-21 09:13:04636 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1153851 INFO  2025-11-21 09:13:04650 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
1153861 INFO  2025-11-21 09:13:04660 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1153862 INFO  2025-11-21 09:13:04661 ExternalApiUtil:281 - âœ… EXTERNAL API CALL SUCCESSFUL
1153868 INFO  2025-11-21 09:13:04667 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1153994 INFO  2025-11-21 09:13:04793 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1002 (original: 1002)
1153995 INFO  2025-11-21 09:13:04794 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 201
1153996 INFO  2025-11-21 09:13:04795 ExternalApiUtil:285 - EXTERNAL API: API Response Success: true
1154008 INFO  2025-11-21 09:13:04807 ExternalApiUtil:286 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"7eb59d6a-9600-40e4-b400-31f2e9038b62","student_id":"1002","student_name":"Aaron Kailikia","admission_no":"1002","meal_type":"lunch","amount":0.0,"date":"2025-11-21T12:13:04.286741+03:00","status":"authorized","qr_code":"1002-lunch-2025-11-21-1763716384287","student_image":"/api/uploads/students/1002.png","created_at":"2025-11-21T12:13:04.286301+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
1154011 INFO  2025-11-21 09:13:04810 ExternalApiUtil:287 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1154032 INFO  2025-11-21 09:13:04831 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1002
1170006 INFO  2025-11-21 09:13:20805 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,5,0,283,10.244.175.186,10,35,12,5,11110,3,0,0
1170012 INFO  2025-11-21 09:13:20811 DownloadProcess:59 - get cmd list over and begin contact:0
1170015 INFO  2025-11-21 09:13:20814 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,5,0,283,10.244.175.186,10,35,12,5,11110,3,0,0
1200003 INFO  2025-11-21 09:13:50802 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1200005 INFO  2025-11-21 09:13:50804 DownloadProcess:59 - get cmd list over and begin contact:0
1230751 INFO  2025-11-21 09:14:21550 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1230758 INFO  2025-11-21 09:14:21557 DownloadProcess:59 - get cmd list over and begin contact:0
1260784 INFO  2025-11-21 09:14:51583 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1260791 INFO  2025-11-21 09:14:51590 DownloadProcess:59 - get cmd list over and begin contact:0
1291819 INFO  2025-11-21 09:15:22618 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1291822 INFO  2025-11-21 09:15:22621 DownloadProcess:59 - get cmd list over and begin contact:0
1321709 INFO  2025-11-21 09:15:52508 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1321712 INFO  2025-11-21 09:15:52511 DownloadProcess:59 - get cmd list over and begin contact:0
1354266 INFO  2025-11-21 09:16:2565 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1354272 INFO  2025-11-21 09:16:2571 DownloadProcess:59 - get cmd list over and begin contact:0
1382761 INFO  2025-11-21 09:16:53560 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1382765 INFO  2025-11-21 09:16:53564 DownloadProcess:59 - get cmd list over and begin contact:0
1413786 INFO  2025-11-21 09:17:24585 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1413790 INFO  2025-11-21 09:17:24589 DownloadProcess:59 - get cmd list over and begin contact:0
1420262 INFO  2025-11-21 09:17:3161 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=OPERLOG&Stamp=9999
1420289 INFO  2025-11-21 09:17:3188 UploadProcess:266 - update device stamp end and get stream.
1420296 INFO  2025-11-21 09:17:3195 UploadProcess:323 - data:OPLOG 4	1002	2025-11-22 05:17:29	1002	0	0	0

1420300 INFO  2025-11-21 09:17:3199 UploadProcess:324 - end get stream and process data
1420305 INFO  2025-11-21 09:17:31104 UploadProcess:474 - begin parse op log
1420327 INFO  2025-11-21 09:17:31126 UploadProcess:235 - oplog size:1
1420333 INFO  2025-11-21 09:17:31132 UploadProcess:476 - end parse op log
1420334 INFO  2025-11-21 09:17:31133 UploadProcess:327 - end process data and return msg to device
1420336 INFO  2025-11-21 09:17:31135 UploadProcess:331 - return msg to device and request over OK
1443792 INFO  2025-11-21 09:17:54591 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1443799 INFO  2025-11-21 09:17:54598 DownloadProcess:59 - get cmd list over and begin contact:0
1474748 INFO  2025-11-21 09:18:25547 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1474755 INFO  2025-11-21 09:18:25554 DownloadProcess:59 - get cmd list over and begin contact:0
1505051 INFO  2025-11-21 09:18:55850 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1505054 INFO  2025-11-21 09:18:55853 DownloadProcess:59 - get cmd list over and begin contact:0
1535836 INFO  2025-11-21 09:19:26635 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1535838 INFO  2025-11-21 09:19:26637 DownloadProcess:59 - get cmd list over and begin contact:0
1569716 INFO  2025-11-21 09:20:00515 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1569720 INFO  2025-11-21 09:20:00519 DownloadProcess:59 - get cmd list over and begin contact:0
1599162 INFO  2025-11-21 09:20:29961 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1599176 INFO  2025-11-21 09:20:29975 DownloadProcess:59 - get cmd list over and begin contact:0
1629767 INFO  2025-11-21 09:21:00566 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1629773 INFO  2025-11-21 09:21:00572 DownloadProcess:59 - get cmd list over and begin contact:0
1642411 INFO  2025-11-21 09:21:13210 Dispatcher:31 - Unable to find 'struts.multipart.saveDir' property setting. Defaulting to javax.servlet.context.tempdir
1659918 INFO  2025-11-21 09:21:30717 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1659921 INFO  2025-11-21 09:21:30720 DownloadProcess:59 - get cmd list over and begin contact:1
1659926 INFO  2025-11-21 09:21:30725 DownloadProcess:71 - SN:TDBD250100333cmdSize:65536
1659940 INFO  2025-11-21 09:21:30739 DownloadProcess:85 - contact cmd and send list:1
1659941 INFO  2025-11-21 09:21:30740 DownloadProcess:86 - cmd info:C:191:DATA UPDATE USERINFO PIN=L1005M	Name=Joseph	Pri=0	Passwd=1234	Card=12345678	Grp=0	TZ=null	Category=0

1660225 INFO  2025-11-21 09:21:3124 DownloadProcess:191 - get request and begin process cmd return.192.168.65.1;http://10.244.175.98:8080/iclock/devicecmd?SN=TDBD250100333
1660226 INFO  2025-11-21 09:21:3125 DownloadProcess:193 - content-length:25
1660229 INFO  2025-11-21 09:21:3128 DownloadProcess:231 - DEV CMD RETURN:
ID=191&Return=0&CMD=DATA

1660229 INFO  2025-11-21 09:21:3128 DownloadProcess:232 - update cmd return begin
1660259 INFO  2025-11-21 09:21:3158 DownloadProcess:239 - update cmd return end
1660305 INFO  2025-11-21 09:21:31104 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1660312 INFO  2025-11-21 09:21:31111 DownloadProcess:59 - get cmd list over and begin contact:0
1662016 INFO  2025-11-21 09:21:32815 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,6,0,283,10.244.175.186,10,35,12,5,11110,4,0,0
1662018 INFO  2025-11-21 09:21:32817 DownloadProcess:59 - get cmd list over and begin contact:0
1662019 INFO  2025-11-21 09:21:32818 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,6,0,283,10.244.175.186,10,35,12,5,11110,4,0,0
1663824 INFO  2025-11-21 09:21:34623 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
1663833 INFO  2025-11-21 09:21:34632 UploadProcess:266 - update device stamp end and get stream.
1663835 INFO  2025-11-21 09:21:34634 UploadProcess:323 - data:1002	2025-11-22 05:21:33	0	15	0	0	0	0	0	0	

1663836 INFO  2025-11-21 09:21:34635 UploadProcess:324 - end get stream and process data
1663836 INFO  2025-11-21 09:21:34635 UploadProcess:523 - begin parse op attlog
1663849 INFO  2025-11-21 09:21:34648 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
1663850 INFO  2025-11-21 09:21:34649 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
1663850 INFO  2025-11-21 09:21:34649 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 05:21:33
1663851 INFO  2025-11-21 09:21:34650 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
1663852 INFO  2025-11-21 09:21:34651 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1663852 INFO  2025-11-21 09:21:34651 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
1663853 INFO  2025-11-21 09:21:34652 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1663854 INFO  2025-11-21 09:21:34653 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
1663855 INFO  2025-11-21 09:21:34654 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 05:21:33
1663855 INFO  2025-11-21 09:21:34654 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
1663857 INFO  2025-11-21 09:21:34656 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1663859 INFO  2025-11-21 09:21:34658 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
1663860 INFO  2025-11-21 09:21:34659 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
1663860 INFO  2025-11-21 09:21:34659 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
1663864 INFO  2025-11-21 09:21:34663 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1664199 INFO  2025-11-21 09:21:34998 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
1664201 INFO  2025-11-21 09:21:350 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1664201 INFO  2025-11-21 09:21:350 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
1664202 INFO  2025-11-21 09:21:351 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
1664202 INFO  2025-11-21 09:21:351 ExternalApiUtil:177 - EXTERNAL API: Method: POST
1663863 INFO  2025-11-21 09:21:34662 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 05:21:33
1664208 INFO  2025-11-21 09:21:357 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
1664209 INFO  2025-11-21 09:21:358 UploadProcess:412 - attlog size:1
1664209 INFO  2025-11-21 09:21:358 UploadProcess:525 - end parse op attlog
1664210 INFO  2025-11-21 09:21:359 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 12:21:35 EAT 2025
1664216 INFO  2025-11-21 09:21:3515 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
1664217 INFO  2025-11-21 09:21:3516 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
1664214 INFO  2025-11-21 09:21:3513 UploadProcess:327 - end process data and return msg to device
1664220 INFO  2025-11-21 09:21:3519 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
1664221 INFO  2025-11-21 09:21:3520 UploadProcess:331 - return msg to device and request over OK
1664221 INFO  2025-11-21 09:21:3520 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 12:21 - Meal type determined: lunch
1664224 INFO  2025-11-21 09:21:3523 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
1664224 INFO  2025-11-21 09:21:3523 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
1664228 INFO  2025-11-21 09:21:3527 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
1664229 INFO  2025-11-21 09:21:3528 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1664229 INFO  2025-11-21 09:21:3528 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
1664230 INFO  2025-11-21 09:21:3529 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1664652 INFO  2025-11-21 09:21:35451 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1664653 INFO  2025-11-21 09:21:35452 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
1664653 INFO  2025-11-21 09:21:35452 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1664654 INFO  2025-11-21 09:21:35453 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
1664655 INFO  2025-11-21 09:21:35454 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1664655 INFO  2025-11-21 09:21:35454 ExternalApiUtil:281 - âœ… EXTERNAL API CALL SUCCESSFUL
1664656 INFO  2025-11-21 09:21:35455 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1664656 INFO  2025-11-21 09:21:35455 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1002 (original: 1002)
1664657 INFO  2025-11-21 09:21:35456 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 201
1664657 INFO  2025-11-21 09:21:35456 ExternalApiUtil:285 - EXTERNAL API: API Response Success: true
1664657 INFO  2025-11-21 09:21:35456 ExternalApiUtil:286 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"1ff1c1aa-9930-4ce8-8c4e-945ca6f1c4c2","student_id":"1002","student_name":"Aaron Kailikia","admission_no":"1002","meal_type":"lunch","amount":0.0,"date":"2025-11-21T12:21:35.129820+03:00","status":"authorized","qr_code":"1002-lunch-2025-11-21-1763716895130","student_image":"/api/uploads/students/1002.png","created_at":"2025-11-21T12:21:35.129388+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
1664658 INFO  2025-11-21 09:21:35457 ExternalApiUtil:287 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1664665 INFO  2025-11-21 09:21:35464 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1002
1664964 INFO  2025-11-21 09:21:35763 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,6,0,284,10.244.175.186,10,35,12,5,11110,4,0,0
1664968 INFO  2025-11-21 09:21:35767 DownloadProcess:59 - get cmd list over and begin contact:0
1664969 INFO  2025-11-21 09:21:35768 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,6,0,284,10.244.175.186,10,35,12,5,11110,4,0,0
1669749 INFO  2025-11-21 09:21:40548 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1670004 INFO  2025-11-21 09:21:40803 DownloadProcess:59 - get cmd list over and begin contact:0
1673255 INFO  2025-11-21 09:21:4454 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=OPERLOG&Stamp=9999
1673270 INFO  2025-11-21 09:21:4469 UploadProcess:266 - update device stamp end and get stream.
1673276 INFO  2025-11-21 09:21:4475 UploadProcess:323 - data:OPLOG 4	1002	2025-11-22 05:21:42	1002	0	0	0

1673277 INFO  2025-11-21 09:21:4476 UploadProcess:324 - end get stream and process data
1673278 INFO  2025-11-21 09:21:4477 UploadProcess:474 - begin parse op log
1673285 INFO  2025-11-21 09:21:4484 UploadProcess:235 - oplog size:1
1673286 INFO  2025-11-21 09:21:4485 UploadProcess:476 - end parse op log
1673286 INFO  2025-11-21 09:21:4485 UploadProcess:327 - end process data and return msg to device
1673287 INFO  2025-11-21 09:21:4486 UploadProcess:331 - return msg to device and request over OK
1675785 INFO  2025-11-21 09:21:46584 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1675788 INFO  2025-11-21 09:21:46587 DownloadProcess:59 - get cmd list over and begin contact:0
1683785 INFO  2025-11-21 09:21:54584 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1683787 INFO  2025-11-21 09:21:54586 DownloadProcess:59 - get cmd list over and begin contact:0
1693857 INFO  2025-11-21 09:22:04656 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1693859 INFO  2025-11-21 09:22:04658 DownloadProcess:59 - get cmd list over and begin contact:0
1704919 INFO  2025-11-21 09:22:15718 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1704921 INFO  2025-11-21 09:22:15720 DownloadProcess:59 - get cmd list over and begin contact:0
1716717 INFO  2025-11-21 09:22:27516 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1716719 INFO  2025-11-21 09:22:27518 DownloadProcess:59 - get cmd list over and begin contact:0
1730724 INFO  2025-11-21 09:22:41523 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1730726 INFO  2025-11-21 09:22:41525 DownloadProcess:59 - get cmd list over and begin contact:0
1735459 INFO  2025-11-21 09:22:46258 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=OPERLOG&Stamp=9999
1735470 INFO  2025-11-21 09:22:46269 UploadProcess:266 - update device stamp end and get stream.
1735472 INFO  2025-11-21 09:22:46271 UploadProcess:323 - data:USER PIN=L1005M	Name=Joseph	Pri=0	Passwd=1234	Card=6286944	Grp=1	TZ=0000000100000000	Verify=-1	ViceCard=	StartDatetime=0	EndDatetime=0

1735472 INFO  2025-11-21 09:22:46271 UploadProcess:324 - end get stream and process data
1735473 INFO  2025-11-21 09:22:46272 UploadProcess:482 - begin parse op user
1735474 INFO  2025-11-21 09:22:46273 UploadProcess:275 - user data:
USER PIN=L1005M	Name=Joseph	Pri=0	Passwd=1234	Card=6286944	Grp=1	TZ=0000000100000000	Verify=-1	ViceCard=	StartDatetime=0	EndDatetime=0
1735477 ERROR 2025-11-21 09:22:46276 UserInfoDao:237 - java.sql.BatchUpdateException: Duplicate entry 'L1005M-TDBD250100333' for key 'user_info.USER_PIN'
1735486 INFO  2025-11-21 09:22:46285 UploadProcess:289 - user size:USER PIN=L1005M	Name=Joseph	Pri=0	Passwd=1234	Card=6286944	Grp=1	TZ=0000000100000000	Verify=-1	ViceCard=	StartDatetime=0	EndDatetime=0
1735487 INFO  2025-11-21 09:22:46286 UploadProcess:484 - end parse op user
1735488 INFO  2025-11-21 09:22:46287 UploadProcess:327 - end process data and return msg to device
1735488 INFO  2025-11-21 09:22:46287 UploadProcess:331 - return msg to device and request over OK
1741634 INFO  2025-11-21 09:22:52433 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
1741641 INFO  2025-11-21 09:22:52440 UploadProcess:266 - update device stamp end and get stream.
1741645 INFO  2025-11-21 09:22:52444 UploadProcess:323 - data:L1005M	2025-11-22 05:22:50	0	4	0	0	0	0	0	0	

1741645 INFO  2025-11-21 09:22:52444 UploadProcess:324 - end get stream and process data
1741646 INFO  2025-11-21 09:22:52445 UploadProcess:523 - begin parse op attlog
1741660 INFO  2025-11-21 09:22:52459 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
1741661 INFO  2025-11-21 09:22:52460 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
1741662 INFO  2025-11-21 09:22:52461 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: L1005M, User Name: Joseph, Timestamp: 2025-11-22 05:22:50
1741664 INFO  2025-11-21 09:22:52463 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: L1005M
1741665 INFO  2025-11-21 09:22:52464 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1741666 INFO  2025-11-21 09:22:52465 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
1741668 INFO  2025-11-21 09:22:52467 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1741669 INFO  2025-11-21 09:22:52468 ExternalApiUtil:123 - EXTERNAL API: User ID: L1005M
1741669 INFO  2025-11-21 09:22:52468 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 05:22:50
1741670 INFO  2025-11-21 09:22:52469 ExternalApiUtil:125 - EXTERNAL API: User Name: Joseph
1741671 INFO  2025-11-21 09:22:52470 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1741671 INFO  2025-11-21 09:22:52470 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: L1005M
1741672 INFO  2025-11-21 09:22:52471 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: L1005M
1741672 INFO  2025-11-21 09:22:52471 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: L1005M
1741672 INFO  2025-11-21 09:22:52471 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1741673 INFO  2025-11-21 09:22:52472 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
1741674 INFO  2025-11-21 09:22:52473 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1741674 INFO  2025-11-21 09:22:52473 ExternalApiUtil:175 - EXTERNAL API: User ID: L1005M
1741675 INFO  2025-11-21 09:22:52474 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
1741675 INFO  2025-11-21 09:22:52474 ExternalApiUtil:177 - EXTERNAL API: Method: POST
1741675 INFO  2025-11-21 09:22:52474 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 12:22:52 EAT 2025
1741676 INFO  2025-11-21 09:22:52475 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
1741672 INFO  2025-11-21 09:22:52471 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: L1005M, Timestamp: 2025-11-22 05:22:50
1741677 INFO  2025-11-21 09:22:52476 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
1741677 INFO  2025-11-21 09:22:52476 UploadProcess:412 - attlog size:1
1741677 INFO  2025-11-21 09:22:52476 UploadProcess:525 - end parse op attlog
1741678 INFO  2025-11-21 09:22:52477 UploadProcess:327 - end process data and return msg to device
1741678 INFO  2025-11-21 09:22:52477 UploadProcess:331 - return msg to device and request over OK
1741676 INFO  2025-11-21 09:22:52475 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
1741679 WARN  2025-11-21 09:22:52478 ExternalApiUtil:366 - User ID is not a number: L1005M, using as-is
1741679 INFO  2025-11-21 09:22:52478 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: L1005M, Formatted: L1005M
1741680 INFO  2025-11-21 09:22:52479 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 12:22 - Meal type determined: lunch
1741680 INFO  2025-11-21 09:22:52479 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "L1005M", "meal_type": "lunch"}
1741681 INFO  2025-11-21 09:22:52480 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
1741683 INFO  2025-11-21 09:22:52482 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
1741684 INFO  2025-11-21 09:22:52483 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1741685 INFO  2025-11-21 09:22:52484 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
1741686 INFO  2025-11-21 09:22:52485 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1741819 INFO  2025-11-21 09:22:52618 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1741819 INFO  2025-11-21 09:22:52618 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
1741820 INFO  2025-11-21 09:22:52619 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1741820 INFO  2025-11-21 09:22:52619 ExternalApiUtil:223 - EXTERNAL API: Response code received: 500
1741822 WARN  2025-11-21 09:22:52621 ExternalApiUtil:293 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1741823 WARN  2025-11-21 09:22:52622 ExternalApiUtil:294 - âš ï¸  EXTERNAL API CALL FAILED OR RETURNED ERROR
1741824 WARN  2025-11-21 09:22:52623 ExternalApiUtil:295 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1741824 WARN  2025-11-21 09:22:52623 ExternalApiUtil:296 - EXTERNAL API: Student ID: L1005M (original: L1005M)
1741824 WARN  2025-11-21 09:22:52623 ExternalApiUtil:297 - EXTERNAL API: HTTP Status Code: 500 (ERROR)
1741825 WARN  2025-11-21 09:22:52624 ExternalApiUtil:298 - EXTERNAL API: API Response Success: false
1741825 WARN  2025-11-21 09:22:52624 ExternalApiUtil:302 - EXTERNAL API: Response Body: <!DOCTYPE HTML><html lang="en">    <head>        <meta charset="utf-8">        <title>Error response</title>    </head>    <body>        <h1>Error response</h1>        <p>Error code: 500</p>        <p>Message: Proxy error: HTTP Error 404: Not Found.</p>        <p>Error code explanation: 500 - Server got itself in trouble.</p>    </body></html>
1741826 WARN  2025-11-21 09:22:52625 ExternalApiUtil:303 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1741846 INFO  2025-11-21 09:22:52645 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: FAILED, User: L1005M
1747247 INFO  2025-11-21 09:22:5846 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,6,0,285,10.244.175.186,10,35,12,5,11110,4,0,0
1747258 INFO  2025-11-21 09:22:5857 DownloadProcess:59 - get cmd list over and begin contact:0
1747268 INFO  2025-11-21 09:22:5867 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,6,0,285,10.244.175.186,10,35,12,5,11110,4,0,0
1755968 INFO  2025-11-21 09:23:06767 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
1755994 INFO  2025-11-21 09:23:06793 UploadProcess:266 - update device stamp end and get stream.
1756003 INFO  2025-11-21 09:23:06802 UploadProcess:323 - data:1002	2025-11-22 05:23:05	0	4	0	0	0	0	0	0	

1756004 INFO  2025-11-21 09:23:06803 UploadProcess:324 - end get stream and process data
1756005 INFO  2025-11-21 09:23:06804 UploadProcess:523 - begin parse op attlog
1756021 INFO  2025-11-21 09:23:06820 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
1756022 INFO  2025-11-21 09:23:06821 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
1756023 INFO  2025-11-21 09:23:06822 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 05:23:05
1756024 INFO  2025-11-21 09:23:06823 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
1756025 INFO  2025-11-21 09:23:06824 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1756027 INFO  2025-11-21 09:23:06826 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
1756028 INFO  2025-11-21 09:23:06827 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1756029 INFO  2025-11-21 09:23:06828 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
1756031 INFO  2025-11-21 09:23:06830 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 05:23:05
1756032 INFO  2025-11-21 09:23:06831 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
1756033 INFO  2025-11-21 09:23:06832 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1756034 INFO  2025-11-21 09:23:06833 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
1756035 INFO  2025-11-21 09:23:06834 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
1756037 INFO  2025-11-21 09:23:06836 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 05:23:05
1756038 INFO  2025-11-21 09:23:06837 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
1756039 INFO  2025-11-21 09:23:06838 UploadProcess:412 - attlog size:1
1756041 INFO  2025-11-21 09:23:06840 UploadProcess:525 - end parse op attlog
1756042 INFO  2025-11-21 09:23:06841 UploadProcess:327 - end process data and return msg to device
1756043 INFO  2025-11-21 09:23:06842 UploadProcess:331 - return msg to device and request over OK
1756036 INFO  2025-11-21 09:23:06835 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
1756048 INFO  2025-11-21 09:23:06847 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1756049 INFO  2025-11-21 09:23:06848 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
1756049 INFO  2025-11-21 09:23:06848 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1756050 INFO  2025-11-21 09:23:06849 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
1756051 INFO  2025-11-21 09:23:06850 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
1756052 INFO  2025-11-21 09:23:06851 ExternalApiUtil:177 - EXTERNAL API: Method: POST
1756054 INFO  2025-11-21 09:23:06853 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 12:23:06 EAT 2025
1756056 INFO  2025-11-21 09:23:06855 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
1756058 INFO  2025-11-21 09:23:06857 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
1756365 INFO  2025-11-21 09:23:07164 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
1756367 INFO  2025-11-21 09:23:07166 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 12:23 - Meal type determined: lunch
1756368 INFO  2025-11-21 09:23:07167 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
1756370 INFO  2025-11-21 09:23:07169 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
1756378 INFO  2025-11-21 09:23:07177 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
1756379 INFO  2025-11-21 09:23:07178 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1756381 INFO  2025-11-21 09:23:07180 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
1756381 INFO  2025-11-21 09:23:07180 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1756938 INFO  2025-11-21 09:23:07737 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1756939 INFO  2025-11-21 09:23:07738 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
1756939 INFO  2025-11-21 09:23:07738 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1756940 INFO  2025-11-21 09:23:07739 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
1756941 INFO  2025-11-21 09:23:07740 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1756942 INFO  2025-11-21 09:23:07741 ExternalApiUtil:281 - âœ… EXTERNAL API CALL SUCCESSFUL
1756942 INFO  2025-11-21 09:23:07741 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1756943 INFO  2025-11-21 09:23:07742 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1002 (original: 1002)
1756963 INFO  2025-11-21 09:23:07762 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 201
1756971 INFO  2025-11-21 09:23:07770 ExternalApiUtil:285 - EXTERNAL API: API Response Success: true
1756971 INFO  2025-11-21 09:23:07770 ExternalApiUtil:286 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"fc2096b9-603c-473d-81c0-788e6cf0d6a3","student_id":"1002","student_name":"Aaron Kailikia","admission_no":"1002","meal_type":"lunch","amount":0.0,"date":"2025-11-21T12:23:07.239640+03:00","status":"authorized","qr_code":"1002-lunch-2025-11-21-1763716987240","student_image":"/api/uploads/students/1002.png","created_at":"2025-11-21T12:23:07.239318+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
1756972 INFO  2025-11-21 09:23:07771 ExternalApiUtil:287 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1757125 INFO  2025-11-21 09:23:07924 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1002
1763965 INFO  2025-11-21 09:23:14764 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,6,0,286,10.244.175.186,10,35,12,5,11110,4,0,0
1764216 INFO  2025-11-21 09:23:1515 DownloadProcess:59 - get cmd list over and begin contact:0
1764247 INFO  2025-11-21 09:23:1546 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,6,0,286,10.244.175.186,10,35,12,5,11110,4,0,0
1781850 INFO  2025-11-21 09:23:32649 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1781901 INFO  2025-11-21 09:23:32700 DownloadProcess:59 - get cmd list over and begin contact:0
1801851 INFO  2025-11-21 09:23:52650 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1801854 INFO  2025-11-21 09:23:52653 DownloadProcess:59 - get cmd list over and begin contact:0
1822907 INFO  2025-11-21 09:24:13706 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
1822927 INFO  2025-11-21 09:24:13726 UploadProcess:266 - update device stamp end and get stream.
1822929 INFO  2025-11-21 09:24:13728 UploadProcess:323 - data:1002	2025-11-22 05:24:10	0	15	0	0	0	0	0	0	

1822931 INFO  2025-11-21 09:24:13730 UploadProcess:324 - end get stream and process data
1822932 INFO  2025-11-21 09:24:13731 UploadProcess:523 - begin parse op attlog
1822956 INFO  2025-11-21 09:24:13755 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
1822957 INFO  2025-11-21 09:24:13756 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
1822957 INFO  2025-11-21 09:24:13756 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 05:24:10
1822958 INFO  2025-11-21 09:24:13757 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
1822959 INFO  2025-11-21 09:24:13758 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1822962 INFO  2025-11-21 09:24:13761 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
1822965 INFO  2025-11-21 09:24:13764 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1822966 INFO  2025-11-21 09:24:13765 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
1822967 INFO  2025-11-21 09:24:13766 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 05:24:10
1822967 INFO  2025-11-21 09:24:13766 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
1822968 INFO  2025-11-21 09:24:13767 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1822969 INFO  2025-11-21 09:24:13768 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
1822971 INFO  2025-11-21 09:24:13770 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
1822974 INFO  2025-11-21 09:24:13773 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 05:24:10
1822974 INFO  2025-11-21 09:24:13773 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
1822977 INFO  2025-11-21 09:24:13776 UploadProcess:412 - attlog size:1
1822977 INFO  2025-11-21 09:24:13776 UploadProcess:525 - end parse op attlog
1822976 INFO  2025-11-21 09:24:13775 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
1822979 INFO  2025-11-21 09:24:13778 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1822979 INFO  2025-11-21 09:24:13778 UploadProcess:327 - end process data and return msg to device
1822981 INFO  2025-11-21 09:24:13780 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
1822983 INFO  2025-11-21 09:24:13782 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1822984 INFO  2025-11-21 09:24:13783 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
1822982 INFO  2025-11-21 09:24:13781 UploadProcess:331 - return msg to device and request over OK
1822985 INFO  2025-11-21 09:24:13784 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
1822993 INFO  2025-11-21 09:24:13792 ExternalApiUtil:177 - EXTERNAL API: Method: POST
1822995 INFO  2025-11-21 09:24:13794 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 12:24:13 EAT 2025
1822997 INFO  2025-11-21 09:24:13796 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
1823000 INFO  2025-11-21 09:24:13799 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
1823004 INFO  2025-11-21 09:24:13803 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
1823006 INFO  2025-11-21 09:24:13805 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 12:24 - Meal type determined: lunch
1823008 INFO  2025-11-21 09:24:13807 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
1823009 INFO  2025-11-21 09:24:13808 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
1823017 INFO  2025-11-21 09:24:13816 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
1823019 INFO  2025-11-21 09:24:13818 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1823020 INFO  2025-11-21 09:24:13819 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
1823022 INFO  2025-11-21 09:24:13821 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1823294 INFO  2025-11-21 09:24:1493 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1823295 INFO  2025-11-21 09:24:1494 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
1823295 INFO  2025-11-21 09:24:1494 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1823296 INFO  2025-11-21 09:24:1495 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
1823298 INFO  2025-11-21 09:24:1497 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1823298 INFO  2025-11-21 09:24:1497 ExternalApiUtil:281 - âœ… EXTERNAL API CALL SUCCESSFUL
1823299 INFO  2025-11-21 09:24:1498 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1823300 INFO  2025-11-21 09:24:1499 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1002 (original: 1002)
1823301 INFO  2025-11-21 09:24:14100 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 201
1823301 INFO  2025-11-21 09:24:14100 ExternalApiUtil:285 - EXTERNAL API: API Response Success: true
1823302 INFO  2025-11-21 09:24:14101 ExternalApiUtil:286 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"733c3cbf-91c1-4af9-82b0-c014e7f1b6ef","student_id":"1002","student_name":"Aaron Kailikia","admission_no":"1002","meal_type":"lunch","amount":0.0,"date":"2025-11-21T12:24:13.838822+03:00","status":"authorized","qr_code":"1002-lunch-2025-11-21-1763717053839","student_image":"/api/uploads/students/1002.png","created_at":"2025-11-21T12:24:13.838345+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
1823304 INFO  2025-11-21 09:24:14103 ExternalApiUtil:287 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1823334 INFO  2025-11-21 09:24:14133 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1002
1824170 INFO  2025-11-21 09:24:14969 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,6,0,287,10.244.175.186,10,35,12,5,11110,4,0,0
1824188 INFO  2025-11-21 09:24:14987 DownloadProcess:59 - get cmd list over and begin contact:0
1824193 INFO  2025-11-21 09:24:14992 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,6,0,287,10.244.175.186,10,35,12,5,11110,4,0,0
1846737 INFO  2025-11-21 09:24:37536 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1846743 INFO  2025-11-21 09:24:37542 DownloadProcess:59 - get cmd list over and begin contact:0
1872190 INFO  2025-11-21 09:25:02989 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1872197 INFO  2025-11-21 09:25:02996 DownloadProcess:59 - get cmd list over and begin contact:0
1897848 INFO  2025-11-21 09:25:28647 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1897854 INFO  2025-11-21 09:25:28653 DownloadProcess:59 - get cmd list over and begin contact:0
1924739 INFO  2025-11-21 09:25:55538 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1924743 INFO  2025-11-21 09:25:55542 DownloadProcess:59 - get cmd list over and begin contact:0
1955449 INFO  2025-11-21 09:26:26248 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
1955460 INFO  2025-11-21 09:26:26259 DownloadProcess:59 - get cmd list over and begin contact:0
1983907 INFO  2025-11-21 09:26:54706 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
1983920 INFO  2025-11-21 09:26:54719 UploadProcess:266 - update device stamp end and get stream.
1983926 INFO  2025-11-21 09:26:54725 UploadProcess:323 - data:1002	2025-11-22 05:26:53	0	15	0	0	0	0	0	0	

1983928 INFO  2025-11-21 09:26:54727 UploadProcess:324 - end get stream and process data
1983930 INFO  2025-11-21 09:26:54729 UploadProcess:523 - begin parse op attlog
1983943 INFO  2025-11-21 09:26:54742 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
1983944 INFO  2025-11-21 09:26:54743 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
1983945 INFO  2025-11-21 09:26:54744 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 05:26:53
1983946 INFO  2025-11-21 09:26:54745 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
1983947 INFO  2025-11-21 09:26:54746 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1983948 INFO  2025-11-21 09:26:54747 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
1983950 INFO  2025-11-21 09:26:54749 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1983952 INFO  2025-11-21 09:26:54751 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
1983953 INFO  2025-11-21 09:26:54752 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 05:26:53
1983953 INFO  2025-11-21 09:26:54752 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
1983955 INFO  2025-11-21 09:26:54754 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1983956 INFO  2025-11-21 09:26:54755 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
1983959 INFO  2025-11-21 09:26:54758 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
1983962 INFO  2025-11-21 09:26:54761 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 05:26:53
1983963 INFO  2025-11-21 09:26:54762 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
1983966 INFO  2025-11-21 09:26:54765 UploadProcess:412 - attlog size:1
1983967 INFO  2025-11-21 09:26:54766 UploadProcess:525 - end parse op attlog
1983968 INFO  2025-11-21 09:26:54767 UploadProcess:327 - end process data and return msg to device
1983965 INFO  2025-11-21 09:26:54764 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
1983970 INFO  2025-11-21 09:26:54769 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1983971 INFO  2025-11-21 09:26:54770 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
1983971 INFO  2025-11-21 09:26:54770 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1983971 INFO  2025-11-21 09:26:54770 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
1983972 INFO  2025-11-21 09:26:54771 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
1983972 INFO  2025-11-21 09:26:54771 ExternalApiUtil:177 - EXTERNAL API: Method: POST
1983972 INFO  2025-11-21 09:26:54771 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 12:26:54 EAT 2025
1983974 INFO  2025-11-21 09:26:54773 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
1983969 INFO  2025-11-21 09:26:54768 UploadProcess:331 - return msg to device and request over OK
1983976 INFO  2025-11-21 09:26:54775 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
1983977 INFO  2025-11-21 09:26:54776 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
1983979 INFO  2025-11-21 09:26:54778 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 12:26 - Meal type determined: lunch
1983979 INFO  2025-11-21 09:26:54778 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
1983979 INFO  2025-11-21 09:26:54778 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
1983983 INFO  2025-11-21 09:26:54782 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
1983983 INFO  2025-11-21 09:26:54782 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1983985 INFO  2025-11-21 09:26:54784 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
1983986 INFO  2025-11-21 09:26:54785 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1984314 INFO  2025-11-21 09:26:55113 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1984314 INFO  2025-11-21 09:26:55113 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
1984315 INFO  2025-11-21 09:26:55114 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1984316 INFO  2025-11-21 09:26:55115 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
1984317 INFO  2025-11-21 09:26:55116 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1984318 INFO  2025-11-21 09:26:55117 ExternalApiUtil:281 - âœ… EXTERNAL API CALL SUCCESSFUL
1984318 INFO  2025-11-21 09:26:55117 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1984319 INFO  2025-11-21 09:26:55118 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1002 (original: 1002)
1984319 INFO  2025-11-21 09:26:55118 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 201
1984320 INFO  2025-11-21 09:26:55119 ExternalApiUtil:285 - EXTERNAL API: API Response Success: true
1984320 INFO  2025-11-21 09:26:55119 ExternalApiUtil:286 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"995b2cc6-140f-40dd-a71d-ff20fa5f1775","student_id":"1002","student_name":"Aaron Kailikia","admission_no":"1002","meal_type":"lunch","amount":0.0,"date":"2025-11-21T12:26:54.800770+03:00","status":"authorized","qr_code":"1002-lunch-2025-11-21-1763717214801","student_image":"/api/uploads/students/1002.png","created_at":"2025-11-21T12:26:54.800426+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
1984321 INFO  2025-11-21 09:26:55120 ExternalApiUtil:287 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1984337 INFO  2025-11-21 09:26:55136 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1002
1984935 INFO  2025-11-21 09:26:55734 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,6,0,288,10.244.175.186,10,35,12,5,11110,4,0,0
1984944 INFO  2025-11-21 09:26:55743 DownloadProcess:59 - get cmd list over and begin contact:0
1984946 INFO  2025-11-21 09:26:55745 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,6,0,288,10.244.175.186,10,35,12,5,11110,4,0,0
2016409 INFO  2025-11-21 09:27:27208 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
2016415 INFO  2025-11-21 09:27:27214 DownloadProcess:59 - get cmd list over and begin contact:0
2047440 INFO  2025-11-21 09:27:58239 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
2047445 INFO  2025-11-21 09:27:58244 DownloadProcess:59 - get cmd list over and begin contact:0
2079882 INFO  2025-11-21 09:28:30681 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
2079886 INFO  2025-11-21 09:28:30685 DownloadProcess:59 - get cmd list over and begin contact:0
2109988 INFO  2025-11-21 09:29:00787 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
2110005 INFO  2025-11-21 09:29:00804 DownloadProcess:59 - get cmd list over and begin contact:0
2129499 INFO  2025-11-21 09:29:20298 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
2129509 INFO  2025-11-21 09:29:20308 UploadProcess:266 - update device stamp end and get stream.
2129511 INFO  2025-11-21 09:29:20310 UploadProcess:323 - data:1002	2025-11-22 05:29:19	0	15	0	0	0	0	0	0	

2129512 INFO  2025-11-21 09:29:20311 UploadProcess:324 - end get stream and process data
2129513 INFO  2025-11-21 09:29:20312 UploadProcess:523 - begin parse op attlog
2129521 INFO  2025-11-21 09:29:20320 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
2129522 INFO  2025-11-21 09:29:20321 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
2129523 INFO  2025-11-21 09:29:20322 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 05:29:19
2129525 INFO  2025-11-21 09:29:20324 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
2129528 INFO  2025-11-21 09:29:20327 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2129530 INFO  2025-11-21 09:29:20329 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
2129531 INFO  2025-11-21 09:29:20330 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2129532 INFO  2025-11-21 09:29:20331 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
2129533 INFO  2025-11-21 09:29:20332 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 05:29:19
2129534 INFO  2025-11-21 09:29:20333 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
2129537 INFO  2025-11-21 09:29:20336 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2129539 INFO  2025-11-21 09:29:20338 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
2129540 INFO  2025-11-21 09:29:20339 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
2129541 INFO  2025-11-21 09:29:20340 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
2129541 INFO  2025-11-21 09:29:20340 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 05:29:19
2129543 INFO  2025-11-21 09:29:20342 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
2129542 INFO  2025-11-21 09:29:20341 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2129544 INFO  2025-11-21 09:29:20343 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
2129544 INFO  2025-11-21 09:29:20343 UploadProcess:412 - attlog size:1
2129549 INFO  2025-11-21 09:29:20348 UploadProcess:525 - end parse op attlog
2129550 INFO  2025-11-21 09:29:20349 UploadProcess:327 - end process data and return msg to device
2129546 INFO  2025-11-21 09:29:20345 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2129553 INFO  2025-11-21 09:29:20352 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
2129554 INFO  2025-11-21 09:29:20353 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
2129552 INFO  2025-11-21 09:29:20351 UploadProcess:331 - return msg to device and request over OK
2129555 INFO  2025-11-21 09:29:20354 ExternalApiUtil:177 - EXTERNAL API: Method: POST
2129556 INFO  2025-11-21 09:29:20355 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 12:29:20 EAT 2025
2129557 INFO  2025-11-21 09:29:20356 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
2129558 INFO  2025-11-21 09:29:20357 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
2129559 INFO  2025-11-21 09:29:20358 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
2129560 INFO  2025-11-21 09:29:20359 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 12:29 - Meal type determined: lunch
2129561 INFO  2025-11-21 09:29:20360 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
2129562 INFO  2025-11-21 09:29:20361 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
2129567 INFO  2025-11-21 09:29:20366 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
2129568 INFO  2025-11-21 09:29:20367 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2129569 INFO  2025-11-21 09:29:20368 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
2129569 INFO  2025-11-21 09:29:20368 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2130320 INFO  2025-11-21 09:29:21119 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2130322 INFO  2025-11-21 09:29:21121 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
2130324 INFO  2025-11-21 09:29:21123 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2130324 INFO  2025-11-21 09:29:21123 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
2130326 INFO  2025-11-21 09:29:21125 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2130327 INFO  2025-11-21 09:29:21126 ExternalApiUtil:281 - âœ… EXTERNAL API CALL SUCCESSFUL
2130327 INFO  2025-11-21 09:29:21126 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2130328 INFO  2025-11-21 09:29:21127 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1002 (original: 1002)
2130328 INFO  2025-11-21 09:29:21127 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 201
2130329 INFO  2025-11-21 09:29:21128 ExternalApiUtil:285 - EXTERNAL API: API Response Success: true
2130330 INFO  2025-11-21 09:29:21129 ExternalApiUtil:286 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"85642116-baf2-4b82-822b-28f6149e705c","student_id":"1002","student_name":"Aaron Kailikia","admission_no":"1002","meal_type":"lunch","amount":0.0,"date":"2025-11-21T12:29:20.969844+03:00","status":"authorized","qr_code":"1002-lunch-2025-11-21-1763717360970","student_image":"/api/uploads/students/1002.png","created_at":"2025-11-21T12:29:20.969446+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
2130330 INFO  2025-11-21 09:29:21129 ExternalApiUtil:287 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2130338 INFO  2025-11-21 09:29:21137 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1002
2139990 INFO  2025-11-21 09:29:30789 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,6,0,289,10.244.175.186,10,35,12,5,11110,4,0,0
2140094 INFO  2025-11-21 09:29:30893 DownloadProcess:59 - get cmd list over and begin contact:0
2140095 INFO  2025-11-21 09:29:30894 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,6,0,289,10.244.175.186,10,35,12,5,11110,4,0,0
2171025 INFO  2025-11-21 09:30:01824 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
2171029 INFO  2025-11-21 09:30:01828 DownloadProcess:59 - get cmd list over and begin contact:0
2189238 INFO  2025-11-21 09:30:2037 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
2189271 INFO  2025-11-21 09:30:2070 UploadProcess:266 - update device stamp end and get stream.
2189283 INFO  2025-11-21 09:30:2082 UploadProcess:323 - data:1002	2025-11-22 05:30:19	0	15	0	0	0	0	0	0	

2189287 INFO  2025-11-21 09:30:2086 UploadProcess:324 - end get stream and process data
2189304 INFO  2025-11-21 09:30:20103 UploadProcess:523 - begin parse op attlog
2189388 INFO  2025-11-21 09:30:20187 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
2189390 INFO  2025-11-21 09:30:20189 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
2189401 INFO  2025-11-21 09:30:20200 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 05:30:19
2189404 INFO  2025-11-21 09:30:20203 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
2189406 INFO  2025-11-21 09:30:20205 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2189416 INFO  2025-11-21 09:30:20215 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
2189417 INFO  2025-11-21 09:30:20216 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2189419 INFO  2025-11-21 09:30:20218 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
2189422 INFO  2025-11-21 09:30:20221 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 05:30:19
2189425 INFO  2025-11-21 09:30:20224 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
2189426 INFO  2025-11-21 09:30:20225 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2189427 INFO  2025-11-21 09:30:20226 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
2189430 INFO  2025-11-21 09:30:20229 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
2189430 INFO  2025-11-21 09:30:20229 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
2189432 INFO  2025-11-21 09:30:20231 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2189433 INFO  2025-11-21 09:30:20232 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
2189434 INFO  2025-11-21 09:30:20233 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2189435 INFO  2025-11-21 09:30:20234 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
2189437 INFO  2025-11-21 09:30:20236 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
2189438 INFO  2025-11-21 09:30:20237 ExternalApiUtil:177 - EXTERNAL API: Method: POST
2189440 INFO  2025-11-21 09:30:20239 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 12:30:20 EAT 2025
2189442 INFO  2025-11-21 09:30:20241 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
2189431 INFO  2025-11-21 09:30:20230 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 05:30:19
2189443 INFO  2025-11-21 09:30:20242 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
2189444 INFO  2025-11-21 09:30:20243 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
2189446 INFO  2025-11-21 09:30:20245 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 12:30 - Meal type determined: lunch
2189444 INFO  2025-11-21 09:30:20243 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
2189450 INFO  2025-11-21 09:30:20249 UploadProcess:412 - attlog size:1
2189450 INFO  2025-11-21 09:30:20249 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
2189452 INFO  2025-11-21 09:30:20251 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
2189452 INFO  2025-11-21 09:30:20251 UploadProcess:525 - end parse op attlog
2189475 INFO  2025-11-21 09:30:20274 UploadProcess:327 - end process data and return msg to device
2189476 INFO  2025-11-21 09:30:20275 UploadProcess:331 - return msg to device and request over OK
2189477 INFO  2025-11-21 09:30:20276 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
2189480 INFO  2025-11-21 09:30:20279 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2189483 INFO  2025-11-21 09:30:20282 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
2189485 INFO  2025-11-21 09:30:20284 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2189925 INFO  2025-11-21 09:30:20724 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2189927 INFO  2025-11-21 09:30:20726 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
2189929 INFO  2025-11-21 09:30:20728 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2189929 INFO  2025-11-21 09:30:20728 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
2189936 INFO  2025-11-21 09:30:20735 ExternalApiUtil:280 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2189939 INFO  2025-11-21 09:30:20738 ExternalApiUtil:281 - âœ… EXTERNAL API CALL SUCCESSFUL
2189944 INFO  2025-11-21 09:30:20743 ExternalApiUtil:282 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2189952 INFO  2025-11-21 09:30:20751 ExternalApiUtil:283 - EXTERNAL API: Student ID: 1002 (original: 1002)
2189953 INFO  2025-11-21 09:30:20752 ExternalApiUtil:284 - EXTERNAL API: HTTP Status Code: 201
2189953 INFO  2025-11-21 09:30:20752 ExternalApiUtil:285 - EXTERNAL API: API Response Success: true
2189954 INFO  2025-11-21 09:30:20753 ExternalApiUtil:286 - EXTERNAL API: Response Body: {"success":true,"meal_card":{"id":"115bd681-a131-46d8-8033-77094164e963","student_id":"1002","student_name":"Aaron Kailikia","admission_no":"1002","meal_type":"lunch","amount":0.0,"date":"2025-11-21T12:30:20.675249+03:00","status":"authorized","qr_code":"1002-lunch-2025-11-21-1763717420675","student_image":"/api/uploads/students/1002.png","created_at":"2025-11-21T12:30:20.674699+03:00","used_at":null},"eligible":true,"reason":"Student has fully paid fees. Meal card generated successfully.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
2189954 INFO  2025-11-21 09:30:20753 ExternalApiUtil:287 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2189978 INFO  2025-11-21 09:30:20777 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: SUCCESS, User: 1002
2201038 INFO  2025-11-21 09:30:31837 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,6,0,290,10.244.175.186,10,35,12,5,11110,4,0,0
2201046 INFO  2025-11-21 09:30:31845 DownloadProcess:59 - get cmd list over and begin contact:0
2201047 INFO  2025-11-21 09:30:31846 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,6,0,290,10.244.175.186,10,35,12,5,11110,4,0,0
2227788 INFO  2025-11-21 09:30:58587 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
2227865 INFO  2025-11-21 09:30:58664 UploadProcess:266 - update device stamp end and get stream.
2227867 INFO  2025-11-21 09:30:58666 UploadProcess:323 - data:L1005M	2025-11-22 05:30:57	0	4	0	0	0	0	0	0	

2227868 INFO  2025-11-21 09:30:58667 UploadProcess:324 - end get stream and process data
2227870 INFO  2025-11-21 09:30:58669 UploadProcess:523 - begin parse op attlog
2227896 INFO  2025-11-21 09:30:58695 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
2227897 INFO  2025-11-21 09:30:58696 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
2227901 INFO  2025-11-21 09:30:58700 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: L1005M, User Name: Joseph, Timestamp: 2025-11-22 05:30:57
2227902 INFO  2025-11-21 09:30:58701 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: L1005M
2227904 INFO  2025-11-21 09:30:58703 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2227908 INFO  2025-11-21 09:30:58707 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
2227909 INFO  2025-11-21 09:30:58708 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2227910 INFO  2025-11-21 09:30:58709 ExternalApiUtil:123 - EXTERNAL API: User ID: L1005M
2227911 INFO  2025-11-21 09:30:58710 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 05:30:57
2227913 INFO  2025-11-21 09:30:58712 ExternalApiUtil:125 - EXTERNAL API: User Name: Joseph
2227915 INFO  2025-11-21 09:30:58714 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2227916 INFO  2025-11-21 09:30:58715 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: L1005M
2227918 INFO  2025-11-21 09:30:58717 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: L1005M
2227918 INFO  2025-11-21 09:30:58717 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: L1005M
2227919 INFO  2025-11-21 09:30:58718 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2227920 INFO  2025-11-21 09:30:58719 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: L1005M, Timestamp: 2025-11-22 05:30:57
2227921 INFO  2025-11-21 09:30:58720 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
2227923 INFO  2025-11-21 09:30:58722 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
2227923 INFO  2025-11-21 09:30:58722 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2227924 INFO  2025-11-21 09:30:58723 ExternalApiUtil:175 - EXTERNAL API: User ID: L1005M
2227925 INFO  2025-11-21 09:30:58724 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
2227926 INFO  2025-11-21 09:30:58725 ExternalApiUtil:177 - EXTERNAL API: Method: POST
2227926 INFO  2025-11-21 09:30:58725 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 12:30:58 EAT 2025
2227923 INFO  2025-11-21 09:30:58722 UploadProcess:412 - attlog size:1
2227928 INFO  2025-11-21 09:30:58727 UploadProcess:525 - end parse op attlog
2227929 INFO  2025-11-21 09:30:58728 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
2227930 INFO  2025-11-21 09:30:58729 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
2227932 WARN  2025-11-21 09:30:58731 ExternalApiUtil:366 - User ID is not a number: L1005M, using as-is
2227933 INFO  2025-11-21 09:30:58732 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: L1005M, Formatted: L1005M
2227933 INFO  2025-11-21 09:30:58732 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 12:30 - Meal type determined: lunch
2227934 INFO  2025-11-21 09:30:58733 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "L1005M", "meal_type": "lunch"}
2227935 INFO  2025-11-21 09:30:58734 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
2227930 INFO  2025-11-21 09:30:58729 UploadProcess:327 - end process data and return msg to device
2227938 INFO  2025-11-21 09:30:58737 UploadProcess:331 - return msg to device and request over OK
2227939 INFO  2025-11-21 09:30:58738 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
2227940 INFO  2025-11-21 09:30:58739 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2227942 INFO  2025-11-21 09:30:58741 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
2227942 INFO  2025-11-21 09:30:58741 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2227973 INFO  2025-11-21 09:30:58772 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2227974 INFO  2025-11-21 09:30:58773 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
2227976 INFO  2025-11-21 09:30:58775 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2227976 INFO  2025-11-21 09:30:58775 ExternalApiUtil:223 - EXTERNAL API: Response code received: 500
2227978 WARN  2025-11-21 09:30:58777 ExternalApiUtil:293 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2227979 WARN  2025-11-21 09:30:58778 ExternalApiUtil:294 - âš ï¸  EXTERNAL API CALL FAILED OR RETURNED ERROR
2227985 WARN  2025-11-21 09:30:58784 ExternalApiUtil:295 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2227986 WARN  2025-11-21 09:30:58785 ExternalApiUtil:296 - EXTERNAL API: Student ID: L1005M (original: L1005M)
2227987 WARN  2025-11-21 09:30:58786 ExternalApiUtil:297 - EXTERNAL API: HTTP Status Code: 500 (ERROR)
2227988 WARN  2025-11-21 09:30:58787 ExternalApiUtil:298 - EXTERNAL API: API Response Success: false
2227989 WARN  2025-11-21 09:30:58788 ExternalApiUtil:302 - EXTERNAL API: Response Body: <!DOCTYPE HTML><html lang="en">    <head>        <meta charset="utf-8">        <title>Error response</title>    </head>    <body>        <h1>Error response</h1>        <p>Error code: 500</p>        <p>Message: Proxy error: HTTP Error 404: Not Found.</p>        <p>Error code explanation: 500 - Server got itself in trouble.</p>    </body></html>
2227990 WARN  2025-11-21 09:30:58789 ExternalApiUtil:303 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2227997 INFO  2025-11-21 09:30:58796 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: FAILED, User: L1005M
2231847 INFO  2025-11-21 09:31:02646 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,6,0,291,10.244.175.186,10,35,12,5,11110,4,0,0
2231849 INFO  2025-11-21 09:31:02648 DownloadProcess:59 - get cmd list over and begin contact:0
2231853 INFO  2025-11-21 09:31:02652 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,6,0,291,10.244.175.186,10,35,12,5,11110,4,0,0
2255134 INFO  2025-11-21 09:31:25933 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
2255145 INFO  2025-11-21 09:31:25944 UploadProcess:266 - update device stamp end and get stream.
2255147 INFO  2025-11-21 09:31:25946 UploadProcess:323 - data:1002	2025-11-22 05:31:23	0	4	0	0	0	0	0	0	

2255148 INFO  2025-11-21 09:31:25947 UploadProcess:324 - end get stream and process data
2255148 INFO  2025-11-21 09:31:25947 UploadProcess:523 - begin parse op attlog
2255254 INFO  2025-11-21 09:31:2653 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
2255255 INFO  2025-11-21 09:31:2654 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
2255256 INFO  2025-11-21 09:31:2655 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 05:31:23
2255257 INFO  2025-11-21 09:31:2656 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
2255258 INFO  2025-11-21 09:31:2657 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2255259 INFO  2025-11-21 09:31:2658 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
2255261 INFO  2025-11-21 09:31:2660 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2255262 INFO  2025-11-21 09:31:2661 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
2255263 INFO  2025-11-21 09:31:2662 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 05:31:23
2255265 INFO  2025-11-21 09:31:2664 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
2255266 INFO  2025-11-21 09:31:2665 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2255269 INFO  2025-11-21 09:31:2668 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
2255270 INFO  2025-11-21 09:31:2669 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
2255270 INFO  2025-11-21 09:31:2669 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 05:31:23
2255271 INFO  2025-11-21 09:31:2670 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
2255272 INFO  2025-11-21 09:31:2671 UploadProcess:412 - attlog size:1
2255273 INFO  2025-11-21 09:31:2672 UploadProcess:525 - end parse op attlog
2255274 INFO  2025-11-21 09:31:2673 UploadProcess:327 - end process data and return msg to device
2255270 INFO  2025-11-21 09:31:2669 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
2255276 INFO  2025-11-21 09:31:2675 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2255277 INFO  2025-11-21 09:31:2676 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
2255277 INFO  2025-11-21 09:31:2676 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2255278 INFO  2025-11-21 09:31:2677 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
2255278 INFO  2025-11-21 09:31:2677 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
2255279 INFO  2025-11-21 09:31:2678 ExternalApiUtil:177 - EXTERNAL API: Method: POST
2255279 INFO  2025-11-21 09:31:2678 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 12:31:26 EAT 2025
2255279 INFO  2025-11-21 09:31:2678 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
2255280 INFO  2025-11-21 09:31:2679 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
2255281 INFO  2025-11-21 09:31:2680 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
2255281 INFO  2025-11-21 09:31:2680 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 12:31 - Meal type determined: lunch
2255282 INFO  2025-11-21 09:31:2681 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
2255282 INFO  2025-11-21 09:31:2681 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
2255275 INFO  2025-11-21 09:31:2674 UploadProcess:331 - return msg to device and request over OK
2255290 INFO  2025-11-21 09:31:2689 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
2255292 INFO  2025-11-21 09:31:2691 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2255292 INFO  2025-11-21 09:31:2691 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
2255293 INFO  2025-11-21 09:31:2692 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2256578 INFO  2025-11-21 09:31:27377 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2256579 INFO  2025-11-21 09:31:27378 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
2256580 INFO  2025-11-21 09:31:27379 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2256580 INFO  2025-11-21 09:31:27379 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
2256582 WARN  2025-11-21 09:31:27381 ExternalApiUtil:293 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2256582 WARN  2025-11-21 09:31:27381 ExternalApiUtil:294 - âš ï¸  EXTERNAL API CALL FAILED OR RETURNED ERROR
2256583 WARN  2025-11-21 09:31:27382 ExternalApiUtil:295 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2256583 WARN  2025-11-21 09:31:27382 ExternalApiUtil:296 - EXTERNAL API: Student ID: 1002 (original: 1002)
2256584 WARN  2025-11-21 09:31:27383 ExternalApiUtil:297 - EXTERNAL API: HTTP Status Code: 201 (OK)
2256585 WARN  2025-11-21 09:31:27384 ExternalApiUtil:298 - EXTERNAL API: API Response Success: false
2256585 WARN  2025-11-21 09:31:27384 ExternalApiUtil:300 - EXTERNAL API: Error Reason: Student 1002 already has a lunch meal card for 2025-11-21. Activate student for reprint to allow generating a new card, or set force=true.
2256586 WARN  2025-11-21 09:31:27385 ExternalApiUtil:302 - EXTERNAL API: Response Body: {"success":false,"meal_card":null,"eligible":true,"reason":"Student 1002 already has a lunch meal card for 2025-11-21. Activate student for reprint to allow generating a new card, or set force=true.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
2256586 WARN  2025-11-21 09:31:27385 ExternalApiUtil:303 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2256595 INFO  2025-11-21 09:31:27394 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
2262331 INFO  2025-11-21 09:31:33130 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,6,0,292,10.244.175.186,10,35,12,5,11110,4,0,0
2262334 INFO  2025-11-21 09:31:33133 DownloadProcess:59 - get cmd list over and begin contact:0
2262334 INFO  2025-11-21 09:31:33133 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,6,0,292,10.244.175.186,10,35,12,5,11110,4,0,0
2293066 INFO  2025-11-21 09:32:03865 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
2293070 INFO  2025-11-21 09:32:03869 DownloadProcess:59 - get cmd list over and begin contact:0
2323022 INFO  2025-11-21 09:32:33821 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
2323028 INFO  2025-11-21 09:32:33827 DownloadProcess:59 - get cmd list over and begin contact:0
2324872 INFO  2025-11-21 09:32:35671 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
2324881 INFO  2025-11-21 09:32:35680 UploadProcess:266 - update device stamp end and get stream.
2324884 INFO  2025-11-21 09:32:35683 UploadProcess:323 - data:1002	2025-11-22 05:32:34	0	4	0	0	0	0	0	0	

2324885 INFO  2025-11-21 09:32:35684 UploadProcess:324 - end get stream and process data
2324885 INFO  2025-11-21 09:32:35684 UploadProcess:523 - begin parse op attlog
2324893 INFO  2025-11-21 09:32:35692 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
2324893 INFO  2025-11-21 09:32:35692 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
2324894 INFO  2025-11-21 09:32:35693 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 05:32:34
2324894 INFO  2025-11-21 09:32:35693 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
2324895 INFO  2025-11-21 09:32:35694 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2324896 INFO  2025-11-21 09:32:35695 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
2324896 INFO  2025-11-21 09:32:35695 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2324897 INFO  2025-11-21 09:32:35696 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
2324897 INFO  2025-11-21 09:32:35696 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 05:32:34
2324898 INFO  2025-11-21 09:32:35697 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
2324898 INFO  2025-11-21 09:32:35697 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2324899 INFO  2025-11-21 09:32:35698 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
2324899 INFO  2025-11-21 09:32:35698 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
2324900 INFO  2025-11-21 09:32:35699 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 05:32:34
2324901 INFO  2025-11-21 09:32:35700 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
2324901 INFO  2025-11-21 09:32:35700 UploadProcess:412 - attlog size:1
2324902 INFO  2025-11-21 09:32:35701 UploadProcess:525 - end parse op attlog
2324902 INFO  2025-11-21 09:32:35701 UploadProcess:327 - end process data and return msg to device
2324903 INFO  2025-11-21 09:32:35702 UploadProcess:331 - return msg to device and request over OK
2324900 INFO  2025-11-21 09:32:35699 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
2324905 INFO  2025-11-21 09:32:35704 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2324905 INFO  2025-11-21 09:32:35704 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
2324906 INFO  2025-11-21 09:32:35705 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2324907 INFO  2025-11-21 09:32:35706 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
2324909 INFO  2025-11-21 09:32:35708 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
2324910 INFO  2025-11-21 09:32:35709 ExternalApiUtil:177 - EXTERNAL API: Method: POST
2324910 INFO  2025-11-21 09:32:35709 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 12:32:35 EAT 2025
2324911 INFO  2025-11-21 09:32:35710 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
2324912 INFO  2025-11-21 09:32:35711 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
2324914 INFO  2025-11-21 09:32:35713 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
2324915 INFO  2025-11-21 09:32:35714 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 12:32 - Meal type determined: lunch
2324916 INFO  2025-11-21 09:32:35715 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
2324916 INFO  2025-11-21 09:32:35715 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
2324920 INFO  2025-11-21 09:32:35719 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
2324921 INFO  2025-11-21 09:32:35720 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2324921 INFO  2025-11-21 09:32:35720 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
2324922 INFO  2025-11-21 09:32:35721 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2325317 INFO  2025-11-21 09:32:36116 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2325318 INFO  2025-11-21 09:32:36117 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
2325318 INFO  2025-11-21 09:32:36117 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2325319 INFO  2025-11-21 09:32:36118 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
2325321 WARN  2025-11-21 09:32:36120 ExternalApiUtil:293 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2325321 WARN  2025-11-21 09:32:36120 ExternalApiUtil:294 - âš ï¸  EXTERNAL API CALL FAILED OR RETURNED ERROR
2325322 WARN  2025-11-21 09:32:36121 ExternalApiUtil:295 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2325322 WARN  2025-11-21 09:32:36121 ExternalApiUtil:296 - EXTERNAL API: Student ID: 1002 (original: 1002)
2325323 WARN  2025-11-21 09:32:36122 ExternalApiUtil:297 - EXTERNAL API: HTTP Status Code: 201 (OK)
2325323 WARN  2025-11-21 09:32:36122 ExternalApiUtil:298 - EXTERNAL API: API Response Success: false
2325324 WARN  2025-11-21 09:32:36123 ExternalApiUtil:300 - EXTERNAL API: Error Reason: Student already has a lunch meal card for 2025-11-21. Activate student for reprint to allow generating a new card, or set force=true to allow duplicate.
2325325 WARN  2025-11-21 09:32:36124 ExternalApiUtil:302 - EXTERNAL API: Response Body: {"success":false,"meal_card":null,"eligible":true,"reason":"Student already has a lunch meal card for 2025-11-21. Activate student for reprint to allow generating a new card, or set force=true to allow duplicate.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
2325325 WARN  2025-11-21 09:32:36124 ExternalApiUtil:303 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2325332 INFO  2025-11-21 09:32:36131 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
2353992 INFO  2025-11-21 09:33:04791 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,6,0,293,10.244.175.186,10,35,12,5,11110,4,0,0
2353997 INFO  2025-11-21 09:33:04796 DownloadProcess:59 - get cmd list over and begin contact:0
2353998 INFO  2025-11-21 09:33:04797 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,6,0,293,10.244.175.186,10,35,12,5,11110,4,0,0
2384538 INFO  2025-11-21 09:33:35337 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
2384540 INFO  2025-11-21 09:33:35339 DownloadProcess:59 - get cmd list over and begin contact:0
2415663 INFO  2025-11-21 09:34:06462 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
2415667 INFO  2025-11-21 09:34:06466 DownloadProcess:59 - get cmd list over and begin contact:0
2444931 INFO  2025-11-21 09:34:35730 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
2444933 INFO  2025-11-21 09:34:35732 DownloadProcess:59 - get cmd list over and begin contact:0
2476677 INFO  2025-11-21 09:35:07476 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
2476678 INFO  2025-11-21 09:35:07477 DownloadProcess:59 - get cmd list over and begin contact:0
2499446 INFO  2025-11-21 09:35:30245 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
2499454 INFO  2025-11-21 09:35:30253 UploadProcess:266 - update device stamp end and get stream.
2499459 INFO  2025-11-21 09:35:30258 UploadProcess:323 - data:1002	2025-11-22 05:35:29	0	15	0	0	0	0	0	0	

2499460 INFO  2025-11-21 09:35:30259 UploadProcess:324 - end get stream and process data
2499461 INFO  2025-11-21 09:35:30260 UploadProcess:523 - begin parse op attlog
2499470 INFO  2025-11-21 09:35:30269 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
2499471 INFO  2025-11-21 09:35:30270 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
2499472 INFO  2025-11-21 09:35:30271 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 05:35:29
2499473 INFO  2025-11-21 09:35:30272 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
2499473 INFO  2025-11-21 09:35:30272 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2499474 INFO  2025-11-21 09:35:30273 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
2499475 INFO  2025-11-21 09:35:30274 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2499475 INFO  2025-11-21 09:35:30274 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
2499476 INFO  2025-11-21 09:35:30275 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 05:35:29
2499476 INFO  2025-11-21 09:35:30275 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
2499477 INFO  2025-11-21 09:35:30276 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2499477 INFO  2025-11-21 09:35:30276 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
2499479 INFO  2025-11-21 09:35:30278 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
2499480 INFO  2025-11-21 09:35:30279 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 05:35:29
2499480 INFO  2025-11-21 09:35:30279 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
2499481 INFO  2025-11-21 09:35:30280 UploadProcess:412 - attlog size:1
2499482 INFO  2025-11-21 09:35:30281 UploadProcess:525 - end parse op attlog
2499483 INFO  2025-11-21 09:35:30282 UploadProcess:327 - end process data and return msg to device
2499479 INFO  2025-11-21 09:35:30278 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
2499484 INFO  2025-11-21 09:35:30283 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2499484 INFO  2025-11-21 09:35:30283 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
2499484 INFO  2025-11-21 09:35:30283 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2499485 INFO  2025-11-21 09:35:30284 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
2499485 INFO  2025-11-21 09:35:30284 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
2499486 INFO  2025-11-21 09:35:30285 ExternalApiUtil:177 - EXTERNAL API: Method: POST
2499486 INFO  2025-11-21 09:35:30285 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 12:35:30 EAT 2025
2499487 INFO  2025-11-21 09:35:30286 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
2499487 INFO  2025-11-21 09:35:30286 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
2499488 INFO  2025-11-21 09:35:30287 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
2499489 INFO  2025-11-21 09:35:30288 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 12:35 - Meal type determined: lunch
2499489 INFO  2025-11-21 09:35:30288 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
2499490 INFO  2025-11-21 09:35:30289 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
2499483 INFO  2025-11-21 09:35:30282 UploadProcess:331 - return msg to device and request over OK
2499494 INFO  2025-11-21 09:35:30293 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
2499495 INFO  2025-11-21 09:35:30294 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2499496 INFO  2025-11-21 09:35:30295 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
2499497 INFO  2025-11-21 09:35:30296 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2499629 INFO  2025-11-21 09:35:30428 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2499630 INFO  2025-11-21 09:35:30429 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
2499631 INFO  2025-11-21 09:35:30430 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2499631 INFO  2025-11-21 09:35:30430 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
2499633 WARN  2025-11-21 09:35:30432 ExternalApiUtil:293 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2499633 WARN  2025-11-21 09:35:30432 ExternalApiUtil:294 - âš ï¸  EXTERNAL API CALL FAILED OR RETURNED ERROR
2499634 WARN  2025-11-21 09:35:30433 ExternalApiUtil:295 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2499635 WARN  2025-11-21 09:35:30434 ExternalApiUtil:296 - EXTERNAL API: Student ID: 1002 (original: 1002)
2499635 WARN  2025-11-21 09:35:30434 ExternalApiUtil:297 - EXTERNAL API: HTTP Status Code: 201 (OK)
2499636 WARN  2025-11-21 09:35:30435 ExternalApiUtil:298 - EXTERNAL API: API Response Success: false
2499636 WARN  2025-11-21 09:35:30435 ExternalApiUtil:300 - EXTERNAL API: Error Reason: Student already has a lunch meal card for 2025-11-21. Activate student for reprint to allow generating a new card, or set force=true to allow duplicate.
2499637 WARN  2025-11-21 09:35:30436 ExternalApiUtil:302 - EXTERNAL API: Response Body: {"success":false,"meal_card":null,"eligible":true,"reason":"Student already has a lunch meal card for 2025-11-21. Activate student for reprint to allow generating a new card, or set force=true to allow duplicate.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
2499637 WARN  2025-11-21 09:35:30436 ExternalApiUtil:303 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2499644 INFO  2025-11-21 09:35:30443 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
2505911 INFO  2025-11-21 09:35:36710 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,6,0,294,10.244.175.186,10,35,12,5,11110,4,0,0
2505920 INFO  2025-11-21 09:35:36719 DownloadProcess:59 - get cmd list over and begin contact:0
2505927 INFO  2025-11-21 09:35:36726 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,6,0,294,10.244.175.186,10,35,12,5,11110,4,0,0
2523789 INFO  2025-11-21 09:35:54588 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=OPERLOG&Stamp=9999
2523926 INFO  2025-11-21 09:35:54725 UploadProcess:266 - update device stamp end and get stream.
2523929 INFO  2025-11-21 09:35:54728 UploadProcess:323 - data:OPLOG 4	1002	2025-11-22 05:35:53	1002	0	0	0

2523930 INFO  2025-11-21 09:35:54729 UploadProcess:324 - end get stream and process data
2523933 INFO  2025-11-21 09:35:54732 UploadProcess:474 - begin parse op log
2523953 INFO  2025-11-21 09:35:54752 UploadProcess:235 - oplog size:1
2523955 INFO  2025-11-21 09:35:54754 UploadProcess:476 - end parse op log
2523956 INFO  2025-11-21 09:35:54755 UploadProcess:327 - end process data and return msg to device
2523960 INFO  2025-11-21 09:35:54759 UploadProcess:331 - return msg to device and request over OK
2536957 INFO  2025-11-21 09:36:07756 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
2536960 INFO  2025-11-21 09:36:07759 DownloadProcess:59 - get cmd list over and begin contact:0
2566986 INFO  2025-11-21 09:36:37785 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
2566988 INFO  2025-11-21 09:36:37787 DownloadProcess:59 - get cmd list over and begin contact:0
2597765 INFO  2025-11-21 09:37:08564 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
2597768 INFO  2025-11-21 09:37:08567 DownloadProcess:59 - get cmd list over and begin contact:0
2627676 INFO  2025-11-21 09:37:38475 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
2627679 INFO  2025-11-21 09:37:38478 DownloadProcess:59 - get cmd list over and begin contact:0
2658944 INFO  2025-11-21 09:38:09743 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
2658952 INFO  2025-11-21 09:38:09751 DownloadProcess:59 - get cmd list over and begin contact:0
2688845 INFO  2025-11-21 09:38:39644 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,6,0,295,10.244.175.186,10,35,12,5,11110,4,0,0
2688847 INFO  2025-11-21 09:38:39646 DownloadProcess:59 - get cmd list over and begin contact:0
2688847 INFO  2025-11-21 09:38:39646 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,6,0,295,10.244.175.186,10,35,12,5,11110,4,0,0
2689157 INFO  2025-11-21 09:38:39956 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
2689168 INFO  2025-11-21 09:38:39967 UploadProcess:266 - update device stamp end and get stream.
2689170 INFO  2025-11-21 09:38:39969 UploadProcess:323 - data:L1005M	2025-11-22 05:38:38	0	4	0	0	0	0	0	0	

2689171 INFO  2025-11-21 09:38:39970 UploadProcess:324 - end get stream and process data
2689171 INFO  2025-11-21 09:38:39970 UploadProcess:523 - begin parse op attlog
2689179 INFO  2025-11-21 09:38:39978 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
2689180 INFO  2025-11-21 09:38:39979 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
2689180 INFO  2025-11-21 09:38:39979 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: L1005M, User Name: Joseph, Timestamp: 2025-11-22 05:38:38
2689180 INFO  2025-11-21 09:38:39979 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: L1005M
2689181 INFO  2025-11-21 09:38:39980 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2689181 INFO  2025-11-21 09:38:39980 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
2689182 INFO  2025-11-21 09:38:39981 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2689182 INFO  2025-11-21 09:38:39981 ExternalApiUtil:123 - EXTERNAL API: User ID: L1005M
2689183 INFO  2025-11-21 09:38:39982 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 05:38:38
2689183 INFO  2025-11-21 09:38:39982 ExternalApiUtil:125 - EXTERNAL API: User Name: Joseph
2689184 INFO  2025-11-21 09:38:39983 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2689184 INFO  2025-11-21 09:38:39983 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: L1005M
2689185 INFO  2025-11-21 09:38:39984 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: L1005M
2689185 INFO  2025-11-21 09:38:39984 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: L1005M, Timestamp: 2025-11-22 05:38:38
2689186 INFO  2025-11-21 09:38:39985 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
2689187 INFO  2025-11-21 09:38:39986 UploadProcess:412 - attlog size:1
2689187 INFO  2025-11-21 09:38:39986 UploadProcess:525 - end parse op attlog
2689188 INFO  2025-11-21 09:38:39987 UploadProcess:327 - end process data and return msg to device
2689188 INFO  2025-11-21 09:38:39987 UploadProcess:331 - return msg to device and request over OK
2689185 INFO  2025-11-21 09:38:39984 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: L1005M
2689189 INFO  2025-11-21 09:38:39988 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2689190 INFO  2025-11-21 09:38:39989 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
2689190 INFO  2025-11-21 09:38:39989 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2689191 INFO  2025-11-21 09:38:39990 ExternalApiUtil:175 - EXTERNAL API: User ID: L1005M
2689191 INFO  2025-11-21 09:38:39990 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
2689192 INFO  2025-11-21 09:38:39991 ExternalApiUtil:177 - EXTERNAL API: Method: POST
2689192 INFO  2025-11-21 09:38:39991 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 12:38:39 EAT 2025
2689192 INFO  2025-11-21 09:38:39991 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
2689192 INFO  2025-11-21 09:38:39991 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
2689193 WARN  2025-11-21 09:38:39992 ExternalApiUtil:366 - User ID is not a number: L1005M, using as-is
2689193 INFO  2025-11-21 09:38:39992 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: L1005M, Formatted: L1005M
2689194 INFO  2025-11-21 09:38:39993 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 12:38 - Meal type determined: lunch
2689194 INFO  2025-11-21 09:38:39993 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "L1005M", "meal_type": "lunch"}
2689195 INFO  2025-11-21 09:38:39994 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
2689197 INFO  2025-11-21 09:38:39996 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
2689198 INFO  2025-11-21 09:38:39997 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2689199 INFO  2025-11-21 09:38:39998 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
2689199 INFO  2025-11-21 09:38:39998 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2689426 INFO  2025-11-21 09:38:40225 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2689427 INFO  2025-11-21 09:38:40226 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
2689428 INFO  2025-11-21 09:38:40227 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2689428 INFO  2025-11-21 09:38:40227 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
2689430 WARN  2025-11-21 09:38:40229 ExternalApiUtil:293 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2689432 WARN  2025-11-21 09:38:40231 ExternalApiUtil:294 - âš ï¸  EXTERNAL API CALL FAILED OR RETURNED ERROR
2689433 WARN  2025-11-21 09:38:40232 ExternalApiUtil:295 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2689433 WARN  2025-11-21 09:38:40232 ExternalApiUtil:296 - EXTERNAL API: Student ID: L1005M (original: L1005M)
2689434 WARN  2025-11-21 09:38:40233 ExternalApiUtil:297 - EXTERNAL API: HTTP Status Code: 201 (OK)
2689437 WARN  2025-11-21 09:38:40236 ExternalApiUtil:298 - EXTERNAL API: API Response Success: false
2689437 WARN  2025-11-21 09:38:40236 ExternalApiUtil:300 - EXTERNAL API: Error Reason: Student already has a lunch meal card for 2025-11-21. Activate student for reprint to allow generating a new card, or set force=true to allow duplicate.
2689438 WARN  2025-11-21 09:38:40237 ExternalApiUtil:302 - EXTERNAL API: Response Body: {"success":false,"meal_card":null,"eligible":true,"reason":"Student already has a lunch meal card for 2025-11-21. Activate student for reprint to allow generating a new card, or set force=true to allow duplicate.","student":{"student_id":"L1005M","name":"Joseph Bethwel","class_name":"2","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"79e2a8c1-3783-443f-8244-54efeb9931f3","face_registered":false,"face_image":null,"created_at":"2025-11-21T12:38:06.559157+03:00"}}
2689438 WARN  2025-11-21 09:38:40237 ExternalApiUtil:303 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2689445 INFO  2025-11-21 09:38:40244 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: FAILED, User: L1005M
2721486 INFO  2025-11-21 09:39:12285 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
2721489 INFO  2025-11-21 09:39:12288 DownloadProcess:59 - get cmd list over and begin contact:0
2750896 INFO  2025-11-21 09:39:41695 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
2750898 INFO  2025-11-21 09:39:41697 DownloadProcess:59 - get cmd list over and begin contact:0
2752535 INFO  2025-11-21 09:39:43334 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
2752553 INFO  2025-11-21 09:39:43352 UploadProcess:266 - update device stamp end and get stream.
2752555 INFO  2025-11-21 09:39:43354 UploadProcess:323 - data:1002	2025-11-22 05:39:41	0	4	0	0	0	0	0	0	

2752556 INFO  2025-11-21 09:39:43355 UploadProcess:324 - end get stream and process data
2752557 INFO  2025-11-21 09:39:43356 UploadProcess:523 - begin parse op attlog
2752572 INFO  2025-11-21 09:39:43371 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
2752573 INFO  2025-11-21 09:39:43372 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
2752574 INFO  2025-11-21 09:39:43373 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 05:39:41
2752574 INFO  2025-11-21 09:39:43373 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
2752575 INFO  2025-11-21 09:39:43374 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2752575 INFO  2025-11-21 09:39:43374 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
2752576 INFO  2025-11-21 09:39:43375 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2752576 INFO  2025-11-21 09:39:43375 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
2752577 INFO  2025-11-21 09:39:43376 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 05:39:41
2752577 INFO  2025-11-21 09:39:43376 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
2752578 INFO  2025-11-21 09:39:43377 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2752578 INFO  2025-11-21 09:39:43377 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
2752579 INFO  2025-11-21 09:39:43378 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
2752580 INFO  2025-11-21 09:39:43379 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 05:39:41
2752580 INFO  2025-11-21 09:39:43379 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
2752581 INFO  2025-11-21 09:39:43380 UploadProcess:412 - attlog size:1
2752582 INFO  2025-11-21 09:39:43381 UploadProcess:525 - end parse op attlog
2752582 INFO  2025-11-21 09:39:43381 UploadProcess:327 - end process data and return msg to device
2752583 INFO  2025-11-21 09:39:43382 UploadProcess:331 - return msg to device and request over OK
2752580 INFO  2025-11-21 09:39:43379 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
2752585 INFO  2025-11-21 09:39:43384 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2752586 INFO  2025-11-21 09:39:43385 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
2752586 INFO  2025-11-21 09:39:43385 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2752587 INFO  2025-11-21 09:39:43386 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
2752587 INFO  2025-11-21 09:39:43386 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
2752587 INFO  2025-11-21 09:39:43386 ExternalApiUtil:177 - EXTERNAL API: Method: POST
2752588 INFO  2025-11-21 09:39:43387 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 12:39:43 EAT 2025
2752588 INFO  2025-11-21 09:39:43387 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
2752589 INFO  2025-11-21 09:39:43388 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
2752590 INFO  2025-11-21 09:39:43389 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
2752590 INFO  2025-11-21 09:39:43389 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 12:39 - Meal type determined: lunch
2752590 INFO  2025-11-21 09:39:43389 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
2752591 INFO  2025-11-21 09:39:43390 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
2752596 INFO  2025-11-21 09:39:43395 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
2752597 INFO  2025-11-21 09:39:43396 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2752598 INFO  2025-11-21 09:39:43397 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
2752600 INFO  2025-11-21 09:39:43399 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2752684 INFO  2025-11-21 09:39:43483 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2752684 INFO  2025-11-21 09:39:43483 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
2752686 INFO  2025-11-21 09:39:43485 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2752686 INFO  2025-11-21 09:39:43485 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
2752688 WARN  2025-11-21 09:39:43487 ExternalApiUtil:293 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2752688 WARN  2025-11-21 09:39:43487 ExternalApiUtil:294 - âš ï¸  EXTERNAL API CALL FAILED OR RETURNED ERROR
2752690 WARN  2025-11-21 09:39:43489 ExternalApiUtil:295 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2752691 WARN  2025-11-21 09:39:43490 ExternalApiUtil:296 - EXTERNAL API: Student ID: 1002 (original: 1002)
2752693 WARN  2025-11-21 09:39:43492 ExternalApiUtil:297 - EXTERNAL API: HTTP Status Code: 201 (OK)
2752694 WARN  2025-11-21 09:39:43493 ExternalApiUtil:298 - EXTERNAL API: API Response Success: false
2752694 WARN  2025-11-21 09:39:43493 ExternalApiUtil:300 - EXTERNAL API: Error Reason: Student already has a lunch meal card for 2025-11-21. Activate student for reprint to allow generating a new card, or set force=true to allow duplicate.
2752695 WARN  2025-11-21 09:39:43494 ExternalApiUtil:302 - EXTERNAL API: Response Body: {"success":false,"meal_card":null,"eligible":true,"reason":"Student already has a lunch meal card for 2025-11-21. Activate student for reprint to allow generating a new card, or set force=true to allow duplicate.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
2752695 WARN  2025-11-21 09:39:43494 ExternalApiUtil:303 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2752702 INFO  2025-11-21 09:39:43501 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
2782028 INFO  2025-11-21 09:40:12827 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,6,0,296,10.244.175.186,10,35,12,5,11110,4,0,0
2782032 INFO  2025-11-21 09:40:12831 DownloadProcess:59 - get cmd list over and begin contact:0
2782033 INFO  2025-11-21 09:40:12832 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,6,0,296,10.244.175.186,10,35,12,5,11110,4,0,0
2811939 INFO  2025-11-21 09:40:42738 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
2811942 INFO  2025-11-21 09:40:42741 DownloadProcess:59 - get cmd list over and begin contact:0
2842738 INFO  2025-11-21 09:41:13537 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
2842741 INFO  2025-11-21 09:41:13540 DownloadProcess:59 - get cmd list over and begin contact:0
2860174 INFO  2025-11-21 09:41:30973 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
2860186 INFO  2025-11-21 09:41:30985 UploadProcess:266 - update device stamp end and get stream.
2860188 INFO  2025-11-21 09:41:30987 UploadProcess:323 - data:1002	2025-11-22 05:41:30	0	4	0	0	0	0	0	0	

2860189 INFO  2025-11-21 09:41:30988 UploadProcess:324 - end get stream and process data
2860190 INFO  2025-11-21 09:41:30989 UploadProcess:523 - begin parse op attlog
2860197 INFO  2025-11-21 09:41:30996 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
2860198 INFO  2025-11-21 09:41:30997 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
2860199 INFO  2025-11-21 09:41:30998 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 05:41:30
2860199 INFO  2025-11-21 09:41:30998 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
2860200 INFO  2025-11-21 09:41:30999 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2860201 INFO  2025-11-21 09:41:310 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
2860201 INFO  2025-11-21 09:41:310 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2860202 INFO  2025-11-21 09:41:311 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
2860204 INFO  2025-11-21 09:41:313 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 05:41:30
2860205 INFO  2025-11-21 09:41:314 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
2860205 INFO  2025-11-21 09:41:314 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2860206 INFO  2025-11-21 09:41:315 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
2860207 INFO  2025-11-21 09:41:316 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
2860207 INFO  2025-11-21 09:41:316 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 05:41:30
2860208 INFO  2025-11-21 09:41:317 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
2860207 INFO  2025-11-21 09:41:316 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
2860209 INFO  2025-11-21 09:41:318 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2860210 INFO  2025-11-21 09:41:319 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
2860211 INFO  2025-11-21 09:41:3110 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2860212 INFO  2025-11-21 09:41:3111 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
2860213 INFO  2025-11-21 09:41:3112 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
2860213 INFO  2025-11-21 09:41:3112 ExternalApiUtil:177 - EXTERNAL API: Method: POST
2860209 INFO  2025-11-21 09:41:318 UploadProcess:412 - attlog size:1
2860216 INFO  2025-11-21 09:41:3115 UploadProcess:525 - end parse op attlog
2860216 INFO  2025-11-21 09:41:3115 UploadProcess:327 - end process data and return msg to device
2860217 INFO  2025-11-21 09:41:3116 UploadProcess:331 - return msg to device and request over OK
2860214 INFO  2025-11-21 09:41:3113 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 12:41:31 EAT 2025
2860219 INFO  2025-11-21 09:41:3118 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
2860220 INFO  2025-11-21 09:41:3119 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
2860221 INFO  2025-11-21 09:41:3120 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
2860222 INFO  2025-11-21 09:41:3121 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 12:41 - Meal type determined: lunch
2860223 INFO  2025-11-21 09:41:3122 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
2860223 INFO  2025-11-21 09:41:3122 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
2860227 INFO  2025-11-21 09:41:3126 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
2860228 INFO  2025-11-21 09:41:3127 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2860229 INFO  2025-11-21 09:41:3128 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
2860230 INFO  2025-11-21 09:41:3129 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2860269 INFO  2025-11-21 09:41:3168 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2860270 INFO  2025-11-21 09:41:3169 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
2860270 INFO  2025-11-21 09:41:3169 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2860271 INFO  2025-11-21 09:41:3170 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
2860273 WARN  2025-11-21 09:41:3172 ExternalApiUtil:293 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2860274 WARN  2025-11-21 09:41:3173 ExternalApiUtil:294 - âš ï¸  EXTERNAL API CALL FAILED OR RETURNED ERROR
2860274 WARN  2025-11-21 09:41:3173 ExternalApiUtil:295 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2860275 WARN  2025-11-21 09:41:3174 ExternalApiUtil:296 - EXTERNAL API: Student ID: 1002 (original: 1002)
2860278 WARN  2025-11-21 09:41:3177 ExternalApiUtil:297 - EXTERNAL API: HTTP Status Code: 201 (OK)
2860278 WARN  2025-11-21 09:41:3177 ExternalApiUtil:298 - EXTERNAL API: API Response Success: false
2860279 WARN  2025-11-21 09:41:3178 ExternalApiUtil:300 - EXTERNAL API: Error Reason: Student already has a lunch meal card for 2025-11-21. Activate student for reprint to allow generating a new card, or set force=true to allow duplicate.
2860280 WARN  2025-11-21 09:41:3179 ExternalApiUtil:302 - EXTERNAL API: Response Body: {"success":false,"meal_card":null,"eligible":true,"reason":"Student already has a lunch meal card for 2025-11-21. Activate student for reprint to allow generating a new card, or set force=true to allow duplicate.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
2860281 WARN  2025-11-21 09:41:3180 ExternalApiUtil:303 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2860295 INFO  2025-11-21 09:41:3194 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
2872953 INFO  2025-11-21 09:41:43752 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,6,0,297,10.244.175.186,10,35,12,5,11110,4,0,0
2872959 INFO  2025-11-21 09:41:43758 DownloadProcess:59 - get cmd list over and begin contact:0
2872960 INFO  2025-11-21 09:41:43759 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,6,0,297,10.244.175.186,10,35,12,5,11110,4,0,0
2903726 INFO  2025-11-21 09:42:14525 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
2903728 INFO  2025-11-21 09:42:14527 DownloadProcess:59 - get cmd list over and begin contact:0
2921490 INFO  2025-11-21 09:42:32289 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
2921500 INFO  2025-11-21 09:42:32299 UploadProcess:266 - update device stamp end and get stream.
2921502 INFO  2025-11-21 09:42:32301 UploadProcess:323 - data:L1005M	2025-11-22 05:42:31	0	4	0	0	0	0	0	0	

2921502 INFO  2025-11-21 09:42:32301 UploadProcess:324 - end get stream and process data
2921503 INFO  2025-11-21 09:42:32302 UploadProcess:523 - begin parse op attlog
2921585 INFO  2025-11-21 09:42:32384 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
2921587 INFO  2025-11-21 09:42:32386 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
2921597 INFO  2025-11-21 09:42:32396 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: L1005M, User Name: Joseph, Timestamp: 2025-11-22 05:42:31
2921598 INFO  2025-11-21 09:42:32397 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: L1005M
2921599 INFO  2025-11-21 09:42:32398 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2921600 INFO  2025-11-21 09:42:32399 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
2921604 INFO  2025-11-21 09:42:32403 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2921605 INFO  2025-11-21 09:42:32404 ExternalApiUtil:123 - EXTERNAL API: User ID: L1005M
2921607 INFO  2025-11-21 09:42:32406 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 05:42:31
2921609 INFO  2025-11-21 09:42:32408 ExternalApiUtil:125 - EXTERNAL API: User Name: Joseph
2921610 INFO  2025-11-21 09:42:32409 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2921610 INFO  2025-11-21 09:42:32409 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: L1005M
2921612 INFO  2025-11-21 09:42:32411 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: L1005M
2921612 INFO  2025-11-21 09:42:32411 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: L1005M, Timestamp: 2025-11-22 05:42:31
2921612 INFO  2025-11-21 09:42:32411 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: L1005M
2921614 INFO  2025-11-21 09:42:32413 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2921617 INFO  2025-11-21 09:42:32416 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
2921618 INFO  2025-11-21 09:42:32417 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2921613 INFO  2025-11-21 09:42:32412 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
2921619 INFO  2025-11-21 09:42:32418 ExternalApiUtil:175 - EXTERNAL API: User ID: L1005M
2921620 INFO  2025-11-21 09:42:32419 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
2921620 INFO  2025-11-21 09:42:32419 UploadProcess:412 - attlog size:1
2921622 INFO  2025-11-21 09:42:32421 UploadProcess:525 - end parse op attlog
2921625 INFO  2025-11-21 09:42:32424 UploadProcess:327 - end process data and return msg to device
2921627 INFO  2025-11-21 09:42:32426 UploadProcess:331 - return msg to device and request over OK
2921622 INFO  2025-11-21 09:42:32421 ExternalApiUtil:177 - EXTERNAL API: Method: POST
2921628 INFO  2025-11-21 09:42:32427 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 12:42:32 EAT 2025
2921631 INFO  2025-11-21 09:42:32430 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
2921631 INFO  2025-11-21 09:42:32430 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
2921631 WARN  2025-11-21 09:42:32430 ExternalApiUtil:366 - User ID is not a number: L1005M, using as-is
2921632 INFO  2025-11-21 09:42:32431 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: L1005M, Formatted: L1005M
2921632 INFO  2025-11-21 09:42:32431 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 12:42 - Meal type determined: lunch
2921632 INFO  2025-11-21 09:42:32431 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "L1005M", "meal_type": "lunch"}
2921633 INFO  2025-11-21 09:42:32432 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
2921636 INFO  2025-11-21 09:42:32435 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
2921637 INFO  2025-11-21 09:42:32436 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2921638 INFO  2025-11-21 09:42:32437 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
2921639 INFO  2025-11-21 09:42:32438 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2921721 INFO  2025-11-21 09:42:32520 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2921722 INFO  2025-11-21 09:42:32521 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
2921723 INFO  2025-11-21 09:42:32522 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2921723 INFO  2025-11-21 09:42:32522 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
2921724 WARN  2025-11-21 09:42:32523 ExternalApiUtil:293 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2921725 WARN  2025-11-21 09:42:32524 ExternalApiUtil:294 - âš ï¸  EXTERNAL API CALL FAILED OR RETURNED ERROR
2921726 WARN  2025-11-21 09:42:32525 ExternalApiUtil:295 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2921726 WARN  2025-11-21 09:42:32525 ExternalApiUtil:296 - EXTERNAL API: Student ID: L1005M (original: L1005M)
2921727 WARN  2025-11-21 09:42:32526 ExternalApiUtil:297 - EXTERNAL API: HTTP Status Code: 201 (OK)
2921728 WARN  2025-11-21 09:42:32527 ExternalApiUtil:298 - EXTERNAL API: API Response Success: false
2921728 WARN  2025-11-21 09:42:32527 ExternalApiUtil:300 - EXTERNAL API: Error Reason: Student already has a lunch meal card for 2025-11-21. Activate student for reprint to allow generating a new card, or set force=true to allow duplicate.
2921729 WARN  2025-11-21 09:42:32528 ExternalApiUtil:302 - EXTERNAL API: Response Body: {"success":false,"meal_card":null,"eligible":true,"reason":"Student already has a lunch meal card for 2025-11-21. Activate student for reprint to allow generating a new card, or set force=true to allow duplicate.","student":{"student_id":"L1005M","name":"Joseph Bethwel","class_name":"2","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"79e2a8c1-3783-443f-8244-54efeb9931f3","face_registered":false,"face_image":null,"created_at":"2025-11-21T12:38:06.559157+03:00"}}
2921729 WARN  2025-11-21 09:42:32528 ExternalApiUtil:303 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2921739 INFO  2025-11-21 09:42:32538 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: FAILED, User: L1005M
2934812 INFO  2025-11-21 09:42:45611 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,6,0,298,10.244.175.186,10,35,12,5,11110,4,0,0
2934846 INFO  2025-11-21 09:42:45645 DownloadProcess:59 - get cmd list over and begin contact:0
2934850 INFO  2025-11-21 09:42:45649 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,6,0,298,10.244.175.186,10,35,12,5,11110,4,0,0
2937884 INFO  2025-11-21 09:42:48683 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
2937893 INFO  2025-11-21 09:42:48692 UploadProcess:266 - update device stamp end and get stream.
2937895 INFO  2025-11-21 09:42:48694 UploadProcess:323 - data:1002	2025-11-22 05:42:47	0	15	0	0	0	0	0	0	

2937896 INFO  2025-11-21 09:42:48695 UploadProcess:324 - end get stream and process data
2937896 INFO  2025-11-21 09:42:48695 UploadProcess:523 - begin parse op attlog
2937903 INFO  2025-11-21 09:42:48702 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
2937904 INFO  2025-11-21 09:42:48703 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
2937904 INFO  2025-11-21 09:42:48703 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 05:42:47
2937905 INFO  2025-11-21 09:42:48704 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
2937906 INFO  2025-11-21 09:42:48705 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2937907 INFO  2025-11-21 09:42:48706 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
2937909 INFO  2025-11-21 09:42:48708 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2937910 INFO  2025-11-21 09:42:48709 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
2937910 INFO  2025-11-21 09:42:48709 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 05:42:47
2937911 INFO  2025-11-21 09:42:48710 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
2937912 INFO  2025-11-21 09:42:48711 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2937913 INFO  2025-11-21 09:42:48712 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
2937914 INFO  2025-11-21 09:42:48713 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
2937915 INFO  2025-11-21 09:42:48714 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 05:42:47
2937916 INFO  2025-11-21 09:42:48715 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
2937916 INFO  2025-11-21 09:42:48715 UploadProcess:412 - attlog size:1
2937917 INFO  2025-11-21 09:42:48716 UploadProcess:525 - end parse op attlog
2937918 INFO  2025-11-21 09:42:48717 UploadProcess:327 - end process data and return msg to device
2937918 INFO  2025-11-21 09:42:48717 UploadProcess:331 - return msg to device and request over OK
2937915 INFO  2025-11-21 09:42:48714 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
2937919 INFO  2025-11-21 09:42:48718 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2937920 INFO  2025-11-21 09:42:48719 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
2937920 INFO  2025-11-21 09:42:48719 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2937921 INFO  2025-11-21 09:42:48720 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
2937921 INFO  2025-11-21 09:42:48720 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
2937921 INFO  2025-11-21 09:42:48720 ExternalApiUtil:177 - EXTERNAL API: Method: POST
2937922 INFO  2025-11-21 09:42:48721 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 12:42:48 EAT 2025
2937923 INFO  2025-11-21 09:42:48722 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
2937923 INFO  2025-11-21 09:42:48722 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
2937924 INFO  2025-11-21 09:42:48723 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
2937925 INFO  2025-11-21 09:42:48724 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 12:42 - Meal type determined: lunch
2937925 INFO  2025-11-21 09:42:48724 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
2937926 INFO  2025-11-21 09:42:48725 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
2937928 INFO  2025-11-21 09:42:48727 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
2937929 INFO  2025-11-21 09:42:48728 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2937929 INFO  2025-11-21 09:42:48728 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
2937929 INFO  2025-11-21 09:42:48728 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2938053 INFO  2025-11-21 09:42:48852 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2938054 INFO  2025-11-21 09:42:48853 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
2938054 INFO  2025-11-21 09:42:48853 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2938055 INFO  2025-11-21 09:42:48854 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
2938056 WARN  2025-11-21 09:42:48855 ExternalApiUtil:293 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2938058 WARN  2025-11-21 09:42:48857 ExternalApiUtil:294 - âš ï¸  EXTERNAL API CALL FAILED OR RETURNED ERROR
2938058 WARN  2025-11-21 09:42:48857 ExternalApiUtil:295 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2938060 WARN  2025-11-21 09:42:48859 ExternalApiUtil:296 - EXTERNAL API: Student ID: 1002 (original: 1002)
2938061 WARN  2025-11-21 09:42:48860 ExternalApiUtil:297 - EXTERNAL API: HTTP Status Code: 201 (OK)
2938061 WARN  2025-11-21 09:42:48860 ExternalApiUtil:298 - EXTERNAL API: API Response Success: false
2938062 WARN  2025-11-21 09:42:48861 ExternalApiUtil:300 - EXTERNAL API: Error Reason: Student already has a lunch meal card for 2025-11-21. Activate student for reprint to allow generating a new card, or set force=true to allow duplicate.
2938062 WARN  2025-11-21 09:42:48861 ExternalApiUtil:302 - EXTERNAL API: Response Body: {"success":false,"meal_card":null,"eligible":true,"reason":"Student already has a lunch meal card for 2025-11-21. Activate student for reprint to allow generating a new card, or set force=true to allow duplicate.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
2938063 WARN  2025-11-21 09:42:48862 ExternalApiUtil:303 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2938076 INFO  2025-11-21 09:42:48875 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
2964903 INFO  2025-11-21 09:43:15702 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,6,0,299,10.244.175.186,10,35,12,5,11110,4,0,0
2964909 INFO  2025-11-21 09:43:15708 DownloadProcess:59 - get cmd list over and begin contact:0
2964910 INFO  2025-11-21 09:43:15709 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,6,0,299,10.244.175.186,10,35,12,5,11110,4,0,0
2995131 INFO  2025-11-21 09:43:45930 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
2995133 INFO  2025-11-21 09:43:45932 DownloadProcess:59 - get cmd list over and begin contact:0
3025738 INFO  2025-11-21 09:44:16537 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3025740 INFO  2025-11-21 09:44:16539 DownloadProcess:59 - get cmd list over and begin contact:0
3046629 INFO  2025-11-21 09:44:37428 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
3046637 INFO  2025-11-21 09:44:37436 UploadProcess:266 - update device stamp end and get stream.
3046639 INFO  2025-11-21 09:44:37438 UploadProcess:323 - data:1002	2025-11-22 05:44:35	0	15	0	0	0	0	0	0	

3046639 INFO  2025-11-21 09:44:37438 UploadProcess:324 - end get stream and process data
3046640 INFO  2025-11-21 09:44:37439 UploadProcess:523 - begin parse op attlog
3046652 INFO  2025-11-21 09:44:37451 AttLogManager:120 - === EXTERNAL API: Attendance logs saved, starting external API calls ===
3046653 INFO  2025-11-21 09:44:37452 AttLogManager:121 - EXTERNAL API: Processing 1 verification(s)
3046654 INFO  2025-11-21 09:44:37453 AttLogManager:125 - EXTERNAL API: Processing verification - User PIN: 1002, User Name: kailikia AARON, Timestamp: 2025-11-22 05:44:35
3046655 INFO  2025-11-21 09:44:37454 AttLogManager:130 - EXTERNAL API: Calling notifyVerification for User ID: 1002
3046655 INFO  2025-11-21 09:44:37454 ExternalApiUtil:120 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3046656 INFO  2025-11-21 09:44:37455 ExternalApiUtil:121 - ğŸ”” EXTERNAL API CALL REQUESTED - notifyVerification()
3046657 INFO  2025-11-21 09:44:37456 ExternalApiUtil:122 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3046657 INFO  2025-11-21 09:44:37456 ExternalApiUtil:123 - EXTERNAL API: User ID: 1002
3046658 INFO  2025-11-21 09:44:37457 ExternalApiUtil:124 - EXTERNAL API: Verification Time: 2025-11-22 05:44:35
3046659 INFO  2025-11-21 09:44:37458 ExternalApiUtil:125 - EXTERNAL API: User Name: kailikia AARON
3046660 INFO  2025-11-21 09:44:37459 ExternalApiUtil:126 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3046660 INFO  2025-11-21 09:44:37459 ExternalApiUtil:133 - âœ… EXTERNAL API: Submitting async task for userId: 1002
3046661 INFO  2025-11-21 09:44:37460 ExternalApiUtil:144 - EXTERNAL API: Async task submitted for userId: 1002
3046662 INFO  2025-11-21 09:44:37461 AttLogManager:133 - EXTERNAL API: notifyVerification called for User ID: 1002, Timestamp: 2025-11-22 05:44:35
3046662 INFO  2025-11-21 09:44:37461 AttLogManager:140 - === EXTERNAL API: Finished processing all verifications ===
3046663 INFO  2025-11-21 09:44:37462 UploadProcess:412 - attlog size:1
3046663 INFO  2025-11-21 09:44:37462 UploadProcess:525 - end parse op attlog
3046663 INFO  2025-11-21 09:44:37462 UploadProcess:327 - end process data and return msg to device
3046664 INFO  2025-11-21 09:44:37463 UploadProcess:331 - return msg to device and request over OK
3046662 INFO  2025-11-21 09:44:37461 ExternalApiUtil:139 - EXTERNAL API: Async task started for userId: 1002
3046666 INFO  2025-11-21 09:44:37465 ExternalApiUtil:172 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3046666 INFO  2025-11-21 09:44:37465 ExternalApiUtil:173 - ğŸš€ EXTERNAL API CALL INITIATED
3046666 INFO  2025-11-21 09:44:37465 ExternalApiUtil:174 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3046667 INFO  2025-11-21 09:44:37466 ExternalApiUtil:175 - EXTERNAL API: User ID: 1002
3046668 INFO  2025-11-21 09:44:37467 ExternalApiUtil:176 - EXTERNAL API: URL: http://host.docker.internal:8002/api/meal-cards/generate-with-check
3046669 INFO  2025-11-21 09:44:37468 ExternalApiUtil:177 - EXTERNAL API: Method: POST
3046669 INFO  2025-11-21 09:44:37468 ExternalApiUtil:178 - EXTERNAL API: Timestamp (Nairobi/EAT): Fri Nov 21 12:44:37 EAT 2025
3046670 INFO  2025-11-21 09:44:37469 ExternalApiUtil:182 - EXTERNAL API: Creating connection to: http://host.docker.internal:8002/api/meal-cards/generate-with-check
3046670 INFO  2025-11-21 09:44:37469 ExternalApiUtil:191 - EXTERNAL API: Connection configured, formatting student ID...
3046671 INFO  2025-11-21 09:44:37470 ExternalApiUtil:195 - EXTERNAL API: Student ID formatted - Original: 1002, Formatted: 1002
3046672 INFO  2025-11-21 09:44:37471 ExternalApiUtil:202 - EXTERNAL API: Current time (Nairobi/EAT): 12:44 - Meal type determined: lunch
3046672 INFO  2025-11-21 09:44:37471 ExternalApiUtil:206 - EXTERNAL API: Request body: {"student_id": "1002", "meal_type": "lunch"}
3046673 INFO  2025-11-21 09:44:37472 ExternalApiUtil:209 - EXTERNAL API: Writing request body to connection...
3046676 INFO  2025-11-21 09:44:37475 ExternalApiUtil:214 - EXTERNAL API: Request body written, making HTTP POST request...
3046676 INFO  2025-11-21 09:44:37475 ExternalApiUtil:215 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3046677 INFO  2025-11-21 09:44:37476 ExternalApiUtil:216 - ğŸ“¡ EXTERNAL API: SENDING HTTP REQUEST NOW
3046678 INFO  2025-11-21 09:44:37477 ExternalApiUtil:217 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3048051 INFO  2025-11-21 09:44:38850 ExternalApiUtil:220 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3048052 INFO  2025-11-21 09:44:38851 ExternalApiUtil:221 - ğŸ“¥ EXTERNAL API: HTTP RESPONSE RECEIVED
3048052 INFO  2025-11-21 09:44:38851 ExternalApiUtil:222 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3048055 INFO  2025-11-21 09:44:38854 ExternalApiUtil:223 - EXTERNAL API: Response code received: 201
3048057 WARN  2025-11-21 09:44:38856 ExternalApiUtil:293 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3048058 WARN  2025-11-21 09:44:38857 ExternalApiUtil:294 - âš ï¸  EXTERNAL API CALL FAILED OR RETURNED ERROR
3048058 WARN  2025-11-21 09:44:38857 ExternalApiUtil:295 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3048059 WARN  2025-11-21 09:44:38858 ExternalApiUtil:296 - EXTERNAL API: Student ID: 1002 (original: 1002)
3048060 WARN  2025-11-21 09:44:38859 ExternalApiUtil:297 - EXTERNAL API: HTTP Status Code: 201 (OK)
3048062 WARN  2025-11-21 09:44:38861 ExternalApiUtil:298 - EXTERNAL API: API Response Success: false
3048063 WARN  2025-11-21 09:44:38862 ExternalApiUtil:300 - EXTERNAL API: Error Reason: Student already has a lunch meal card for 2025-11-21. Activate student for reprint to allow generating a new card, or set force=true to allow duplicate.
3048064 WARN  2025-11-21 09:44:38863 ExternalApiUtil:302 - EXTERNAL API: Response Body: {"success":false,"meal_card":null,"eligible":true,"reason":"Student already has a lunch meal card for 2025-11-21. Activate student for reprint to allow generating a new card, or set force=true to allow duplicate.","student":{"student_id":"1002","name":"Aaron Kailikia","class_name":"1","fee_balance":0.0,"payment_status":"paid","reprint_activated":false,"id":"6bff9311-512b-4001-b51d-e32c3fa78445","face_registered":false,"face_image":"/api/uploads/students/1002.png","created_at":"2025-11-17T10:37:59.437204+03:00"}}
3048065 WARN  2025-11-21 09:44:38864 ExternalApiUtil:303 - â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3048073 INFO  2025-11-21 09:44:38872 ExternalApiUtil:381 - EXTERNAL API: Report saved to database - Status: FAILED, User: 1002
3056247 INFO  2025-11-21 09:44:4746 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333&INFO=ZMM510-NF24VB-Ver1.3.13,6,0,300,10.244.175.186,10,35,12,5,11110,4,0,0
3056252 INFO  2025-11-21 09:44:4751 DownloadProcess:59 - get cmd list over and begin contact:0
3056253 INFO  2025-11-21 09:44:4752 DownloadProcess:94 - INFO:ZMM510-NF24VB-Ver1.3.13,6,0,300,10.244.175.186,10,35,12,5,11110,4,0,0
3087804 INFO  2025-11-21 09:45:18603 DownloadProcess:55 - get request and begin get cmd list.192.168.65.1;http://10.244.175.98:8080/iclock/getrequest?SN=TDBD250100333
3087806 INFO  2025-11-21 09:45:18605 DownloadProcess:59 - get cmd list over and begin contact:0
3098988 INFO  2025-11-21 09:45:29787 UploadProcess:255 - device language:69,get request and begin update device stamp:192.168.65.1;http://10.244.175.98:8080/iclock/cdata?SN=TDBD250100333&table=ATTLOG&Stamp=9999
3098997 INFO  2025-11-21 09:45:29796 UploadProcess:266 - update device stamp end and get stream.
3098999 INFO  2025-11-21 09:45:29798 UploadProcess:323 - data:L1005M	2025-11-22 05:45:28	0	4	0	0	0	0	0	0	

3099000 INFO  2025-11-21 09:45:29799 UploadProcess:324 - end get stream and process data
